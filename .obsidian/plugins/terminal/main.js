/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
"use strict";var ea=Object.create;var Gt=Object.defineProperty;var ta=Object.getOwnPropertyDescriptor;var ra=Object.getOwnPropertyNames;var ia=Object.getPrototypeOf,sa=Object.prototype.hasOwnProperty;var na=(t,s,n)=>s in t?Gt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var se=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports),X=(t,s)=>{for(var n in s)Gt(t,n,{get:s[n],enumerable:!0})},Os=(t,s,n,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of ra(s))!sa.call(t,o)&&o!==n&&Gt(t,o,{get:()=>s[o],enumerable:!(c=ta(s,o))||c.enumerable});return t};var Yt=(t,s,n)=>(n=t!=null?ea(ia(t)):{},Os(s||!t||!t.__esModule?Gt(n,"default",{value:t,enumerable:!0}):n,t)),oa=t=>Os(Gt({},"__esModule",{value:!0}),t);var ce=(t,s,n)=>(na(t,typeof s!="symbol"?s+"":s,n),n),ei=(t,s,n)=>{if(!s.has(t))throw TypeError("Cannot "+n)};var V=(t,s,n)=>(ei(t,s,"read from private field"),n?n.call(t):s.get(t)),J=(t,s,n)=>{if(s.has(t))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(t):s.set(t,n)},Se=(t,s,n,c)=>(ei(t,s,"write to private field"),c?c.call(t,n):s.set(t,n),n);var K=(t,s,n)=>(ei(t,s,"access private method"),n);var qs=se(Ri=>{var xt=require("path"),dt=process.platform==="win32",ut=require("fs"),fu=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function pu(){var t;if(fu){var s=new Error;t=n}else t=c;return t;function n(o){o&&(s.message=o.message,o=s,c(o))}function c(o){if(o){if(process.throwDeprecation)throw o;if(!process.noDeprecation){var e="fs: missing callback "+(o.stack||o.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}function _u(t){return typeof t=="function"?t:pu()}var yf=xt.normalize;dt?Ie=/(.*?)(?:[\/\\]+|$)/g:Ie=/(.*?)(?:[\/]+|$)/g;var Ie;dt?Qt=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Qt=/^[\/]*/;var Qt;Ri.realpathSync=function(s,n){if(s=xt.resolve(s),n&&Object.prototype.hasOwnProperty.call(n,s))return n[s];var c=s,o={},e={},i,a,u,f;l();function l(){var _=Qt.exec(s);i=_[0].length,a=_[0],u=_[0],f="",dt&&!e[u]&&(ut.lstatSync(u),e[u]=!0)}for(;i<s.length;){Ie.lastIndex=i;var g=Ie.exec(s);if(f=a,a+=g[0],u=f+g[1],i=Ie.lastIndex,!(e[u]||n&&n[u]===u)){var v;if(n&&Object.prototype.hasOwnProperty.call(n,u))v=n[u];else{var p=ut.lstatSync(u);if(!p.isSymbolicLink()){e[u]=!0,n&&(n[u]=u);continue}var r=null;if(!dt){var d=p.dev.toString(32)+":"+p.ino.toString(32);o.hasOwnProperty(d)&&(r=o[d])}r===null&&(ut.statSync(u),r=ut.readlinkSync(u)),v=xt.resolve(f,r),n&&(n[u]=v),dt||(o[d]=r)}s=xt.resolve(v,s.slice(i)),l()}}return n&&(n[c]=s),s};Ri.realpath=function(s,n,c){if(typeof c!="function"&&(c=_u(n),n=null),s=xt.resolve(s),n&&Object.prototype.hasOwnProperty.call(n,s))return process.nextTick(c.bind(null,null,n[s]));var o=s,e={},i={},a,u,f,l;g();function g(){var _=Qt.exec(s);a=_[0].length,u=_[0],f=_[0],l="",dt&&!i[f]?ut.lstat(f,function(h){if(h)return c(h);i[f]=!0,v()}):process.nextTick(v)}function v(){if(a>=s.length)return n&&(n[o]=s),c(null,s);Ie.lastIndex=a;var _=Ie.exec(s);return l=u,u+=_[0],f=l+_[1],a=Ie.lastIndex,i[f]||n&&n[f]===f?process.nextTick(v):n&&Object.prototype.hasOwnProperty.call(n,f)?d(n[f]):ut.lstat(f,p)}function p(_,h){if(_)return c(_);if(!h.isSymbolicLink())return i[f]=!0,n&&(n[f]=f),process.nextTick(v);if(!dt){var m=h.dev.toString(32)+":"+h.ino.toString(32);if(e.hasOwnProperty(m))return r(null,e[m],f)}ut.stat(f,function(b){if(b)return c(b);ut.readlink(f,function(S,C){dt||(e[m]=C),r(S,C)})})}function r(_,h,m){if(_)return c(_);var b=xt.resolve(l,h);n&&(n[m]=b),d(b)}function d(_){s=xt.resolve(_,s.slice(a)),g()}}});var Di=se((Sf,Ys)=>{Ys.exports=ft;ft.realpath=ft;ft.sync=Ai;ft.realpathSync=Ai;ft.monkeypatch=mu;ft.unmonkeypatch=vu;var Pt=require("fs"),Ti=Pt.realpath,Oi=Pt.realpathSync,gu=process.version,Ks=/^v[0-5]\./.test(gu),Vs=qs();function Gs(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function ft(t,s,n){if(Ks)return Ti(t,s,n);typeof s=="function"&&(n=s,s=null),Ti(t,s,function(c,o){Gs(c)?Vs.realpath(t,s,n):n(c,o)})}function Ai(t,s){if(Ks)return Oi(t,s);try{return Oi(t,s)}catch(n){if(Gs(n))return Vs.realpathSync(t,s);throw n}}function mu(){Pt.realpath=ft,Pt.realpathSync=Ai}function vu(){Pt.realpath=Ti,Pt.realpathSync=Oi}});var Js=se((wf,Xs)=>{Xs.exports=function(t,s){for(var n=[],c=0;c<t.length;c++){var o=s(t[c],c);yu(o)?n.push.apply(n,o):n.push(o)}return n};var yu=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var rn=se((Cf,tn)=>{"use strict";tn.exports=Qs;function Qs(t,s,n){t instanceof RegExp&&(t=Zs(t,n)),s instanceof RegExp&&(s=Zs(s,n));var c=en(t,s,n);return c&&{start:c[0],end:c[1],pre:n.slice(0,c[0]),body:n.slice(c[0]+t.length,c[1]),post:n.slice(c[1]+s.length)}}function Zs(t,s){var n=s.match(t);return n?n[0]:null}Qs.range=en;function en(t,s,n){var c,o,e,i,a,u=n.indexOf(t),f=n.indexOf(s,u+1),l=u;if(u>=0&&f>0){if(t===s)return[u,f];for(c=[],e=n.length;l>=0&&!a;)l==u?(c.push(l),u=n.indexOf(t,l+1)):c.length==1?a=[c.pop(),f]:(o=c.pop(),o<e&&(e=o,i=f),f=n.indexOf(s,l+1)),l=u<f&&u>=0?u:f;c.length&&(a=[e,i])}return a}});var un=se((xf,hn)=>{var bu=Js(),sn=rn();hn.exports=Cu;var nn="\0SLASH"+Math.random()+"\0",on="\0OPEN"+Math.random()+"\0",Mi="\0CLOSE"+Math.random()+"\0",an="\0COMMA"+Math.random()+"\0",ln="\0PERIOD"+Math.random()+"\0";function Pi(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function Su(t){return t.split("\\\\").join(nn).split("\\{").join(on).split("\\}").join(Mi).split("\\,").join(an).split("\\.").join(ln)}function wu(t){return t.split(nn).join("\\").split(on).join("{").split(Mi).join("}").split(an).join(",").split(ln).join(".")}function cn(t){if(!t)return[""];var s=[],n=sn("{","}",t);if(!n)return t.split(",");var c=n.pre,o=n.body,e=n.post,i=c.split(",");i[i.length-1]+="{"+o+"}";var a=cn(e);return e.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),s.push.apply(s,i),s}function Cu(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Mt(Su(t),!0).map(wu)):[]}function xu(t){return"{"+t+"}"}function Eu(t){return/^-?0\d/.test(t)}function ku(t,s){return t<=s}function Lu(t,s){return t>=s}function Mt(t,s){var n=[],c=sn("{","}",t);if(!c||/\$$/.test(c.pre))return[t];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(c.body),e=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(c.body),i=o||e,a=c.body.indexOf(",")>=0;if(!i&&!a)return c.post.match(/,.*\}/)?(t=c.pre+"{"+c.body+Mi+c.post,Mt(t)):[t];var u;if(i)u=c.body.split(/\.\./);else if(u=cn(c.body),u.length===1&&(u=Mt(u[0],!1).map(xu),u.length===1)){var l=c.post.length?Mt(c.post,!1):[""];return l.map(function(T){return c.pre+u[0]+T})}var f=c.pre,l=c.post.length?Mt(c.post,!1):[""],g;if(i){var v=Pi(u[0]),p=Pi(u[1]),r=Math.max(u[0].length,u[1].length),d=u.length==3?Math.abs(Pi(u[2])):1,_=ku,h=p<v;h&&(d*=-1,_=Lu);var m=u.some(Eu);g=[];for(var b=v;_(b,p);b+=d){var S;if(e)S=String.fromCharCode(b),S==="\\"&&(S="");else if(S=String(b),m){var C=r-S.length;if(C>0){var y=new Array(C+1).join("0");b<0?S="-"+y+S.slice(1):S=y+S}}g.push(S)}}else g=bu(u,function(R){return Mt(R,!1)});for(var w=0;w<g.length;w++)for(var E=0;E<l.length;E++){var k=f+g[w]+l[E];(!s||i||k)&&n.push(k)}return n}});var Er=se((Ef,gn)=>{gn.exports=me;me.Minimatch=he;var er=function(){try{return require("path")}catch(t){}}()||{sep:"/"};me.sep=er.sep;var Ni=me.GLOBSTAR=he.GLOBSTAR={},Ru=un(),dn={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Bi="[^/]",Ii=Bi+"*?",Tu="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ou="(?:(?!(?:\\/|^)\\.).)*?",fn=Au("().*{}+?[]^$\\!");function Au(t){return t.split("").reduce(function(s,n){return s[n]=!0,s},{})}var pn=/\/+/;me.filter=Du;function Du(t,s){return s=s||{},function(n,c,o){return me(n,t,s)}}function pt(t,s){s=s||{};var n={};return Object.keys(t).forEach(function(c){n[c]=t[c]}),Object.keys(s).forEach(function(c){n[c]=s[c]}),n}me.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return me;var s=me,n=function(o,e,i){return s(o,e,pt(t,i))};return n.Minimatch=function(o,e){return new s.Minimatch(o,pt(t,e))},n.Minimatch.defaults=function(o){return s.defaults(pt(t,o)).Minimatch},n.filter=function(o,e){return s.filter(o,pt(t,e))},n.defaults=function(o){return s.defaults(pt(t,o))},n.makeRe=function(o,e){return s.makeRe(o,pt(t,e))},n.braceExpand=function(o,e){return s.braceExpand(o,pt(t,e))},n.match=function(c,o,e){return s.match(c,o,pt(t,e))},n};he.defaults=function(t){return me.defaults(t).Minimatch};function me(t,s,n){return xr(s),n||(n={}),!n.nocomment&&s.charAt(0)==="#"?!1:new he(s,n).match(t)}function he(t,s){if(!(this instanceof he))return new he(t,s);xr(t),s||(s={}),t=t.trim(),!s.allowWindowsEscape&&er.sep!=="/"&&(t=t.split(er.sep).join("/")),this.options=s,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!s.partial,this.make()}he.prototype.debug=function(){};he.prototype.make=Pu;function Pu(){var t=this.pattern,s=this.options;if(!s.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();s.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(c){return c.split(pn)}),this.debug(this.pattern,n),n=n.map(function(c,o,e){return c.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(c){return c.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}he.prototype.parseNegate=Mu;function Mu(){var t=this.pattern,s=!1,n=this.options,c=0;if(!n.nonegate){for(var o=0,e=t.length;o<e&&t.charAt(o)==="!";o++)s=!s,c++;c&&(this.pattern=t.substr(c)),this.negate=s}}me.braceExpand=function(t,s){return _n(t,s)};he.prototype.braceExpand=_n;function _n(t,s){return s||(this instanceof he?s=this.options:s={}),t=typeof t=="undefined"?this.pattern:t,xr(t),s.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:Ru(t)}var Bu=1024*64,xr=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Bu)throw new TypeError("pattern is too long")};he.prototype.parse=Iu;var Cr={};function Iu(t,s){xr(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return Ni;if(t==="")return"";var c="",o=!!n.nocase,e=!1,i=[],a=[],u,f=!1,l=-1,g=-1,v=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function r(){if(u){switch(u){case"*":c+=Ii,o=!0;break;case"?":c+=Bi,o=!0;break;default:c+="\\"+u;break}p.debug("clearStateChar %j %j",u,c),u=!1}}for(var d=0,_=t.length,h;d<_&&(h=t.charAt(d));d++){if(this.debug("%s	%s %s %j",t,d,c,h),e&&fn[h]){c+="\\"+h,e=!1;continue}switch(h){case"/":return!1;case"\\":r(),e=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,d,c,h),f){this.debug("  in class"),h==="!"&&d===g+1&&(h="^"),c+=h;continue}p.debug("call clearStateChar %j",u),r(),u=h,n.noext&&r();continue;case"(":if(f){c+="(";continue}if(!u){c+="\\(";continue}i.push({type:u,start:d-1,reStart:c.length,open:dn[u].open,close:dn[u].close}),c+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,c),u=!1;continue;case")":if(f||!i.length){c+="\\)";continue}r(),o=!0;var m=i.pop();c+=m.close,m.type==="!"&&a.push(m),m.reEnd=c.length;continue;case"|":if(f||!i.length||e){c+="\\|",e=!1;continue}r(),c+="|";continue;case"[":if(r(),f){c+="\\"+h;continue}f=!0,g=d,l=c.length,c+=h;continue;case"]":if(d===g+1||!f){c+="\\"+h,e=!1;continue}var b=t.substring(g+1,d);try{RegExp("["+b+"]")}catch(z){var S=this.parse(b,Cr);c=c.substr(0,l)+"\\["+S[0]+"\\]",o=o||S[1],f=!1;continue}o=!0,f=!1,c+=h;continue;default:r(),e?e=!1:fn[h]&&!(h==="^"&&f)&&(c+="\\"),c+=h}}for(f&&(b=t.substr(g+1),S=this.parse(b,Cr),c=c.substr(0,l)+"\\["+S[0],o=o||S[1]),m=i.pop();m;m=i.pop()){var C=c.slice(m.reStart+m.open.length);this.debug("setting tail",c,m),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(z,q,W){return W||(W="\\"),q+q+W+"|"}),this.debug(`tail=%j
   %s`,C,C,m,c);var y=m.type==="*"?Ii:m.type==="?"?Bi:"\\"+m.type;o=!0,c=c.slice(0,m.reStart)+y+"\\("+C}r(),e&&(c+="\\\\");var w=!1;switch(c.charAt(0)){case"[":case".":case"(":w=!0}for(var E=a.length-1;E>-1;E--){var k=a[E],R=c.slice(0,k.reStart),T=c.slice(k.reStart,k.reEnd-8),B=c.slice(k.reEnd-8,k.reEnd),H=c.slice(k.reEnd);B+=H;var F=R.split("(").length-1,x=H;for(d=0;d<F;d++)x=x.replace(/\)[+*?]?/,"");H=x;var L="";H===""&&s!==Cr&&(L="$");var O=R+T+H+L+B;c=O}if(c!==""&&o&&(c="(?=.)"+c),w&&(c=v+c),s===Cr)return[c,o];if(!o)return Hu(t);var P=n.nocase?"i":"";try{var N=new RegExp("^"+c+"$",P)}catch(z){return new RegExp("$.")}return N._glob=t,N._src=c,N}me.makeRe=function(t,s){return new he(t,s||{}).makeRe()};he.prototype.makeRe=Nu;function Nu(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var s=this.options,n=s.noglobstar?Ii:s.dot?Tu:Ou,c=s.nocase?"i":"",o=t.map(function(e){return e.map(function(i){return i===Ni?n:typeof i=="string"?Fu(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,c)}catch(e){this.regexp=!1}return this.regexp}me.match=function(t,s,n){n=n||{};var c=new he(s,n);return t=t.filter(function(o){return c.match(o)}),c.options.nonull&&!t.length&&t.push(s),t};he.prototype.match=function(s,n){if(typeof n=="undefined"&&(n=this.partial),this.debug("match",s,this.pattern),this.comment)return!1;if(this.empty)return s==="";if(s==="/"&&n)return!0;var c=this.options;er.sep!=="/"&&(s=s.split(er.sep).join("/")),s=s.split(pn),this.debug(this.pattern,"split",s);var o=this.set;this.debug(this.pattern,"set",o);var e,i;for(i=s.length-1;i>=0&&(e=s[i],!e);i--);for(i=0;i<o.length;i++){var a=o[i],u=s;c.matchBase&&a.length===1&&(u=[e]);var f=this.matchOne(u,a,n);if(f)return c.flipNegate?!0:!this.negate}return c.flipNegate?!1:this.negate};he.prototype.matchOne=function(t,s,n){var c=this.options;this.debug("matchOne",{this:this,file:t,pattern:s}),this.debug("matchOne",t.length,s.length);for(var o=0,e=0,i=t.length,a=s.length;o<i&&e<a;o++,e++){this.debug("matchOne loop");var u=s[e],f=t[o];if(this.debug(s,u,f),u===!1)return!1;if(u===Ni){this.debug("GLOBSTAR",[s,u,f]);var l=o,g=e+1;if(g===a){for(this.debug("** at the end");o<i;o++)if(t[o]==="."||t[o]===".."||!c.dot&&t[o].charAt(0)===".")return!1;return!0}for(;l<i;){var v=t[l];if(this.debug(`
globstar while`,t,l,s,g,v),this.matchOne(t.slice(l),s.slice(g),n))return this.debug("globstar found match!",l,i,v),!0;if(v==="."||v===".."||!c.dot&&v.charAt(0)==="."){this.debug("dot detected!",t,l,s,g);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,l,s,g),l===i))}var p;if(typeof u=="string"?(p=f===u,this.debug("string match",u,f,p)):(p=f.match(u),this.debug("pattern match",u,f,p)),!p)return!1}if(o===i&&e===a)return!0;if(o===i)return n;if(e===a)return o===i-1&&t[o]==="";throw new Error("wtf?")};function Hu(t){return t.replace(/\\(.)/g,"$1")}function Fu(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var mn=se((kf,Hi)=>{typeof Object.create=="function"?Hi.exports=function(s,n){n&&(s.super_=n,s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:Hi.exports=function(s,n){if(n){s.super_=n;var c=function(){};c.prototype=n.prototype,s.prototype=new c,s.prototype.constructor=s}}});var Lr=se((Lf,kr)=>{"use strict";function vn(t){return t.charAt(0)==="/"}function yn(t){var s=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,n=s.exec(t),c=n[1]||"",o=Boolean(c&&c.charAt(1)!==":");return Boolean(n[2]||o)}kr.exports=process.platform==="win32"?yn:vn;kr.exports.posix=vn;kr.exports.win32=yn});var Wi=se(_t=>{_t.setopts=qu;_t.ownProp=bn;_t.makeAbs=tr;_t.finish=Ku;_t.mark=Vu;_t.isIgnored=wn;_t.childrenIgnored=Gu;function bn(t,s){return Object.prototype.hasOwnProperty.call(t,s)}var Wu=require("fs"),Bt=require("path"),Uu=Er(),Sn=Lr(),Fi=Uu.Minimatch;function zu(t,s){return t.localeCompare(s,"en")}function ju(t,s){t.ignore=s.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map($u))}function $u(t){var s=null;if(t.slice(-3)==="/**"){var n=t.replace(/(\/\*\*)+$/,"");s=new Fi(n,{dot:!0})}return{matcher:new Fi(t,{dot:!0}),gmatcher:s}}function qu(t,s,n){if(n||(n={}),n.matchBase&&s.indexOf("/")===-1){if(n.noglobstar)throw new Error("base matching requires globstar");s="**/"+s}t.silent=!!n.silent,t.pattern=s,t.strict=n.strict!==!1,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.fs=n.fs||Wu,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),ju(t,n),t.changedCwd=!1;var c=process.cwd();bn(n,"cwd")?(t.cwd=Bt.resolve(n.cwd),t.changedCwd=t.cwd!==c):t.cwd=c,t.root=n.root||Bt.resolve(t.cwd,"/"),t.root=Bt.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=Sn(t.cwd)?t.cwd:tr(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,n.allowWindowsEscape=!1,t.minimatch=new Fi(s,n),t.options=t.minimatch.options}function Ku(t){for(var s=t.nounique,n=s?[]:Object.create(null),c=0,o=t.matches.length;c<o;c++){var e=t.matches[c];if(!e||Object.keys(e).length===0){if(t.nonull){var i=t.minimatch.globSet[c];s?n.push(i):n[i]=!0}}else{var a=Object.keys(e);s?n.push.apply(n,a):a.forEach(function(u){n[u]=!0})}}if(s||(n=Object.keys(n)),t.nosort||(n=n.sort(zu)),t.mark){for(var c=0;c<n.length;c++)n[c]=t._mark(n[c]);t.nodir&&(n=n.filter(function(u){var f=!/\/$/.test(u),l=t.cache[u]||t.cache[tr(t,u)];return f&&l&&(f=l!=="DIR"&&!Array.isArray(l)),f}))}t.ignore.length&&(n=n.filter(function(u){return!wn(t,u)})),t.found=n}function Vu(t,s){var n=tr(t,s),c=t.cache[n],o=s;if(c){var e=c==="DIR"||Array.isArray(c),i=s.slice(-1)==="/";if(e&&!i?o+="/":!e&&i&&(o=o.slice(0,-1)),o!==s){var a=tr(t,o);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return o}function tr(t,s){var n=s;return s.charAt(0)==="/"?n=Bt.join(t.root,s):Sn(s)||s===""?n=s:t.changedCwd?n=Bt.resolve(t.cwd,s):n=Bt.resolve(s),process.platform==="win32"&&(n=n.replace(/\\/g,"/")),n}function wn(t,s){return t.ignore.length?t.ignore.some(function(n){return n.matcher.match(s)||!!(n.gmatcher&&n.gmatcher.match(s))}):!1}function Gu(t,s){return t.ignore.length?t.ignore.some(function(n){return!!(n.gmatcher&&n.gmatcher.match(s))}):!1}});var Ln=se((Df,kn)=>{kn.exports=En;En.GlobSync=oe;var Yu=Di(),Cn=Er(),Tf=Cn.Minimatch,Of=ji().Glob,Af=require("util"),Ui=require("path"),xn=require("assert"),Rr=Lr(),Et=Wi(),Xu=Et.setopts,zi=Et.ownProp,Ju=Et.childrenIgnored,Zu=Et.isIgnored;function En(t,s){if(typeof s=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new oe(t,s).found}function oe(t,s){if(!t)throw new Error("must provide pattern");if(typeof s=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof oe))return new oe(t,s);if(Xu(this,t,s),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var c=0;c<n;c++)this._process(this.minimatch.set[c],c,!1);this._finish()}oe.prototype._finish=function(){if(xn.ok(this instanceof oe),this.realpath){var t=this;this.matches.forEach(function(s,n){var c=t.matches[n]=Object.create(null);for(var o in s)try{o=t._makeAbs(o);var e=Yu.realpathSync(o,t.realpathCache);c[e]=!0}catch(i){if(i.syscall==="stat")c[t._makeAbs(o)]=!0;else throw i}})}Et.finish(this)};oe.prototype._process=function(t,s,n){xn.ok(this instanceof oe);for(var c=0;typeof t[c]=="string";)c++;var o;switch(c){case t.length:this._processSimple(t.join("/"),s);return;case 0:o=null;break;default:o=t.slice(0,c).join("/");break}var e=t.slice(c),i;o===null?i=".":((Rr(o)||Rr(t.map(function(f){return typeof f=="string"?f:"[*]"}).join("/")))&&(!o||!Rr(o))&&(o="/"+o),i=o);var a=this._makeAbs(i);if(!Ju(this,i)){var u=e[0]===Cn.GLOBSTAR;u?this._processGlobStar(o,i,a,e,s,n):this._processReaddir(o,i,a,e,s,n)}};oe.prototype._processReaddir=function(t,s,n,c,o,e){var i=this._readdir(n,e);if(i){for(var a=c[0],u=!!this.minimatch.negate,f=a._glob,l=this.dot||f.charAt(0)===".",g=[],v=0;v<i.length;v++){var p=i[v];if(p.charAt(0)!=="."||l){var r;u&&!t?r=!p.match(a):r=p.match(a),r&&g.push(p)}}var d=g.length;if(d!==0){if(c.length===1&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(var v=0;v<d;v++){var p=g[v];t&&(t.slice(-1)!=="/"?p=t+"/"+p:p=t+p),p.charAt(0)==="/"&&!this.nomount&&(p=Ui.join(this.root,p)),this._emitMatch(o,p)}return}c.shift();for(var v=0;v<d;v++){var p=g[v],_;t?_=[t,p]:_=[p],this._process(_.concat(c),o,e)}}}};oe.prototype._emitMatch=function(t,s){if(!Zu(this,s)){var n=this._makeAbs(s);if(this.mark&&(s=this._mark(s)),this.absolute&&(s=n),!this.matches[t][s]){if(this.nodir){var c=this.cache[n];if(c==="DIR"||Array.isArray(c))return}this.matches[t][s]=!0,this.stat&&this._stat(s)}}};oe.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var s,n,c;try{n=this.fs.lstatSync(t)}catch(e){if(e.code==="ENOENT")return null}var o=n&&n.isSymbolicLink();return this.symlinks[t]=o,!o&&n&&!n.isDirectory()?this.cache[t]="FILE":s=this._readdir(t,!1),s};oe.prototype._readdir=function(t,s){var n;if(s&&!zi(this.symlinks,t))return this._readdirInGlobStar(t);if(zi(this.cache,t)){var c=this.cache[t];if(!c||c==="FILE")return null;if(Array.isArray(c))return c}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(o){return this._readdirError(t,o),null}};oe.prototype._readdirEntries=function(t,s){if(!this.mark&&!this.stat)for(var n=0;n<s.length;n++){var c=s[n];t==="/"?c=t+c:c=t+"/"+c,this.cache[c]=!0}return this.cache[t]=s,s};oe.prototype._readdirError=function(t,s){switch(s.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var c=new Error(s.code+" invalid cwd "+this.cwd);throw c.path=this.cwd,c.code=s.code,c}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw s;this.silent||console.error("glob error",s);break}};oe.prototype._processGlobStar=function(t,s,n,c,o,e){var i=this._readdir(n,e);if(i){var a=c.slice(1),u=t?[t]:[],f=u.concat(a);this._process(f,o,!1);var l=i.length,g=this.symlinks[n];if(!(g&&e))for(var v=0;v<l;v++){var p=i[v];if(!(p.charAt(0)==="."&&!this.dot)){var r=u.concat(i[v],a);this._process(r,o,!0);var d=u.concat(i[v],c);this._process(d,o,!0)}}}};oe.prototype._processSimple=function(t,s){var n=this._stat(t);if(this.matches[s]||(this.matches[s]=Object.create(null)),!!n){if(t&&Rr(t)&&!this.nomount){var c=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=Ui.join(this.root,t):(t=Ui.resolve(this.root,t),c&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(s,t)}};oe.prototype._stat=function(t){var s=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&zi(this.cache,s)){var i=this.cache[s];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return i;if(n&&i==="FILE")return!1}var c,o=this.statCache[s];if(!o){var e;try{e=this.fs.lstatSync(s)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[s]=!1,!1}if(e&&e.isSymbolicLink())try{o=this.fs.statSync(s)}catch(a){o=e}else o=e}this.statCache[s]=o;var i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[s]=this.cache[s]||i,n&&i==="FILE"?!1:i};oe.prototype._mark=function(t){return Et.mark(this,t)};oe.prototype._makeAbs=function(t){return Et.makeAbs(this,t)}});var $i=se((Pf,Tn)=>{Tn.exports=Rn;function Rn(t,s){if(t&&s)return Rn(t)(s);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(c){n[c]=t[c]}),n;function n(){for(var c=new Array(arguments.length),o=0;o<c.length;o++)c[o]=arguments[o];var e=t.apply(this,c),i=c[c.length-1];return typeof e=="function"&&e!==i&&Object.keys(i).forEach(function(a){e[a]=i[a]}),e}}});var Ki=se((Mf,qi)=>{var On=$i();qi.exports=On(Tr);qi.exports.strict=On(An);Tr.proto=Tr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Tr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return An(this)},configurable:!0})});function Tr(t){var s=function(){return s.called?s.value:(s.called=!0,s.value=t.apply(this,arguments))};return s.called=!1,s}function An(t){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return s.onceError=n+" shouldn't be called more than once",s.called=!1,s}});var Pn=se((Bf,Dn)=>{var Qu=$i(),rr=Object.create(null),ed=Ki();Dn.exports=Qu(td);function td(t,s){return rr[t]?(rr[t].push(s),null):(rr[t]=[s],rd(t))}function rd(t){return ed(function s(){var n=rr[t],c=n.length,o=id(arguments);try{for(var e=0;e<c;e++)n[e].apply(null,o)}finally{n.length>c?(n.splice(0,c),process.nextTick(function(){s.apply(null,o)})):delete rr[t]}})}function id(t){for(var s=t.length,n=[],c=0;c<s;c++)n[c]=t[c];return n}});var ji=se((Hf,Bn)=>{Bn.exports=kt;var sd=Di(),Mn=Er(),If=Mn.Minimatch,nd=mn(),od=require("events").EventEmitter,Vi=require("path"),Gi=require("assert"),ir=Lr(),Xi=Ln(),Lt=Wi(),ad=Lt.setopts,Yi=Lt.ownProp,Ji=Pn(),Nf=require("util"),ld=Lt.childrenIgnored,cd=Lt.isIgnored,hd=Ki();function kt(t,s,n){if(typeof s=="function"&&(n=s,s={}),s||(s={}),s.sync){if(n)throw new TypeError("callback provided to sync glob");return Xi(t,s)}return new G(t,s,n)}kt.sync=Xi;var ud=kt.GlobSync=Xi.GlobSync;kt.glob=kt;function dd(t,s){if(s===null||typeof s!="object")return t;for(var n=Object.keys(s),c=n.length;c--;)t[n[c]]=s[n[c]];return t}kt.hasMagic=function(t,s){var n=dd({},s);n.noprocess=!0;var c=new G(t,n),o=c.minimatch.set;if(!t)return!1;if(o.length>1)return!0;for(var e=0;e<o[0].length;e++)if(typeof o[0][e]!="string")return!0;return!1};kt.Glob=G;nd(G,od);function G(t,s,n){if(typeof s=="function"&&(n=s,s=null),s&&s.sync){if(n)throw new TypeError("callback provided to sync glob");return new ud(t,s)}if(!(this instanceof G))return new G(t,s,n);ad(this,t,s),this._didRealPath=!1;var c=this.minimatch.set.length;this.matches=new Array(c),typeof n=="function"&&(n=hd(n),this.on("error",n),this.on("end",function(u){n(null,u)}));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(c===0)return a();for(var e=!0,i=0;i<c;i++)this._process(this.minimatch.set[i],i,!1,a);e=!1;function a(){--o._processing,o._processing<=0&&(e?process.nextTick(function(){o._finish()}):o._finish())}}G.prototype._finish=function(){if(Gi(this instanceof G),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Lt.finish(this),this.emit("end",this.found)}};G.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var s=this,n=0;n<this.matches.length;n++)this._realpathSet(n,c);function c(){--t===0&&s._finish()}};G.prototype._realpathSet=function(t,s){var n=this.matches[t];if(!n)return s();var c=Object.keys(n),o=this,e=c.length;if(e===0)return s();var i=this.matches[t]=Object.create(null);c.forEach(function(a,u){a=o._makeAbs(a),sd.realpath(a,o.realpathCache,function(f,l){f?f.syscall==="stat"?i[a]=!0:o.emit("error",f):i[l]=!0,--e===0&&(o.matches[t]=i,s())})})};G.prototype._mark=function(t){return Lt.mark(this,t)};G.prototype._makeAbs=function(t){return Lt.makeAbs(this,t)};G.prototype.abort=function(){this.aborted=!0,this.emit("abort")};G.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};G.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var s=0;s<t.length;s++){var n=t[s];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var c=this._processQueue.slice(0);this._processQueue.length=0;for(var s=0;s<c.length;s++){var o=c[s];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}};G.prototype._process=function(t,s,n,c){if(Gi(this instanceof G),Gi(typeof c=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,s,n,c]);return}for(var o=0;typeof t[o]=="string";)o++;var e;switch(o){case t.length:this._processSimple(t.join("/"),s,c);return;case 0:e=null;break;default:e=t.slice(0,o).join("/");break}var i=t.slice(o),a;e===null?a=".":((ir(e)||ir(t.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!e||!ir(e))&&(e="/"+e),a=e);var u=this._makeAbs(a);if(ld(this,a))return c();var f=i[0]===Mn.GLOBSTAR;f?this._processGlobStar(e,a,u,i,s,n,c):this._processReaddir(e,a,u,i,s,n,c)}};G.prototype._processReaddir=function(t,s,n,c,o,e,i){var a=this;this._readdir(n,e,function(u,f){return a._processReaddir2(t,s,n,c,o,e,f,i)})};G.prototype._processReaddir2=function(t,s,n,c,o,e,i,a){if(!i)return a();for(var u=c[0],f=!!this.minimatch.negate,l=u._glob,g=this.dot||l.charAt(0)===".",v=[],p=0;p<i.length;p++){var r=i[p];if(r.charAt(0)!=="."||g){var d;f&&!t?d=!r.match(u):d=r.match(u),d&&v.push(r)}}var _=v.length;if(_===0)return a();if(c.length===1&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(var p=0;p<_;p++){var r=v[p];t&&(t!=="/"?r=t+"/"+r:r=t+r),r.charAt(0)==="/"&&!this.nomount&&(r=Vi.join(this.root,r)),this._emitMatch(o,r)}return a()}c.shift();for(var p=0;p<_;p++){var r=v[p],h;t&&(t!=="/"?r=t+"/"+r:r=t+r),this._process([r].concat(c),o,e,a)}a()};G.prototype._emitMatch=function(t,s){if(!this.aborted&&!cd(this,s)){if(this.paused){this._emitQueue.push([t,s]);return}var n=ir(s)?s:this._makeAbs(s);if(this.mark&&(s=this._mark(s)),this.absolute&&(s=n),!this.matches[t][s]){if(this.nodir){var c=this.cache[n];if(c==="DIR"||Array.isArray(c))return}this.matches[t][s]=!0;var o=this.statCache[n];o&&this.emit("stat",s,o),this.emit("match",s)}}};G.prototype._readdirInGlobStar=function(t,s){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,s);var n="lstat\0"+t,c=this,o=Ji(n,e);o&&c.fs.lstat(t,o);function e(i,a){if(i&&i.code==="ENOENT")return s();var u=a&&a.isSymbolicLink();c.symlinks[t]=u,!u&&a&&!a.isDirectory()?(c.cache[t]="FILE",s()):c._readdir(t,!1,s)}};G.prototype._readdir=function(t,s,n){if(!this.aborted&&(n=Ji("readdir\0"+t+"\0"+s,n),!!n)){if(s&&!Yi(this.symlinks,t))return this._readdirInGlobStar(t,n);if(Yi(this.cache,t)){var c=this.cache[t];if(!c||c==="FILE")return n();if(Array.isArray(c))return n(null,c)}var o=this;o.fs.readdir(t,fd(this,t,n))}};function fd(t,s,n){return function(c,o){c?t._readdirError(s,c,n):t._readdirEntries(s,o,n)}}G.prototype._readdirEntries=function(t,s,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var c=0;c<s.length;c++){var o=s[c];t==="/"?o=t+o:o=t+"/"+o,this.cache[o]=!0}return this.cache[t]=s,n(null,s)}};G.prototype._readdirError=function(t,s,n){if(!this.aborted){switch(s.code){case"ENOTSUP":case"ENOTDIR":var c=this._makeAbs(t);if(this.cache[c]="FILE",c===this.cwdAbs){var o=new Error(s.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=s.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",s),this.abort()),this.silent||console.error("glob error",s);break}return n()}};G.prototype._processGlobStar=function(t,s,n,c,o,e,i){var a=this;this._readdir(n,e,function(u,f){a._processGlobStar2(t,s,n,c,o,e,f,i)})};G.prototype._processGlobStar2=function(t,s,n,c,o,e,i,a){if(!i)return a();var u=c.slice(1),f=t?[t]:[],l=f.concat(u);this._process(l,o,!1,a);var g=this.symlinks[n],v=i.length;if(g&&e)return a();for(var p=0;p<v;p++){var r=i[p];if(!(r.charAt(0)==="."&&!this.dot)){var d=f.concat(i[p],u);this._process(d,o,!0,a);var _=f.concat(i[p],c);this._process(_,o,!0,a)}}a()};G.prototype._processSimple=function(t,s,n){var c=this;this._stat(t,function(o,e){c._processSimple2(t,s,o,e,n)})};G.prototype._processSimple2=function(t,s,n,c,o){if(this.matches[s]||(this.matches[s]=Object.create(null)),!c)return o();if(t&&ir(t)&&!this.nomount){var e=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=Vi.join(this.root,t):(t=Vi.resolve(this.root,t),e&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(s,t),o()};G.prototype._stat=function(t,s){var n=this._makeAbs(t),c=t.slice(-1)==="/";if(t.length>this.maxLength)return s();if(!this.stat&&Yi(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!c||o==="DIR")return s(null,o);if(c&&o==="FILE")return s()}var e,i=this.statCache[n];if(i!==void 0){if(i===!1)return s(null,i);var a=i.isDirectory()?"DIR":"FILE";return c&&a==="FILE"?s():s(null,a,i)}var u=this,f=Ji("stat\0"+n,l);f&&u.fs.lstat(n,f);function l(g,v){if(v&&v.isSymbolicLink())return u.fs.stat(n,function(p,r){p?u._stat2(t,n,null,v,s):u._stat2(t,n,p,r,s)});u._stat2(t,n,g,v,s)}};G.prototype._stat2=function(t,s,n,c,o){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return this.statCache[s]=!1,o();var e=t.slice(-1)==="/";if(this.statCache[s]=c,s.slice(-1)==="/"&&c&&!c.isDirectory())return o(null,!1,c);var i=!0;return c&&(i=c.isDirectory()?"DIR":"FILE"),this.cache[s]=this.cache[s]||i,e&&i==="FILE"?o():o(null,i,c)}});var jn=se((Ff,zn)=>{var Z=require("assert"),Fn=require("path"),In=require("fs"),It;try{It=ji()}catch(t){}var pd={nosort:!0,silent:!0},Zi=0,sr=process.platform==="win32",Wn=t=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{t[n]=t[n]||In[n],n=n+"Sync",t[n]=t[n]||In[n]}),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,t.glob===!1&&(t.disableGlob=!0),t.disableGlob!==!0&&It===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");t.disableGlob=t.disableGlob||!1,t.glob=t.glob||pd},es=(t,s,n)=>{typeof s=="function"&&(n=s,s={}),Z(t,"rimraf: missing path"),Z.equal(typeof t,"string","rimraf: path should be a string"),Z.equal(typeof n,"function","rimraf: callback function required"),Z(s,"rimraf: invalid options argument provided"),Z.equal(typeof s,"object","rimraf: options should be object"),Wn(s);let c=0,o=null,e=0,i=u=>{o=o||u,--e===0&&n(o)},a=(u,f)=>{if(u)return n(u);if(e=f.length,e===0)return n();f.forEach(l=>{let g=v=>{if(v){if((v.code==="EBUSY"||v.code==="ENOTEMPTY"||v.code==="EPERM")&&c<s.maxBusyTries)return c++,setTimeout(()=>Qi(l,s,g),c*100);if(v.code==="EMFILE"&&Zi<s.emfileWait)return setTimeout(()=>Qi(l,s,g),Zi++);v.code==="ENOENT"&&(v=null)}Zi=0,i(v)};Qi(l,s,g)})};if(s.disableGlob||!It.hasMagic(t))return a(null,[t]);s.lstat(t,(u,f)=>{if(!u)return a(null,[t]);It(t,s.glob,a)})},Qi=(t,s,n)=>{Z(t),Z(s),Z(typeof n=="function"),s.lstat(t,(c,o)=>{if(c&&c.code==="ENOENT")return n(null);if(c&&c.code==="EPERM"&&sr&&Nn(t,s,c,n),o&&o.isDirectory())return Or(t,s,c,n);s.unlink(t,e=>{if(e){if(e.code==="ENOENT")return n(null);if(e.code==="EPERM")return sr?Nn(t,s,e,n):Or(t,s,e,n);if(e.code==="EISDIR")return Or(t,s,e,n)}return n(e)})})},Nn=(t,s,n,c)=>{Z(t),Z(s),Z(typeof c=="function"),s.chmod(t,438,o=>{o?c(o.code==="ENOENT"?null:n):s.stat(t,(e,i)=>{e?c(e.code==="ENOENT"?null:n):i.isDirectory()?Or(t,s,n,c):s.unlink(t,c)})})},Hn=(t,s,n)=>{Z(t),Z(s);try{s.chmodSync(t,438)}catch(o){if(o.code==="ENOENT")return;throw n}let c;try{c=s.statSync(t)}catch(o){if(o.code==="ENOENT")return;throw n}c.isDirectory()?Ar(t,s,n):s.unlinkSync(t)},Or=(t,s,n,c)=>{Z(t),Z(s),Z(typeof c=="function"),s.rmdir(t,o=>{o&&(o.code==="ENOTEMPTY"||o.code==="EEXIST"||o.code==="EPERM")?_d(t,s,c):o&&o.code==="ENOTDIR"?c(n):c(o)})},_d=(t,s,n)=>{Z(t),Z(s),Z(typeof n=="function"),s.readdir(t,(c,o)=>{if(c)return n(c);let e=o.length;if(e===0)return s.rmdir(t,n);let i;o.forEach(a=>{es(Fn.join(t,a),s,u=>{if(!i){if(u)return n(i=u);--e===0&&s.rmdir(t,n)}})})})},Un=(t,s)=>{s=s||{},Wn(s),Z(t,"rimraf: missing path"),Z.equal(typeof t,"string","rimraf: path should be a string"),Z(s,"rimraf: missing options"),Z.equal(typeof s,"object","rimraf: options should be object");let n;if(s.disableGlob||!It.hasMagic(t))n=[t];else try{s.lstatSync(t),n=[t]}catch(c){n=It.sync(t,s.glob)}if(n.length)for(let c=0;c<n.length;c++){let o=n[c],e;try{e=s.lstatSync(o)}catch(i){if(i.code==="ENOENT")return;i.code==="EPERM"&&sr&&Hn(o,s,i)}try{e&&e.isDirectory()?Ar(o,s,null):s.unlinkSync(o)}catch(i){if(i.code==="ENOENT")return;if(i.code==="EPERM")return sr?Hn(o,s,i):Ar(o,s,i);if(i.code!=="EISDIR")throw i;Ar(o,s,i)}}},Ar=(t,s,n)=>{Z(t),Z(s);try{s.rmdirSync(t)}catch(c){if(c.code==="ENOENT")return;if(c.code==="ENOTDIR")throw n;(c.code==="ENOTEMPTY"||c.code==="EEXIST"||c.code==="EPERM")&&gd(t,s)}},gd=(t,s)=>{Z(t),Z(s),s.readdirSync(t).forEach(o=>Un(Fn.join(t,o),s));let n=sr?100:1,c=0;do{let o=!0;try{let e=s.rmdirSync(t,s);return o=!1,e}finally{if(++c<n&&o)continue}}while(!0)};zn.exports=es;es.sync=Un});var ao=se((Wf,Ne)=>{/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */var ae=require("fs"),ns=require("os"),ve=require("path"),$n=require("crypto"),Oe={fs:ae.constants,os:ns.constants},Vn=jn(),qn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Gn=/XXXXXX/,md=3,Yn=(Oe.O_CREAT||Oe.fs.O_CREAT)|(Oe.O_EXCL||Oe.fs.O_EXCL)|(Oe.O_RDWR||Oe.fs.O_RDWR),vd=ns.platform()==="win32",yd=Oe.EBADF||Oe.os.errno.EBADF,bd=Oe.ENOENT||Oe.os.errno.ENOENT,Xn=448,Jn=384,Sd="exit",Nt=[],Zn=ae.rmdirSync.bind(ae),Qn=Vn.sync,eo=!1;function os(t,s){let n=Ht(t,s),c=n[0],o=n[1];try{so(c)}catch(i){return o(i)}let e=c.tries;(function i(){try{let a=io(c);ae.stat(a,function(u){if(!u)return e-- >0?i():o(new Error("Could not get a unique tmp filename, max tries reached "+a));o(null,a)})}catch(a){o(a)}})()}function as(t){let s=Ht(t),n=s[0];so(n);let c=n.tries;do{let o=io(n);try{ae.statSync(o)}catch(e){return o}}while(c-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function wd(t,s){let n=Ht(t,s),c=n[0],o=n[1];os(c,function(i,a){if(i)return o(i);ae.open(a,Yn,c.mode||Jn,function(f,l){if(f)return o(f);if(c.discardDescriptor)return ae.close(l,function(v){return o(v,a,void 0,rs(a,-1,c,!1))});{let g=c.discardDescriptor||c.detachDescriptor;o(null,a,l,rs(a,g?-1:l,c,!1))}})})}function Cd(t){let s=Ht(t),n=s[0],c=n.discardDescriptor||n.detachDescriptor,o=as(n);var e=ae.openSync(o,Yn,n.mode||Jn);return n.discardDescriptor&&(ae.closeSync(e),e=void 0),{name:o,fd:e,removeCallback:rs(o,c?-1:e,n,!0)}}function xd(t,s){let n=Ht(t,s),c=n[0],o=n[1];os(c,function(i,a){if(i)return o(i);ae.mkdir(a,c.mode||Xn,function(f){if(f)return o(f);o(null,a,to(a,c,!1))})})}function Ed(t){let s=Ht(t),n=s[0],c=as(n);return ae.mkdirSync(c,n.mode||Xn),{name:c,removeCallback:to(c,n,!0)}}function kd(t,s){let n=function(c){if(c&&!ss(c))return s(c);s()};0<=t[0]?ae.close(t[0],function(){ae.unlink(t[1],n)}):ae.unlink(t[1],n)}function Ld(t){let s=null;try{0<=t[0]&&ae.closeSync(t[0])}catch(n){if(!Td(n)&&!ss(n))throw n}finally{try{ae.unlinkSync(t[1])}catch(n){ss(n)||(s=n)}}if(s!==null)throw s}function rs(t,s,n,c){let o=Dr(Ld,[s,t],c),e=Dr(kd,[s,t],c,o);return n.keep||Nt.unshift(o),c?o:e}function to(t,s,n){let c=s.unsafeCleanup?Vn:ae.rmdir.bind(ae),o=s.unsafeCleanup?Qn:Zn,e=Dr(o,t,n),i=Dr(c,t,n,e);return s.keep||Nt.unshift(e),n?e:i}function Dr(t,s,n,c){let o=!1;return function e(i){if(!o){let a=c||e,u=Nt.indexOf(a);return u>=0&&Nt.splice(u,1),o=!0,n||t===Zn||t===Qn?t(s):t(s,i||function(){})}}}function Rd(){if(eo)for(;Nt.length;)try{Nt[0]()}catch(t){}}function Kn(t){let s=[],n=null;try{n=$n.randomBytes(t)}catch(o){n=$n.pseudoRandomBytes(t)}for(var c=0;c<t;c++)s.push(qn[n[c]%qn.length]);return s.join("")}function ro(t){return t===null||pe(t)||!t.trim()}function pe(t){return typeof t=="undefined"}function Ht(t,s){if(typeof t=="function")return[{},t];if(pe(t))return[{},s];let n={};for(let c of Object.getOwnPropertyNames(t))n[c]=t[c];return[n,s]}function io(t){let s=t.tmpdir;if(!pe(t.name))return ve.join(s,t.dir,t.name);if(!pe(t.template))return ve.join(s,t.dir,t.template).replace(Gn,Kn(6));let n=[t.prefix?t.prefix:"tmp","-",process.pid,"-",Kn(12),t.postfix?"-"+t.postfix:""].join("");return ve.join(s,t.dir,n)}function so(t){t.tmpdir=oo(t);let s=t.tmpdir;if(pe(t.name)||ts(t.name,"name",s),pe(t.dir)||ts(t.dir,"dir",s),!pe(t.template)&&(ts(t.template,"template",s),!t.template.match(Gn)))throw new Error(`Invalid template, found "${t.template}".`);if(!pe(t.tries)&&isNaN(t.tries)||t.tries<0)throw new Error(`Invalid tries, found "${t.tries}".`);t.tries=pe(t.name)?t.tries||md:1,t.keep=!!t.keep,t.detachDescriptor=!!t.detachDescriptor,t.discardDescriptor=!!t.discardDescriptor,t.unsafeCleanup=!!t.unsafeCleanup,t.dir=pe(t.dir)?"":ve.relative(s,is(t.dir,s)),t.template=pe(t.template)?void 0:ve.relative(s,is(t.template,s)),t.template=ro(t.template)?void 0:ve.relative(t.dir,t.template),t.name=pe(t.name)?void 0:ls(t.name),t.prefix=pe(t.prefix)?"":t.prefix,t.postfix=pe(t.postfix)?"":t.postfix}function is(t,s){let n=ls(t);return n.startsWith(s)?ve.resolve(n):ve.resolve(ve.join(s,n))}function ls(t){return ro(t)?t:t.replace(/["']/g,"")}function ts(t,s,n){if(s==="name"){if(ve.isAbsolute(t))throw new Error(`${s} option must not contain an absolute path, found "${t}".`);let c=ve.basename(t);if(c===".."||c==="."||c!==t)throw new Error(`${s} option must not contain a path, found "${t}".`)}else{if(ve.isAbsolute(t)&&!t.startsWith(n))throw new Error(`${s} option must be relative to "${n}", found "${t}".`);let c=is(t,n);if(!c.startsWith(n))throw new Error(`${s} option must be relative to "${n}", found "${c}".`)}}function Td(t){return no(t,-yd,"EBADF")}function ss(t){return no(t,-bd,"ENOENT")}function no(t,s,n){return vd?t.code===n:t.code===n&&t.errno===s}function Od(){eo=!0}function oo(t){return ve.resolve(ls(t&&t.tmpdir||ns.tmpdir()))}process.addListener(Sd,Rd);Object.defineProperty(Ne.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return oo()}});Ne.exports.dir=xd;Ne.exports.dirSync=Ed;Ne.exports.file=wd;Ne.exports.fileSync=Cd;Ne.exports.tmpName=os;Ne.exports.tmpNameSync=as;Ne.exports.setGracefulCleanup=Od});var po=se((Nr,us)=>{(function(t,s){if(typeof Nr=="object"&&typeof us=="object")us.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var n=s();for(var c in n)(typeof Nr=="object"?Nr:t)[c]=n[c]}})(self,function(){return(()=>{"use strict";var t={4567:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityManager=void 0;let a=i(9042),u=i(6114),f=i(9924),l=i(3656),g=i(844),v=i(5596),p=i(9631);class r extends g.Disposable{constructor(_,h){super(),this._terminal=_,this._renderService=h,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new f.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,g.toDisposable)(()=>{(0,p.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(_,h){let m=_.target,b=this._rowElements[h===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||_.relatedTarget!==b)return;let S,C;if(h===0?(S=m,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(S=this._rowElements.shift(),C=m,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{let y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),_.preventDefault(),_.stopImmediatePropagation()}_handleResize(_){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let _=document.createElement("div");return _.setAttribute("role","listitem"),_.tabIndex=-1,this._refreshRowDimensions(_),_}_handleTab(_){for(let h=0;h<_;h++)this._handleChar(" ")}_handleChar(_){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==_&&(this._charsToAnnounce+=_):this._charsToAnnounce+=_,_===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&(0,p.removeElementFromParent)(this._liveRegion)}_handleKey(_){this._clearLiveRegion(),/\p{Control}/u.test(_)||this._charsToConsume.push(_)}_refreshRows(_,h){this._renderRowsDebouncer.refresh(_,h,this._terminal.rows)}_renderRows(_,h){let m=this._terminal.buffer,b=m.lines.length.toString();for(let S=_;S<=h;S++){let C=m.translateBufferLineToString(m.ydisp+S,!0),y=(m.ydisp+S+1).toString(),w=this._rowElements[S];w&&(C.length===0?w.innerText="\xA0":w.textContent=C,w.setAttribute("aria-posinset",y),w.setAttribute("aria-setsize",b))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let _=0;_<this._terminal.rows;_++)this._refreshRowDimensions(this._rowElements[_])}}_refreshRowDimensions(_){_.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}e.AccessibilityManager=r},3614:(o,e)=>{function i(l){return l.replace(/\r?\n/g,"\r")}function a(l,g){return g?"\x1B[200~"+l+"\x1B[201~":l}function u(l,g,v){l=a(l=i(l),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(l,!0),g.value=""}function f(l,g,v){let p=v.getBoundingClientRect(),r=l.clientX-p.left-10,d=l.clientY-p.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${r}px`,g.style.top=`${d}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.rightClickHandler=e.moveTextAreaUnderMouseCursor=e.paste=e.handlePasteEvent=e.copyHandler=e.bracketTextForPaste=e.prepareTextForTerminal=void 0,e.prepareTextForTerminal=i,e.bracketTextForPaste=a,e.copyHandler=function(l,g){l.clipboardData&&l.clipboardData.setData("text/plain",g.selectionText),l.preventDefault()},e.handlePasteEvent=function(l,g,v){l.stopPropagation(),l.clipboardData&&u(l.clipboardData.getData("text/plain"),g,v)},e.paste=u,e.moveTextAreaUnderMouseCursor=f,e.rightClickHandler=function(l,g,v,p,r){f(l,g,v),r&&p.rightClickSelect(l),g.value=p.selectionText,g.select()}},7239:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;let a=i(1505);e.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(u,f,l){this._css.set(u,f,l)}getCss(u,f){return this._css.get(u,f)}setColor(u,f,l){this._color.set(u,f,l)}getColor(u,f){return this._color.get(u,f)}clear(){this._color.clear(),this._css.clear()}}},9631:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(...i){var a;for(let u of i)(a=u==null?void 0:u.parentElement)===null||a===void 0||a.removeChild(u)}},3656:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(i,a,u,f){i.addEventListener(a,u,f);let l=!1;return{dispose:()=>{l||(l=!0,i.removeEventListener(a,u,f))}}}},6465:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,b=arguments.length,S=b<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(b<3?m(S):b>3?m(d,_,S):m(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Linkifier2=void 0;let f=i(2585),l=i(8460),g=i(844),v=i(3656),p=class extends g.Disposable{constructor(r){super(),this._bufferService=r,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new l.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new l.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(r){return this._linkProviders.push(r),{dispose:()=>{let d=this._linkProviders.indexOf(r);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(r,d,_){this._element=r,this._mouseService=d,this._renderService=_,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(r){if(this._lastMouseEvent=r,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let _=r.composedPath();for(let h=0;h<_.length;h++){let m=_[h];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(r){if(this._activeLine!==r.y)return this._clearCurrentLink(),void this._askForLink(r,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))}_askForLink(r,d){var _,h;this._activeProviderReplies&&d||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(b=>{b==null||b.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=r.y);let m=!1;for(let[b,S]of this._linkProviders.entries())d?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(b)&&(m=this._checkLinkProviderResult(b,r,m)):S.provideLinks(r.y,C=>{var y,w;if(this._isMouseOut)return;let E=C==null?void 0:C.map(k=>({link:k}));(y=this._activeProviderReplies)===null||y===void 0||y.set(b,E),m=this._checkLinkProviderResult(b,r,m),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(r.y,this._activeProviderReplies)})}_removeIntersectingLinks(r,d){let _=new Set;for(let h=0;h<d.size;h++){let m=d.get(h);if(m)for(let b=0;b<m.length;b++){let S=m[b],C=S.link.range.start.y<r?0:S.link.range.start.x,y=S.link.range.end.y>r?this._bufferService.cols:S.link.range.end.x;for(let w=C;w<=y;w++){if(_.has(w)){m.splice(b--,1);break}_.add(w)}}}}_checkLinkProviderResult(r,d,_){var h;if(!this._activeProviderReplies)return _;let m=this._activeProviderReplies.get(r),b=!1;for(let S=0;S<r;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(b=!0);if(!b&&m){let S=m.find(C=>this._linkAtPosition(C.link,d));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){let C=(h=this._activeProviderReplies.get(S))===null||h===void 0?void 0:h.find(y=>this._linkAtPosition(y.link,d));if(C){_=!0,this._handleNewLink(C);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(r){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(r,this._currentLink.link.text)}_clearCurrentLink(r,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!r||!d||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(r){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(r.link,d)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:()=>{var _,h;return(h=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:_=>{var h,m;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,h;return(h=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||h===void 0?void 0:h.decorations.underline},set:_=>{var h,m,b;!((h=this._currentLink)===null||h===void 0)&&h.state&&((b=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||b===void 0?void 0:b.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(r.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{let h=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,m=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(h,_.end+1+this._bufferService.buffer.ydisp),m&&this._element){let b=this._positionFromMouseEvent(m,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(r,d,_){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(_,d.text)}_fireUnderlineEvent(r,d){let _=r.range,h=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-h-1,_.end.x,_.end.y-h-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(r,d,_){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(_,d.text)}_linkAtPosition(r,d){let _=r.range.start.y*this._bufferService.cols+r.range.start.x,h=r.range.end.y*this._bufferService.cols+r.range.end.x,m=d.y*this._bufferService.cols+d.x;return _<=m&&m<=h}_positionFromMouseEvent(r,d,_){let h=_.getCoords(r,d,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(r,d,_,h,m){return{x1:r,y1:d,x2:_,y2:h,cols:this._bufferService.cols,fg:m}}};p=a([u(0,f.IBufferService)],p),e.Linkifier2=p},9042:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooMuchOutput=e.promptLabel=void 0,e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,e,i){var a=this&&this.__decorate||function(p,r,d,_){var h,m=arguments.length,b=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(p,r,d,_);else for(var S=p.length-1;S>=0;S--)(h=p[S])&&(b=(m<3?h(b):m>3?h(r,d,b):h(r,d))||b);return m>3&&b&&Object.defineProperty(r,d,b),b},u=this&&this.__param||function(p,r){return function(d,_){r(d,_,p)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkProvider=void 0;let f=i(511),l=i(2585),g=class{constructor(p,r,d){this._bufferService=p,this._optionsService=r,this._oscLinkService=d}provideLinks(p,r){var d;let _=this._bufferService.buffer.lines.get(p-1);if(!_)return void r(void 0);let h=[],m=this._optionsService.rawOptions.linkHandler,b=new f.CellData,S=_.getTrimmedLength(),C=-1,y=-1,w=!1;for(let E=0;E<S;E++)if(y!==-1||_.hasContent(E)){if(_.loadCell(E,b),b.hasExtendedAttrs()&&b.extended.urlId){if(y===-1){y=E,C=b.extended.urlId;continue}w=b.extended.urlId!==C}else y!==-1&&(w=!0);if(w||y!==-1&&E===S-1){let k=(d=this._oscLinkService.getLinkData(C))===null||d===void 0?void 0:d.uri;if(k){let R={start:{x:y+1,y:p},end:{x:E+(w||E!==S-1?0:1),y:p}},T=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{let B=new URL(k);["http:","https:"].includes(B.protocol)||(T=!0)}catch(B){T=!0}T||h.push({text:k,range:R,activate:(B,H)=>m?m.activate(B,H,R):v(0,H),hover:(B,H)=>{var F;return(F=m==null?void 0:m.hover)===null||F===void 0?void 0:F.call(m,B,H,R)},leave:(B,H)=>{var F;return(F=m==null?void 0:m.leave)===null||F===void 0?void 0:F.call(m,B,H,R)}})}w=!1,b.hasExtendedAttrs()&&b.extended.urlId?(y=E,C=b.extended.urlId):(y=-1,C=-1)}}r(h)}};function v(p,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch(_){}d.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}g=a([u(0,l.IBufferService),u(1,l.IOptionsService),u(2,l.IOscLinkService)],g),e.OscLinkProvider=g},6193:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderDebouncer=void 0,e.RenderDebouncer=class{constructor(i,a){this._parentWindow=i,this._renderCallback=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(i){return this._refreshCallbacks.push(i),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(i,a,u){this._rowCount=u,i=i!==void 0?i:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let i=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let i of this._refreshCallbacks)i(0);this._refreshCallbacks=[]}}},5596:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenDprMonitor=void 0;let a=i(844);class u extends a.Disposable{constructor(l){super(),this._parentWindow=l,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,a.toDisposable)(()=>{this.clearListener()}))}setListener(l){this._listener&&this.clearListener(),this._listener=l,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var l;this._outerListener&&((l=this._resolutionMediaMatchList)===null||l===void 0||l.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}e.ScreenDprMonitor=u},3236:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;let a=i(2950),u=i(1680),f=i(3614),l=i(2584),g=i(5435),v=i(9312),p=i(6114),r=i(3656),d=i(9042),_=i(4567),h=i(1296),m=i(7399),b=i(8460),S=i(8437),C=i(3230),y=i(4725),w=i(428),E=i(8934),k=i(6465),R=i(5114),T=i(8969),B=i(8055),H=i(4269),F=i(5941),x=i(3107),L=i(5744),O=i(9074),P=i(2585),N=i(3730),z=i(844),q=i(6731),W=typeof window!="undefined"?window.document:null;class $ extends T.CoreTerminal{constructor(A={}){super(A),this.browser=p,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new b.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new b.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new b.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new b.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new b.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new b.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new b.EventEmitter),this._onBlur=this.register(new b.EventEmitter),this._onA11yCharEmitter=this.register(new b.EventEmitter),this._onA11yTabEmitter=this.register(new b.EventEmitter),this._onWillOpen=this.register(new b.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(k.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(N.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,I)=>this.refresh(M,I))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,b.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,b.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,b.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,b.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,z.toDisposable)(()=>{var M,I;this._customKeyEventHandler=void 0,(I=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||I===void 0||I.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(A){if(this._themeService)for(let M of A){let I,U="";switch(M.index){case 256:I="foreground",U="10";break;case 257:I="background",U="11";break;case 258:I="cursor",U="12";break;default:I="ansi",U="4;"+M.index}switch(M.type){case 0:let Q=B.color.toColorRGB(I==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[I]);this.coreService.triggerDataEvent(`${l.C0.ESC}]${U};${(0,F.toRgbString)(Q)}${l.C1_ESCAPED.ST}`);break;case 1:if(I==="ansi")this._themeService.modifyColors(j=>j.ansi[M.index]=B.rgba.toColor(...M.color));else{let j=I;this._themeService.modifyColors(te=>te[j]=B.rgba.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(A){var M;A?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)):((M=this._accessibilityManager)===null||M===void 0||M.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(l.C0.ESC+"[I"),this.updateCursorStyle(A),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var A;return(A=this.textarea)===null||A===void 0?void 0:A.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(l.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let A=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(A);if(!M)return;let I=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,Q=M.getWidth(I),j=this._renderService.dimensions.css.cell.width*Q,te=this.buffer.y*this._renderService.dimensions.css.cell.height,ne=I*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ne+"px",this.textarea.style.top=te+"px",this.textarea.style.width=j+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,f.copyHandler)(M,this._selectionService)}));let A=M=>(0,f.handlePasteEvent)(M,this.textarea,this.coreService);this.register((0,r.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,r.addDisposableDomListener)(this.element,"paste",A)),p.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,f.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,r.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,f.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),p.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,f.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,"keyup",A=>this._keyUp(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keydown",A=>this._keyDown(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keypress",A=>this._keyPress(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionupdate",A=>this._compositionHelper.compositionupdate(A))),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,r.addDisposableDomListener)(this.textarea,"input",A=>this._inputEvent(A),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(A){var M;if(!A)throw new Error("Terminal requires a parent element.");A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=A.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),A.appendChild(this.element);let I=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),p.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,(M=this._document.defaultView)!==null&&M!==void 0?M:window),this._instantiationService.setService(y.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,r.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(w.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(y.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(q.ThemeService),this._instantiationService.setService(y.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(H.CharacterJoinerService),this._instantiationService.setService(y.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(y.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I);try{this._onWillOpen.fire(this.element)}catch(U){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(y.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,U=>this.scrollLines(U,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(y.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(x.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(L.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(L.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let A=this,M=this.element;function I(j){let te=A._mouseService.getMouseReportCoords(j,A.screenElement);if(!te)return!1;let ne,ie;switch(j.overrideType||j.type){case"mousemove":ie=32,j.buttons===void 0?(ne=3,j.button!==void 0&&(ne=j.button<3?j.button:3)):ne=1&j.buttons?0:4&j.buttons?1:2&j.buttons?2:3;break;case"mouseup":ie=0,ne=j.button<3?j.button:3;break;case"mousedown":ie=1,ne=j.button<3?j.button:3;break;case"wheel":if(A.viewport.getLinesScrolled(j)===0)return!1;ie=j.deltaY<0?0:1,ne=4;break;default:return!1}return!(ie===void 0||ne===void 0||ne>4)&&A.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:ne,action:ie,ctrl:j.ctrlKey,alt:j.altKey,shift:j.shiftKey})}let U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:j=>(I(j),j.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(j)),wheel:j=>(I(j),this.cancel(j,!0)),mousedrag:j=>{j.buttons&&I(j)},mousemove:j=>{j.buttons||I(j)}};this.register(this.coreMouseService.onProtocolChange(j=>{j?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(j)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&j?U.mousemove||(M.addEventListener("mousemove",Q.mousemove),U.mousemove=Q.mousemove):(M.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&j?U.wheel||(M.addEventListener("wheel",Q.wheel,{passive:!1}),U.wheel=Q.wheel):(M.removeEventListener("wheel",U.wheel),U.wheel=null),2&j?U.mouseup||(U.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&j?U.mousedrag||(U.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(M,"mousedown",j=>{if(j.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(j))return I(j),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(j)})),this.register((0,r.addDisposableDomListener)(M,"wheel",j=>{if(!U.wheel){if(!this.buffer.hasScrollback){let te=this.viewport.getLinesScrolled(j);if(te===0)return;let ne=l.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(j.deltaY<0?"A":"B"),ie="";for(let Y=0;Y<Math.abs(te);Y++)ie+=ne;return this.coreService.triggerDataEvent(ie,!0),this.cancel(j,!0)}return this.viewport.handleWheel(j)?this.cancel(j):void 0}},{passive:!1})),this.register((0,r.addDisposableDomListener)(M,"touchstart",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(j),this.cancel(j)},{passive:!0})),this.register((0,r.addDisposableDomListener)(M,"touchmove",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(j)?void 0:this.cancel(j)},{passive:!1}))}refresh(A,M){var I;(I=this._renderService)===null||I===void 0||I.refreshRows(A,M)}updateCursorStyle(A){var M;!((M=this._selectionService)===null||M===void 0)&&M.shouldColumnSelect(A)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(A,M,I=0){super.scrollLines(A,M,I),this.refresh(0,this.rows-1)}paste(A){(0,f.paste)(A,this.textarea,this.coreService)}attachCustomKeyEventHandler(A){this._customKeyEventHandler=A}registerLinkProvider(A){return this.linkifier2.registerLinkProvider(A)}registerCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let M=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(A){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)}registerDecoration(A){return this._decorationService.registerDecoration(A)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(A,M,I){this._selectionService.setSelection(A,M,I)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var A;(A=this._selectionService)===null||A===void 0||A.clearSelection()}selectAll(){var A;(A=this._selectionService)===null||A===void 0||A.selectAll()}selectLines(A,M){var I;(I=this._selectionService)===null||I===void 0||I.selectLines(A,M)}_keyDown(A){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;let M=this.browser.isMac&&this.options.macOptionIsMeta&&A.altKey;if(!M&&!this._compositionHelper.keydown(A))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;M||A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let I=(0,m.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),I.type===3||I.type===2){let U=this.rows-1;return this.scrollLines(I.type===2?-U:U),this.cancel(A,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(I.cancel&&this.cancel(A,!0),!I.key||!!(A.key&&!A.ctrlKey&&!A.altKey&&!A.metaKey&&A.key.length===1&&A.key.charCodeAt(0)>=65&&A.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==l.C0.ETX&&I.key!==l.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),!this.optionsService.rawOptions.screenReaderMode||A.altKey||A.ctrlKey?this.cancel(A,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(A,M){let I=A.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||A.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||A.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?I:I&&(!M.keyCode||M.keyCode>47)}_keyUp(A){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)}_keyPress(A){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)M=A.charCode;else if(A.which===null||A.which===void 0)M=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;M=A.which}return!(!M||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(A){if(A.data&&A.inputType==="insertText"&&(!A.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let M=A.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(A),!0}return!1}resize(A,M){A!==this.cols||M!==this.rows?super.resize(A,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(A,M){var I,U;(I=this._charSizeService)===null||I===void 0||I.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var A,M;this.options.rows=this.rows,this.options.cols=this.cols;let I=this._customKeyEventHandler;this._setup(),super.reset(),(A=this._selectionService)===null||A===void 0||A.reset(),this._decorationService.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1),(M=this.viewport)===null||M===void 0||M.syncScrollArea()}clearTextureAtlas(){var A;(A=this._renderService)===null||A===void 0||A.clearTextureAtlas()}_reportFocus(){var A;!((A=this.element)===null||A===void 0)&&A.classList.contains("focus")?this.coreService.triggerDataEvent(l.C0.ESC+"[I"):this.coreService.triggerDataEvent(l.C0.ESC+"[O")}_reportWindowsOptions(A){if(this._renderService)switch(A){case g.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let M=this._renderService.dimensions.css.canvas.width.toFixed(0),I=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${l.C0.ESC}[4;${I};${M}t`);break;case g.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let U=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${l.C0.ESC}[6;${Q};${U}t`)}}cancel(A,M){if(this.options.cancelEvents||M)return A.preventDefault(),A.stopPropagation(),!1}}e.Terminal=$},9924:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeBasedDebouncer=void 0,e.TimeBasedDebouncer=class{constructor(i,a=1e3){this._renderCallback=i,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(i,a,u){this._rowCount=u,i=i!==void 0?i:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){let l=f-this._lastRefreshMs,g=this._debounceThresholdMS-l;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let i=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,a)}}},1680:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,b=arguments.length,S=b<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(b<3?m(S):b>3?m(d,_,S):m(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;let f=i(844),l=i(3656),g=i(4725),v=i(2585),p=class extends f.Disposable{constructor(r,d,_,h,m,b,S,C,y){super(),this._scrollLines=r,this._viewportElement=d,this._scrollArea=_,this._bufferService=h,this._optionsService=m,this._charSizeService=b,this._renderService=S,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(d)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,d){let _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&_<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){let d=this._getPixelsScrolled(r);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(r,d))}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let d=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let d=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(r,d){let _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&d.altKey||_==="ctrl"&&d.ctrlKey||_==="shift"&&d.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){let d=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(r,d))}};p=a([u(3,v.IBufferService),u(4,v.IOptionsService),u(5,g.ICharSizeService),u(6,g.IRenderService),u(7,g.ICoreBrowserService),u(8,g.IThemeService)],p),e.Viewport=p},3107:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,b=arguments.length,S=b<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(b<3?m(S):b>3?m(d,_,S):m(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferDecorationRenderer=void 0;let f=i(3656),l=i(4725),g=i(844),v=i(2585),p=class extends g.Disposable{constructor(r,d,_,h){super(),this._screenElement=r,this._bufferService=d,this._decorationService=_,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let r of this._decorationService.decorations)this._renderDecoration(r);this._dimensionsChanged=!1}_renderDecoration(r){this._refreshStyle(r),this._dimensionsChanged&&this._refreshXPosition(r)}_createElement(r){var d;let _=document.createElement("div");_.classList.add("xterm-decoration"),_.style.width=`${Math.round((r.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,_.style.height=(r.options.height||1)*this._renderService.dimensions.css.cell.height+"px",_.style.top=(r.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",_.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let h=(d=r.options.x)!==null&&d!==void 0?d:0;return h&&h>this._bufferService.cols&&(_.style.display="none"),this._refreshXPosition(r,_),_}_refreshStyle(r){let d=r.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)r.element&&(r.element.style.display="none",r.onRenderEmitter.fire(r.element));else{let _=this._decorationElements.get(r);_||(_=this._createElement(r),r.element=_,this._decorationElements.set(r,_),this._container.appendChild(_)),_.style.top=d*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",r.onRenderEmitter.fire(_)}}_refreshXPosition(r,d=r.element){var _;if(!d)return;let h=(_=r.options.x)!==null&&_!==void 0?_:0;(r.options.anchor||"left")==="right"?d.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(r){var d;(d=this._decorationElements.get(r))===null||d===void 0||d.remove(),this._decorationElements.delete(r),r.dispose()}};p=a([u(1,v.IBufferService),u(2,v.IDecorationService),u(3,l.IRenderService)],p),e.BufferDecorationRenderer=p},5871:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorZoneStore=void 0,e.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(i){if(i.options.overviewRulerOptions){for(let a of this._zones)if(a.color===i.options.overviewRulerOptions.color&&a.position===i.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,i.marker.line))return;if(this._lineAdjacentToZone(a,i.marker.line,i.options.overviewRulerOptions.position))return void this._addLineToZone(a,i.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=i.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=i.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=i.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=i.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:i.options.overviewRulerOptions.color,position:i.options.overviewRulerOptions.position,startBufferLine:i.marker.line,endBufferLine:i.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(i){this._linePadding=i}_lineIntersectsZone(i,a){return a>=i.startBufferLine&&a<=i.endBufferLine}_lineAdjacentToZone(i,a,u){return a>=i.startBufferLine-this._linePadding[u||"full"]&&a<=i.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(i,a){i.startBufferLine=Math.min(i.startBufferLine,a),i.endBufferLine=Math.max(i.endBufferLine,a)}}},5744:function(o,e,i){var a=this&&this.__decorate||function(m,b,S,C){var y,w=arguments.length,E=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,b,S,C);else for(var k=m.length-1;k>=0;k--)(y=m[k])&&(E=(w<3?y(E):w>3?y(b,S,E):y(b,S))||E);return w>3&&E&&Object.defineProperty(b,S,E),E},u=this&&this.__param||function(m,b){return function(S,C){b(S,C,m)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRulerRenderer=void 0;let f=i(5871),l=i(3656),g=i(4725),v=i(844),p=i(2585),r={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},h=class extends v.Disposable{constructor(m,b,S,C,y,w,E){var k;super(),this._viewportElement=m,this._screenElement=b,this._bufferService=S,this._decorationService=C,this._renderService=y,this._optionsService=w,this._coreBrowseService=E,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(k=this._viewportElement.parentElement)===null||k===void 0||k.insertBefore(this._canvas,this._viewportElement);let R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,l.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let m=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=m,d.center=b,d.right=m,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=d.left,_.right=d.left+d.center}_refreshDrawHeightConstants(){r.full=Math.round(2*this._coreBrowseService.dpr);let m=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);r.left=b,r.center=b,r.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;let m=this._colorZoneStore.zones;for(let b of m)b.position!=="full"&&this._renderColorZone(b);for(let b of m)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(_[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-r[m.position||"full"]/2),d[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+r[m.position||"full"]))}_queueRefresh(m,b){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};h=a([u(2,p.IBufferService),u(3,p.IDecorationService),u(4,g.IRenderService),u(5,p.IOptionsService),u(6,g.ICoreBrowserService)],h),e.OverviewRulerRenderer=h},2950:function(o,e,i){var a=this&&this.__decorate||function(p,r,d,_){var h,m=arguments.length,b=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(p,r,d,_);else for(var S=p.length-1;S>=0;S--)(h=p[S])&&(b=(m<3?h(b):m>3?h(r,d,b):h(r,d))||b);return m>3&&b&&Object.defineProperty(r,d,b),b},u=this&&this.__param||function(p,r){return function(d,_){r(d,_,p)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionHelper=void 0;let f=i(4725),l=i(2585),g=i(2584),v=class{constructor(p,r,d,_,h,m){this._textarea=p,this._compositionView=r,this._bufferService=d,this._optionsService=_,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(p){this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(p){if(this._isComposing||this._isSendingComposition){if(p.keyCode===229||p.keyCode===16||p.keyCode===17||p.keyCode===18)return!1;this._finalizeComposition(!1)}return p.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(p){if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){let r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){let p=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let r=this._textarea.value,d=r.replace(p,"");this._dataAlreadySent=d,r.length>p.length?this._coreService.triggerDataEvent(d,!0):r.length<p.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):r.length===p.length&&r!==p&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(p){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}p||setTimeout(()=>this.updateCompositionElements(!0),0)}}};v=a([u(2,l.IBufferService),u(3,l.IOptionsService),u(4,l.ICoreService),u(5,f.IRenderService)],v),e.CompositionHelper=v},9806:(o,e)=>{function i(a,u,f){let l=f.getBoundingClientRect(),g=a.getComputedStyle(f),v=parseInt(g.getPropertyValue("padding-left")),p=parseInt(g.getPropertyValue("padding-top"));return[u.clientX-l.left-v,u.clientY-l.top-p]}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoords=e.getCoordsRelativeToElement=void 0,e.getCoordsRelativeToElement=i,e.getCoords=function(a,u,f,l,g,v,p,r,d){if(!v)return;let _=i(a,u,f);return _?(_[0]=Math.ceil((_[0]+(d?p/2:0))/p),_[1]=Math.ceil(_[1]/r),_[0]=Math.min(Math.max(_[0],1),l+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),g),_):void 0}},9504:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveToCellSequence=void 0;let a=i(2584);function u(r,d,_,h){let m=r-f(r,_),b=d-f(d,_),S=Math.abs(m-b)-function(C,y,w){let E=0,k=C-f(C,w),R=y-f(y,w);for(let T=0;T<Math.abs(k-R);T++){let B=l(C,y)==="A"?-1:1,H=w.buffer.lines.get(k+B*T);H!=null&&H.isWrapped&&E++}return E}(r,d,_);return p(S,v(l(r,d),h))}function f(r,d){let _=0,h=d.buffer.lines.get(r),m=h==null?void 0:h.isWrapped;for(;m&&r>=0&&r<d.rows;)_++,h=d.buffer.lines.get(--r),m=h==null?void 0:h.isWrapped;return _}function l(r,d){return r>d?"A":"B"}function g(r,d,_,h,m,b){let S=r,C=d,y="";for(;S!==_||C!==h;)S+=m?1:-1,m&&S>b.cols-1?(y+=b.buffer.translateBufferLineToString(C,!1,r,S),S=0,r=0,C++):!m&&S<0&&(y+=b.buffer.translateBufferLineToString(C,!1,0,r+1),S=b.cols-1,r=S,C--);return y+b.buffer.translateBufferLineToString(C,!1,r,S)}function v(r,d){let _=d?"O":"[";return a.C0.ESC+_+r}function p(r,d){r=Math.floor(r);let _="";for(let h=0;h<r;h++)_+=d;return _}e.moveToCellSequence=function(r,d,_,h){let m=_.buffer.x,b=_.buffer.y;if(!_.buffer.hasScrollback)return function(y,w,E,k,R,T){return u(w,k,R,T).length===0?"":p(g(y,w,y,w-f(w,R),!1,R).length,v("D",T))}(m,b,0,d,_,h)+u(b,d,_,h)+function(y,w,E,k,R,T){let B;B=u(w,k,R,T).length>0?k-f(k,R):w;let H=k,F=function(x,L,O,P,N,z){let q;return q=u(O,P,N,z).length>0?P-f(P,N):L,x<O&&q<=P||x>=O&&q<P?"C":"D"}(y,w,E,k,R,T);return p(g(y,B,E,H,F==="C",R).length,v(F,T))}(m,b,r,d,_,h);let S;if(b===d)return S=m>r?"D":"C",p(Math.abs(m-r),v(S,h));S=b>d?"D":"C";let C=Math.abs(b-d);return p(function(y,w){return w.cols-y}(b>d?r:m,_)+(C-1)*_.cols+1+((b>d?m:r)-1),v(S,h))}},1296:function(o,e,i){var a=this&&this.__decorate||function(y,w,E,k){var R,T=arguments.length,B=T<3?w:k===null?k=Object.getOwnPropertyDescriptor(w,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,w,E,k);else for(var H=y.length-1;H>=0;H--)(R=y[H])&&(B=(T<3?R(B):T>3?R(w,E,B):R(w,E))||B);return T>3&&B&&Object.defineProperty(w,E,B),B},u=this&&this.__param||function(y,w){return function(E,k){w(E,k,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRenderer=void 0;let f=i(9631),l=i(3787),g=i(2223),v=i(6171),p=i(4725),r=i(8055),d=i(8460),_=i(844),h=i(2585),m="xterm-dom-renderer-owner-",b="xterm-focus",S=1,C=class extends _.Disposable{constructor(y,w,E,k,R,T,B,H,F,x){super(),this._element=y,this._screenElement=w,this._viewportElement=E,this._linkifier2=k,this._charSizeService=T,this._optionsService=B,this._bufferService=H,this._coreBrowserService=F,this._terminalClass=S++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,v.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(x.onChangeColors(L=>this._injectCss(L))),this._injectCss(x.colors),this._rowFactory=R.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(L=>this._handleLinkHover(L))),this.register(this._linkifier2.onHideLinkUnderline(L=>this._handleLinkLeave(L))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),(0,f.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){let y=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*y,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*y),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/y),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/y),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let E of this._rowElements)E.style.width=`${this.dimensions.css.canvas.width}px`,E.style.height=`${this.dimensions.css.cell.height}px`,E.style.lineHeight=`${this.dimensions.css.cell.height}px`,E.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let w=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=w,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(y){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let w=`${this._terminalSelector} .xterm-rows { color: ${y.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;w+=`${this._terminalSelector} span:not(.${l.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${l.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${l.ITALIC_CLASS} { font-style: italic;}`,w+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",w+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${y.cursor.css};  color: ${y.cursorAccent.css}; } 50% {  background-color: ${y.cursorAccent.css};  color: ${y.cursor.css}; }}`,w+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${y.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_BLINK_CLASS}:not(.${l.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_BLINK_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${y.cursor.css}; color: ${y.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${y.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${y.cursor.css} inset;}`,w+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${y.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${y.selectionInactiveBackgroundOpaque.css};}`;for(let[E,k]of y.ansi.entries())w+=`${this._terminalSelector} .xterm-fg-${E} { color: ${k.css}; }${this._terminalSelector} .xterm-bg-${E} { background-color: ${k.css}; }`;w+=`${this._terminalSelector} .xterm-fg-${g.INVERTED_DEFAULT_COLOR} { color: ${r.color.opaque(y.background).css}; }${this._terminalSelector} .xterm-bg-${g.INVERTED_DEFAULT_COLOR} { background-color: ${y.foreground.css}; }`,this._themeStyleElement.textContent=w}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(y,w){for(let E=this._rowElements.length;E<=w;E++){let k=document.createElement("div");this._rowContainer.appendChild(k),this._rowElements.push(k)}for(;this._rowElements.length>w;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(y,w){this._refreshRowElements(y,w),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b)}handleSelectionChanged(y,w,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(y,w,E),this.renderRows(0,this._bufferService.rows-1),!y||!w)return;let k=y[1]-this._bufferService.buffer.ydisp,R=w[1]-this._bufferService.buffer.ydisp,T=Math.max(k,0),B=Math.min(R,this._bufferService.rows-1);if(T>=this._bufferService.rows||B<0)return;let H=document.createDocumentFragment();if(E){let F=y[0]>w[0];H.appendChild(this._createSelectionElement(T,F?w[0]:y[0],F?y[0]:w[0],B-T+1))}else{let F=k===T?y[0]:0,x=T===R?w[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(T,F,x));let L=B-T-1;if(H.appendChild(this._createSelectionElement(T+1,0,this._bufferService.cols,L)),T!==B){let O=R===B?w[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(B,0,O))}}this._selectionContainer.appendChild(H)}_createSelectionElement(y,w,E,k=1){let R=document.createElement("div");return R.style.height=k*this.dimensions.css.cell.height+"px",R.style.top=y*this.dimensions.css.cell.height+"px",R.style.left=w*this.dimensions.css.cell.width+"px",R.style.width=this.dimensions.css.cell.width*(E-w)+"px",R}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(let y of this._rowElements)y.replaceChildren()}renderRows(y,w){let E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,k=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink;for(let T=y;T<=w;T++){let B=this._rowElements[T],H=T+this._bufferService.buffer.ydisp,F=this._bufferService.buffer.lines.get(H),x=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[T]&&this._cellToRowElements[T].length===this._bufferService.cols||(this._cellToRowElements[T]=new Int16Array(this._bufferService.cols)),B.replaceChildren(this._rowFactory.createRow(F,H,H===E,x,k,R,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[T]))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(y){this._setCellUnderline(y.x1,y.x2,y.y1,y.y2,y.cols,!0)}_handleLinkLeave(y){this._setCellUnderline(y.x1,y.x2,y.y1,y.y2,y.cols,!1)}_setCellUnderline(y,w,E,k,R,T){if(y=this._cellToRowElements[E][y],w=this._cellToRowElements[k][w],y!==-1&&w!==-1)for(;y!==w||E!==k;){let B=this._rowElements[E];if(!B)return;let H=B.children[y];H&&(H.style.textDecoration=T?"underline":"none"),++y>=R&&(y=0,E++)}}};C=a([u(4,h.IInstantiationService),u(5,p.ICharSizeService),u(6,h.IOptionsService),u(7,h.IBufferService),u(8,p.ICoreBrowserService),u(9,p.IThemeService)],C),e.DomRenderer=C},3787:function(o,e,i){var a=this&&this.__decorate||function(S,C,y,w){var E,k=arguments.length,R=k<3?C:w===null?w=Object.getOwnPropertyDescriptor(C,y):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(S,C,y,w);else for(var T=S.length-1;T>=0;T--)(E=S[T])&&(R=(k<3?E(R):k>3?E(C,y,R):E(C,y))||R);return k>3&&R&&Object.defineProperty(C,y,R),R},u=this&&this.__param||function(S,C){return function(y,w){C(y,w,S)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRendererRowFactory=e.CURSOR_STYLE_UNDERLINE_CLASS=e.CURSOR_STYLE_BAR_CLASS=e.CURSOR_STYLE_BLOCK_CLASS=e.CURSOR_BLINK_CLASS=e.CURSOR_CLASS=e.STRIKETHROUGH_CLASS=e.UNDERLINE_CLASS=e.ITALIC_CLASS=e.DIM_CLASS=e.BOLD_CLASS=void 0;let f=i(2223),l=i(643),g=i(511),v=i(2585),p=i(8055),r=i(4725),d=i(4269),_=i(6171),h=i(3734);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.STRIKETHROUGH_CLASS="xterm-strikethrough",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let m=class{constructor(S,C,y,w,E,k,R){this._document=S,this._characterJoinerService=C,this._optionsService=y,this._coreBrowserService=w,this._coreService=E,this._decorationService=k,this._themeService=R,this._workCell=new g.CellData,this._columnSelectMode=!1}handleSelectionChanged(S,C,y){this._selectionStart=S,this._selectionEnd=C,this._columnSelectMode=y}createRow(S,C,y,w,E,k,R,T,B){let H=this._document.createDocumentFragment(),F=this._characterJoinerService.getJoinedCharacters(C),x=0;for(let N=Math.min(S.length,T)-1;N>=0;N--)if(S.loadCell(N,this._workCell).getCode()!==l.NULL_CELL_CODE||y&&N===E){x=N+1;break}let L=this._themeService.colors,O=-1,P=0;for(;P<x;P++){S.loadCell(P,this._workCell);let N=this._workCell.getWidth();if(N===0){B[P]=O;continue}let z=!1,q=P,W=this._workCell;if(F.length>0&&P===F[0][0]){z=!0;let Y=F.shift();W=new d.JoinedCellData(this._workCell,S.translateToString(!0,Y[0],Y[1]),Y[1]-Y[0]),q=Y[1]-1,N=W.getWidth()}let $=this._document.createElement("span");if(N>1&&($.style.width=R*N+"px"),z&&($.style.display="inline",E>=P&&E<=q&&(E=P)),!this._coreService.isCursorHidden&&y&&P===E)switch($.classList.add(e.CURSOR_CLASS),k&&$.classList.add(e.CURSOR_BLINK_CLASS),w){case"bar":$.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":$.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:$.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}if(W.isBold()&&$.classList.add(e.BOLD_CLASS),W.isItalic()&&$.classList.add(e.ITALIC_CLASS),W.isDim()&&$.classList.add(e.DIM_CLASS),W.isInvisible()?$.textContent=l.WHITESPACE_CELL_CHAR:$.textContent=W.getChars()||l.WHITESPACE_CELL_CHAR,W.isUnderline()&&($.classList.add(`${e.UNDERLINE_CLASS}-${W.extended.underlineStyle}`),$.textContent===" "&&($.textContent="\xA0"),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let Y=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&Y<8&&(Y+=8),$.style.textDecorationColor=L.ansi[Y].css}W.isStrikethrough()&&$.classList.add(e.STRIKETHROUGH_CLASS);let D=W.getFgColor(),A=W.getFgColorMode(),M=W.getBgColor(),I=W.getBgColorMode(),U=!!W.isInverse();if(U){let Y=D;D=M,M=Y;let Qo=A;A=I,I=Qo}let Q,j,te=!1;this._decorationService.forEachDecorationAtCell(P,C,void 0,Y=>{Y.options.layer!=="top"&&te||(Y.backgroundColorRGB&&(I=50331648,M=Y.backgroundColorRGB.rgba>>8&16777215,Q=Y.backgroundColorRGB),Y.foregroundColorRGB&&(A=50331648,D=Y.foregroundColorRGB.rgba>>8&16777215,j=Y.foregroundColorRGB),te=Y.options.layer==="top")});let ne=this._isCellInSelection(P,C),ie;switch(te||L.selectionForeground&&ne&&(A=50331648,D=L.selectionForeground.rgba>>8&16777215,j=L.selectionForeground),ne&&(Q=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,te=!0),te&&$.classList.add("xterm-decoration-top"),I){case 16777216:case 33554432:ie=L.ansi[M],$.classList.add(`xterm-bg-${M}`);break;case 50331648:ie=p.rgba.toColor(M>>16,M>>8&255,255&M),this._addStyle($,`background-color:#${b((M>>>0).toString(16),"0",6)}`);break;default:U?(ie=L.foreground,$.classList.add(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):ie=L.background}switch(Q||W.isDim()&&(Q=p.color.multiplyOpacity(ie,.5)),A){case 16777216:case 33554432:W.isBold()&&D<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(D+=8),this._applyMinimumContrast($,ie,L.ansi[D],W,Q,void 0)||$.classList.add(`xterm-fg-${D}`);break;case 50331648:let Y=p.rgba.toColor(D>>16&255,D>>8&255,255&D);this._applyMinimumContrast($,ie,Y,W,Q,j)||this._addStyle($,`color:#${b(D.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,ie,L.foreground,W,Q,void 0)||U&&$.classList.add(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}H.appendChild($),B[P]=++O,P=q}return P<T-1&&B.subarray(P).fill(++O),H}_applyMinimumContrast(S,C,y,w,E,k){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(w.getCode()))return!1;let R;return E||k||(R=this._themeService.colors.contrastCache.getColor(C.rgba,y.rgba)),R===void 0&&(R=p.color.ensureContrastRatio(E||C,k||y,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((E||C).rgba,(k||y).rgba,R!=null?R:null)),!!R&&(this._addStyle(S,`color:${R.css}`),!0)}_addStyle(S,C){S.setAttribute("style",`${S.getAttribute("style")||""}${C};`)}_isCellInSelection(S,C){let y=this._selectionStart,w=this._selectionEnd;return!(!y||!w)&&(this._columnSelectMode?y[0]<=w[0]?S>=y[0]&&C>=y[1]&&S<w[0]&&C<=w[1]:S<y[0]&&C>=y[1]&&S>=w[0]&&C<=w[1]:C>y[1]&&C<w[1]||y[1]===w[1]&&C===y[1]&&S>=y[0]&&S<w[0]||y[1]<w[1]&&C===w[1]&&S<w[0]||y[1]<w[1]&&C===y[1]&&S>=y[0])}};function b(S,C,y){for(;S.length<y;)S=C+S;return S}m=a([u(1,r.ICharacterJoinerService),u(2,v.IOptionsService),u(3,r.ICoreBrowserService),u(4,v.ICoreService),u(5,v.IDecorationService),u(6,r.IThemeService)],m),e.DomRendererRowFactory=m},2223:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;let a=i(6114);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(o,e)=>{function i(a){return 57508<=a&&a<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.createRenderDimensions=e.excludeFromContrastRatioDemands=e.isRestrictedPowerlineGlyph=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(a){if(!a)throw new Error("value must not be falsy");return a},e.isPowerlineGlyph=i,e.isRestrictedPowerlineGlyph=function(a){return 57520<=a&&a<=57527},e.excludeFromContrastRatioDemands=function(a){return i(a)||function(u){return 9472<=u&&u<=9631}(a)},e.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionModel=void 0,e.SelectionModel=class{constructor(i){this._bufferService=i,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?i%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)-1]:[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[i,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[Math.max(i,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let i=this.selectionStart,a=this.selectionEnd;return!(!i||!a)&&(i[1]>a[1]||i[1]===a[1]&&i[0]>a[0])}handleTrim(i){return this.selectionStart&&(this.selectionStart[1]-=i),this.selectionEnd&&(this.selectionEnd[1]-=i),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,b=arguments.length,S=b<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(b<3?m(S):b>3?m(d,_,S):m(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharSizeService=void 0;let f=i(2585),l=i(8460),g=i(844),v=class extends g.Disposable{constructor(r,d,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new l.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new p(r,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())}};v=a([u(2,f.IOptionsService)],v),e.CharSizeService=v;class p{constructor(d,_,h){this._document=d,this._parentElement=_,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d=this._measureElement.getBoundingClientRect();return d.width!==0&&d.height!==0&&(this._result.width=d.width,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(o,e,i){var a=this&&this.__decorate||function(d,_,h,m){var b,S=arguments.length,C=S<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,_,h,m);else for(var y=d.length-1;y>=0;y--)(b=d[y])&&(C=(S<3?b(C):S>3?b(_,h,C):b(_,h))||C);return S>3&&C&&Object.defineProperty(_,h,C),C},u=this&&this.__param||function(d,_){return function(h,m){_(h,m,d)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;let f=i(3734),l=i(643),g=i(511),v=i(2585);class p extends f.AttributeData{constructor(_,h,m){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.JoinedCellData=p;let r=class fo{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(_){let h={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(h),h.id}deregister(_){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===_)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(_);if(!h||h.length===0)return[];let m=[],b=h.translateToString(!0),S=0,C=0,y=0,w=h.getFg(0),E=h.getBg(0);for(let k=0;k<h.getTrimmedLength();k++)if(h.loadCell(k,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==E){if(k-S>1){let R=this._getJoinedRanges(b,y,C,h,S);for(let T=0;T<R.length;T++)m.push(R[T])}S=k,y=C,w=this._workCell.fg,E=this._workCell.bg}C+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let k=this._getJoinedRanges(b,y,C,h,S);for(let R=0;R<k.length;R++)m.push(k[R])}return m}_getJoinedRanges(_,h,m,b,S){let C=_.substring(h,m),y=[];try{y=this._characterJoiners[0].handler(C)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let E=this._characterJoiners[w].handler(C);for(let k=0;k<E.length;k++)fo._mergeRanges(y,E[k])}catch(E){console.error(E)}return this._stringRangesToCellRanges(y,b,S),y}_stringRangesToCellRanges(_,h,m){let b=0,S=!1,C=0,y=_[b];if(y){for(let w=m;w<this._bufferService.cols;w++){let E=h.getWidth(w),k=h.getString(w).length||l.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!S&&y[0]<=C&&(y[0]=w,S=!0),y[1]<=C){if(y[1]=w,y=_[++b],!y)break;y[0]<=C?(y[0]=w,S=!0):S=!1}C+=k}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(_,h){let m=!1;for(let b=0;b<_.length;b++){let S=_[b];if(m){if(h[1]<=S[0])return _[b-1][1]=h[1],_;if(h[1]<=S[1])return _[b-1][1]=Math.max(h[1],S[1]),_.splice(b,1),_;_.splice(b,1),b--}else{if(h[1]<=S[0])return _.splice(b,0,h),_;if(h[1]<=S[1])return S[0]=Math.min(h[0],S[0]),_;h[0]<S[1]&&(S[0]=Math.min(h[0],S[0]),m=!0)}}return m?_[_.length-1][1]=h[1]:_.push(h),_}};r=a([u(0,v.IBufferService)],r),e.CharacterJoinerService=r},5114:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreBrowserService=void 0,e.CoreBrowserService=class{constructor(i,a){this._textarea=i,this.window=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(o,e,i){var a=this&&this.__decorate||function(v,p,r,d){var _,h=arguments.length,m=h<3?p:d===null?d=Object.getOwnPropertyDescriptor(p,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(v,p,r,d);else for(var b=v.length-1;b>=0;b--)(_=v[b])&&(m=(h<3?_(m):h>3?_(p,r,m):_(p,r))||m);return h>3&&m&&Object.defineProperty(p,r,m),m},u=this&&this.__param||function(v,p){return function(r,d){p(r,d,v)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseService=void 0;let f=i(4725),l=i(9806),g=class{constructor(v,p){this._renderService=v,this._charSizeService=p}getCoords(v,p,r,d,_){return(0,l.getCoords)(window,v,p,r,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(v,p){let r=(0,l.getCoordsRelativeToElement)(window,v,p);if(!(!this._charSizeService.hasValidSize||r[0]<0||r[1]<0||r[0]>=this._renderService.dimensions.css.canvas.width||r[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};g=a([u(0,f.IRenderService),u(1,f.ICharSizeService)],g),e.MouseService=g},3230:function(o,e,i){var a=this&&this.__decorate||function(m,b,S,C){var y,w=arguments.length,E=w<3?b:C===null?C=Object.getOwnPropertyDescriptor(b,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,b,S,C);else for(var k=m.length-1;k>=0;k--)(y=m[k])&&(E=(w<3?y(E):w>3?y(b,S,E):y(b,S))||E);return w>3&&E&&Object.defineProperty(b,S,E),E},u=this&&this.__param||function(m,b){return function(S,C){b(S,C,m)}};Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;let f=i(6193),l=i(8460),g=i(844),v=i(5596),p=i(3656),r=i(2585),d=i(4725),_=i(7226),h=class extends g.Disposable{constructor(m,b,S,C,y,w,E,k){if(super(),this._rowCount=m,this._charSizeService=C,this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new l.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new l.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new l.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new l.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var R;return(R=this._renderer)===null||R===void 0?void 0:R.dispose()}}),this._renderDebouncer=new f.RenderDebouncer(E.window,(R,T)=>this._renderRows(R,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var R;return(R=this._renderer)===null||R===void 0?void 0:R.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(y.onDecorationRegistered(()=>this._fullRefresh())),this.register(y.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,p.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(k.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){let R=new E.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});R.observe(b),this.register({dispose:()=>R.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,b,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,b,this._rowCount))}_renderRows(m,b){this._renderer&&(this._renderer.renderRows(m,b),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:b}),this._onRender.fire({start:m,end:b}),this._isNextRenderRedrawOnly=!0)}resize(m,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(m){var b;(b=this._renderer)===null||b===void 0||b.dispose(),this._renderer=m,this._renderer.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,b;this._renderer&&((b=(m=this._renderer).clearTextureAtlas)===null||b===void 0||b.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,b){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(m,b)):this._renderer.handleResize(m,b),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,b,S){var C;this._selectionState.start=m,this._selectionState.end=b,this._selectionState.columnSelectMode=S,(C=this._renderer)===null||C===void 0||C.handleSelectionChanged(m,b,S)}handleCursorMove(){var m;(m=this._renderer)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer)===null||m===void 0||m.clear()}};h=a([u(2,r.IOptionsService),u(3,d.ICharSizeService),u(4,r.IDecorationService),u(5,r.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],h),e.RenderService=h},9312:function(o,e,i){var a=this&&this.__decorate||function(y,w,E,k){var R,T=arguments.length,B=T<3?w:k===null?k=Object.getOwnPropertyDescriptor(w,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(y,w,E,k);else for(var H=y.length-1;H>=0;H--)(R=y[H])&&(B=(T<3?R(B):T>3?R(w,E,B):R(w,E))||B);return T>3&&B&&Object.defineProperty(w,E,B),B},u=this&&this.__param||function(y,w){return function(E,k){w(E,k,y)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionService=void 0;let f=i(6114),l=i(456),g=i(511),v=i(8460),p=i(4725),r=i(2585),d=i(9806),_=i(9504),h=i(844),m=i(4841),b=String.fromCharCode(160),S=new RegExp(b,"g"),C=class extends h.Disposable{constructor(y,w,E,k,R,T,B,H,F){super(),this._element=y,this._screenElement=w,this._linkifier=E,this._bufferService=k,this._coreService=R,this._mouseService=T,this._optionsService=B,this._renderService=H,this._coreBrowserService=F,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new g.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=x=>this._handleMouseMove(x),this._mouseUpListener=x=>this._handleMouseUp(x),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(x=>this._handleTrim(x)),this.register(this._bufferService.buffers.onBufferActivate(x=>this._handleBufferActivate(x))),this.enable(),this._model=new l.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!y||!w||y[0]===w[0]&&y[1]===w[1])}get selectionText(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!y||!w)return"";let E=this._bufferService.buffer,k=[];if(this._activeSelectionMode===3){if(y[0]===w[0])return"";let R=y[0]<w[0]?y[0]:w[0],T=y[0]<w[0]?w[0]:y[0];for(let B=y[1];B<=w[1];B++){let H=E.translateBufferLineToString(B,!0,R,T);k.push(H)}}else{let R=y[1]===w[1]?w[0]:void 0;k.push(E.translateBufferLineToString(y[1],!0,y[0],R));for(let T=y[1]+1;T<=w[1]-1;T++){let B=E.lines.get(T),H=E.translateBufferLineToString(T,!0);B!=null&&B.isWrapped?k[k.length-1]+=H:k.push(H)}if(y[1]!==w[1]){let T=E.lines.get(w[1]),B=E.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?k[k.length-1]+=B:k.push(B)}}return k.map(R=>R.replace(S," ")).join(f.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),f.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){let w=this._getMouseBufferCoords(y),E=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!!(E&&k&&w)&&this._areCoordsInSelection(w,E,k)}isCellInSelection(y,w){let E=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!E||!k)&&this._areCoordsInSelection([y,w],E,k)}_areCoordsInSelection(y,w,E){return y[1]>w[1]&&y[1]<E[1]||w[1]===E[1]&&y[1]===w[1]&&y[0]>=w[0]&&y[0]<E[0]||w[1]<E[1]&&y[1]===E[1]&&y[0]<E[0]||w[1]<E[1]&&y[1]===w[1]&&y[0]>=w[0]}_selectWordAtCursor(y,w){var E,k;let R=(k=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||k===void 0?void 0:k.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(y);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,w){this._model.clearSelection(),y=Math.max(y,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){let w=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(y){let w=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1],E=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=E?0:(w>E&&(w-=E),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(y){return f.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){let w=this._getMouseBufferCoords(y);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(y){return y.altKey&&!(f.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){let k=E.lines.get(this._model.selectionEnd[1]);k&&k.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){let w=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let E=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){let k=(0,_.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(k,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let y=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,E=!(!y||!w||y[0]===w[0]&&y[1]===w[1]);E?y&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,w,E)):this._oldHasSelection&&this._fireOnSelectionChange(y,w,E)}_fireOnSelectionChange(y,w,E){this._oldSelectionStart=y,this._oldSelectionEnd=w,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(y,w){let E=w;for(let k=0;w>=k;k++){let R=y.loadCell(k,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:R>1&&w!==k&&(E+=R-1)}return E}setSelection(y,w,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,w],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,w,E=!0,k=!0){if(y[0]>=this._bufferService.cols)return;let R=this._bufferService.buffer,T=R.lines.get(y[1]);if(!T)return;let B=R.translateBufferLineToString(y[1],!1),H=this._convertViewportColToCharacterIndex(T,y[0]),F=H,x=y[0]-H,L=0,O=0,P=0,N=0;if(B.charAt(H)===" "){for(;H>0&&B.charAt(H-1)===" ";)H--;for(;F<B.length&&B.charAt(F+1)===" ";)F++}else{let W=y[0],$=y[0];T.getWidth(W)===0&&(L++,W--),T.getWidth($)===2&&(O++,$++);let D=T.getString($).length;for(D>1&&(N+=D-1,F+=D-1);W>0&&H>0&&!this._isCharWordSeparator(T.loadCell(W-1,this._workCell));){T.loadCell(W-1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===0?(L++,W--):A>1&&(P+=A-1,H-=A-1),H--,W--}for(;$<T.length&&F+1<B.length&&!this._isCharWordSeparator(T.loadCell($+1,this._workCell));){T.loadCell($+1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===2?(O++,$++):A>1&&(N+=A-1,F+=A-1),F++,$++}}F++;let z=H+x-L+P,q=Math.min(this._bufferService.cols,F-H+L+O-P-N);if(w||B.slice(H,F).trim()!==""){if(E&&z===0&&T.getCodePoint(0)!==32){let W=R.lines.get(y[1]-1);if(W&&T.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){let $=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if($){let D=this._bufferService.cols-$.start;z-=D,q+=D}}}if(k&&z+q===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){let W=R.lines.get(y[1]+1);if(W!=null&&W.isWrapped&&W.getCodePoint(0)!==32){let $=this._getWordAt([0,y[1]+1],!1,!1,!0);$&&(q+=$.length)}}return{start:z,length:q}}}_selectWordAt(y,w){let E=this._getWordAt(y,w);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[E.start,y[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(y){let w=this._getWordAt(y,!0);if(w){let E=y[1];for(;w.start<0;)w.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,E]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){let w=this._bufferService.buffer.getWrappedRangeForLine(y),E={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(E,this._bufferService.cols)}};C=a([u(3,r.IBufferService),u(4,r.ICoreService),u(5,p.IMouseService),u(6,r.IOptionsService),u(7,p.IRenderService),u(8,p.ICoreBrowserService)],C),e.SelectionService=C},4725:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IThemeService=e.ICharacterJoinerService=e.ISelectionService=e.IRenderService=e.IMouseService=e.ICoreBrowserService=e.ICharSizeService=void 0;let a=i(8343);e.ICharSizeService=(0,a.createDecorator)("CharSizeService"),e.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),e.IMouseService=(0,a.createDecorator)("MouseService"),e.IRenderService=(0,a.createDecorator)("RenderService"),e.ISelectionService=(0,a.createDecorator)("SelectionService"),e.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),e.IThemeService=(0,a.createDecorator)("ThemeService")},6731:function(o,e,i){var a=this&&this.__decorate||function(C,y,w,E){var k,R=arguments.length,T=R<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,y,w,E);else for(var B=C.length-1;B>=0;B--)(k=C[B])&&(T=(R<3?k(T):R>3?k(y,w,T):k(y,w))||T);return R>3&&T&&Object.defineProperty(y,w,T),T},u=this&&this.__param||function(C,y){return function(w,E){y(w,E,C)}};Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.DEFAULT_ANSI_COLORS=void 0;let f=i(7239),l=i(8055),g=i(8460),v=i(844),p=i(2585),r=l.css.toColor("#ffffff"),d=l.css.toColor("#000000"),_=l.css.toColor("#ffffff"),h=l.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let C=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let w=0;w<216;w++){let E=y[w/36%6|0],k=y[w/6%6|0],R=y[w%6];C.push({css:l.channels.toCss(E,k,R),rgba:l.channels.toRgba(E,k,R)})}for(let w=0;w<24;w++){let E=8+10*w;C.push({css:l.channels.toCss(E,E,E),rgba:l.channels.toRgba(E,E,E)})}return C})());let b=class extends v.Disposable{constructor(C){super(),this._optionsService=C,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new f.ColorContrastCache,this._colors={foreground:r,background:d,cursor:_,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:l.color.blend(d,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:l.color.blend(d,m),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(C={}){let y=this._colors;if(y.foreground=S(C.foreground,r),y.background=S(C.background,d),y.cursor=S(C.cursor,_),y.cursorAccent=S(C.cursorAccent,h),y.selectionBackgroundTransparent=S(C.selectionBackground,m),y.selectionBackgroundOpaque=l.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=S(C.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=l.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=C.selectionForeground?S(C.selectionForeground,l.NULL_COLOR):void 0,y.selectionForeground===l.NULL_COLOR&&(y.selectionForeground=void 0),l.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=l.color.opacity(y.selectionBackgroundTransparent,.3)),l.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=l.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=e.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=S(C.black,e.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=S(C.red,e.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=S(C.green,e.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=S(C.yellow,e.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=S(C.blue,e.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=S(C.magenta,e.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=S(C.cyan,e.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=S(C.white,e.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=S(C.brightBlack,e.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=S(C.brightRed,e.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=S(C.brightGreen,e.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=S(C.brightYellow,e.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=S(C.brightBlue,e.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=S(C.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=S(C.brightCyan,e.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=S(C.brightWhite,e.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){let w=Math.min(y.ansi.length-16,C.extendedAnsi.length);for(let E=0;E<w;E++)y.ansi[E+16]=S(C.extendedAnsi[E],e.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(C,y){if(C!==void 0)try{return l.css.toColor(C)}catch(w){}return y}b=a([u(0,p.IOptionsService)],b),e.ThemeService=b},6349:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircularList=void 0;let a=i(8460),u=i(844);class f extends u.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;let v=new Array(g);for(let p=0;p<Math.min(g,this.length);p++)v[p]=this._array[this._getCyclicIndex(p)];this._array=v,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let v=this._length;v<g;v++)this._array[v]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,v){this._array[this._getCyclicIndex(g)]=v}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,v,...p){if(v){for(let r=g;r<this._length-v;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+v)];this._length-=v,this.onDeleteEmitter.fire({index:g,amount:v})}for(let r=this._length-1;r>=g;r--)this._array[this._getCyclicIndex(r+p.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<p.length;r++)this._array[this._getCyclicIndex(g+r)]=p[r];if(p.length&&this.onInsertEmitter.fire({index:g,amount:p.length}),this._length+p.length>this._maxLength){let r=this._length+p.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=p.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,v,p){if(!(v<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(let d=v-1;d>=0;d--)this.set(g+d+p,this.get(g+d));let r=g+v+p-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<v;r++)this.set(g+r+p,this.get(g+r))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}e.CircularList=f},1439:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function i(a,u=5){if(typeof a!="object")return a;let f=Array.isArray(a)?[]:{};for(let l in a)f[l]=u<=1?a[l]:a[l]&&i(a[l],u-1);return f}},8055:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;let a=i(6114),u=0,f=0,l=0,g=0;var v,p,r;function d(h){let m=h.toString(16);return m.length<2?"0"+m:m}function _(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,b,S,C){return C!==void 0?`#${d(m)}${d(b)}${d(S)}${d(C)}`:`#${d(m)}${d(b)}${d(S)}`},h.toRgba=function(m,b,S,C=255){return(m<<24|b<<16|S<<8|C)>>>0}}(v=e.channels||(e.channels={})),function(h){function m(b,S){return g=Math.round(255*S),[u,f,l]=r.toChannels(b.rgba),{css:v.toCss(u,f,l,g),rgba:v.toRgba(u,f,l,g)}}h.blend=function(b,S){if(g=(255&S.rgba)/255,g===1)return{css:S.css,rgba:S.rgba};let C=S.rgba>>24&255,y=S.rgba>>16&255,w=S.rgba>>8&255,E=b.rgba>>24&255,k=b.rgba>>16&255,R=b.rgba>>8&255;return u=E+Math.round((C-E)*g),f=k+Math.round((y-k)*g),l=R+Math.round((w-R)*g),{css:v.toCss(u,f,l),rgba:v.toRgba(u,f,l)}},h.isOpaque=function(b){return(255&b.rgba)==255},h.ensureContrastRatio=function(b,S,C){let y=r.ensureContrastRatio(b.rgba,S.rgba,C);if(y)return r.toColor(y>>24&255,y>>16&255,y>>8&255)},h.opaque=function(b){let S=(255|b.rgba)>>>0;return[u,f,l]=r.toChannels(S),{css:v.toCss(u,f,l),rgba:S}},h.opacity=m,h.multiplyOpacity=function(b,S){return g=255&b.rgba,m(b,g*S/255)},h.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(e.color||(e.color={})),function(h){let m,b;if(!a.isNode){let S=document.createElement("canvas");S.width=1,S.height=1;let C=S.getContext("2d",{willReadFrequently:!0});C&&(m=C,m.globalCompositeOperation="copy",b=m.createLinearGradient(0,0,1,1))}h.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return u=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),r.toColor(u,f,l);case 5:return u=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),g=parseInt(S.slice(4,5).repeat(2),16),r.toColor(u,f,l,g);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}let C=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return u=parseInt(C[1]),f=parseInt(C[2]),l=parseInt(C[3]),g=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),r.toColor(u,f,l,g);if(!m||!b)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=b,m.fillStyle=S,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[u,f,l,g]=m.getImageData(0,0,1,1).data,g!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,f,l,g),css:S}}}(e.css||(e.css={})),function(h){function m(b,S,C){let y=b/255,w=S/255,E=C/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(b){return m(b>>16&255,b>>8&255,255&b)},h.relativeLuminance2=m}(p=e.rgb||(e.rgb={})),function(h){function m(S,C,y){let w=S>>24&255,E=S>>16&255,k=S>>8&255,R=C>>24&255,T=C>>16&255,B=C>>8&255,H=_(p.relativeLuminance2(R,T,B),p.relativeLuminance2(w,E,k));for(;H<y&&(R>0||T>0||B>0);)R-=Math.max(0,Math.ceil(.1*R)),T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),H=_(p.relativeLuminance2(R,T,B),p.relativeLuminance2(w,E,k));return(R<<24|T<<16|B<<8|255)>>>0}function b(S,C,y){let w=S>>24&255,E=S>>16&255,k=S>>8&255,R=C>>24&255,T=C>>16&255,B=C>>8&255,H=_(p.relativeLuminance2(R,T,B),p.relativeLuminance2(w,E,k));for(;H<y&&(R<255||T<255||B<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),H=_(p.relativeLuminance2(R,T,B),p.relativeLuminance2(w,E,k));return(R<<24|T<<16|B<<8|255)>>>0}h.ensureContrastRatio=function(S,C,y){let w=p.relativeLuminance(S>>8),E=p.relativeLuminance(C>>8);if(_(w,E)<y){if(E<w){let T=m(S,C,y),B=_(w,p.relativeLuminance(T>>8));if(B<y){let H=b(S,C,y);return B>_(w,p.relativeLuminance(H>>8))?T:H}return T}let k=b(S,C,y),R=_(w,p.relativeLuminance(k>>8));if(R<y){let T=m(S,C,y);return R>_(w,p.relativeLuminance(T>>8))?k:T}return k}},h.reduceLuminance=m,h.increaseLuminance=b,h.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},h.toColor=function(S,C,y,w){return{css:v.toCss(S,C,y,w),rgba:v.toRgba(S,C,y,w)}}}(r=e.rgba||(e.rgba={})),e.toPaddedHex=d,e.contrastRatio=_},8969:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreTerminal=void 0;let a=i(844),u=i(2585),f=i(4348),l=i(7866),g=i(744),v=i(7302),p=i(6975),r=i(8460),d=i(1753),_=i(1480),h=i(7994),m=i(9282),b=i(5435),S=i(5981),C=i(2660),y=!1;class w extends a.Disposable{constructor(k){super(),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new v.OptionsService(k)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(l.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(p.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",R=>this._handleWindowsModeOptionChange(R))),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((R,T)=>this._inputHandler.parse(R,T))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,a.toDisposable)(()=>{var R;(R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(k=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(k.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(k){for(let R in k)this.optionsService.options[R]=k[R]}write(k,R){this._writeBuffer.write(k,R)}writeSync(k,R){this._logService.logLevel<=u.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(k,R)}resize(k,R){isNaN(k)||isNaN(R)||(k=Math.max(k,g.MINIMUM_COLS),R=Math.max(R,g.MINIMUM_ROWS),this._bufferService.resize(k,R))}scroll(k,R=!1){this._bufferService.scroll(k,R)}scrollLines(k,R,T){this._bufferService.scrollLines(k,R,T)}scrollPages(k){this._bufferService.scrollPages(k)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(k){this._bufferService.scrollToLine(k)}registerEscHandler(k,R){return this._inputHandler.registerEscHandler(k,R)}registerDcsHandler(k,R){return this._inputHandler.registerDcsHandler(k,R)}registerCsiHandler(k,R){return this._inputHandler.registerCsiHandler(k,R)}registerOscHandler(k,R){return this._inputHandler.registerOscHandler(k,R)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(k){var R;k?this._enableWindowsMode():((R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){let k=[];k.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(let R of k)R.dispose()}}}}}e.CoreTerminal=w},8460:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===i)return void this._listeners.splice(a,1)}}})),this._event}fire(i,a){let u=[];for(let f=0;f<this._listeners.length;f++)u.push(this._listeners[f]);for(let f=0;f<u.length;f++)u[f].call(void 0,i,a)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(i,a){return i(u=>a.fire(u))}},5435:function(o,e,i){var a=this&&this.__decorate||function(F,x,L,O){var P,N=arguments.length,z=N<3?x:O===null?O=Object.getOwnPropertyDescriptor(x,L):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(F,x,L,O);else for(var q=F.length-1;q>=0;q--)(P=F[q])&&(z=(N<3?P(z):N>3?P(x,L,z):P(x,L))||z);return N>3&&z&&Object.defineProperty(x,L,z),z},u=this&&this.__param||function(F,x){return function(L,O){x(L,O,F)}};Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.WindowsOptionsReportType=void 0;let f=i(2584),l=i(7116),g=i(2015),v=i(844),p=i(482),r=i(8437),d=i(8460),_=i(643),h=i(511),m=i(3734),b=i(2585),S=i(6242),C=i(6351),y=i(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function k(F,x){if(F>24)return x.setWinLines||!1;switch(F){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var R;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R=e.WindowsOptionsReportType||(e.WindowsOptionsReportType={}));let T=0;class B extends v.Disposable{constructor(x,L,O,P,N,z,q,W,$=new g.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=L,this._coreService=O,this._logService=P,this._optionsService=N,this._oscLinkService=z,this._coreMouseService=q,this._unicodeService=W,this._parser=$,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new p.StringToUtf32,this._utf8Decoder=new p.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,A)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:A.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,A,M)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:A,data:M})}),this._parser.setDcsHandlerFallback((D,A,M)=>{A==="HOOK"&&(M=M.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:A,payload:M})}),this._parser.setPrintHandler((D,A,M)=>this.print(D,A,M)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new S.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new S.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new S.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new S.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new S.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new S.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new S.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new S.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new S.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new S.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new S.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let D in l.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((D,A)=>this.requestStatusString(D,A)))}getAttrData(){return this._curAttrData}_preserveStack(x,L,O,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=L,this._parseStack.decodedLength=O,this._parseStack.position=P}_logSlowResolvingAsync(x){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([x,new Promise((L,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(L=>{if(L!=="#SLOW_TIMEOUT")throw L;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,L){let O,P=this._activeBuffer.x,N=this._activeBuffer.y,z=0,q=this._parseStack.paused;if(q){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,L))return this._logSlowResolvingAsync(O),O;P=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>E&&(z=this._parseStack.position+E)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,W=>String.fromCharCode(W)).join("")}"`),typeof x=="string"?x.split("").map(W=>W.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(x.length,E))),q||this._dirtyRowTracker.clearRange(),x.length>E)for(let W=z;W<x.length;W+=E){let $=W+E<x.length?W+E:x.length,D=typeof x=="string"?this._stringDecoder.decode(x.substring(W,$),this._parseBuffer):this._utf8Decoder.decode(x.subarray(W,$),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,D))return this._preserveStack(P,N,D,W),this._logSlowResolvingAsync(O),O}else if(!q){let W=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,W))return this._preserveStack(P,N,W,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===P&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,L,O){let P,N,z=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,A=this._curAttrData,M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-L>0&&M.getWidth(this._activeBuffer.x-1)===2&&M.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(let I=L;I<O;++I){if(P=x[I],N=this._unicodeService.wcwidth(P),P<127&&z){let U=z[String.fromCharCode(P)];U&&(P=U.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,p.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=W){if($){for(;this._activeBuffer.x<W;)M.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=W-1,N===2)continue}if(D&&(M.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(A),A),M.getWidth(W-1)===2&&M.setCellFromCodePoint(W-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),M.setCellFromCodePoint(this._activeBuffer.x++,P,N,A.fg,A.bg,A.extended),N>0)for(;--N;)M.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else M.getWidth(this._activeBuffer.x-1)?M.addCodepointToCell(this._activeBuffer.x-1,P):M.addCodepointToCell(this._activeBuffer.x-2,P)}O-L>0&&(M.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<W&&O-L>0&&M.getWidth(this._activeBuffer.x)===0&&!M.hasContent(this._activeBuffer.x)&&M.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,L){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,L):this._parser.registerCsiHandler(x,O=>!k(O.params[0],this._optionsService.rawOptions.windowOptions)||L(O))}registerDcsHandler(x,L){return this._parser.registerDcsHandler(x,new C.DcsHandler(L))}registerEscHandler(x,L){return this._parser.registerEscHandler(x,L)}registerOscHandler(x,L){return this._parser.registerOscHandler(x,new S.OscHandler(L))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);L.hasWidth(this._activeBuffer.x)&&!L.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,L){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+L):(this._activeBuffer.x=x,this._activeBuffer.y=L),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,L){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+L)}cursorUp(x){let L=this._activeBuffer.y-this._activeBuffer.scrollTop;return L>=0?this._moveCursor(0,-Math.min(L,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){let L=this._activeBuffer.scrollBottom-this._activeBuffer.y;return L>=0?this._moveCursor(0,Math.min(L,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){let L=x.params[0];return L===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:L===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=x.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let L=x.params[0]||1;for(;L--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){let L=x.params[0];return L===1&&(this._curAttrData.bg|=536870912),L!==2&&L!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,L,O,P=!1,N=!1){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);z.replaceCells(L,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),N),P&&(z.isWrapped=!1)}_resetBufferLine(x,L=!1){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),L),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),O.isWrapped=!1}eraseInDisplay(x,L=!1){let O;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);O<this._bufferService.rows;O++)this._resetBufferLine(O,L);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,L),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,L);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,L);this._dirtyRowTracker.markDirty(0);break;case 3:let P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(x,L=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,L);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,L);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,L)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let L=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;L--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let L=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;L--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let L=x.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let L=x.params[0]||1;for(;L--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(0,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let L=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(this._activeBuffer.x,L,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();let L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return L&&(L.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;let L=x.params[0]||1,O=new Uint32Array(L);for(let P=0;P<L;++P)O[P]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let L=0;L<x.length;L++)switch(x.params[L]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let L=0;L<x.length;L++)switch(x.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),this._charsetService.setgCharset(1,l.DEFAULT_CHARSET),this._charsetService.setgCharset(2,l.DEFAULT_CHARSET),this._charsetService.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let L=0;L<x.length;L++)switch(x.params[L]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let L=0;L<x.length;L++)switch(x.params[L]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[L]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,L){let O=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:N}=this._coreMouseService,z=this._coreService,{buffers:q,cols:W}=this._bufferService,{active:$,alt:D}=q,A=this._optionsService.rawOptions,M=j=>j?1:2,I=x.params[0];return U=I,Q=L?I===2?3:I===4?M(z.modes.insertMode):I===12?4:I===20?M(A.convertEol):0:I===1?M(O.applicationCursorKeys):I===3?A.windowOptions.setWinLines?W===80?2:W===132?1:0:0:I===6?M(O.origin):I===7?M(O.wraparound):I===8?3:I===9?M(P==="X10"):I===12?M(A.cursorBlink):I===25?M(!z.isCursorHidden):I===45?M(O.reverseWraparound):I===66?M(O.applicationKeypad):I===1e3?M(P==="VT200"):I===1002?M(P==="DRAG"):I===1003?M(P==="ANY"):I===1004?M(O.sendFocus):I===1005?4:I===1006?M(N==="SGR"):I===1015?4:I===1016?M(N==="SGR_PIXELS"):I===1048?1:I===47||I===1047||I===1049?M($===D):I===2004?M(O.bracketedPasteMode):0,z.triggerDataEvent(`${f.C0.ESC}[${L?"":"?"}${U};${Q}$y`),!0;var U,Q}_updateAttrColor(x,L,O,P,N){return L===2?(x|=50331648,x&=-16777216,x|=m.AttributeData.fromColorRGB([O,P,N])):L===5&&(x&=-50331904,x|=33554432|255&O),x}_extractColor(x,L,O){let P=[0,0,-1,0,0,0],N=0,z=0;do{if(P[z+N]=x.params[L+z],x.hasSubParams(L+z)){let q=x.getSubParams(L+z),W=0;do P[1]===5&&(N=1),P[z+W+1+N]=q[W];while(++W<q.length&&W+z+1+N<P.length);break}if(P[1]===5&&z+N>=2||P[1]===2&&z+N>=5)break;P[1]&&(N=1)}while(++z+L<x.length&&z+N<P.length);for(let q=2;q<P.length;++q)P[q]===-1&&(P[q]=0);switch(P[0]){case 38:O.fg=this._updateAttrColor(O.fg,P[1],P[3],P[4],P[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,P[1],P[3],P[4],P[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,P[1],P[3],P[4],P[5])}return z}_processUnderline(x,L){L.extended=L.extended.clone(),(!~x||x>5)&&(x=1),L.extended.underlineStyle=x,L.fg|=268435456,x===0&&(L.fg&=-268435457),L.updateExtended()}_processSGR0(x){x.fg=r.DEFAULT_ATTR_DATA.fg,x.bg=r.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;let L=x.length,O,P=this._curAttrData;for(let N=0;N<L;N++)O=x.params[N],O>=30&&O<=37?(P.fg&=-50331904,P.fg|=16777216|O-30):O>=40&&O<=47?(P.bg&=-50331904,P.bg|=16777216|O-40):O>=90&&O<=97?(P.fg&=-50331904,P.fg|=16777224|O-90):O>=100&&O<=107?(P.bg&=-50331904,P.bg|=16777224|O-100):O===0?this._processSGR0(P):O===1?P.fg|=134217728:O===3?P.bg|=67108864:O===4?(P.fg|=268435456,this._processUnderline(x.hasSubParams(N)?x.getSubParams(N)[0]:1,P)):O===5?P.fg|=536870912:O===7?P.fg|=67108864:O===8?P.fg|=1073741824:O===9?P.fg|=2147483648:O===2?P.bg|=134217728:O===21?this._processUnderline(2,P):O===22?(P.fg&=-134217729,P.bg&=-134217729):O===23?P.bg&=-67108865:O===24?(P.fg&=-268435457,this._processUnderline(0,P)):O===25?P.fg&=-536870913:O===27?P.fg&=-67108865:O===28?P.fg&=-1073741825:O===29?P.fg&=2147483647:O===39?(P.fg&=-67108864,P.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):O===49?(P.bg&=-67108864,P.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?N+=this._extractColor(x,N,P):O===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):O===100?(P.fg&=-67108864,P.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:let L=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${L};${O}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){let L=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${L};${O}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){let L=x.params[0]||1;switch(L){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let O=L%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(x){let L=x.params[0]||1,O;return(x.length<2||(O=x.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>L&&(this._activeBuffer.scrollTop=L-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(x){if(!k(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;let L=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:L!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:L!==0&&L!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),L!==0&&L!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:L!==0&&L!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),L!==0&&L!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){let L=[],O=x.split(";");for(;O.length>1;){let P=O.shift(),N=O.shift();if(/^\d+$/.exec(P)){let z=parseInt(P);if(0<=z&&z<256)if(N==="?")L.push({type:0,index:z});else{let q=(0,y.parseColor)(N);q&&L.push({type:1,index:z,color:q})}}}return L.length&&this._onColor.fire(L),!0}setHyperlink(x){let L=x.split(";");return!(L.length<2)&&(L[1]?this._createHyperlink(L[0],L[1]):!L[0]&&this._finishHyperlink())}_createHyperlink(x,L){this._getCurrentLinkId()&&this._finishHyperlink();let O=x.split(":"),P,N=O.findIndex(z=>z.startsWith("id="));return N!==-1&&(P=O[N].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:L}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,L){let O=x.split(";");for(let P=0;P<O.length&&!(L>=this._specialColors.length);++P,++L)if(O[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[L]}]);else{let N=(0,y.parseColor)(O[P]);N&&this._onColor.fire([{type:1,index:this._specialColors[L],color:N}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;let L=[],O=x.split(";");for(let P=0;P<O.length;++P)if(/^\d+$/.exec(O[P])){let N=parseInt(O[P]);0<=N&&N<256&&L.push({type:2,index:N})}return L.length&&this._onColor.fire(L),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(w[x[0]],l.CHARSETS[x[1]]||l.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){let x=new h.CellData;x.content=4194304|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let L=0;L<this._bufferService.rows;++L){let O=this._activeBuffer.ybase+this._activeBuffer.y+L,P=this._activeBuffer.lines.get(O);P&&(P.fill(x),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,L){let O=this._bufferService.buffer,P=this._optionsService.rawOptions;return(N=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${N}${f.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,L){this._dirtyRowTracker.markRangeDirty(x,L)}}e.InputHandler=B;let H=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,x){F>x&&(T=F,F=x,x=T),F<this.start&&(this.start=F),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};H=a([u(0,b.IBufferService)],H)},844:(o,e)=>{function i(a){for(let u of a)u.dispose();a.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let u=this._disposables.indexOf(a);u!==-1&&this._disposables.splice(u,1)}},e.toDisposable=function(a){return{dispose:a}},e.disposeArray=i,e.getDisposeArrayDisposable=function(a){return{dispose:()=>i(a)}}},1505:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(u,f,l){this._data[u]||(this._data[u]={}),this._data[u][f]=l}get(u,f){return this._data[u]?this._data[u][f]:void 0}clear(){this._data={}}}e.TwoKeyMap=i,e.FourKeyMap=class{constructor(){this._data=new i}set(a,u,f,l,g){this._data.get(a,u)||this._data.set(a,u,new i),this._data.get(a,u).set(f,l,g)}get(a,u,f,l){var g;return(g=this._data.get(a,u))===null||g===void 0?void 0:g.get(f,l)}clear(){this._data.clear()}}},6114:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode=typeof navigator=="undefined";let i=e.isNode?"node":navigator.userAgent,a=e.isNode?"node":navigator.platform;e.isFirefox=i.includes("Firefox"),e.isLegacyEdge=i.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(i),e.getSafariVersion=function(){if(!e.isSafari)return 0;let u=i.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),e.isIpad=a==="iPad",e.isIphone=a==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),e.isLinux=a.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(i)},6106:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortedList=void 0;let i=0;e.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(i=this._search(this._getKey(a),0,this._array.length-1),this._array.splice(i,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let u=this._getKey(a);if(u===void 0||(i=this._search(u,0,this._array.length-1),i===-1)||this._getKey(this._array[i])!==u)return!1;do if(this._array[i]===a)return this._array.splice(i,1),!0;while(++i<this._array.length&&this._getKey(this._array[i])===u);return!1}*getKeyIterator(a){if(this._array.length!==0&&(i=this._search(a,0,this._array.length-1),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===a))do yield this._array[i];while(++i<this._array.length&&this._getKey(this._array[i])===a)}forEachByKey(a,u){if(this._array.length!==0&&(i=this._search(a,0,this._array.length-1),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===a))do u(this._array[i]);while(++i<this._array.length&&this._getKey(this._array[i])===a)}values(){return this._array.values()}_search(a,u,f){if(f<u)return u;let l=Math.floor((u+f)/2),g=this._getKey(this._array[l]);if(g>a)return this._search(a,u,l-1);if(g<a)return this._search(a,l+1,f);for(;l>0&&this._getKey(this._array[l-1])===a;)l--;return l}}},7226:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncedIdleTask=e.IdleTaskQueue=e.PriorityTaskQueue=void 0;let a=i(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let v=0,p=0,r=g.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),p=Math.max(v,p),d=g.timeRemaining(),1.5*p>d)return r-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-v))}ms`),void this._start();r=d}this.clear()}}class f extends u{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){let v=Date.now()+g;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}e.PriorityTaskQueue=f,e.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(l){return requestIdleCallback(l)}_cancelCallback(l){cancelIdleCallback(l)}}:f,e.DebouncedIdleTask=class{constructor(){this._queue=new e.IdleTaskQueue}set(l){this._queue.clear(),this._queue.enqueue(l)}flush(){this._queue.flush()}}},9282:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateWindowsModeWrappedState=void 0;let a=i(643);e.updateWindowsModeWrappedState=function(u){let f=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),l=f==null?void 0:f.get(u.cols-1),g=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);g&&l&&(g.isWrapped=l[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&l[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){let f=new i;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}e.AttributeData=i;class a{constructor(f=0,l=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=l}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}e.ExtendedAttrs=a},9092:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferStringIterator=e.Buffer=e.MAX_BUFFER_SIZE=void 0;let a=i(6349),u=i(8437),f=i(511),l=i(643),g=i(4634),v=i(4863),p=i(7116),r=i(3734),d=i(7226);e.MAX_BUFFER_SIZE=4294967295,e.Buffer=class{constructor(h,m,b){this._hasScrollback=h,this._optionsService=m,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,m){return new u.BufferLine(this._bufferService.cols,this.getNullCell(h),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;let m=h+this._optionsService.rawOptions.scrollback;return m>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:m}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=u.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,m){let b=this.getNullCell(u.DEFAULT_ATTR_DATA),S=0,C=this._getCorrectBufferLength(m);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<h)for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(h,b);let y=0;if(this._rows<m)for(let w=this._rows;w<m;w++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new u.BufferLine(h,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(h,b)));else for(let w=this._rows;w>m;w--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){let w=this.lines.length-C;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=C}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,m-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(h,m),this._cols>h))for(let y=0;y<this.lines.length;y++)S+=+this.lines.get(y).resize(h,b);this._cols=h,this._rows=m,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return h}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,m){this._cols!==h&&(h>this._cols?this._reflowLarger(h,m):this._reflowSmaller(h,m))}_reflowLarger(h,m){let b=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(b.length>0){let S=(0,g.reflowLargerCreateNewLayout)(this.lines,b);(0,g.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(h,m,S.countRemoved)}}_reflowLargerAdjustViewport(h,m,b){let S=this.getNullCell(u.DEFAULT_ATTR_DATA),C=b;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new u.BufferLine(h,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(h,m){let b=this.getNullCell(u.DEFAULT_ATTR_DATA),S=[],C=0;for(let y=this.lines.length-1;y>=0;y--){let w=this.lines.get(y);if(!w||!w.isWrapped&&w.getTrimmedLength()<=h)continue;let E=[w];for(;w.isWrapped&&y>0;)w=this.lines.get(--y),E.unshift(w);let k=this.ybase+this.y;if(k>=y&&k<y+E.length)continue;let R=E[E.length-1].getTrimmedLength(),T=(0,g.reflowSmallerGetNewLineLengths)(E,this._cols,h),B=T.length-E.length,H;H=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);let F=[];for(let z=0;z<B;z++){let q=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);F.push(q)}F.length>0&&(S.push({start:y+E.length+C,newLines:F}),C+=F.length),E.push(...F);let x=T.length-1,L=T[x];L===0&&(x--,L=T[x]);let O=E.length-B-1,P=R;for(;O>=0;){let z=Math.min(P,L);if(E[x]===void 0)break;if(E[x].copyCellsFrom(E[O],P-z,L-z,z,!0),L-=z,L===0&&(x--,L=T[x]),P-=z,P===0){O--;let q=Math.max(O,0);P=(0,g.getWrappedLineTrimmedLength)(E,q,this._cols)}}for(let z=0;z<E.length;z++)T[z]<h&&E[z].setCell(T[z],b);let N=B-H;for(;N-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+m-1)}if(S.length>0){let y=[],w=[];for(let x=0;x<this.lines.length;x++)w.push(this.lines.get(x));let E=this.lines.length,k=E-1,R=0,T=S[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let B=0;for(let x=Math.min(this.lines.maxLength-1,E+C-1);x>=0;x--)if(T&&T.start>k+B){for(let L=T.newLines.length-1;L>=0;L--)this.lines.set(x--,T.newLines[L]);x++,y.push({index:k+1,amount:T.newLines.length}),B+=T.newLines.length,T=S[++R]}else this.lines.set(x,w[k--]);let H=0;for(let x=y.length-1;x>=0;x--)y[x].index+=H,this.lines.onInsertEmitter.fire(y[x]),H+=y[x].amount;let F=Math.max(0,E+C-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}stringIndexToBufferIndex(h,m,b=!1){for(;m;){let S=this.lines.get(h);if(!S)return[-1,-1];let C=b?S.getTrimmedLength():S.length;for(let y=0;y<C;++y)if(S.get(y)[l.CHAR_DATA_WIDTH_INDEX]&&(m-=S.get(y)[l.CHAR_DATA_CHAR_INDEX].length||1),m<0)return[h,y];h++}return[h,0]}translateBufferLineToString(h,m,b=0,S){let C=this.lines.get(h);return C?C.translateToString(m,b,S):""}getWrappedRangeForLine(h){let m=h,b=h;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:m,last:b}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===h&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){let m=new v.Marker(h);return this.markers.push(m),m.register(this.lines.onTrim(b=>{m.line-=b,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(b=>{m.line>=b.index&&(m.line+=b.amount)})),m.register(this.lines.onDelete(b=>{m.line>=b.index&&m.line<b.index+b.amount&&m.dispose(),m.line>b.index&&(m.line-=b.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}iterator(h,m,b,S,C){return new _(this,h,m,b,S,C)}};class _{constructor(m,b,S=0,C=m.lines.length,y=0,w=0){this._buffer=m,this._trimRight=b,this._startIndex=S,this._endIndex=C,this._startOverscan=y,this._endOverscan=w,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){let m=this._buffer.getWrappedRangeForLine(this._current);m.first<this._startIndex-this._startOverscan&&(m.first=this._startIndex-this._startOverscan),m.last>this._endIndex+this._endOverscan&&(m.last=this._endIndex+this._endOverscan),m.first=Math.max(m.first,0),m.last=Math.min(m.last,this._buffer.lines.length);let b="";for(let S=m.first;S<=m.last;++S)b+=this._buffer.translateBufferLineToString(S,this._trimRight);return this._current=m.last+1,{range:m,content:b}}}e.BufferStringIterator=_},8437:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLine=e.DEFAULT_ATTR_DATA=void 0;let a=i(482),u=i(643),f=i(511),l=i(3734);e.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let g=0;class v{constructor(r,d,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);let h=d||f.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let m=0;m<r;++m)this.setCell(m,h);this.length=r}get(r){let d=this._data[3*r+0],_=2097151&d;return[this._data[3*r+1],2097152&d?this._combined[r]:_?(0,a.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):_]}set(r,d){this._data[3*r+1]=d[u.CHAR_DATA_ATTR_INDEX],d[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=d[1],this._data[3*r+0]=2097152|r|d[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&d}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r]:2097151&d?(0,a.stringFromCodePoint)(2097151&d):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,d){return g=3*r,d.content=this._data[g+0],d.fg=this._data[g+1],d.bg=this._data[g+2],2097152&d.content&&(d.combinedData=this._combined[r]),268435456&d.bg&&(d.extended=this._extendedAttrs[r]),d}setCell(r,d){2097152&d.content&&(this._combined[r]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[r]=d.extended),this._data[3*r+0]=d.content,this._data[3*r+1]=d.fg,this._data[3*r+2]=d.bg}setCellFromCodePoint(r,d,_,h,m,b){268435456&m&&(this._extendedAttrs[r]=b),this._data[3*r+0]=d|_<<22,this._data[3*r+1]=h,this._data[3*r+2]=m}addCodepointToCell(r,d){let _=this._data[3*r+0];2097152&_?this._combined[r]+=(0,a.stringFromCodePoint)(d):(2097151&_?(this._combined[r]=(0,a.stringFromCodePoint)(2097151&_)+(0,a.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|4194304,this._data[3*r+0]=_)}insertCells(r,d,_,h){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length-r){let m=new f.CellData;for(let b=this.length-r-d-1;b>=0;--b)this.setCell(r+d+b,this.loadCell(r+b,m));for(let b=0;b<d;++b)this.setCell(r+b,_)}else for(let m=r;m<this.length;++m)this.setCell(m,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs)}deleteCells(r,d,_,h){if(r%=this.length,d<this.length-r){let m=new f.CellData;for(let b=0;b<this.length-r-d;++b)this.setCell(r+b,this.loadCell(r+d+b,m));for(let b=this.length-d;b<this.length;++b)this.setCell(b,_)}else for(let m=r;m<this.length;++m)this.setCell(m,_);r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodePoint(r,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs)}replaceCells(r,d,_,h,m=!1){if(m)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs);r<d&&r<this.length;)this.isProtected(r)||this.setCell(r,_),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs);r<d&&r<this.length;)this.setCell(r++,_)}resize(r,d){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let h=new Uint32Array(_);h.set(this._data),this._data=h}for(let h=this.length;h<r;++h)this.setCell(h,d)}else{this._data=this._data.subarray(0,_);let h=Object.keys(this._combined);for(let b=0;b<h.length;b++){let S=parseInt(h[b],10);S>=r&&delete this._combined[S]}let m=Object.keys(this._extendedAttrs);for(let b=0;b<m.length;b++){let S=parseInt(m[b],10);S>=r&&delete this._extendedAttrs[S]}}return this.length=r,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,d=!1){if(d)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,r);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(let d in r._combined)this._combined[d]=r._combined[d];this._extendedAttrs={};for(let d in r._extendedAttrs)this._extendedAttrs[d]=r._extendedAttrs[d];this.isWrapped=r.isWrapped}clone(){let r=new v(0);r._data=new Uint32Array(this._data),r.length=this.length;for(let d in this._combined)r._combined[d]=this._combined[d];for(let d in this._extendedAttrs)r._extendedAttrs[d]=this._extendedAttrs[d];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,d,_,h,m){let b=r._data;if(m)for(let C=h-1;C>=0;C--){for(let y=0;y<3;y++)this._data[3*(_+C)+y]=b[3*(d+C)+y];268435456&b[3*(d+C)+2]&&(this._extendedAttrs[_+C]=r._extendedAttrs[d+C])}else for(let C=0;C<h;C++){for(let y=0;y<3;y++)this._data[3*(_+C)+y]=b[3*(d+C)+y];268435456&b[3*(d+C)+2]&&(this._extendedAttrs[_+C]=r._extendedAttrs[d+C])}let S=Object.keys(r._combined);for(let C=0;C<S.length;C++){let y=parseInt(S[C],10);y>=d&&(this._combined[y-d+_]=r._combined[y])}}translateToString(r=!1,d=0,_=this.length){r&&(_=Math.min(_,this.getTrimmedLength()));let h="";for(;d<_;){let m=this._data[3*d+0],b=2097151&m;h+=2097152&m?this._combined[d]:b?(0,a.stringFromCodePoint)(b):u.WHITESPACE_CELL_CHAR,d+=m>>22||1}return h}}e.BufferLine=v},4841:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeLength=void 0,e.getRangeLength=function(i,a){if(i.start.y>i.end.y)throw new Error(`Buffer range end (${i.end.x}, ${i.end.y}) cannot be before start (${i.start.x}, ${i.start.y})`);return a*(i.end.y-i.start.y)+(i.end.x-i.start.x+1)}},4634:(o,e)=>{function i(a,u,f){if(u===a.length-1)return a[u].getTrimmedLength();let l=!a[u].hasContent(f-1)&&a[u].getWidth(f-1)===1,g=a[u+1].getWidth(0)===2;return l&&g?f-1:f}Object.defineProperty(e,"__esModule",{value:!0}),e.getWrappedLineTrimmedLength=e.reflowSmallerGetNewLineLengths=e.reflowLargerApplyNewLayout=e.reflowLargerCreateNewLayout=e.reflowLargerGetLinesToRemove=void 0,e.reflowLargerGetLinesToRemove=function(a,u,f,l,g){let v=[];for(let p=0;p<a.length-1;p++){let r=p,d=a.get(++r);if(!d.isWrapped)continue;let _=[a.get(p)];for(;r<a.length&&d.isWrapped;)_.push(d),d=a.get(++r);if(l>=p&&l<r){p+=_.length-1;continue}let h=0,m=i(_,h,u),b=1,S=0;for(;b<_.length;){let y=i(_,b,u),w=y-S,E=f-m,k=Math.min(w,E);_[h].copyCellsFrom(_[b],S,m,k,!1),m+=k,m===f&&(h++,m=0),S+=k,S===y&&(b++,S=0),m===0&&h!==0&&_[h-1].getWidth(f-1)===2&&(_[h].copyCellsFrom(_[h-1],f-1,m++,1,!1),_[h-1].setCell(f-1,g))}_[h].replaceCells(m,f,g);let C=0;for(let y=_.length-1;y>0&&(y>h||_[y].getTrimmedLength()===0);y--)C++;C>0&&(v.push(p+_.length-C),v.push(C)),p+=_.length-1}return v},e.reflowLargerCreateNewLayout=function(a,u){let f=[],l=0,g=u[l],v=0;for(let p=0;p<a.length;p++)if(g===p){let r=u[++l];a.onDeleteEmitter.fire({index:p-v,amount:r}),p+=r-1,v+=r,g=u[++l]}else f.push(p);return{layout:f,countRemoved:v}},e.reflowLargerApplyNewLayout=function(a,u){let f=[];for(let l=0;l<u.length;l++)f.push(a.get(u[l]));for(let l=0;l<f.length;l++)a.set(l,f[l]);a.length=u.length},e.reflowSmallerGetNewLineLengths=function(a,u,f){let l=[],g=a.map((d,_)=>i(a,_,u)).reduce((d,_)=>d+_),v=0,p=0,r=0;for(;r<g;){if(g-r<f){l.push(g-r);break}v+=f;let d=i(a,p,u);v>d&&(v-=d,p++);let _=a[p].getWidth(v-1)===2;_&&v--;let h=_?f-1:f;l.push(h),r+=h}return l},e.getWrappedLineTrimmedLength=i},5295:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferSet=void 0;let a=i(9092),u=i(8460),f=i(844);class l extends f.Disposable{constructor(v,p){super(),this._optionsService=v,this._bufferService=p,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(v,p){this._normal.resize(v,p),this._alt.resize(v,p),this.setupTabStops(v)}setupTabStops(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)}}e.BufferSet=l},511:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;let a=i(482),u=i(643),f=i(3734);class l extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(v){let p=new l;return p.setFromCharData(v),p}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let p=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)p=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){let r=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){let d=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(r-55296)+d-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:p=!0}else p=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;p&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.CellData=l},643:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=0,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},4863:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;let a=i(8460),u=i(844);class f{constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}e.Marker=f,f._nextId=1},7116:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CHARSET=e.CHARSETS=void 0,e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},e.CHARSETS.A={"#":"\xA3"},e.CHARSETS.B=void 0,e.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},e.CHARSETS.C=e.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},e.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},e.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},e.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},e.CHARSETS.E=e.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},e.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},e.CHARSETS.H=e.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(o,e)=>{var i,a;Object.defineProperty(e,"__esModule",{value:!0}),e.C1_ESCAPED=e.C1=e.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(i=e.C0||(e.C0={})),(a=e.C1||(e.C1={})).PAD="\x80",a.HOP="\x81",a.BPH="\x82",a.NBH="\x83",a.IND="\x84",a.NEL="\x85",a.SSA="\x86",a.ESA="\x87",a.HTS="\x88",a.HTJ="\x89",a.VTS="\x8A",a.PLD="\x8B",a.PLU="\x8C",a.RI="\x8D",a.SS2="\x8E",a.SS3="\x8F",a.DCS="\x90",a.PU1="\x91",a.PU2="\x92",a.STS="\x93",a.CCH="\x94",a.MW="\x95",a.SPA="\x96",a.EPA="\x97",a.SOS="\x98",a.SGCI="\x99",a.SCI="\x9A",a.CSI="\x9B",a.ST="\x9C",a.OSC="\x9D",a.PM="\x9E",a.APC="\x9F",(e.C1_ESCAPED||(e.C1_ESCAPED={})).ST=`${i.ESC}\\`},7399:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateKeyboardEvent=void 0;let a=i(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(f,l,g,v){let p={type:0,cancel:!1,key:void 0},r=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?p.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?p.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?p.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(p.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:if(f.altKey){p.key=a.C0.ESC+a.C0.DEL;break}p.key=a.C0.DEL;break;case 9:if(f.shiftKey){p.key=a.C0.ESC+"[Z";break}p.key=a.C0.HT,p.cancel=!0;break;case 13:p.key=f.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,p.cancel=!0;break;case 27:p.key=a.C0.ESC,f.altKey&&(p.key=a.C0.ESC+a.C0.ESC),p.cancel=!0;break;case 37:if(f.metaKey)break;r?(p.key=a.C0.ESC+"[1;"+(r+1)+"D",p.key===a.C0.ESC+"[1;3D"&&(p.key=a.C0.ESC+(g?"b":"[1;5D"))):p.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(f.metaKey)break;r?(p.key=a.C0.ESC+"[1;"+(r+1)+"C",p.key===a.C0.ESC+"[1;3C"&&(p.key=a.C0.ESC+(g?"f":"[1;5C"))):p.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(f.metaKey)break;r?(p.key=a.C0.ESC+"[1;"+(r+1)+"A",g||p.key!==a.C0.ESC+"[1;3A"||(p.key=a.C0.ESC+"[1;5A")):p.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(f.metaKey)break;r?(p.key=a.C0.ESC+"[1;"+(r+1)+"B",g||p.key!==a.C0.ESC+"[1;3B"||(p.key=a.C0.ESC+"[1;5B")):p.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(p.key=a.C0.ESC+"[2~");break;case 46:p.key=r?a.C0.ESC+"[3;"+(r+1)+"~":a.C0.ESC+"[3~";break;case 36:p.key=r?a.C0.ESC+"[1;"+(r+1)+"H":l?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:p.key=r?a.C0.ESC+"[1;"+(r+1)+"F":l?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:f.shiftKey?p.type=2:f.ctrlKey?p.key=a.C0.ESC+"[5;"+(r+1)+"~":p.key=a.C0.ESC+"[5~";break;case 34:f.shiftKey?p.type=3:f.ctrlKey?p.key=a.C0.ESC+"[6;"+(r+1)+"~":p.key=a.C0.ESC+"[6~";break;case 112:p.key=r?a.C0.ESC+"[1;"+(r+1)+"P":a.C0.ESC+"OP";break;case 113:p.key=r?a.C0.ESC+"[1;"+(r+1)+"Q":a.C0.ESC+"OQ";break;case 114:p.key=r?a.C0.ESC+"[1;"+(r+1)+"R":a.C0.ESC+"OR";break;case 115:p.key=r?a.C0.ESC+"[1;"+(r+1)+"S":a.C0.ESC+"OS";break;case 116:p.key=r?a.C0.ESC+"[15;"+(r+1)+"~":a.C0.ESC+"[15~";break;case 117:p.key=r?a.C0.ESC+"[17;"+(r+1)+"~":a.C0.ESC+"[17~";break;case 118:p.key=r?a.C0.ESC+"[18;"+(r+1)+"~":a.C0.ESC+"[18~";break;case 119:p.key=r?a.C0.ESC+"[19;"+(r+1)+"~":a.C0.ESC+"[19~";break;case 120:p.key=r?a.C0.ESC+"[20;"+(r+1)+"~":a.C0.ESC+"[20~";break;case 121:p.key=r?a.C0.ESC+"[21;"+(r+1)+"~":a.C0.ESC+"[21~";break;case 122:p.key=r?a.C0.ESC+"[23;"+(r+1)+"~":a.C0.ESC+"[23~";break;case 123:p.key=r?a.C0.ESC+"[24;"+(r+1)+"~":a.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(g&&!v||!f.altKey||f.metaKey)!g||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?p.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(p.key=a.C0.US),f.key==="@"&&(p.key=a.C0.NUL)):f.keyCode===65&&(p.type=1);else{let d=u[f.keyCode],_=d==null?void 0:d[f.shiftKey?1:0];if(_)p.key=a.C0.ESC+_;else if(f.keyCode>=65&&f.keyCode<=90){let h=f.ctrlKey?f.keyCode-64:f.keyCode+32,m=String.fromCharCode(h);f.shiftKey&&(m=m.toUpperCase()),p.key=a.C0.ESC+m}else if(f.keyCode===32)p.key=a.C0.ESC+(f.ctrlKey?a.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let h=f.code.slice(3,4);f.shiftKey||(h=h.toLowerCase()),p.key=a.C0.ESC+h,p.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?p.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?p.key=a.C0.NUL:f.keyCode>=51&&f.keyCode<=55?p.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?p.key=a.C0.DEL:f.keyCode===219?p.key=a.C0.ESC:f.keyCode===220?p.key=a.C0.FS:f.keyCode===221&&(p.key=a.C0.GS)}return p}},482:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(i){return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)},e.utf32ToString=function(i,a=0,u=i.length){let f="";for(let l=a;l<u;++l){let g=i[l];g>65535?(g-=65536,f+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):f+=String.fromCharCode(g)}return f},e.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(i,a){let u=i.length;if(!u)return 0;let f=0,l=0;if(this._interim){let g=i.charCodeAt(l++);56320<=g&&g<=57343?a[f++]=1024*(this._interim-55296)+g-56320+65536:(a[f++]=this._interim,a[f++]=g),this._interim=0}for(let g=l;g<u;++g){let v=i.charCodeAt(g);if(55296<=v&&v<=56319){if(++g>=u)return this._interim=v,f;let p=i.charCodeAt(g);56320<=p&&p<=57343?a[f++]=1024*(v-55296)+p-56320+65536:(a[f++]=v,a[f++]=p)}else v!==65279&&(a[f++]=v)}return f}},e.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(i,a){let u=i.length;if(!u)return 0;let f,l,g,v,p=0,r=0,d=0;if(this.interim[0]){let m=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,C=0;for(;(S=63&this.interim[++C])&&C<4;)b<<=6,b|=S;let y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=y-C;for(;d<w;){if(d>=u)return 0;if(S=i[d++],(192&S)!=128){d--,m=!0;break}this.interim[C++]=S,b<<=6,b|=63&S}m||(y===2?b<128?d--:a[p++]=b:y===3?b<2048||b>=55296&&b<=57343||b===65279||(a[p++]=b):b<65536||b>1114111||(a[p++]=b)),this.interim.fill(0)}let _=u-4,h=d;for(;h<u;){for(;!(!(h<_)||128&(f=i[h])||128&(l=i[h+1])||128&(g=i[h+2])||128&(v=i[h+3]));)a[p++]=f,a[p++]=l,a[p++]=g,a[p++]=v,h+=4;if(f=i[h++],f<128)a[p++]=f;else if((224&f)==192){if(h>=u)return this.interim[0]=f,p;if(l=i[h++],(192&l)!=128){h--;continue}if(r=(31&f)<<6|63&l,r<128){h--;continue}a[p++]=r}else if((240&f)==224){if(h>=u)return this.interim[0]=f,p;if(l=i[h++],(192&l)!=128){h--;continue}if(h>=u)return this.interim[0]=f,this.interim[1]=l,p;if(g=i[h++],(192&g)!=128){h--;continue}if(r=(15&f)<<12|(63&l)<<6|63&g,r<2048||r>=55296&&r<=57343||r===65279)continue;a[p++]=r}else if((248&f)==240){if(h>=u)return this.interim[0]=f,p;if(l=i[h++],(192&l)!=128){h--;continue}if(h>=u)return this.interim[0]=f,this.interim[1]=l,p;if(g=i[h++],(192&g)!=128){h--;continue}if(h>=u)return this.interim[0]=f,this.interim[1]=l,this.interim[2]=g,p;if(v=i[h++],(192&v)!=128){h--;continue}if(r=(7&f)<<18|(63&l)<<12|(63&g)<<6|63&v,r<65536||r>1114111)continue;a[p++]=r}}return p}}},225:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV6=void 0;let i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;e.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let f=0;f<i.length;++f)u.fill(0,i[f][0],i[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?u[f]:function(l,g){let v,p=0,r=g.length-1;if(l<g[0][0]||l>g[r][1])return!1;for(;r>=p;)if(v=p+r>>1,l>g[v][1])p=v+1;else{if(!(l<g[v][0]))return!0;r=v-1}return!1}(f,a)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteBuffer=void 0;let a=i(8460),u=i(844);class f extends u.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,v){if(v!==void 0&&this._syncCalls>v)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let p;for(this._isSyncWriting=!0;p=this._writeBuffer.shift();){this._action(p);let r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,v){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v)}_innerWrite(g=0,v=!0){let p=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let r=this._writeBuffer[this._bufferOffset],d=this._action(r,v);if(d){let h=m=>Date.now()-p>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(p,m);return void d.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}e.WriteBuffer=f},5941:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toRgbString=e.parseColor=void 0;let i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function u(f,l){let g=f.toString(16),v=g.length<2?"0"+g:g;switch(l){case 4:return g[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}e.parseColor=function(f){if(!f)return;let l=f.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);let g=i.exec(l);if(g){let v=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/v*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/v*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/v*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),a.exec(l)&&[3,6,9,12].includes(l.length))){let g=l.length/3,v=[0,0,0];for(let p=0;p<3;++p){let r=parseInt(l.slice(g*p,g*p+g),16);v[p]=g===1?r<<4:g===2?r:g===3?r>>4:r>>8}return v}},e.toRgbString=function(f,l=16){let[g,v,p]=f;return`rgb:${u(g,l)}/${u(v,l)}/${u(p,l)}`}},5770:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=void 0,e.PAYLOAD_LIMIT=1e7},6351:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DcsHandler=e.DcsParser=void 0;let a=i(482),u=i(8742),f=i(5770),l=[];e.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}registerHandler(v,p){this._handlers[v]===void 0&&(this._handlers[v]=[]);let r=this._handlers[v];return r.push(p),{dispose:()=>{let d=r.indexOf(p);d!==-1&&r.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}reset(){if(this._active.length)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0}hook(v,p){if(this.reset(),this._ident=v,this._active=this._handlers[v]||l,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(p);else this._handlerFb(this._ident,"HOOK",p)}put(v,p,r){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,p,r);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(v,p,r))}unhook(v,p=!0){if(this._active.length){let r=!1,d=this._active.length-1,_=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,r=p,_=this._stack.fallThrough,this._stack.paused=!1),!_&&r===!1){for(;d>=0&&(r=this._active[d].unhook(v),r!==!0);d--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,r;d--}for(;d>=0;d--)if(r=this._active[d].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",v);this._active=l,this._ident=0}};let g=new u.Params;g.addParam(0),e.DcsHandler=class{constructor(v){this._handler=v,this._data="",this._params=g,this._hitLimit=!1}hook(v){this._params=v.length>1||v.params[0]?v.clone():g,this._data="",this._hitLimit=!1}put(v,p,r){this._hitLimit||(this._data+=(0,a.utf32ToString)(v,p,r),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(v){let p=!1;if(this._hitLimit)p=!1;else if(v&&(p=this._handler(this._data,this._params),p instanceof Promise))return p.then(r=>(this._params=g,this._data="",this._hitLimit=!1,r));return this._params=g,this._data="",this._hitLimit=!1,p}}},2015:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EscapeSequenceParser=e.VT500_TRANSITION_TABLE=e.TransitionTable=void 0;let a=i(844),u=i(8742),f=i(6242),l=i(6351);class g{constructor(d){this.table=new Uint8Array(d)}setDefault(d,_){this.table.fill(d<<4|_)}add(d,_,h,m){this.table[_<<8|d]=h<<4|m}addMany(d,_,h,m){for(let b=0;b<d.length;b++)this.table[_<<8|d[b]]=h<<4|m}}e.TransitionTable=g;let v=160;e.VT500_TRANSITION_TABLE=function(){let r=new g(4095),d=Array.apply(null,Array(256)).map((C,y)=>y),_=(C,y)=>d.slice(C,y),h=_(32,127),m=_(0,24);m.push(25),m.push.apply(m,_(28,32));let b=_(0,14),S;for(S in r.setDefault(1,0),r.addMany(h,0,2,0),b)r.addMany([24,26,153,154],S,3,0),r.addMany(_(128,144),S,3,0),r.addMany(_(144,152),S,3,0),r.add(156,S,0,0),r.add(27,S,11,1),r.add(157,S,4,8),r.addMany([152,158,159],S,0,7),r.add(155,S,11,3),r.add(144,S,11,9);return r.addMany(m,0,3,0),r.addMany(m,1,3,1),r.add(127,1,0,1),r.addMany(m,8,0,8),r.addMany(m,3,3,3),r.add(127,3,0,3),r.addMany(m,4,3,4),r.add(127,4,0,4),r.addMany(m,6,3,6),r.addMany(m,5,3,5),r.add(127,5,0,5),r.addMany(m,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(h,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(_(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(h,7,0,7),r.addMany(m,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(_(64,127),3,7,0),r.addMany(_(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(_(48,60),4,8,4),r.addMany(_(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(_(32,64),6,0,6),r.add(127,6,0,6),r.addMany(_(64,127),6,0,0),r.addMany(_(32,48),3,9,5),r.addMany(_(32,48),5,9,5),r.addMany(_(48,64),5,0,6),r.addMany(_(64,127),5,7,0),r.addMany(_(32,48),4,9,5),r.addMany(_(32,48),1,9,2),r.addMany(_(32,48),2,9,2),r.addMany(_(48,127),2,10,0),r.addMany(_(48,80),1,10,0),r.addMany(_(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(_(96,127),1,10,0),r.add(80,1,11,9),r.addMany(m,9,0,9),r.add(127,9,0,9),r.addMany(_(28,32),9,0,9),r.addMany(_(32,48),9,9,12),r.addMany(_(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(m,11,0,11),r.addMany(_(32,128),11,0,11),r.addMany(_(28,32),11,0,11),r.addMany(m,10,0,10),r.add(127,10,0,10),r.addMany(_(28,32),10,0,10),r.addMany(_(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(_(32,48),10,9,12),r.addMany(m,12,0,12),r.add(127,12,0,12),r.addMany(_(28,32),12,0,12),r.addMany(_(32,48),12,9,12),r.addMany(_(48,64),12,0,11),r.addMany(_(64,127),12,12,13),r.addMany(_(64,127),10,12,13),r.addMany(_(64,127),9,12,13),r.addMany(m,13,13,13),r.addMany(h,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(v,0,2,0),r.add(v,8,5,8),r.add(v,6,0,6),r.add(v,11,0,11),r.add(v,13,13,13),r}();class p extends a.Disposable{constructor(d=e.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,h,m)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,h)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new l.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,_=[64,126]){let h=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=d.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<d.intermediates.length;++b){let S=d.intermediates.charCodeAt(b);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let m=d.final.charCodeAt(0);if(_[0]>m||m>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return h<<=8,h|=m,h}identToString(d){let _=[];for(;d;)_.push(String.fromCharCode(255&d)),d>>=8;return _.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,_){let h=this._identifier(d,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let m=this._escHandlers[h];return m.push(_),{dispose:()=>{let b=m.indexOf(_);b!==-1&&m.splice(b,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,_){this._executeHandlers[d.charCodeAt(0)]=_}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,_){let h=this._identifier(d);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let m=this._csiHandlers[h];return m.push(_),{dispose:()=>{let b=m.indexOf(_);b!==-1&&m.splice(b,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,_){return this._dcsParser.registerHandler(this._identifier(d),_)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,_){return this._oscParser.registerHandler(d,_)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,_,h,m,b){this._parseStack.state=d,this._parseStack.handlers=_,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=b}parse(d,_,h){let m,b=0,S=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let y=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&w>-1){for(;w>=0&&(m=y[w](this._params),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&w>-1){for(;w>=0&&(m=y[w](),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 6:if(b=d[this._parseStack.chunkPos],m=this._dcsParser.unhook(b!==24&&b!==26,h),m)return m;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=d[this._parseStack.chunkPos],m=this._oscParser.end(b!==24&&b!==26,h),m)return m;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let y=C;y<_;++y){switch(b=d[y],S=this._transitions.table[this.currentState<<8|(b<160?b:v)],S>>4){case 2:for(let T=y+1;;++T){if(T>=_||(b=d[T])<32||b>126&&b<v){this._printHandler(d,y,T),y=T-1;break}if(++T>=_||(b=d[T])<32||b>126&&b<v){this._printHandler(d,y,T),y=T-1;break}if(++T>=_||(b=d[T])<32||b>126&&b<v){this._printHandler(d,y,T),y=T-1;break}if(++T>=_||(b=d[T])<32||b>126&&b<v){this._printHandler(d,y,T),y=T-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|b],E=w?w.length-1:-1;for(;E>=0&&(m=w[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,w,E,S,y),m;E<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++y<_&&(b=d[y])>47&&b<60);y--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let k=this._escHandlers[this._collect<<8|b],R=k?k.length-1:-1;for(;R>=0&&(m=k[R](),m!==!0);R--)if(m instanceof Promise)return this._preserveStack(4,k,R,S,y),m;R<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let T=y+1;;++T)if(T>=_||(b=d[T])===24||b===26||b===27||b>127&&b<v){this._dcsParser.put(d,y,T),y=T-1;break}break;case 14:if(m=this._dcsParser.unhook(b!==24&&b!==26),m)return this._preserveStack(6,[],0,S,y),m;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=y+1;;T++)if(T>=_||(b=d[T])<32||b>127&&b<v){this._oscParser.put(d,y,T),y=T-1;break}break;case 6:if(m=this._oscParser.end(b!==24&&b!==26),m)return this._preserveStack(5,[],0,S,y),m;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}e.EscapeSequenceParser=p},6242:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscHandler=e.OscParser=void 0;let a=i(5770),u=i(482),f=[];e.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(l,g){this._handlers[l]===void 0&&(this._handlers[l]=[]);let v=this._handlers[l];return v.push(g),{dispose:()=>{let p=v.indexOf(g);p!==-1&&v.splice(p,1)}}}clearHandler(l){this._handlers[l]&&delete this._handlers[l]}setHandlerFallback(l){this._handlerFb=l}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].start();else this._handlerFb(this._id,"START")}_put(l,g,v){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(l,g,v);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(l,g,v))}start(){this.reset(),this._state=1}put(l,g,v){if(this._state!==3){if(this._state===1)for(;g<v;){let p=l[g++];if(p===59){this._state=2,this._start();break}if(p<48||57<p)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+p-48}this._state===2&&v-g>0&&this._put(l,g,v)}}end(l,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let v=!1,p=this._active.length-1,r=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,v=g,r=this._stack.fallThrough,this._stack.paused=!1),!r&&v===!1){for(;p>=0&&(v=this._active[p].end(l),v!==!0);p--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,v;p--}for(;p>=0;p--)if(v=this._active[p].end(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",l);this._active=f,this._id=-1,this._state=0}}},e.OscHandler=class{constructor(l){this._handler=l,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(l,g,v){this._hitLimit||(this._data+=(0,u.utf32ToString)(l,g,v),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(l){let g=!1;if(this._hitLimit)g=!1;else if(l&&(g=this._handler(this._data),g instanceof Promise))return g.then(v=>(this._data="",this._hitLimit=!1,v));return this._data="",this._hitLimit=!1,g}}},8742:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Params=void 0;let i=2147483647;class a{constructor(f=32,l=32){if(this.maxLength=f,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(f){let l=new a;if(!f.length)return l;for(let g=Array.isArray(f[0])?1:0;g<f.length;++g){let v=f[g];if(Array.isArray(v))for(let p=0;p<v.length;++p)l.addSubParam(v[p]);else l.addParam(v)}return l}clone(){let f=new a(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){let f=[];for(let l=0;l<this.length;++l){f.push(this.params[l]);let g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&f.push(Array.prototype.slice.call(this._subParams,g,v))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>i?i:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>i?i:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){let l=this._subParamsIdx[f]>>8,g=255&this._subParamsIdx[f];return g-l>0?this._subParams.subarray(l,g):null}getSubParamsAll(){let f={};for(let l=0;l<this.length;++l){let g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&(f[l]=this._subParams.slice(g,v))}return f}addDigit(f){let l;if(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let g=this._digitIsSub?this._subParams:this.params,v=g[l-1];g[l-1]=~v?Math.min(10*v+f,i):f}}e.Params=a},5741:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddonManager=void 0,e.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let i=this._addons.length-1;i>=0;i--)this._addons[i].instance.dispose()}loadAddon(i,a){let u={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(u),a.dispose=()=>this._wrappedAddonDispose(u),a.activate(i)}_wrappedAddonDispose(i){if(i.isDisposed)return;let a=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===i){a=u;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");i.isDisposed=!0,i.dispose.apply(i.instance),this._addons.splice(a,1)}}},8771:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferApiView=void 0;let a=i(3785),u=i(511);e.BufferApiView=class{constructor(f,l){this._buffer=f,this.type=l}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){let l=this._buffer.lines.get(f);if(l)return new a.BufferLineApiView(l)}getNullCell(){return new u.CellData}}},3785:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLineApiView=void 0;let a=i(511);e.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,f){if(!(u<0||u>=this._line.length))return f?(this._line.loadCell(u,f),f):this._line.loadCell(u,new a.CellData)}translateToString(u,f,l){return this._line.translateToString(u,f,l)}}},8285:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferNamespaceApi=void 0;let a=i(8771),u=i(8460);e.BufferNamespaceApi=class{constructor(f){this._core=f,this._onBufferChange=new u.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ParserApi=void 0,e.ParserApi=class{constructor(i){this._core=i}registerCsiHandler(i,a){return this._core.registerCsiHandler(i,u=>a(u.toArray()))}addCsiHandler(i,a){return this.registerCsiHandler(i,a)}registerDcsHandler(i,a){return this._core.registerDcsHandler(i,(u,f)=>a(u,f.toArray()))}addDcsHandler(i,a){return this.registerDcsHandler(i,a)}registerEscHandler(i,a){return this._core.registerEscHandler(i,a)}addEscHandler(i,a){return this.registerEscHandler(i,a)}registerOscHandler(i,a){return this._core.registerOscHandler(i,a)}addOscHandler(i,a){return this.registerOscHandler(i,a)}}},7090:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeApi=void 0,e.UnicodeApi=class{constructor(i){this._core=i}register(i){this._core.unicodeService.register(i)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(i){this._core.unicodeService.activeVersion=i}}},744:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,b=arguments.length,S=b<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(b<3?m(S):b>3?m(d,_,S):m(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferService=e.MINIMUM_ROWS=e.MINIMUM_COLS=void 0;let f=i(2585),l=i(5295),g=i(8460),v=i(844);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1;let p=class extends v.Disposable{constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,e.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,e.MINIMUM_ROWS),this.buffers=this.register(new l.BufferSet(r,this))}get buffer(){return this.buffers.active}resize(r,d){this.cols=r,this.rows=d,this.buffers.resize(r,d),this._onResize.fire({cols:r,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,d=!1){let _=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===r.fg&&h.getBg(0)===r.bg||(h=_.getBlankLine(r,d),this._cachedBlankLine=h),h.isWrapped=d;let m=_.ybase+_.scrollTop,b=_.ybase+_.scrollBottom;if(_.scrollTop===0){let S=_.lines.isFull;b===_.lines.length-1?S?_.lines.recycle().copyFrom(h):_.lines.push(h.clone()):_.lines.splice(b+1,0,h.clone()),S?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let S=b-m+1;_.lines.shiftElements(m+1,S-1,-1),_.lines.set(b,h.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(r,d,_){let h=this.buffer;if(r<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else r+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+r,h.ybase),0),m!==h.ydisp&&(d||this._onScroll.fire(h.ydisp))}scrollPages(r){this.scrollLines(r*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(r){let d=r-this.buffer.ydisp;d!==0&&this.scrollLines(d)}};p=a([u(0,f.IOptionsService)],p),e.BufferService=p},7994:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharsetService=void 0,e.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(i){this.glevel=i,this.charset=this._charsets[i]}setgCharset(i,a){this._charsets[i]=a,this.glevel===i&&(this.charset=a)}}},1753:function(o,e,i){var a=this&&this.__decorate||function(h,m,b,S){var C,y=arguments.length,w=y<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,m,b,S);else for(var E=h.length-1;E>=0;E--)(C=h[E])&&(w=(y<3?C(w):y>3?C(m,b,w):C(m,b))||w);return y>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(h,m){return function(b,S){m(b,S,h)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreMouseService=void 0;let f=i(2585),l=i(8460),g=i(844),v={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function p(h,m){let b=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(b|=64,b|=h.action):(b|=3&h.button,4&h.button&&(b|=64),8&h.button&&(b|=128),h.action===32?b|=32:h.action!==0||m||(b|=3)),b}let r=String.fromCharCode,d={DEFAULT:h=>{let m=[p(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${r(m[0])}${r(m[1])}${r(m[2])}`},SGR:h=>{let m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${p(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{let m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${p(h,!0)};${h.x};${h.y}${m}`}},_=class extends g.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new l.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(v))this.addProtocol(b,v[b]);for(let b of Object.keys(d))this.addEncoding(b,d[b]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,b){if(b){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};_=a([u(0,f.IBufferService),u(1,f.ICoreService)],_),e.CoreMouseService=_},6975:function(o,e,i){var a=this&&this.__decorate||function(_,h,m,b){var S,C=arguments.length,y=C<3?h:b===null?b=Object.getOwnPropertyDescriptor(h,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(_,h,m,b);else for(var w=_.length-1;w>=0;w--)(S=_[w])&&(y=(C<3?S(y):C>3?S(h,m,y):S(h,m))||y);return C>3&&y&&Object.defineProperty(h,m,y),y},u=this&&this.__param||function(_,h){return function(m,b){h(m,b,_)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreService=void 0;let f=i(2585),l=i(8460),g=i(1439),v=i(844),p=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=class extends v.Disposable{constructor(_,h,m){super(),this._bufferService=_,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new l.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new l.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(p),this.decPrivateModes=(0,g.clone)(r)}reset(){this.modes=(0,g.clone)(p),this.decPrivateModes=(0,g.clone)(r)}triggerDataEvent(_,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(b=>b.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(_))}};d=a([u(0,f.IBufferService),u(1,f.ILogService),u(2,f.IOptionsService)],d),e.CoreService=d},9074:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecorationService=void 0;let a=i(8055),u=i(8460),f=i(844),l=i(6106),g=0,v=0;class p extends f.Disposable{constructor(){super(),this._decorations=new l.SortedList(_=>_==null?void 0:_.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>{for(let _ of this._decorations.values())this._onDecorationRemoved.fire(_);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(_){if(_.marker.isDisposed)return;let h=new r(_);if(h){let m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,h,m){var b,S,C;let y=0,w=0;for(let E of this._decorations.getKeyIterator(h))y=(b=E.options.x)!==null&&b!==void 0?b:0,w=y+((S=E.options.width)!==null&&S!==void 0?S:1),_>=y&&_<w&&(!m||((C=E.options.layer)!==null&&C!==void 0?C:"bottom")===m)&&(yield E)}forEachDecorationAtCell(_,h,m,b){this._decorations.forEachByKey(h,S=>{var C,y,w;g=(C=S.options.x)!==null&&C!==void 0?C:0,v=g+((y=S.options.width)!==null&&y!==void 0?y:1),_>=g&&_<v&&(!m||((w=S.options.layer)!==null&&w!==void 0?w:"bottom")===m)&&b(S)})}dispose(){for(let _ of this._decorations.values())this._onDecorationRemoved.fire(_);this.reset()}}e.DecorationService=p;class r extends f.Disposable{constructor(_){super(),this.options=_,this.isDisposed=!1,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationService=e.ServiceCollection=void 0;let a=i(2585),u=i(8343);class f{constructor(...g){this._entries=new Map;for(let[v,p]of g)this.set(v,p)}set(g,v){let p=this._entries.get(g);return this._entries.set(g,v),p}forEach(g){for(let[v,p]of this._entries.entries())g(v,p)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}e.ServiceCollection=f,e.InstantiationService=class{constructor(){this._services=new f,this._services.set(a.IInstantiationService,this)}setService(l,g){this._services.set(l,g)}getService(l){return this._services.get(l)}createInstance(l,...g){let v=(0,u.getServiceDependencies)(l).sort((d,_)=>d.index-_.index),p=[];for(let d of v){let _=this._services.get(d.id);if(!_)throw new Error(`[createInstance] ${l.name} depends on UNKNOWN service ${d.id}.`);p.push(_)}let r=v.length>0?v[0].index:g.length;if(g.length!==r)throw new Error(`[createInstance] First service dependency of ${l.name} at position ${r+1} conflicts with ${g.length} static arguments`);return new l(...g,...p)}}},7866:function(o,e,i){var a=this&&this.__decorate||function(p,r,d,_){var h,m=arguments.length,b=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(p,r,d,_);else for(var S=p.length-1;S>=0;S--)(h=p[S])&&(b=(m<3?h(b):m>3?h(r,d,b):h(r,d))||b);return m>3&&b&&Object.defineProperty(r,d,b),b},u=this&&this.__param||function(p,r){return function(d,_){r(d,_,p)}};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;let f=i(844),l=i(2585),g={debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF},v=class extends f.Disposable{constructor(p){super(),this._optionsService=p,this.logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(p){for(let r=0;r<p.length;r++)typeof p[r]=="function"&&(p[r]=p[r]())}_log(p,r,d){this._evalLazyOptionalParams(d),p.call(console,"xterm.js: "+r,...d)}debug(p,...r){this.logLevel<=l.LogLevelEnum.DEBUG&&this._log(console.log,p,r)}info(p,...r){this.logLevel<=l.LogLevelEnum.INFO&&this._log(console.info,p,r)}warn(p,...r){this.logLevel<=l.LogLevelEnum.WARN&&this._log(console.warn,p,r)}error(p,...r){this.logLevel<=l.LogLevelEnum.ERROR&&this._log(console.error,p,r)}};v=a([u(0,l.IOptionsService)],v),e.LogService=v},7302:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsService=e.DEFAULT_OPTIONS=void 0;let a=i(8460),u=i(6114),f=i(844);e.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let l=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends f.Disposable{constructor(p){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let r=Object.assign({},e.DEFAULT_OPTIONS);for(let d in p)if(d in r)try{let _=p[d];r[d]=this._sanitizeAndValidateOption(d,_)}catch(_){console.error(_)}this.rawOptions=r,this.options=Object.assign({},r),this._setupOptions()}onSpecificOptionChange(p,r){return this.onOptionChange(d=>{d===p&&r(this.rawOptions[p])})}onMultipleOptionChange(p,r){return this.onOptionChange(d=>{p.indexOf(d)!==-1&&r()})}_setupOptions(){let p=d=>{if(!(d in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},r=(d,_)=>{if(!(d in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);_=this._sanitizeAndValidateOption(d,_),this.rawOptions[d]!==_&&(this.rawOptions[d]=_,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let _={get:p.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this.options,d,_)}}_sanitizeAndValidateOption(p,r){switch(p){case"cursorStyle":if(r||(r=e.DEFAULT_OPTIONS[p]),!function(d){return d==="block"||d==="underline"||d==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${p}`);break;case"wordSeparator":r||(r=e.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=l.includes(r)?r:e.DEFAULT_OPTIONS[p];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${p} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${p} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${p} cannot be less than or equal to 0, value: ${r}`);case"rows":case"cols":if(!r&&r!==0)throw new Error(`${p} must be numeric, value: ${r}`)}return r}}e.OptionsService=g},2660:function(o,e,i){var a=this&&this.__decorate||function(g,v,p,r){var d,_=arguments.length,h=_<3?v:r===null?r=Object.getOwnPropertyDescriptor(v,p):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(g,v,p,r);else for(var m=g.length-1;m>=0;m--)(d=g[m])&&(h=(_<3?d(h):_>3?d(v,p,h):d(v,p))||h);return _>3&&h&&Object.defineProperty(v,p,h),h},u=this&&this.__param||function(g,v){return function(p,r){v(p,r,g)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkService=void 0;let f=i(2585),l=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){let v=this._bufferService.buffer;if(g.id===void 0){let m=v.addMarker(v.ybase+v.y),b={data:g,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(b,m)),this._dataByLinkId.set(b.id,b),b.id}let p=g,r=this._getEntryIdKey(p),d=this._entriesWithId.get(r);if(d)return this.addLineToLink(d.id,v.ybase+v.y),d.id;let _=v.addMarker(v.ybase+v.y),h={id:this._nextId++,key:this._getEntryIdKey(p),data:p,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(h,_)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(g,v){let p=this._dataByLinkId.get(g);if(p&&p.lines.every(r=>r.line!==v)){let r=this._bufferService.buffer.addMarker(v);p.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(p,r))}}getLinkData(g){var v;return(v=this._dataByLinkId.get(g))===null||v===void 0?void 0:v.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,v){let p=g.lines.indexOf(v);p!==-1&&(g.lines.splice(p,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};l=a([u(0,f.IBufferService)],l),e.OscLinkService=l},8343:(o,e)=>{function i(a,u,f){u.di$target===u?u.di$dependencies.push({id:a,index:f}):(u.di$dependencies=[{id:a,index:f}],u.di$target=u)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(a){return a.di$dependencies||[]},e.createDecorator=function(a){if(e.serviceRegistry.has(a))return e.serviceRegistry.get(a);let u=function(f,l,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(u,f,g)};return u.toString=()=>a,e.serviceRegistry.set(a,u),u}},2585:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOscLinkService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;let a=i(8343);var u;e.IBufferService=(0,a.createDecorator)("BufferService"),e.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),e.ICoreService=(0,a.createDecorator)("CoreService"),e.ICharsetService=(0,a.createDecorator)("CharsetService"),e.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(u=e.LogLevelEnum||(e.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",e.ILogService=(0,a.createDecorator)("LogService"),e.IOptionsService=(0,a.createDecorator)("OptionsService"),e.IOscLinkService=(0,a.createDecorator)("OscLinkService"),e.IUnicodeService=(0,a.createDecorator)("UnicodeService"),e.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeService=void 0;let a=i(8460),u=i(225);e.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let f=new u.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let l=0,g=f.length;for(let v=0;v<g;++v){let p=f.charCodeAt(v);if(55296<=p&&p<=56319){if(++v>=g)return l+this.wcwidth(p);let r=f.charCodeAt(v);56320<=r&&r<=57343?p=1024*(p-55296)+r-56320+65536:l+=this.wcwidth(r)}l+=this.wcwidth(p)}return l}}}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let e=n(3236),i=n(9042),a=n(7975),u=n(7090),f=n(5741),l=n(8285),g=["cols","rows"];o.Terminal=class{constructor(v){this._core=new e.Terminal(v),this._addonManager=new f.AddonManager,this._publicOptions=Object.assign({},this._core.options);let p=d=>this._core.options[d],r=(d,_)=>{this._checkReadonlyOptions(d),this._core.options[d]=_};for(let d in this._core.options){let _={get:p.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this._publicOptions,d,_)}}_checkReadonlyOptions(v){if(g.includes(v))throw new Error(`Option "${v}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new a.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new l.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let v=this._core.coreService.decPrivateModes,p="none";switch(this._core.coreMouseService.activeProtocol){case"X10":p="x10";break;case"VT200":p="vt200";break;case"DRAG":p="drag";break;case"ANY":p="any"}return{applicationCursorKeysMode:v.applicationCursorKeys,applicationKeypadMode:v.applicationKeypad,bracketedPasteMode:v.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:p,originMode:v.origin,reverseWraparoundMode:v.reverseWraparound,sendFocusMode:v.sendFocus,wraparoundMode:v.wraparound}}get options(){return this._publicOptions}set options(v){for(let p in v)this._publicOptions[p]=v[p]}blur(){this._core.blur()}focus(){this._core.focus()}resize(v,p){this._verifyIntegers(v,p),this._core.resize(v,p)}open(v){this._core.open(v)}attachCustomKeyEventHandler(v){this._core.attachCustomKeyEventHandler(v)}registerLinkProvider(v){return this._core.registerLinkProvider(v)}registerCharacterJoiner(v){return this._checkProposedApi(),this._core.registerCharacterJoiner(v)}deregisterCharacterJoiner(v){this._checkProposedApi(),this._core.deregisterCharacterJoiner(v)}registerMarker(v=0){return this._verifyIntegers(v),this._core.addMarker(v)}registerDecoration(v){var p,r,d;return this._checkProposedApi(),this._verifyPositiveIntegers((p=v.x)!==null&&p!==void 0?p:0,(r=v.width)!==null&&r!==void 0?r:0,(d=v.height)!==null&&d!==void 0?d:0),this._core.registerDecoration(v)}hasSelection(){return this._core.hasSelection()}select(v,p,r){this._verifyIntegers(v,p,r),this._core.select(v,p,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(v,p){this._verifyIntegers(v,p),this._core.selectLines(v,p)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(v){this._verifyIntegers(v),this._core.scrollLines(v)}scrollPages(v){this._verifyIntegers(v),this._core.scrollPages(v)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(v){this._verifyIntegers(v),this._core.scrollToLine(v)}clear(){this._core.clear()}write(v,p){this._core.write(v,p)}writeln(v,p){this._core.write(v),this._core.write(`\r
`,p)}paste(v){this._core.paste(v)}refresh(v,p){this._verifyIntegers(v,p),this._core.refresh(v,p)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(v){return this._addonManager.loadAddon(this,v)}static get strings(){return i}_verifyIntegers(...v){for(let p of v)if(p===1/0||isNaN(p)||p%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...v){for(let p of v)if(p&&(p===1/0||isNaN(p)||p%1!=0||p<0))throw new Error("This API only accepts positive integers")}}})(),c})()})});var _o=se((Hr,ds)=>{(function(t,s){typeof Hr=="object"&&typeof ds=="object"?ds.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Hr=="object"?Hr.FitAddon=s():t.FitAddon=s()})(self,function(){return(()=>{"use strict";var t={};return(()=>{var s=t;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let c=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(c._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,c=n._renderService.dimensions;if(c.css.cell.width===0||c.css.cell.height===0)return;let o=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,e=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(e.getPropertyValue("height")),a=Math.max(0,parseInt(e.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),f=i-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),l=a-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(l/c.css.cell.width)),rows:Math.max(1,Math.floor(f/c.css.cell.height))}}}})(),t})()})});var go=se((lr,fs)=>{(function(t,s){typeof lr=="object"&&typeof fs=="object"?fs.exports=s():typeof define=="function"&&define.amd?define([],s):typeof lr=="object"?lr.SerializeAddon=s():t.SerializeAddon=s()})(lr,function(){return(()=>{"use strict";var t={};return(()=>{var s=t;function n(f,l,g){return Math.max(l,Math.min(f,g))}Object.defineProperty(s,"__esModule",{value:!0}),s.HTMLSerializeHandler=s.SerializeAddon=void 0;class c{constructor(l){this._buffer=l}serialize(l){let g=this._buffer.getNullCell(),v=this._buffer.getNullCell(),p=g,r=l.start.x,d=l.end.x,_=l.start.y,h=l.end.y;this._beforeSerialize(d-r,r,d);for(let m=r;m<=d;m++){let b=this._buffer.getLine(m);if(b){let S=m!==l.start.x?0:_,C=m!==l.end.x?b.length:h;for(let y=S;y<C;y++){let w=b.getCell(y,p===g?v:g);w?(this._nextCell(w,p,m,y),p=w):console.warn(`Can't get cell at row=${m}, col=${y}`)}}this._rowEnd(m,m===d)}return this._afterSerialize(),this._serializeString()}_nextCell(l,g,v,p){}_rowEnd(l,g){}_beforeSerialize(l,g,v){}_afterSerialize(){}_serializeString(){return""}}function o(f,l){return f.getFgColorMode()===l.getFgColorMode()&&f.getFgColor()===l.getFgColor()}function e(f,l){return f.getBgColorMode()===l.getBgColorMode()&&f.getBgColor()===l.getBgColor()}function i(f,l){return f.isInverse()===l.isInverse()&&f.isBold()===l.isBold()&&f.isUnderline()===l.isUnderline()&&f.isBlink()===l.isBlink()&&f.isInvisible()===l.isInvisible()&&f.isItalic()===l.isItalic()&&f.isDim()===l.isDim()&&f.isStrikethrough()===l.isStrikethrough()}class a extends c{constructor(l,g){super(l),this._terminal=g,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(l,g,v){this._allRows=new Array(l),this._lastContentCursorRow=g,this._lastCursorRow=g,this._firstRow=g}_rowEnd(l,g){var v;this._nullCellCount>0&&!e(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let p="";if(!g){l-this._firstRow>=this._terminal.rows&&((v=this._buffer.getLine(this._cursorStyleRow))===null||v===void 0||v.getCell(this._cursorStyleCol,this._backgroundCell));let r=this._buffer.getLine(l),d=this._buffer.getLine(l+1);if(d.isWrapped){p="";let _=r.getCell(r.length-1,this._thisRowLastChar),h=r.getCell(r.length-2,this._thisRowLastSecondChar),m=d.getCell(0,this._nextRowFirstChar),b=m.getWidth()>1,S=!1;(m.getChars()&&b?this._nullCellCount<=1:this._nullCellCount<=0)&&((_.getChars()||_.getWidth()===0)&&e(_,m)&&(S=!0),b&&(h.getChars()||h.getWidth()===0)&&e(_,m)&&e(h,m)&&(S=!0)),S||(p="-".repeat(this._nullCellCount+1),p+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(p+="\x1B[A",p+=`\x1B[${r.length-this._nullCellCount}C`,p+=`\x1B[${this._nullCellCount}X`,p+=`\x1B[${r.length-this._nullCellCount}D`,p+="\x1B[B"),this._lastContentCursorRow=l+1,this._lastContentCursorCol=0,this._lastCursorRow=l+1,this._lastCursorCol=0)}else p=`\r
`,this._lastCursorRow=l+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=p,this._currentRow="",this._nullCellCount=0}_diffStyle(l,g){let v=[],p=!o(l,g),r=!e(l,g),d=!i(l,g);if(p||r||d)if(l.isAttributeDefault())g.isAttributeDefault()||v.push(0);else{if(p){let _=l.getFgColor();l.isFgRGB()?v.push(38,2,_>>>16&255,_>>>8&255,255&_):l.isFgPalette()?_>=16?v.push(38,5,_):v.push(8&_?90+(7&_):30+(7&_)):v.push(39)}if(r){let _=l.getBgColor();l.isBgRGB()?v.push(48,2,_>>>16&255,_>>>8&255,255&_):l.isBgPalette()?_>=16?v.push(48,5,_):v.push(8&_?100+(7&_):40+(7&_)):v.push(49)}d&&(l.isInverse()!==g.isInverse()&&v.push(l.isInverse()?7:27),l.isBold()!==g.isBold()&&v.push(l.isBold()?1:22),l.isUnderline()!==g.isUnderline()&&v.push(l.isUnderline()?4:24),l.isBlink()!==g.isBlink()&&v.push(l.isBlink()?5:25),l.isInvisible()!==g.isInvisible()&&v.push(l.isInvisible()?8:28),l.isItalic()!==g.isItalic()&&v.push(l.isItalic()?3:23),l.isDim()!==g.isDim()&&v.push(l.isDim()?2:22),l.isStrikethrough()!==g.isStrikethrough()&&v.push(l.isStrikethrough()?9:29))}return v}_nextCell(l,g,v,p){if(l.getWidth()===0)return;let r=l.getChars()==="",d=this._diffStyle(l,this._cursorStyle);if(r?!e(this._cursorStyle,l):d.length>0){this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=v,this._lastContentCursorCol=this._lastCursorCol=p,this._currentRow+=`\x1B[${d.join(";")}m`;let _=this._buffer.getLine(v);_!==void 0&&(_.getCell(p,this._cursorStyle),this._cursorStyleRow=v,this._cursorStyleCol=p)}r?this._nullCellCount+=l.getWidth():(this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=l.getChars(),this._lastContentCursorRow=this._lastCursorRow=v,this._lastContentCursorCol=this._lastCursorCol=p+l.getWidth())}_serializeString(){let l=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(l=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let g="";for(let h=0;h<l;h++)g+=this._allRows[h],h+1<l&&(g+=this._allRowSeparators[h]);let v=this._buffer.baseY+this._buffer.cursorY,p=this._buffer.cursorX;var r;(v!==this._lastCursorRow||p!==this._lastCursorCol)&&((r=v-this._lastCursorRow)>0?g+=`\x1B[${r}B`:r<0&&(g+=`\x1B[${-r}A`),(h=>{h>0?g+=`\x1B[${h}C`:h<0&&(g+=`\x1B[${-h}D`)})(p-this._lastCursorCol));let d=this._terminal._core._inputHandler._curAttrData,_=this._diffStyle(d,this._cursorStyle);return _.length>0&&(g+=`\x1B[${_.join(";")}m`),g}}s.SerializeAddon=class{constructor(){}activate(f){this._terminal=f}_serializeBuffer(f,l,g){let v=l.length,p=new a(l,f),r=g===void 0?v:n(g+f.rows,0,v);return p.serialize({start:{x:v-r,y:0},end:{x:v-1,y:f.cols}})}_serializeBufferAsHTML(f,l){var g,v;let p=f.buffer.active,r=new u(p,f,l);if((g=l.onlySelection)===null||g===void 0||!g){let _=p.length,h=l.scrollback,m=h===void 0?_:n(h+f.rows,0,_);return r.serialize({start:{x:_-m,y:0},end:{x:_-1,y:f.cols}})}let d=(v=this._terminal)===null||v===void 0?void 0:v.getSelectionPosition();return d!==void 0?r.serialize({start:{x:d.start.y,y:d.start.x},end:{x:d.end.y,y:d.end.x}}):""}_serializeModes(f){let l="",g=f.modes;if(g.applicationCursorKeysMode&&(l+="\x1B[?1h"),g.applicationKeypadMode&&(l+="\x1B[?66h"),g.bracketedPasteMode&&(l+="\x1B[?2004h"),g.insertMode&&(l+="\x1B[4h"),g.originMode&&(l+="\x1B[?6h"),g.reverseWraparoundMode&&(l+="\x1B[?45h"),g.sendFocusMode&&(l+="\x1B[?1004h"),g.wraparoundMode===!1&&(l+="\x1B[?7l"),g.mouseTrackingMode!=="none")switch(g.mouseTrackingMode){case"x10":l+="\x1B[?9h";break;case"vt200":l+="\x1B[?1000h";break;case"drag":l+="\x1B[?1002h";break;case"any":l+="\x1B[?1003h"}return l}serialize(f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let l=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,f==null?void 0:f.scrollback);return f!=null&&f.excludeAltBuffer||this._terminal.buffer.active.type!=="alternate"||(l+=`\x1B[?1049h\x1B[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),f!=null&&f.excludeModes||(l+=this._serializeModes(this._terminal)),l}serializeAsHTML(f){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,f||{})}dispose(){}};class u extends c{constructor(l,g,v){super(l),this._terminal=g,this._options=v,this._currentRow="",this._htmlContent="",this._colors=g._core._themeService.colors}_padStart(l,g,v){return g>>=0,v=v!=null?v:" ",l.length>g?l:((g-=l.length)>v.length&&(v+=v.repeat(g/v.length)),v.slice(0,g)+l)}_beforeSerialize(l,g,v){var p,r,d,_,h;this._htmlContent+="<html><body><!--StartFragment--><pre>";let m="#000000",b="#ffffff";(p=this._options.includeGlobalBackground)!==null&&p!==void 0&&p&&(m=(d=(r=this._terminal.options.theme)===null||r===void 0?void 0:r.foreground)!==null&&d!==void 0?d:"#ffffff",b=(h=(_=this._terminal.options.theme)===null||_===void 0?void 0:_.background)!==null&&h!==void 0?h:"#000000");let S=[];S.push("color: "+m+";"),S.push("background-color: "+b+";"),S.push("font-family: "+this._terminal.options.fontFamily+";"),S.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+S.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(l,g){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(l,g){let v=g?l.getFgColor():l.getBgColor();return(g?l.isFgRGB():l.isBgRGB())?[v>>16&255,v>>8&255,255&v].map(p=>this._padStart(p.toString(16),2,"0")).join(""):(g?l.isFgPalette():l.isBgPalette())?this._colors.ansi[v].css:void 0}_diffStyle(l,g){let v=[],p=!o(l,g),r=!e(l,g),d=!i(l,g);if(p||r||d){let _=this._getHexColor(l,!0);_&&v.push("color: "+_+";");let h=this._getHexColor(l,!1);return h&&v.push("background-color: "+h+";"),l.isInverse()&&v.push("color: #000000; background-color: #BFBFBF;"),l.isBold()&&v.push("font-weight: bold;"),l.isUnderline()&&v.push("text-decoration: underline;"),l.isBlink()&&v.push("text-decoration: blink;"),l.isInvisible()&&v.push("visibility: hidden;"),l.isItalic()&&v.push("font-style: italic;"),l.isDim()&&v.push("opacity: 0.5;"),l.isStrikethrough()&&v.push("text-decoration: line-through;"),v}}_nextCell(l,g,v,p){if(l.getWidth()===0)return;let r=l.getChars()==="",d=this._diffStyle(l,g);d&&(this._currentRow+=d.length===0?"</span><span>":"</span><span style='"+d.join(" ")+"'>"),this._currentRow+=r?" ":l.getChars()}_serializeString(){return this._htmlContent}}s.HTMLSerializeHandler=u})(),t})()})});var wo=se((Ur,ps)=>{(function(t,s){typeof Ur=="object"&&typeof ps=="object"?ps.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Ur=="object"?Ur.SearchAddon=s():t.SearchAddon=s()})(self,function(){return(()=>{"use strict";var t={345:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===i)return void this._listeners.splice(a,1)}}})),this._event}fire(i,a){let u=[];for(let f=0;f<this._listeners.length;f++)u.push(this._listeners[f]);for(let f=0;f<u.length;f++)u[f].call(void 0,i,a)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(i,a){return i(u=>a.fire(u))}},859:(o,e)=>{function i(a){for(let u of a)u.dispose();a.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let u=this._disposables.indexOf(a);u!==-1&&this._disposables.splice(u,1)}},e.toDisposable=function(a){return{dispose:a}},e.disposeArray=i,e.getDisposeArrayDisposable=function(a){return{dispose:()=>i(a)}}}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o](i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.SearchAddon=void 0;let e=n(345),i=n(859),a=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class u extends i.Disposable{constructor(){super(...arguments),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new e.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event}activate(l){this._terminal=l,this._onDataDisposable=this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this._onResizeDisposable=this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,i.toDisposable)(()=>{var g,v;this.clearDecorations(),(g=this._onDataDisposable)===null||g===void 0||g.dispose(),(v=this._onResizeDisposable)===null||v===void 0||v.dispose()}))}_updateMatches(){var l;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((l=this._lastSearchOptions)===null||l===void 0)&&l.decorations)&&(this._highlightTimeout=setTimeout(()=>{var g,v;this.findPrevious(this._cachedSearchTerm,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0})),this._resultIndex=this._searchResults?this._searchResults.size-1:-1,this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:(v=(g=this._searchResults)===null||g===void 0?void 0:g.size)!==null&&v!==void 0?v:-1})},200))}clearDecorations(l){var g,v,p,r;(g=this._selectedDecoration)===null||g===void 0||g.dispose(),(v=this._searchResults)===null||v===void 0||v.clear(),(p=this._resultDecorations)===null||p===void 0||p.forEach(d=>{for(let _ of d)_.dispose()}),(r=this._resultDecorations)===null||r===void 0||r.clear(),this._searchResults=void 0,this._resultDecorations=void 0,l||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var l;(l=this._selectedDecoration)===null||l===void 0||l.dispose(),this._selectedDecoration=void 0}findNext(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=g,g!=null&&g.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&l===this._cachedSearchTerm||this._highlightAllMatches(l,g)),this._fireResults(l,this._findNextAndSelect(l,g),g)}_highlightAllMatches(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!l||l.length===0)return void this.clearDecorations();g=g||{},this.clearDecorations(!0),this._searchResults=new Map,this._resultDecorations=new Map;let v=this._resultDecorations,p=this._find(l,0,0,g);for(;p&&!this._searchResults.get(`${p.row}-${p.col}`);)if(this._searchResults.set(`${p.row}-${p.col}`,p),p=this._find(l,p.col+p.term.length>=this._terminal.cols?p.row+1:p.row,p.col+p.term.length>=this._terminal.cols?0:p.col+1,g),this._searchResults.size>1e3)return this.clearDecorations(),void(this._resultIndex=void 0);this._searchResults.forEach(r=>{let d=this._createResultDecoration(r,g.decorations);if(d){let _=v.get(d.marker.line)||[];_.push(d),v.set(d.marker.line,_)}})}_find(l,g,v,p){var r;if(!this._terminal||!l||l.length===0)return(r=this._terminal)===null||r===void 0||r.clearSelection(),void this.clearDecorations();if(v>this._terminal.cols)throw new Error(`Invalid col: ${v} to search in terminal of ${this._terminal.cols} cols`);let d;this._initLinesCache();let _={startRow:g,startCol:v};if(d=this._findInLine(l,_,p),!d)for(let h=g+1;h<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=h,_.startCol=0,d=this._findInLine(l,_,p),!d);h++);return d}_findNextAndSelect(l,g){var v;if(!this._terminal||!l||l.length===0)return(v=this._terminal)===null||v===void 0||v.clearSelection(),this.clearDecorations(),this._cachedSearchTerm=void 0,this._resultIndex=-1,!1;this._cachedSearchTerm!==l&&(this._resultIndex=void 0,this._terminal.clearSelection());let p,r=0,d=0;if(this._terminal.hasSelection()){let m=!!g&&g.incremental;p=this._terminal.getSelectionPosition(),d=m?p.start.y:p.end.y,r=m?p.start.x:p.end.x}this._initLinesCache();let _={startRow:d,startCol:r},h=this._findInLine(l,_,g);if(!h)for(let m=d+1;m<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=m,_.startCol=0,h=this._findInLine(l,_,g),!h);m++);if(!h&&d!==0)for(let m=0;m<d&&(_.startRow=m,_.startCol=0,h=this._findInLine(l,_,g),!h);m++);return!h&&p&&(_.startRow=p.start.y,_.startCol=0,h=this._findInLine(l,_,g)),this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0?this._resultIndex=0:(this._resultIndex++,this._resultIndex>=this._searchResults.size&&(this._resultIndex=0))),this._selectResult(h,g==null?void 0:g.decorations,g==null?void 0:g.noScroll)}findPrevious(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=g,g!=null&&g.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&l===this._cachedSearchTerm||this._highlightAllMatches(l,g)),this._fireResults(l,this._findPreviousAndSelect(l,g),g)}_fireResults(l,g,v){var p;return v!=null&&v.decorations&&(this._resultIndex!==void 0&&((p=this._searchResults)===null||p===void 0?void 0:p.size)!==void 0?this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:this._searchResults.size}):this._onDidChangeResults.fire(void 0)),this._cachedSearchTerm=l,g}_findPreviousAndSelect(l,g){var v;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let p;if(!this._terminal||!l||l.length===0)return p=void 0,(v=this._terminal)===null||v===void 0||v.clearSelection(),this.clearDecorations(),this._resultIndex=-1,!1;this._cachedSearchTerm!==l&&(this._resultIndex=void 0,this._terminal.clearSelection());let r=this._terminal.buffer.active.baseY+this._terminal.rows,d=this._terminal.cols,_=!0,h=!!g&&g.incremental,m;this._terminal.hasSelection()&&(m=this._terminal.getSelectionPosition(),r=m.start.y,d=m.start.x),this._initLinesCache();let b={startRow:r,startCol:d};if(h?(p=this._findInLine(l,b,g,!1),p&&p.row===r&&p.col===d||(m&&(b.startRow=m.end.y,b.startCol=m.end.x),p=this._findInLine(l,b,g,!0))):p=this._findInLine(l,b,g,_),!p){b.startCol=Math.max(b.startCol,this._terminal.cols);for(let S=r-1;S>=0&&(b.startRow=S,p=this._findInLine(l,b,g,_),!p);S--);}if(!p&&r!==this._terminal.buffer.active.baseY+this._terminal.rows)for(let S=this._terminal.buffer.active.baseY+this._terminal.rows;S>=r&&(b.startRow=S,p=this._findInLine(l,b,g,_),!p);S--);return this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0||this._resultIndex<0?this._resultIndex=this._searchResults.size-1:(this._resultIndex--,this._resultIndex===-1&&(this._resultIndex=this._searchResults.size-1))),!(p||!m)||this._selectResult(p,g==null?void 0:g.decorations,g==null?void 0:g.noScroll)}_initLinesCache(){let l=this._terminal;this._linesCache||(this._linesCache=new Array(l.buffer.active.length),this._cursorMoveListener=l.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=l.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(l,g,v){return(l===0||a.includes(g[l-1]))&&(l+v.length===g.length||a.includes(g[l+v.length]))}_findInLine(l,g,v={},p=!1){var r;let d=this._terminal,_=g.startRow,h=g.startCol,m=d.buffer.active.getLine(_);if(m!=null&&m.isWrapped)return p?void(g.startCol+=d.cols):(g.startRow--,g.startCol+=d.cols,this._findInLine(l,g,v));let b=(r=this._linesCache)===null||r===void 0?void 0:r[_];b||(b=this._translateBufferLineToStringWithWrap(_,!0),this._linesCache&&(this._linesCache[_]=b));let[S,C]=b,y=this._bufferColsToStringOffset(_,h),w=v.caseSensitive?l:l.toLowerCase(),E=v.caseSensitive?S:S.toLowerCase(),k=-1;if(v.regex){let R=RegExp(w,"g"),T;if(p)for(;T=R.exec(E.slice(0,y));)k=R.lastIndex-T[0].length,l=T[0],R.lastIndex-=l.length-1;else T=R.exec(E.slice(y)),T&&T[0].length>0&&(k=y+(R.lastIndex-T[0].length),l=T[0])}else p?y-w.length>=0&&(k=E.lastIndexOf(w,y-w.length)):k=E.indexOf(w,y);if(k>=0){if(v.wholeWord&&!this._isWholeWord(k,E,l))return;let R=0;for(;R<C.length-1&&k>=C[R+1];)R++;let T=R;for(;T<C.length-1&&k+l.length>=C[T+1];)T++;let B=k-C[R],H=k+l.length-C[T],F=this._stringLengthToBufferSize(_+R,B);return{term:l,col:F,row:_+R,size:this._stringLengthToBufferSize(_+T,H)-F+d.cols*(T-R)}}}_stringLengthToBufferSize(l,g){let v=this._terminal.buffer.active.getLine(l);if(!v)return 0;for(let p=0;p<g;p++){let r=v.getCell(p);if(!r)break;let d=r.getChars();d.length>1&&(g-=d.length-1);let _=v.getCell(p+1);_&&_.getWidth()===0&&g++}return g}_bufferColsToStringOffset(l,g){let v=this._terminal,p=l,r=0,d=v.buffer.active.getLine(p);for(;g>0&&d;){for(let _=0;_<g&&_<v.cols;_++){let h=d.getCell(_);if(!h)break;h.getWidth()&&(r+=h.getCode()===0?1:h.getChars().length)}if(p++,d=v.buffer.active.getLine(p),d&&!d.isWrapped)break;g-=v.cols}return r}_translateBufferLineToStringWithWrap(l,g){var v;let p=this._terminal,r=[],d=[0],_=p.buffer.active.getLine(l);for(;_;){let h=p.buffer.active.getLine(l+1),m=!!h&&h.isWrapped,b=_.translateToString(!m&&g);if(m&&h){let S=_.getCell(_.length-1);S&&S.getCode()===0&&S.getWidth()===1&&((v=h.getCell(0))===null||v===void 0?void 0:v.getWidth())===2&&(b=b.slice(0,-1))}if(r.push(b),!m)break;d.push(d[d.length-1]+b.length),l++,_=h}return[r.join(""),d]}_selectResult(l,g,v){var p,r;let d=this._terminal;if(this.clearActiveDecoration(),!l)return d.clearSelection(),!1;if(d.select(l.col,l.row,l.size),g){let _=d.registerMarker(-d.buffer.active.baseY-d.buffer.active.cursorY+l.row);_&&(this._selectedDecoration=d.registerDecoration({marker:_,x:l.col,width:l.size,backgroundColor:g.activeMatchBackground,layer:"top",overviewRulerOptions:{color:g.activeMatchColorOverviewRuler}}),(p=this._selectedDecoration)===null||p===void 0||p.onRender(h=>this._applyStyles(h,g.activeMatchBorder,!0)),(r=this._selectedDecoration)===null||r===void 0||r.onDispose(()=>_.dispose()))}if(!v&&(l.row>=d.buffer.active.viewportY+d.rows||l.row<d.buffer.active.viewportY)){let _=l.row-d.buffer.active.viewportY;_-=Math.floor(d.rows/2),d.scrollLines(_)}return!0}_applyStyles(l,g,v){l.clientWidth<=0||(l.classList.contains("xterm-find-result-decoration")||(l.classList.add("xterm-find-result-decoration"),g&&(l.style.outline=`1px solid ${g}`)),v&&l.classList.add("xterm-find-active-result-decoration"))}_createResultDecoration(l,g){var v;let p=this._terminal,r=p.registerMarker(-p.buffer.active.baseY-p.buffer.active.cursorY+l.row);if(!r)return;let d=p.registerDecoration({marker:r,x:l.col,width:l.size,backgroundColor:g.matchBackground,overviewRulerOptions:!((v=this._resultDecorations)===null||v===void 0)&&v.get(r.line)?void 0:{color:g.matchOverviewRuler,position:"center"}});return d==null||d.onRender(_=>this._applyStyles(_,g.matchBorder,!1)),d==null||d.onDispose(()=>r.dispose()),d}}o.SearchAddon=u})(),c})()})});var Co=se((zr,_s)=>{(function(t,s){typeof zr=="object"&&typeof _s=="object"?_s.exports=s():typeof define=="function"&&define.amd?define([],s):typeof zr=="object"?zr.WebLinksAddon=s():t.WebLinksAddon=s()})(self,function(){return(()=>{"use strict";var t={6:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkComputer=e.WebLinkProvider=void 0,e.WebLinkProvider=class{constructor(a,u,f,l={}){this._terminal=a,this._regex=u,this._handler=f,this._options=l}provideLinks(a,u){let f=i.computeLink(a,this._regex,this._terminal,this._handler);u(this._addCallbacks(f))}_addCallbacks(a){return a.map(u=>(u.leave=this._options.leave,u.hover=(f,l)=>{if(this._options.hover){let{range:g}=u;this._options.hover(f,l,g)}},u))}};class i{static computeLink(u,f,l,g){let v=new RegExp(f.source,(f.flags||"")+"g"),[p,r]=i._getWindowedLineStrings(u-1,l),d=p.join(""),_,h=[];for(;_=v.exec(d);){let m=_[0];try{let E=new URL(m),k=decodeURI(E.toString());if(m!==k&&m+"/"!==k)continue}catch(E){continue}let[b,S]=i._mapStrIdx(l,r,0,_.index),[C,y]=i._mapStrIdx(l,b,S,m.length);if(b===-1||S===-1||C===-1||y===-1)continue;let w={start:{x:S+1,y:b+1},end:{x:y,y:C+1}};h.push({range:w,text:m,activate:g})}return h}static _getWindowedLineStrings(u,f){let l,g=u,v=u,p=0,r="",d=[];if(l=f.buffer.active.getLine(u)){let _=l.translateToString(!0);if(l.isWrapped&&_[0]!==" "){for(p=0;(l=f.buffer.active.getLine(--g))&&p<2048&&(r=l.translateToString(!0),p+=r.length,d.push(r),l.isWrapped&&r.indexOf(" ")===-1););d.reverse()}for(d.push(_),p=0;(l=f.buffer.active.getLine(++v))&&l.isWrapped&&p<2048&&(r=l.translateToString(!0),p+=r.length,d.push(r),r.indexOf(" ")===-1););}return[d,g]}static _mapStrIdx(u,f,l,g){let v=u.buffer.active,p=v.getNullCell(),r=l;for(;g;){let d=v.getLine(f);if(!d)return[-1,-1];for(let _=r;_<d.length;++_){d.getCell(_,p);let h=p.getChars();if(p.getWidth()&&(g-=h.length||1,_===d.length-1&&h==="")){let m=v.getLine(f+1);m&&m.isWrapped&&(m.getCell(0,p),p.getWidth()===2&&(g+=1))}if(g<0)return[f,_]}f++,r=0}return[f,r]}}e.LinkComputer=i}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o](i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;let e=n(6),i=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function a(u,f){let l=window.open();if(l){try{l.opener=null}catch(g){}l.location.href=f}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=a,f={}){this._handler=u,this._options=f}activate(u){this._terminal=u;let f=this._options,l=f.urlRegex||i;this._linkProvider=this._terminal.registerLinkProvider(new e.WebLinkProvider(this._terminal,l,this._handler,f))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),c})()})});var ff={};X(ff,{TerminalPlugin:()=>Qr,default:()=>df});module.exports=oa(ff);var Zo=require("obsidian");var _e=require("obsidian");var br=require("obsidian");var As=[0,"SIGINT","SIGTERM"],Ds=500,Ps=500;var At=(()=>{let{userAgent:t}=navigator;return t.includes("like Mac")?"ios":t.includes("Android")?"android":t.includes("Mac")?"darwin":t.includes("Win")?"win32":t.includes("Linux")||t.includes("X11")?"linux":"unknown"})(),yr=class{constructor(s){this.id=s}namespaced(s){return`${(s instanceof br.Plugin?s.manifest:s).id}:${this.id}`}};function Fe(t){return t instanceof Error?t:new Error(String(t))}function Ms(t){let s=[];return async(...n)=>new Promise((c,o)=>{s.push({reject:o,resolve:c}),t(e=>{for(let i of s.splice(0))i.resolve(e)},e=>{for(let i of s.splice(0))i.reject(e)},...n)})}function ti(t,s=""){let n=t.substring(Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"))+1);return n.endsWith(s)?n.substring(0,n.length-s.length):n}function Bs(t,s,n,c){let o=t();return()=>c.replace(o,t()).replace(n,s())}function Is(t){return structuredClone(t)}function Jt(t){return(s,n)=>{try{t(s,n)}catch(c){n(c)}}}function Ns(t){let s=ti(t),n=s.lastIndexOf(".");return n===-1?"":s.substring(n)}function Hs(t,s="text/plain; charset=UTF-8;",n=""){let c=document.createElement("a");c.target="_blank",c.download=n;let o=URL.createObjectURL(new Blob([t],{type:s}));try{c.href=o,c.click()}finally{URL.revokeObjectURL(o)}}async function Dt(t){let s=await t();return new Promise(Jt((n,c)=>{s.once("spawn",()=>{n(s)}).once("error",c)}))}function Sr(t){return Object.keys(t)}function Me(t,s){return t.includes(s)}function Fs(t,s){return"__type"in s?s.__type===t:!1}function aa(t,s=0,n){let c=1e3*Math.max(s,0),o=new br.Notice(t(),c);if(typeof n=="undefined")return o;let e=n.language.registerUse(()=>o.setMessage(t()));try{c===0?n.register(e):window.setTimeout(e,c)}catch(i){e()}return o}function Be(t,s=0,n){s>=0&&aa(t,s,n)}function Ws(t,s,n=!1){let c=new IntersectionObserver((o,e)=>{var i;for(let a of n?o.reverse():[(i=o.last())!=null?i:{isIntersecting:!1}])if(a.isIntersecting){s(e,t,a);break}});return c.observe(t),c}function Us(t){return window.open(t,"_blank","noreferrer")}function We(t,s=()=>"",n){var c;console.error(`${s()}
`,t),Be(()=>`${s()}
${t.name}: ${t.message}`,(c=n==null?void 0:n.settings.errorNoticeTimeout)!=null?c:0,n)}function zs(t){let s=t.getViewType(),n=t.getDisplayText(),c=document.querySelector(`.workspace-tab-header[data-type="${s}"]`);if(c===null)return!1;let o=c.querySelector(".workspace-tab-header-inner-title");if(o===null)return!1;let e=o.textContent;return e===null?!1:(o.textContent=n,c.ariaLabel=n,document.title=document.title.replace(e,n),!0)}async function wt(t,s){return new Promise(Jt((n,c)=>{let o=t.write(s,e=>{e?c(e):o&&n()});o||t.once("drain",n)}))}var ri={};X(ri,{commands:()=>la,default:()=>_a,errors:()=>ca,menus:()=>ha,name:()=>ua,notices:()=>da,settings:()=>fa,views:()=>pa});var la={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},ca={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},ha={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},ua="Terminal",da={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},fa={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},pa={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},_a={commands:la,errors:ca,menus:ha,name:ua,notices:da,settings:fa,views:pa};var ii={};X(ii,{default:()=>ya,menus:()=>ga,settings:()=>va,views:()=>ma});var ga={"open-terminal-external-icon":"terminal-square","open-terminal-integrated-icon":"terminal","restart-terminal-icon":"reset","save-as-HTML-icon":"save"},ma={"terminal-icon":"terminal"},va={"add-to-command-icon":"terminal","add-to-context-menu-icon":"menu","enable-Windows-conhost-workaround-icon":"code","error-notice-timeout-icon":"timer","executable-list-external-icon":"terminal-square","executable-list-integrated-icon":"terminal","hide-status-bar-icon":"eye-off","language-icon":"languages","notice-timeout-icon":"timer","python-executable-icon":"scaling","reset-icon":"reset"},ya={menus:ga,views:ma,settings:va};var si={};X(si,{commands:()=>ba,default:()=>La,errors:()=>Sa,menus:()=>wa,name:()=>Ca,notices:()=>xa,settings:()=>Ea,views:()=>ka});var ba={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Sa={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},wa={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Ca="Terminal",xa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ea={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},ka={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},La={commands:ba,errors:Sa,menus:wa,name:Ca,notices:xa,settings:Ea,views:ka};var ni={};X(ni,{commands:()=>Ra,default:()=>Ba,errors:()=>Ta,menus:()=>Oa,name:()=>Aa,notices:()=>Da,settings:()=>Pa,views:()=>Ma});var Ra={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Ta={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Oa={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Aa="Terminal",Da={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Pa={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ma={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Ba={commands:Ra,errors:Ta,menus:Oa,name:Aa,notices:Da,settings:Pa,views:Ma};var oi={};X(oi,{commands:()=>Ia,default:()=>ja,errors:()=>Na,menus:()=>Ha,name:()=>Fa,notices:()=>Wa,settings:()=>Ua,views:()=>za});var Ia={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Na={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Ha={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Fa="Terminal",Wa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ua={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},za={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},ja={commands:Ia,errors:Na,menus:Ha,name:Fa,notices:Wa,settings:Ua,views:za};var ai={};X(ai,{commands:()=>$a,default:()=>Ja,errors:()=>qa,menus:()=>Ka,name:()=>Va,notices:()=>Ga,settings:()=>Ya,views:()=>Xa});var $a={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},qa={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Ka={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Va="Terminal",Ga={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ya={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Xa={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Ja={commands:$a,errors:qa,menus:Ka,name:Va,notices:Ga,settings:Ya,views:Xa};var li={};X(li,{commands:()=>Za,default:()=>nl,errors:()=>Qa,menus:()=>el,name:()=>tl,notices:()=>rl,settings:()=>il,views:()=>sl});var Za={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Qa={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},el={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},tl="Terminal",rl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},il={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},sl={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},nl={commands:Za,errors:Qa,menus:el,name:tl,notices:rl,settings:il,views:sl};var ci={};X(ci,{commands:()=>ol,default:()=>fl,errors:()=>al,menus:()=>ll,name:()=>cl,notices:()=>hl,settings:()=>ul,views:()=>dl});var ol={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},al={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},ll={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},cl="Terminal",hl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},ul={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},dl={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},fl={commands:ol,errors:al,menus:ll,name:cl,notices:hl,settings:ul,views:dl};var hi={};X(hi,{commands:()=>pl,default:()=>Sl,errors:()=>_l,menus:()=>gl,name:()=>ml,notices:()=>vl,settings:()=>yl,views:()=>bl});var pl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},_l={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},gl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},ml="Terminal",vl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},yl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},bl={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Sl={commands:pl,errors:_l,menus:gl,name:ml,notices:vl,settings:yl,views:bl};var ui={};X(ui,{commands:()=>wl,default:()=>Tl,errors:()=>Cl,menus:()=>xl,name:()=>El,notices:()=>kl,settings:()=>Ll,views:()=>Rl});var wl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Cl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},xl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},El="Terminal",kl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ll={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Rl={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Tl={commands:wl,errors:Cl,menus:xl,name:El,notices:kl,settings:Ll,views:Rl};var di={};X(di,{commands:()=>Ol,default:()=>Nl,errors:()=>Al,menus:()=>Dl,name:()=>Pl,notices:()=>Ml,settings:()=>Bl,views:()=>Il});var Ol={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Al={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Dl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Pl="Terminal",Ml={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Bl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Il={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Nl={commands:Ol,errors:Al,menus:Dl,name:Pl,notices:Ml,settings:Bl,views:Il};var fi={};X(fi,{commands:()=>Hl,default:()=>ql,errors:()=>Fl,menus:()=>Wl,name:()=>Ul,notices:()=>zl,settings:()=>jl,views:()=>$l});var Hl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Fl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Wl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Ul="Terminal",zl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},jl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},$l={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},ql={commands:Hl,errors:Fl,menus:Wl,name:Ul,notices:zl,settings:jl,views:$l};var pi={};X(pi,{commands:()=>Kl,default:()=>Ql,errors:()=>Vl,menus:()=>Gl,name:()=>Yl,notices:()=>Xl,settings:()=>Jl,views:()=>Zl});var Kl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Vl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Gl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Yl="Terminal",Xl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Jl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Zl={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Ql={commands:Kl,errors:Vl,menus:Gl,name:Yl,notices:Xl,settings:Jl,views:Zl};var _i={};X(_i,{am:()=>ec,cs:()=>tc,da:()=>rc,de:()=>ic,default:()=>xc,en:()=>sc,es:()=>nc,fa:()=>oc,fr:()=>ac,id:()=>lc,it:()=>cc,ja:()=>hc,ko:()=>uc,nl:()=>dc,no:()=>fc,pl:()=>pc,pt:()=>_c,"pt-BR":()=>gc,ro:()=>mc,ru:()=>vc,sq:()=>yc,th:()=>bc,tr:()=>Sc,"zh-Hans":()=>wc,"zh-Hant":()=>Cc});var ec="\u12A0\u121B\u122D\u129B \u{1F6A7}",tc="\u010De\u0161tina \u{1F6A7}",rc="Dansk \u{1F6A7}",ic="Deutsch \u{1F6A7}",sc="English",nc="Espa\xF1ol \u{1F6A7}",oc="\u0641\u0627\u0631\u0633\u06CC \u{1F6A7}",ac="fran\xE7ais \u{1F6A7}",lc="Bahasa Indonesia \u{1F6A7}",cc="Italiano \u{1F6A7}",hc="\u65E5\u672C\u8A9E \u{1F6A7}",uc="\uD55C\uAD6D\uC5B4 \u{1F6A7}",dc="Nederlands \u{1F6A7}",fc="Norsk \u{1F6A7}",pc="j\u0119zyk polski \u{1F6A7}",_c="Portugu\xEAs \u{1F6A7}",gc="Portugues do Brasil \u{1F6A7}",mc="Rom\xE2n\u0103 \u{1F6A7}",vc="\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u{1F6A7}",yc="Shqip \u{1F6A7}",bc="\u0E44\u0E17\u0E22 \u{1F6A7}",Sc="T\xFCrk\xE7e \u{1F6A7}",wc="\u7B80\u4F53\u4E2D\u6587",Cc="\u7E41\u9AD4\u4E2D\u6587",xc={am:ec,cs:tc,da:rc,de:ic,en:sc,es:nc,fa:oc,fr:ac,id:lc,it:cc,ja:hc,ko:uc,nl:dc,no:fc,pl:pc,pt:_c,"pt-BR":gc,ro:mc,ru:vc,sq:yc,th:bc,tr:Sc,"zh-Hans":wc,"zh-Hant":Cc};var gi={};X(gi,{commands:()=>Ec,default:()=>Dc,errors:()=>kc,menus:()=>Lc,name:()=>Rc,notices:()=>Tc,settings:()=>Oc,views:()=>Ac});var Ec={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},kc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Lc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Rc="Terminal",Tc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Oc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ac={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Dc={commands:Ec,errors:kc,menus:Lc,name:Rc,notices:Tc,settings:Oc,views:Ac};var mi={};X(mi,{commands:()=>Pc,default:()=>Wc,errors:()=>Mc,menus:()=>Bc,name:()=>Ic,notices:()=>Nc,settings:()=>Hc,views:()=>Fc});var Pc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Mc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Bc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Ic="Terminal",Nc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Hc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Fc={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Wc={commands:Pc,errors:Mc,menus:Bc,name:Ic,notices:Nc,settings:Hc,views:Fc};var vi={};X(vi,{commands:()=>Uc,default:()=>Gc,errors:()=>zc,menus:()=>jc,name:()=>$c,notices:()=>qc,settings:()=>Kc,views:()=>Vc});var Uc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},zc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},jc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},$c="Terminal",qc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Kc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Vc={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Gc={commands:Uc,errors:zc,menus:jc,name:$c,notices:qc,settings:Kc,views:Vc};var yi={};X(yi,{commands:()=>Yc,default:()=>rh,errors:()=>Xc,menus:()=>Jc,name:()=>Zc,notices:()=>Qc,settings:()=>eh,views:()=>th});var Yc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Xc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Jc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Zc="Terminal",Qc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},eh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},th={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},rh={commands:Yc,errors:Xc,menus:Jc,name:Zc,notices:Qc,settings:eh,views:th};var bi={};X(bi,{commands:()=>ih,default:()=>hh,errors:()=>sh,menus:()=>nh,name:()=>oh,notices:()=>ah,settings:()=>lh,views:()=>ch});var ih={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},sh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},nh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},oh="Terminal",ah={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},lh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},ch={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},hh={commands:ih,errors:sh,menus:nh,name:oh,notices:ah,settings:lh,views:ch};var Si={};X(Si,{commands:()=>uh,default:()=>vh,errors:()=>dh,menus:()=>fh,name:()=>ph,notices:()=>_h,settings:()=>gh,views:()=>mh});var uh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},dh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},fh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},ph="Terminal",_h={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},gh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},mh={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},vh={commands:uh,errors:dh,menus:fh,name:ph,notices:_h,settings:gh,views:mh};var wi={};X(wi,{commands:()=>yh,default:()=>kh,errors:()=>bh,menus:()=>Sh,name:()=>wh,notices:()=>Ch,settings:()=>xh,views:()=>Eh});var yh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},bh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Sh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},wh="Terminal",Ch={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},xh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Eh={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},kh={commands:yh,errors:bh,menus:Sh,name:wh,notices:Ch,settings:xh,views:Eh};var Ci={};X(Ci,{commands:()=>Lh,default:()=>Mh,errors:()=>Rh,menus:()=>Th,name:()=>Oh,notices:()=>Ah,settings:()=>Dh,views:()=>Ph});var Lh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Rh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Th={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Oh="Terminal",Ah={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Dh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ph={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Mh={commands:Lh,errors:Rh,menus:Th,name:Oh,notices:Ah,settings:Dh,views:Ph};var xi={};X(xi,{commands:()=>Bh,default:()=>zh,errors:()=>Ih,menus:()=>Nh,name:()=>Hh,notices:()=>Fh,settings:()=>Wh,views:()=>Uh});var Bh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Ih={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},Nh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Hh="Terminal",Fh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Wh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Uh={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},zh={commands:Bh,errors:Ih,menus:Nh,name:Hh,notices:Fh,settings:Wh,views:Uh};var Ei={};X(Ei,{commands:()=>jh,default:()=>Xh,errors:()=>$h,menus:()=>qh,name:()=>Kh,notices:()=>Vh,settings:()=>Gh,views:()=>Yh});var jh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},$h={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-platform":"Unsupported platform"},qh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","restart-terminal":"Restart terminal (and resizer)","save-as-HTML":"Save as HTML"},Kh="Terminal",Vh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Gh={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.","error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",type:{external:" (external)",integrated:" (integrated)"},win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Yh={terminal:{"display-name":"Terminal: {{- executable}}","restored-history":`
\r * Restored history at {{- time}}
\r`}},Xh={commands:jh,errors:$h,menus:qh,name:Kh,notices:Vh,settings:Gh,views:Yh};var ki={};X(ki,{commands:()=>Jh,default:()=>su,errors:()=>Zh,menus:()=>Qh,name:()=>eu,notices:()=>tu,settings:()=>ru,views:()=>iu});var Jh={"open-terminal-external-root":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-external-current":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332"},Zh={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72B6\u6001\u680F","error-spawning-terminal":"\u555F\u52A8\u7EC8\u7AEF\u65F6\u51FA\u9519","error-spawning-resizer":"\u555F\u52A8\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u65F6\u51FA\u9519","failed-to-kill-pseudoterminal":"\u7EC8\u6B62\u4F2A\u7EC8\u7AEF\u5931\u8D25","no-python-to-start-unix-pseudoterminal":"\u6CA1\u6709Python\u6765\u542F\u52A8Unix\u4F2A\u7EC8\u7AEF","resizer-disabled":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},Qh={"open-terminal-external":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F","restart-terminal":"\u91CD\u542F\u7EC8\u7AEF\uFF08\u548C\u7F29\u653E\u8FF8\u7A0B\uFF09","save-as-HTML":"\u50A8\u5B58\u4E3A HTML"},eu="\u7EC8\u7AEF",tu={"spawning-terminal":"\u7EC8\u7AEF\u555F\u52A8\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7EC8\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},ru={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u952E\u9009\u5355","enable-Windows-conhost-workaround":"\u542F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u51B3\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u6267\u884C\u300Cconhost.exe\u300D\u6CA1\u6709\u521B\u5EFA\u89C6\u7A97\uFF0C\u8BF7\u7981\u7528\u3002\u65E0\u4FDD\u8BC1\u8FD9\u4F1A\u8D77\u4F5C\u7528\u3002","error-notice-timeout":"\u9519\u8BEF\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002",executables:"\u53EF\u6267\u884C\u6587\u4EF6","executable-list":{darwin:"macOS",linux:"Linux",type:{external:"\uFF08\u5916\u90E8\uFF09",integrated:"\uFF08\u6574\u5408\u5F0F\uFF09"},win32:"Microsoft Windows"},"hide-status-bar":"\u9690\u85CF\u72B6\u6001\u680F","hide-status-bar-options":{never:"\u4ECE\u4E0D",always:"\u603B\u662F",focused:"\u5F53\u805A\u7126\u7EC8\u7AEF\u65F6",running:"\u5F53\u6267\u884C\u7EC8\u7AEF\u65F6"},language:"\u8BED\u8A00","language-default":"\u4F7F\u7528\u5E94\u7528\u8BBE\u5B9A","language-description":"\u4EC5\u9002\u7528\u65BC\u6B64\u63D2\u4EF6\u3002\u6807\u6709\u{1F6A7}\u7684\u8BED\u8A00\u9700\u8981\u60A8\u5E2E\u52A9\u6765\u7FFB\u8BD1\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002","python-executable":"Python \u53EF\u6267\u884C\u6587\u4EF6","python-executable-description":"\u4E8EUnix\u542F\u52A8\u6574\u5408\u5F0F\u7EC8\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u672C\u6846\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8BBE","reset-all":"\u91CD\u8BBE\u5168\u90E8"},iu={terminal:{"display-name":"\u7EC8\u7AEF\uFF1A{{- executable}}","restored-history":`
\r * \u5DF2\u8FD8\u539F\u4E8E{{- time}}\u7684\u5386\u53F2
\r`}},su={commands:Jh,errors:Zh,menus:Qh,name:eu,notices:tu,settings:ru,views:iu};var Li={};X(Li,{commands:()=>nu,default:()=>du,errors:()=>ou,menus:()=>au,name:()=>lu,notices:()=>cu,settings:()=>hu,views:()=>uu});var nu={"open-terminal-external-root":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-external-current":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304"},ou={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72C0\u614B\u6B04","error-spawning-terminal":"\u555F\u52D5\u7D42\u7AEF\u6642\u51FA\u932F","error-spawning-resizer":"\u555F\u52D5\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u6642\u51FA\u932F","failed-to-kill-pseudoterminal":"\u7D42\u6B62\u507D\u7D42\u7AEF\u5931\u6557","no-python-to-start-unix-pseudoterminal":"\u6C92\u6709Python\u4F86\u555F\u52D5Unix\u507D\u7D42\u7AEF","resizer-disabled":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},au={"open-terminal-external":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F","restart-terminal":"\u91CD\u555F\u7D42\u7AEF\uFF08\u548C\u7E2E\u653E\u7A0B\u5F0F\uFF09","save-as-HTML":"\u5132\u5B58\u70BA HTML"},lu="\u7D42\u7AEF",cu={"spawning-terminal":"\u7D42\u7AEF\u555F\u52D5\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7D42\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},hu={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u9375\u9078\u55AE","enable-Windows-conhost-workaround":"\u555F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u6C7A\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u57F7\u884C\u300Cconhost.exe\u300D\u6C92\u6709\u5275\u5EFA\u8996\u7A97\uFF0C\u8ACB\u7981\u7528\u3002\u7121\u4FDD\u8B49\u9019\u6703\u8D77\u4F5C\u7528\u3002","error-notice-timeout":"\u932F\u8AA4\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002",executables:"\u57F7\u884C\u6A94","executable-list":{darwin:"macOS",linux:"Linux",type:{external:"\uFF08\u5916\u90E8\uFF09",integrated:"\uFF08\u6574\u5408\u5F0F\uFF09"},win32:"Microsoft Windows"},"hide-status-bar":"\u96B1\u85CF\u72C0\u614B\u6B04","hide-status-bar-options":{never:"\u5F9E\u4E0D",always:"\u7E3D\u662F",focused:"\u7576\u805A\u7126\u7D42\u7AEF\u6642",running:"\u7576\u57F7\u884C\u7D42\u7AEF\u6642"},language:"\u8A9E\u8A00","language-default":"\u4F7F\u7528\u61C9\u7528\u7A0B\u5F0F\u8A2D\u5B9A","language-description":"\u50C5\u9069\u7528\u65BC\u6B64\u5916\u639B\u7A0B\u5F0F\u3002\u6A19\u6709\u{1F6A7}\u7684\u8A9E\u8A00\u9700\u8981\u60A8\u5E6B\u52A9\u4F86\u7FFB\u8B6F\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002","python-executable":"Python \u57F7\u884C\u6A94","python-executable-description":"\u65BCUnix\u555F\u52D5\u6574\u5408\u5F0F\u7D42\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u5B57\u57DF\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8A2D","reset-all":"\u91CD\u8A2D\u5168\u90E8"},uu={terminal:{"display-name":"\u7D42\u7AEF\uFF1A{{- executable}}","restored-history":`
\r * \u5DF2\u9084\u539F\u65BC{{- time}}\u7684\u6B77\u53F2
\r`}},du={commands:nu,errors:ou,menus:au,name:lu,notices:cu,settings:hu,views:uu};var js=!1,ee="translation",Ct="en",$s={default:[Ct],zh:["zh-Hans",Ct],"zh-CN":["zh-Hans","zh",Ct],"zh-TW":["zh-Hant","zh",Ct]},Zt={am:{[ee]:ri},cs:{[ee]:si},da:{[ee]:ni},de:{[ee]:oi},en:{[ee]:ai,asset:ii,language:_i},es:{[ee]:li},fa:{[ee]:ci},fr:{[ee]:hi},id:{[ee]:ui},it:{[ee]:di},ja:{[ee]:fi},ko:{[ee]:pi},nl:{[ee]:gi},no:{[ee]:mi},pl:{[ee]:vi},pt:{[ee]:yi},"pt-BR":{[ee]:bi},ro:{[ee]:Si},ru:{[ee]:wi},sq:{[ee]:Ci},th:{[ee]:xi},tr:{[ee]:Ei},"zh-Hans":{[ee]:ki},"zh-Hant":{[ee]:Li}};(function(s){})(Zt[Ct].language);var lo={tmp:()=>ao()};async function Ft(t){return Promise.resolve().then(()=>Me(Sr(lo),t)?lo[t]():require(t))}var co=`# -*- coding: UTF-8
# dependencies: (none)

import fcntl as _fcntl
import os as _os
import pty as _pty
import selectors as _selectors
import struct as _struct
import sys as _sys
import termios as _termios
import typing as _typing

if _sys.platform != "win32":
    CHUNK_SIZE = 1024
    STDIN = _sys.stdin.fileno()
    STDOUT = _sys.stdout.fileno()
    CMDIO = 3

    pid: int
    pty_fd: int
    pid, pty_fd = _pty.fork()  # type: ignore
    if pid == 0:
        _os.execvpe(
            _sys.argv[1], _sys.argv[1:], _os.environ | {"TERM": "xterm-256color"}
        )

    def _write_all(fd: int, data: bytes) -> None:
        while data:
            data = data[_os.write(fd, data) :]

    with _selectors.DefaultSelector() as selector:
        running = True

        def pipe_pty():
            try:
                data = _os.read(pty_fd, CHUNK_SIZE)
            except OSError:
                data = b""
            if not data:
                selector.unregister(pty_fd)
                global running
                running = False
                return
            _write_all(STDOUT, data)

        def pipe_stdin():
            data = _os.read(STDIN, CHUNK_SIZE)
            if not data:
                selector.unregister(STDIN)
                return
            _write_all(pty_fd, data)

        def process_cmdio():
            data = _os.read(CMDIO, CHUNK_SIZE)
            if not data:
                selector.unregister(CMDIO)
                return
            for line in data.decode("UTF-8", "strict").splitlines():
                rows, columns = _typing.cast(
                    tuple[int, int],
                    tuple(int(ss.strip()) for ss in line.split("x", 2)),
                )
                _fcntl.ioctl(
                    pty_fd,
                    _termios.TIOCSWINSZ,
                    _struct.pack("HHHH", columns, rows, 0, 0),
                )

        selector.register(pty_fd, _selectors.EVENT_READ, pipe_pty)
        selector.register(STDIN, _selectors.EVENT_READ, pipe_stdin)
        selector.register(CMDIO, _selectors.EVENT_READ, process_cmdio)
        while running:
            for key, _ in selector.select():
                key.data()

    _sys.exit(_os.waitstatus_to_exitcode(_os.waitpid(pid, 0)[1]))

_sys.exit(1)
`;var ho=`# -*- coding: UTF-8 -*-
# dependencies: psutil, pywinctl

import contextlib as _contextlib
import psutil as _psutil
import pywinctl as _pywinctl  # type: ignore
import pywintypes as _pywintypes
import sys as _sys
import types as _types
import typing as _typing
import win32api as _win32api
import win32con as _win32con
import win32console as _win32console
import win32file as _win32file
import win32gui as _win32gui
import win32process as _win32process

if _sys.platform == "win32":

    def main() -> None:
        pid = int(input("PID: "))
        print(f"received: {pid}")
        proc = _psutil.Process(pid)
        procs = (proc,) + tuple(proc.children(recursive=True))
        print(f"process(es): {procs}")
        pids: _typing.Mapping[int, _psutil.Process] = _types.MappingProxyType(
            {proc.pid: proc for proc in procs}
        )

        windows: _typing.Collection[_pywinctl.Window] = _pywinctl.getAllWindows()
        print(f"window(s): {windows}")
        for win in windows:
            win_pid = win_to_pid(win)
            if win_pid in pids:
                resizer(pids[win_pid], win)
                return

    def win_to_pid(window: _pywinctl.Window) -> int:
        return _win32process.GetWindowThreadProcessId(window.getHandle())[1]

    def resizer(process: _psutil.Process, window: _pywinctl.BaseWindow) -> None:
        print(f"window: {window}")
        r_in = resizer_in(process)
        r_out = resizer_out(process, window)
        next(r_out)
        for size in r_in:
            r_out.send(size)

    def resizer_in(process: _psutil.Process) -> _typing.Iterator[tuple[int, int]]:
        while True:
            size0 = ""
            while not size0:  # stdin watchdog triggers this loop
                if not process.is_running():
                    return
                size0 = input("size: ")
            size = _typing.cast(
                tuple[int, int],
                tuple(int(s.strip()) for s in size0.split("x", 2)),
            )
            print(f"received: {'x'.join(map(str, size))}")
            yield size

    def resizer_out(
        process: _psutil.Process, window: _pywinctl.BaseWindow
    ) -> _typing.Generator[None, tuple[int, int], None]:
        window.hide()

        @_typing.final
        class ConsoleScreenBufferInfo(_typing.TypedDict):
            Size: _win32console.PyCOORDType
            CursorPosition: _win32console.PyCOORDType
            Attributes: int
            Window: _win32console.PySMALL_RECTType
            MaximumWindowSize: _win32console.PyCOORDType

        def ignore_error(func: _typing.Callable[[], None]) -> bool:
            try:
                func()
                return True
            except _pywintypes.error:
                return False

        @_contextlib.contextmanager
        def attach_console(
            pid: int,
        ) -> _typing.Iterator[_win32console.PyConsoleScreenBufferType]:
            try:
                _win32console.AttachConsole(pid)  # type: ignore
                yield (_win32console.PyConsoleScreenBufferType)(  # type: ignore
                    _win32file.CreateFile(
                        "CONOUT$",
                        _win32file.GENERIC_READ | _win32file.GENERIC_WRITE,
                        _win32file.FILE_SHARE_WRITE,
                        None,
                        _win32file.OPEN_EXISTING,
                        0,
                        None,
                    )  # GetStdHandle gives the piped handle instead of the console handle
                )
            finally:
                _win32console.FreeConsole()

        def consoleCtrlHandler(event: int) -> bool:
            if event in (
                _win32con.CTRL_C_EVENT,
                _win32con.CTRL_BREAK_EVENT,
                _win32con.CTRL_CLOSE_EVENT,
            ):
                return True
            return False

        _win32console.FreeConsole()
        with attach_console(process.pid) as console:
            _win32api.SetConsoleCtrlHandler(consoleCtrlHandler, True)
            while True:
                columns: int
                rows: int
                columns, rows = yield
                info: ConsoleScreenBufferInfo = (
                    console.GetConsoleScreenBufferInfo()  # type: ignore
                )
                old_rect = window.getClientFrame()
                old_actual_rect = window.size
                old_cols: int = (
                    info["Window"].Right - info["Window"].Left + 1  # type: ignore
                )
                old_rows: int = (
                    info["Window"].Bottom - info["Window"].Top + 1  # type: ignore
                )
                old_width = old_rect.right - old_rect.left
                old_height = old_rect.bottom - old_rect.top
                size = (
                    int(old_width * columns / old_cols)
                    + old_actual_rect.width
                    - old_width,
                    int(old_height * rows / old_rows)
                    + old_actual_rect.height
                    - old_height,
                )
                print(f"pixel size: {size}")
                setters = [
                    # almost accurate, works for alternate screen buffer
                    lambda: _win32gui.SetWindowPos(
                        _typing.cast(int, window.getHandle()),
                        None,
                        0,
                        0,
                        *size,
                        _win32con.SWP_NOACTIVATE
                        | _win32con.SWP_NOREDRAW
                        | _win32con.SWP_NOZORDER,
                    ),
                    # accurate, SetConsoleWindowInfo does not work for alternate screen buffer
                    lambda: console.SetConsoleWindowInfo(  # type: ignore
                        True,
                        _win32console.PySMALL_RECTType(0, 0, columns - 1, old_rows - 1),  # type: ignore
                    ),
                    lambda: console.SetConsoleScreenBufferSize(
                        _win32console.PyCOORDType(columns, old_rows)  # type: ignore
                    ),
                    lambda: console.SetConsoleWindowInfo(  # type: ignore
                        True,
                        _win32console.PySMALL_RECTType(0, 0, columns - 1, rows - 1),  # type: ignore
                    ),
                    lambda: console.SetConsoleScreenBufferSize(
                        _win32console.PyCOORDType(columns, rows)  # type: ignore
                    ),
                ]
                if old_cols < columns:
                    setters[1], setters[2] = setters[2], setters[1]
                if old_rows < rows:
                    setters[3], setters[4] = setters[4], setters[3]
                for setter in setters:
                    ignore_error(setter)
                print(f"resized")

    if __name__ == "__main__":
        main()
`;var cs=Ft("node:child_process"),Pd=Ft("node:fs"),Md=Ft("tmp");function uo(t){t.write(`${`
\x1B[2K`.repeat(t.rows)}\x1B[H`)}var or,Wt,Mr,nr=class{constructor(s,n,c,o){this.plugin=s;ce(this,"shell");ce(this,"conhost");ce(this,"exit");J(this,or,(async()=>{let{plugin:s}=this,{settings:n,language:c}=s,{pythonExecutable:o}=n,{i18n:e}=c;return o===""?null:Dt(async()=>(await cs).spawn(o,["-c",ho],{stdio:["pipe","pipe","pipe"],windowsHide:!0})).then(i=>{try{try{i.stderr.on("data",a=>{console.error(a.toString())})}finally{i.once("exit",(a,u)=>{a!==0&&Be(()=>e.t("errors.resizer-exited-unexpectedly",{code:a!=null?a:u}),n.errorNoticeTimeout,s)})}}catch(a){}return i})})());this.conhost=s.settings.enableWindowsConhostWorkaround;let e=V(this,or).catch(()=>null).then(async i=>{var a,u;try{let f=(await Md).fileSync({discardDescriptor:!0});try{let l=[...this.conhost?["C:\\Windows\\System32\\conhost.exe"]:[],"C:\\Windows\\System32\\cmd.exe","/C",`${K(a=nr,Wt,Mr).call(a,n)} ${(o!=null?o:[]).map(g=>{var v;return K(v=nr,Wt,Mr).call(v,g)}).join(" ")} & call echo %^ERRORLEVEL% >${K(u=nr,Wt,Mr).call(u,f.name)}`];return[i,f,await Dt(async()=>(await cs).spawn(l[0],l.slice(1),{cwd:c,stdio:["pipe","pipe","pipe"],windowsHide:i===null,windowsVerbatimArguments:!0}))]}catch(l){throw f.removeCallback(),l}}catch(f){throw i==null||i.kill(),f}}).then(async([i,a,u])=>{var f;try{if(i!==null)try{await wt(i.stdin,`${(f=u.pid)!=null?f:-1}
`);let l=window.setInterval(()=>void wt(i.stdin,`
`).catch(()=>{}),Ps);try{i.once("exit",()=>{window.clearInterval(l)})}catch(g){throw window.clearInterval(l),g}}catch(l){try{We(Fe(l),()=>this.plugin.language.i18n.t("errors.error-spawning-resizer"),this.plugin)}finally{i.kill()}}}catch(l){}return[u,a]});this.shell=e.then(([i])=>i),this.exit=e.then(async([i,a])=>new Promise(Jt(u=>i.once("exit",(f,l)=>{(async()=>{var g,v;try{let p=parseInt((await Pd).readFileSync(a.name,{encoding:"utf-8",flag:"r"}).trim(),10);u(isNaN(p)?(g=f!=null?f:l)!=null?g:NaN:p)}catch(p){u((v=f!=null?f:l)!=null?v:NaN)}finally{a.removeCallback()}})().catch(()=>{})}))))}async resize(s,n){let c=await V(this,or);if(c===null)throw new Error(this.plugin.language.i18n.t("errors.resizer-disabled"));await wt(c.stdin,`${s}x${n}
`)}async pipe(s){let n=await this.shell;uo(s),n.stdout.once("data",o=>{n.stdout.on("data",e=>{s.write(e)}),!this.conhost&&s.write(o)}),n.stderr.on("data",o=>{s.write(o)});let c=s.onData(async o=>wt(n.stdin,o));this.exit.finally(()=>{c.dispose()})}},Pr=nr;or=new WeakMap,Wt=new WeakSet,Mr=function(s){return`"${s.replace('"','\\"')}"`.replace(/(?<meta>[()%!^"<>&|])/gu,"^$<meta>")},J(Pr,Wt);var Br=class{constructor(s,n,c,o){this.plugin=s;ce(this,"shell");ce(this,"exit");let{settings:e,language:i}=s,{pythonExecutable:a}=e;this.shell=Dt(async()=>{if(a==="")throw new Error(i.i18n.t("errors.no-python-to-start-unix-pseudoterminal"));return(await cs).spawn(a,["-c",co,n].concat(o!=null?o:[]),{cwd:c,stdio:["pipe","pipe","pipe","pipe"],windowsHide:!0})}).then(u=>{try{u.stderr.on("data",f=>{console.error(f.toString())})}catch(f){}return u}),this.exit=this.shell.then(async u=>new Promise(Jt(f=>u.once("exit",(l,g)=>{var v;f((v=l!=null?l:g)!=null?v:NaN)}))))}async pipe(s){let n=await this.shell;uo(s),n.stdout.on("data",o=>{s.write(o)}),n.stderr.on("data",o=>{s.write(o)});let c=s.onData(async o=>wt(n.stdin,o));this.exit.finally(()=>{c.dispose()})}async resize(s,n){await wt((await this.shell).stdio[3],`${s}x${n}
`)}},gt;(c=>(c.PLATFORM_PTYS={darwin:Br,linux:Br,win32:Pr},c.SUPPORTED_PLATFORMS=Sr(c.PLATFORM_PTYS),c.PLATFORM_PTY=Me(c.SUPPORTED_PLATFORMS,At)?c.PLATFORM_PTYS[At]:null))(gt||(gt={}));var mt;(c=>{c.HIDE_STATUS_BAR_OPTIONS=["never","always","focused","running"];async function s(o,e){Object.assign(o,await e.loadData())}c.load=s;async function n(o,e){await e.saveData(o)}c.save=n})(mt||(mt={}));var ye={addToCommand:!0,addToContextMenu:!0,enableWindowsConhostWorkaround:!0,errorNoticeTimeout:0,executables:{darwin:{extArgs:["$PWD"],extExe:"/System/Applications/Utilities/Terminal.app/Contents/macOS/Terminal",intArgs:[],intExe:"/bin/zsh"},linux:{extArgs:[],extExe:"xterm",intArgs:[],intExe:"/bin/sh"},win32:{extArgs:[],extExe:"C:\\Windows\\System32\\cmd.exe",intArgs:[],intExe:"C:\\Windows\\System32\\cmd.exe"}},hideStatusBar:"focused",language:"",noticeTimeout:5,pythonExecutable:"python3"},be,Le,ar,hs,ge,we,Ir=class extends _e.PluginSettingTab{constructor(n){super(n.app,n);this.plugin=n;J(this,be);J(this,ar);J(this,ge)}display(){let{containerEl:n,plugin:c}=this,{settings:o,language:e,statusBarHider:i}=c,{i18n:a}=e;n.empty(),n.createEl("h1",{text:a.t("name")}),new _e.Setting(n).setName(a.t("settings.language")).setDesc(a.t("settings.language-description")).addDropdown(K(this,be,Le).call(this,()=>o.language,u=>void(o.language=u),{post:(u,f)=>void u.onChange(async l=>{await f(l),await e.updateLanguage(),this.display()}),pre:u=>void u.addOption("",a.t("settings.language-default")).addOptions(Object.fromEntries(Object.entries(Zt.en.language).filter(f=>f.every(l=>typeof l=="string"))))})).addExtraButton(K(this,ge,we).call(this,()=>void(o.language=ye.language),a.t("asset:settings.language-icon"),{post:(u,f)=>void u.onClick(async()=>{await f(),await e.updateLanguage(),this.display()})})),new _e.Setting(n).setName(a.t("settings.reset-all")).addButton(K(this,ge,we).call(this,async()=>{Object.assign(o,structuredClone(ye)),await e.updateLanguage()})),new _e.Setting(n).setName(a.t("settings.add-to-command")).addToggle(K(this,be,Le).call(this,()=>o.addToCommand,u=>void(o.addToCommand=u))).addExtraButton(K(this,ge,we).call(this,()=>void(o.addToCommand=ye.addToCommand),a.t("asset:settings.add-to-command-icon"))),new _e.Setting(n).setName(a.t("settings.add-to-context-menu")).addToggle(K(this,be,Le).call(this,()=>o.addToContextMenu,u=>void(o.addToContextMenu=u))).addExtraButton(K(this,ge,we).call(this,()=>void(o.addToContextMenu=ye.addToContextMenu),a.t("asset:settings.add-to-context-menu-icon"))),new _e.Setting(n).setName(a.t("settings.hide-status-bar")).addDropdown(K(this,be,Le).call(this,()=>o.hideStatusBar,u=>Me(mt.HIDE_STATUS_BAR_OPTIONS,u)?(o.hideStatusBar=u,!0):!1,{post:(u,f)=>void u.onChange(async l=>{await f(l),i.update()}),pre:u=>void u.addOptions(Object.fromEntries(mt.HIDE_STATUS_BAR_OPTIONS.map(f=>[f,a.t(`settings.hide-status-bar-options.${f}`)])))})).addExtraButton(K(this,ge,we).call(this,()=>void(o.hideStatusBar=ye.hideStatusBar),a.t("asset:settings.hide-status-bar-icon"),{post:(u,f)=>void u.onClick(async()=>{await f(),i.update()})})),new _e.Setting(n).setName(a.t("settings.notice-timeout")).setDesc(a.t("settings.notice-timeout-description")).addText(K(this,be,Le).call(this,()=>o.noticeTimeout.toString(),K(this,ar,hs).call(this,u=>void(o.noticeTimeout=u)))).addExtraButton(K(this,ge,we).call(this,()=>void(o.noticeTimeout=ye.noticeTimeout),a.t("asset:settings.notice-timeout-icon"))),new _e.Setting(n).setName(a.t("settings.error-notice-timeout")).setDesc(a.t("settings.error-notice-timeout-description")).addText(K(this,be,Le).call(this,()=>o.errorNoticeTimeout.toString(),K(this,ar,hs).call(this,u=>void(o.errorNoticeTimeout=u)))).addExtraButton(K(this,ge,we).call(this,()=>void(o.noticeTimeout=ye.noticeTimeout),a.t("asset:settings.error-notice-timeout-icon"))),new _e.Setting(n).setName(a.t("settings.python-executable")).setDesc(a.t("settings.python-executable-description")).addText(K(this,be,Le).call(this,()=>o.pythonExecutable,u=>void(o.pythonExecutable=u),{post:u=>void u.setPlaceholder(a.t("settings.python-executable-placeholder"))})).addExtraButton(K(this,ge,we).call(this,()=>void(o.pythonExecutable=ye.pythonExecutable),a.t("asset:settings.python-executable-icon"))),n.createEl("h2",{text:a.t("settings.executables")});for(let u of gt.SUPPORTED_PLATFORMS)new _e.Setting(n).setName(`${a.t(`settings.executable-list.${u}`)}${a.t("settings.executable-list.type.external")}`).addText(K(this,be,Le).call(this,()=>o.executables[u].extExe,f=>void(o.executables[u].extExe=f))).addExtraButton(K(this,ge,we).call(this,()=>void(o.executables[u].extExe=ye.executables[u].extExe),a.t("asset:settings.executable-list-external-icon"))),new _e.Setting(n).setName(`${a.t(`settings.executable-list.${u}`)}${a.t("settings.executable-list.type.integrated")}`).addText(K(this,be,Le).call(this,()=>o.executables[u].intExe,f=>void(o.executables[u].intExe=f))).addExtraButton(K(this,ge,we).call(this,()=>void(o.executables[u].intExe=ye.executables[u].intExe),a.t("asset:settings.executable-list-integrated-icon")));new _e.Setting(n).setName(a.t("settings.enable-Windows-conhost-workaround")).setDesc(a.t("settings.enable-Windows-conhost-workaround-description")).addToggle(K(this,be,Le).call(this,()=>o.enableWindowsConhostWorkaround,u=>void(o.enableWindowsConhostWorkaround=u))).addExtraButton(K(this,ge,we).call(this,()=>void(o.enableWindowsConhostWorkaround=ye.enableWindowsConhostWorkaround),a.t("asset:settings.enable-Windows-conhost-workaround-icon")))}};be=new WeakSet,Le=function(n,c,o={}){return e=>{var a,u;((a=o.pre)!=null?a:()=>{})(e);let i=async f=>{let l=await c(f,e,n);typeof l=="boolean"&&!l||await mt.save(this.plugin.settings,this.plugin)};e.setValue(n()).onChange(i),((u=o.post)!=null?u:()=>{})(e,i)}},ar=new WeakSet,hs=function(n,c=!1){return async(o,e,i)=>{let a=Number(o);if(!(c?Number.isSafeInteger(a):isFinite(a)))return e.setValue(i()),!1;let u=await n(a,e,i);return!(typeof u=="boolean"&&!u)}},ge=new WeakSet,we=function(n,c=this.plugin.language.i18n.t("asset:settings.reset-icon"),o={}){return e=>{var a,u;((a=o.pre)!=null?a:()=>{})(e);let i=async()=>{let f=await n(e);if(typeof f=="boolean"&&!f)return;let l=mt.save(this.plugin.settings,this.plugin);this.display(),await l};e.setTooltip(this.plugin.language.i18n.t("settings.reset")).setIcon(c).onClick(i),((u=o.post)!=null?u:()=>{})(e,i)}};var zt=require("obsidian");var mo=Yt(po());var vo=Yt(_o()),yo=Yt(go());var bo=require("obsidian");var Bd=Ft("node:child_process");async function So(t,s,n){return Dt(async()=>(await Bd).spawn(t,n!=null?n:[],{cwd:s,detached:!0,shell:!0,stdio:["ignore","ignore","ignore"]})).then(c=>{try{c.unref()}catch(o){}return c})}var Rt,cr,Wr,Fr=class{constructor(s,n,c,o,e,i){this.plugin=s;ce(this,"terminal");ce(this,"addons");ce(this,"exit");J(this,Rt,void 0);J(this,cr,!1);J(this,Wr,Ms((0,bo.debounce)(async(s,n,c,o)=>{try{await(await V(this,Rt)).resize(c,o),this.terminal.resize(c,o),s()}catch(e){n(e)}},Ds,!1)));this.terminal=new mo.Terminal(e),this.addons=Object.assign({fit:new vo.FitAddon,serialize:new yo.SerializeAddon},i);for(let a of Object.values(this.addons))this.terminal.loadAddon(a);typeof o!="undefined"&&(this.terminal.resize(o.columns,o.rows),this.terminal.write(o.data)),Se(this,Rt,Promise.resolve().then(async()=>{let a=await c(this.terminal);return await a.pipe(this.terminal),a})),this.exit=V(this,Rt).then(async a=>a.exit).finally(()=>void Se(this,cr,!0)),this.terminal.open(n)}async close(){return V(this,Rt).then(async s=>s.shell,()=>null).then(s=>{var n;if(V(this,cr)||((n=s==null?void 0:s.kill())==null||n)){this.terminal.dispose();return}throw new Error(this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"))})}async resize(){let{fit:s}=this.addons,n=s.proposeDimensions();typeof n!="undefined"&&await V(this,Wr).call(this,n.cols,n.rows)}serialize(){return{columns:this.terminal.cols,data:this.addons.serialize.serialize({excludeAltBuffer:!0,excludeModes:!0}),rows:this.terminal.rows}}};Rt=new WeakMap,cr=new WeakMap,Wr=new WeakMap;var xo=Yt(wo());var Eo=Yt(Co());var Ut,hr,yt,Ce,Tt,He,jr,gs,ms,ur,vs,dr,ys,$r,ko,vt=class extends zt.ItemView{constructor(n,c){super(c);this.plugin=n;J(this,Ce);J(this,He);J(this,ur);J(this,dr);J(this,$r);J(this,Ut,null);J(this,hr,!1);J(this,yt,{__type:vt.State.TYPE,args:[],cwd:"",executable:""})}async setState(n,c){await super.setState(n,c),Fs(vt.State.TYPE,n)&&Object.assign(V(this,yt),n)}getState(){var c;let n=(c=V(this,Ce,Tt))==null?void 0:c.serialize();return typeof n!="undefined"&&(V(this,yt).serial=n),Object.assign(super.getState(),V(this,yt))}async onResize(){var c;super.onResize();let{containerEl:n}=this;n.offsetWidth<=0||n.offsetHeight<=0||await((c=V(this,Ce,Tt))==null?void 0:c.resize())}getDisplayText(){return this.plugin.language.i18n.t(`views.${vt.type.id}.display-name`,{executable:K(this,dr,ys).call(this)})}getIcon(){return this.plugin.language.i18n.t(`asset:views.${vt.type.id}-icon`)}getViewType(){return vt.namespacedViewType}onPaneMenu(n,c){super.onPaneMenu(n,c);let{i18n:o}=this.plugin.language;n.addSeparator().addItem(e=>e.setTitle(o.t("menus.restart-terminal")).setIcon(o.t("asset:menus.restart-terminal-icon")).onClick(()=>{K(this,ur,vs).call(this)})).addItem(e=>{var i;return e.setTitle(o.t("menus.save-as-HTML")).setIcon(o.t("asset:menus.save-as-HTML-icon")).setDisabled(typeof((i=V(this,Ce,Tt))==null?void 0:i.addons.serialize)=="undefined").onClick(()=>{var u;let a=(u=V(this,Ce,Tt))==null?void 0:u.addons.serialize;typeof a!="undefined"&&Hs(a.serializeAsHTML({includeGlobalBackground:!1,onlySelection:!1}),"text/html; charset=UTF-8;",`${K(this,dr,ys).call(this)}.html`)})})}async onOpen(){await super.onOpen();let{app:n,language:c,statusBarHider:o}=this.plugin;this.registerEvent(n.workspace.on("active-leaf-change",e=>{if(e===this.leaf){Se(this,He,!0,ms);return}Se(this,He,!1,ms)})),this.register(c.registerUse(()=>zs(this))),this.register(o.hide(()=>K(this,$r,ko).call(this))),this.registerEvent(n.workspace.on("active-leaf-change",()=>{o.update()})),this.register(()=>void Se(this,Ce,null,gs)),K(this,ur,vs).call(this)}},de=vt;Ut=new WeakMap,hr=new WeakMap,yt=new WeakMap,Ce=new WeakSet,Tt=function(){return V(this,Ut)},He=new WeakSet,jr=function(){return V(this,hr)},gs=function(n){var f;(f=V(this,Ut))==null||f.close().catch(l=>{We(Fe(l),()=>this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"),this.plugin)});let{plugin:c}=this,{app:o,language:e,settings:i}=c,{i18n:a}=e,{requestSaveLayout:u}=o.workspace;n==null||n.exit.then(l=>{Be(()=>a.t("notices.terminal-exited",{code:l}),Me(As,l)?i.noticeTimeout:i.errorNoticeTimeout,c)},l=>{We(Fe(l),()=>a.t("errors.error-spawning-terminal"),c)}),n==null||n.terminal.onWriteParsed(u),n==null||n.terminal.onResize(u),V(this,He,jr)?n==null||n.terminal.focus():n==null||n.terminal.blur(),Se(this,Ut,n)},ms=function(n){var o;let c=(o=V(this,Ce,Tt))==null?void 0:o.terminal;V(this,He,jr)?c==null||c.focus():c==null||c.blur(),Se(this,hr,n)},ur=new WeakSet,vs=function(){let{containerEl:n}=this;n.empty();let c=n.createDiv({}),o=Ws(c,async e=>{try{let{plugin:i}=this,a=V(this,yt),{language:u}=i,{i18n:f}=u;Se(this,Ce,new vt.EMULATOR(i,c,l=>{if(typeof a.serial!="undefined"&&l.write(f.t("views.terminal.restored-history",{time:new Date().toLocaleString(u.language)})),gt.PLATFORM_PTY===null)throw new Error(f.t("errors.unsupported-platform"));return new gt.PLATFORM_PTY(i,a.executable,a.cwd,a.args)},a.serial,{allowProposedApi:!0},{search:new xo.SearchAddon,webLinks:new Eo.WebLinksAddon((l,g)=>Us(g))}),gs),await V(this,Ce,Tt).resize()}finally{e.disconnect()}});this.register(()=>{o.disconnect()})},dr=new WeakSet,ys=function(){let{executable:n}=V(this,yt);return ti(n,Ns(n))},$r=new WeakSet,ko=function(){switch(this.plugin.settings.hideStatusBar){case"focused":return V(this,He,jr);case"running":return!0;default:return!1}},ce(de,"type",new yr("terminal")),ce(de,"namespacedViewType");(n=>{n.EMULATOR=Fr;let s;(o=>o.TYPE="8d54e44a-32e7-4297-8ae2-cff88e92ce28")(s=n.State||(n.State={}))})(de||(de={}));function Lo(t){let s=["root","current"],n=["external","integrated"],{app:c,settings:o,language:e}=t,{i18n:i}=e,a=(u,f)=>l=>!1;if(t.registerView(de.type.namespaced(t),u=>new de(t,u)),Me(gt.SUPPORTED_PLATFORMS,At)){let u=At,f=c.vault.adapter,l=(v,p)=>{(async()=>{let r=o.executables[u];switch(p){case"external":{Be(()=>i.t("notices.spawning-terminal",{executable:r.extExe}),o.noticeTimeout,t),await So(r.extExe,v,r.extArgs);break}case"integrated":{Be(()=>i.t("notices.spawning-terminal",{executable:r.intExe}),o.noticeTimeout,t);let{workspace:d}=c,_=d.getLeavesOfType(de.type.namespaced(t)),h={__type:de.State.TYPE,args:r.intArgs,cwd:v,executable:r.intExe};await(()=>{let m=_.last();return typeof m=="undefined"?d.getLeaf("split","horizontal"):(d.setActiveLeaf(m,{focus:!1}),d.getLeaf("tab"))})().setViewState({active:!0,state:h,type:de.type.namespaced(t)});break}default:throw new TypeError(p)}})().catch(r=>{We(Fe(r),()=>i.t("errors.error-spawning-terminal"),t)})},g=(v,p)=>{v.addSeparator();for(let r of n)v.addItem(d=>d.setTitle(i.t(`menus.open-terminal-${r}`)).setIcon(i.t(`asset:menus.open-terminal-${r}-icon`)).onClick(()=>{l(f.getFullPath(p.path),r)}))};a=(v,p)=>r=>{if(!o.addToCommand)return!1;switch(p){case"root":return r||l(f.getBasePath(),v),!0;case"current":{let d=c.workspace.getActiveFile();return d===null?!1:(r||l(f.getFullPath(d.parent.path),v),!0)}default:throw new TypeError(p)}},t.registerEvent(c.workspace.on("file-menu",(v,p)=>{o.addToContextMenu&&g(v,p instanceof zt.TFolder?p:p.parent)})),t.registerEvent(c.workspace.on("editor-menu",(v,p,r)=>{!o.addToContextMenu||r instanceof zt.MarkdownView||r.file===null||g(v,r.file.parent)}))}for(let u of n)for(let f of s){let l=`open-terminal-${u}-${f}`,g=()=>i.t(`commands.${l}`);t.addCommand({checkCallback:a(u,f),id:l,get name(){return g()},set name(v){g=Bs(()=>i.t(`commands.${l}`),()=>i.t("name"),i.t("name",{lng:Ct}),v)}})}}function ue(t){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ue(t)}function xe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function bs(t,s){if(ue(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var c=n.call(t,s||"default");if(ue(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function fr(t){var s=bs(t,"string");return ue(s)==="symbol"?s:String(s)}function Ro(t,s){for(var n=0;n<s.length;n++){var c=s[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,fr(c.key),c)}}function Ee(t,s,n){return s&&Ro(t.prototype,s),n&&Ro(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Re(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pr(t,s){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,o){return c.__proto__=o,c},pr(t,s)}function jt(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&pr(t,s)}function Ot(t,s){if(s&&(ue(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Re(t)}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ke(t)}function Ae(t,s,n){return s=fr(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function Ss(t){if(Array.isArray(t))return t}function ws(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qr(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,c=new Array(s);n<s;n++)c[n]=t[n];return c}function Cs(t,s){if(t){if(typeof t=="string")return qr(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qr(t,s)}}function xs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(t){return Ss(t)||ws(t)||Cs(t)||xs()}function To(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Oo(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?To(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}var Id={type:"logger",log:function(s){this.output("log",s)},warn:function(s){this.output("warn",s)},error:function(s){this.output("error",s)},output:function(s,n){console&&console[s]&&console[s].apply(console,n)}},Nd=function(){function t(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe(this,t),this.init(s,n)}return Ee(t,[{key:"init",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=n||Id,this.options=c,this.debug=c.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,c,o,e){return e&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(o).concat(this.prefix," ").concat(n[0])),this.logger[c](n))}},{key:"create",value:function(n){return new t(this.logger,Oo(Oo({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new t(this.logger,n)}}]),t}(),Pe=new Nd,St=function(){function t(){xe(this,t),this.observers={}}return Ee(t,[{key:"on",value:function(n,c){var o=this;return n.split(" ").forEach(function(e){o.observers[e]=o.observers[e]||[],o.observers[e].push(c)}),this}},{key:"off",value:function(n,c){if(this.observers[n]){if(!c){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(o){return o!==c})}}},{key:"emit",value:function(n){for(var c=arguments.length,o=new Array(c>1?c-1:0),e=1;e<c;e++)o[e-1]=arguments[e];if(this.observers[n]){var i=[].concat(this.observers[n]);i.forEach(function(u){u.apply(void 0,o)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(u){u.apply(u,[n].concat(o))})}}}]),t}();function _r(){var t,s,n=new Promise(function(c,o){t=c,s=o});return n.resolve=t,n.reject=s,n}function Ao(t){return t==null?"":""+t}function Hd(t,s,n){t.forEach(function(c){s[c]&&(n[c]=s[c])})}function Ls(t,s,n){function c(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function o(){return!t||typeof t=="string"}for(var e=typeof s!="string"?[].concat(s):s.split(".");e.length>1;){if(o())return{};var i=c(e.shift());!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={}}return o()?{}:{obj:t,k:c(e.shift())}}function Do(t,s,n){var c=Ls(t,s,Object),o=c.obj,e=c.k;o[e]=n}function Fd(t,s,n,c){var o=Ls(t,s,Object),e=o.obj,i=o.k;e[i]=e[i]||[],c&&(e[i]=e[i].concat(n)),c||e[i].push(n)}function Gr(t,s){var n=Ls(t,s),c=n.obj,o=n.k;if(c)return c[o]}function Po(t,s,n){var c=Gr(t,n);return c!==void 0?c:Gr(s,n)}function Vo(t,s,n){for(var c in s)c!=="__proto__"&&c!=="constructor"&&(c in t?typeof t[c]=="string"||t[c]instanceof String||typeof s[c]=="string"||s[c]instanceof String?n&&(t[c]=s[c]):Vo(t[c],s[c],n):t[c]=s[c]);return t}function $t(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Ud(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(s){return Wd[s]}):t}var Xr=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,zd=[" ",",","?","!",";"];function jd(t,s,n){s=s||"",n=n||"";var c=zd.filter(function(a){return s.indexOf(a)<0&&n.indexOf(a)<0});if(c.length===0)return!0;var o=new RegExp("(".concat(c.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),e=!o.test(t);if(!e){var i=t.indexOf(n);i>0&&!o.test(t.substring(0,i))&&(e=!0)}return e}function Mo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Kr(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Mo(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function $d(t){var s=qd();return function(){var c=ke(t),o;if(s){var e=ke(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Ot(this,o)}}function qd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Go(t,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[s])return t[s];for(var c=s.split(n),o=t,e=0;e<c.length;++e){if(!o||typeof o[c[e]]=="string"&&e+1<c.length)return;if(o[c[e]]===void 0){for(var i=2,a=c.slice(e,e+i).join(n),u=o[a];u===void 0&&c.length>e+i;)i++,a=c.slice(e,e+i).join(n),u=o[a];if(u===void 0)return;if(u===null)return null;if(s.endsWith(a)){if(typeof u=="string")return u;if(a&&typeof u[a]=="string")return u[a]}var f=c.slice(e+i).join(n);return f?Go(u,f,n):void 0}o=o[c[e]]}return o}}var Kd=function(t){jt(n,t);var s=$d(n);function n(c){var o,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return xe(this,n),o=s.call(this),Xr&&St.call(Re(o)),o.data=c||{},o.options=e,o.options.keySeparator===void 0&&(o.options.keySeparator="."),o.options.ignoreJSONStructure===void 0&&(o.options.ignoreJSONStructure=!0),o}return Ee(n,[{key:"addNamespaces",value:function(o){this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}},{key:"removeNamespaces",value:function(o){var e=this.options.ns.indexOf(o);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,f=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,l=[o,e];i&&typeof i!="string"&&(l=l.concat(i)),i&&typeof i=="string"&&(l=l.concat(u?i.split(u):i)),o.indexOf(".")>-1&&(l=o.split("."));var g=Gr(this.data,l);return g||!f||typeof i!="string"?g:Go(this.data&&this.data[o]&&this.data[o][e],i,u)}},{key:"addResource",value:function(o,e,i,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},f=this.options.keySeparator;f===void 0&&(f=".");var l=[o,e];i&&(l=l.concat(f?i.split(f):i)),o.indexOf(".")>-1&&(l=o.split("."),a=e,e=l[1]),this.addNamespaces(e),Do(this.data,l,a),u.silent||this.emit("added",o,e,i,a)}},{key:"addResources",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in i)(typeof i[u]=="string"||Object.prototype.toString.apply(i[u])==="[object Array]")&&this.addResource(o,e,u,i[u],{silent:!0});a.silent||this.emit("added",o,e,i)}},{key:"addResourceBundle",value:function(o,e,i,a,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},l=[o,e];o.indexOf(".")>-1&&(l=o.split("."),a=i,i=e,e=l[1]),this.addNamespaces(e);var g=Gr(this.data,l)||{};a?Vo(g,i,u):g=Kr(Kr({},g),i),Do(this.data,l,g),f.silent||this.emit("added",o,e,i)}},{key:"removeResourceBundle",value:function(o,e){this.hasResourceBundle(o,e)&&delete this.data[o][e],this.removeNamespaces(e),this.emit("removed",o,e)}},{key:"hasResourceBundle",value:function(o,e){return this.getResource(o,e)!==void 0}},{key:"getResourceBundle",value:function(o,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Kr(Kr({},{}),this.getResource(o,e)):this.getResource(o,e)}},{key:"getDataByLanguage",value:function(o){return this.data[o]}},{key:"hasLanguageSomeTranslations",value:function(o){var e=this.getDataByLanguage(o),i=e&&Object.keys(e)||[];return!!i.find(function(a){return e[a]&&Object.keys(e[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(St),Yo={processors:{},addPostProcessor:function(s){this.processors[s.name]=s},handle:function(s,n,c,o,e){var i=this;return s.forEach(function(a){i.processors[a]&&(n=i.processors[a].process(n,c,o,e))}),n}};function Bo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function fe(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Bo(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function Vd(t){var s=Gd();return function(){var c=ke(t),o;if(s){var e=ke(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Ot(this,o)}}function Gd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var Io={},No=function(t){jt(n,t);var s=Vd(n);function n(c){var o,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe(this,n),o=s.call(this),Xr&&St.call(Re(o)),Hd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],c,Re(o)),o.options=e,o.options.keySeparator===void 0&&(o.options.keySeparator="."),o.logger=Pe.create("translator"),o}return Ee(n,[{key:"changeLanguage",value:function(o){o&&(this.language=o)}},{key:"exists",value:function(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(o==null)return!1;var i=this.resolve(o,e);return i&&i.res!==void 0}},{key:"extractFromKey",value:function(o,e){var i=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");var a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,u=e.ns||this.options.defaultNS||[],f=i&&o.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!jd(o,i,a);if(f&&!l){var g=o.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:o,namespaces:u};var v=o.split(i);(i!==a||i===a&&this.options.ns.indexOf(v[0])>-1)&&(u=v.shift()),o=v.join(a)}return typeof u=="string"&&(u=[u]),{key:o,namespaces:u}}},{key:"translate",value:function(o,e,i){var a=this;if(ue(e)!=="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),o==null)return"";Array.isArray(o)||(o=[String(o)]);var u=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,f=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,l=this.extractFromKey(o[o.length-1],e),g=l.key,v=l.namespaces,p=v[v.length-1],r=e.lng||this.language,d=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(r&&r.toLowerCase()==="cimode"){if(d){var _=e.nsSeparator||this.options.nsSeparator;return u?(h.res="".concat(p).concat(_).concat(g),h):"".concat(p).concat(_).concat(g)}return u?(h.res=g,h):g}var h=this.resolve(o,e),m=h&&h.res,b=h&&h.usedKey||g,S=h&&h.exactUsedKey||g,C=Object.prototype.toString.apply(m),y=["[object Number]","[object Function]","[object RegExp]"],w=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,k=typeof m!="string"&&typeof m!="boolean"&&typeof m!="number";if(E&&m&&k&&y.indexOf(C)<0&&!(typeof w=="string"&&C==="[object Array]")){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,m,fe(fe({},e),{},{ns:v})):"key '".concat(g," (").concat(this.language,")' returned an object instead of string.");return u?(h.res=R,h):R}if(f){var T=C==="[object Array]",B=T?[]:{},H=T?S:b;for(var F in m)if(Object.prototype.hasOwnProperty.call(m,F)){var x="".concat(H).concat(f).concat(F);B[F]=this.translate(x,fe(fe({},e),{joinArrays:!1,ns:v})),B[F]===x&&(B[F]=m[F])}m=B}}else if(E&&typeof w=="string"&&C==="[object Array]")m=m.join(w),m&&(m=this.extendTranslation(m,o,e,i));else{var L=!1,O=!1,P=e.count!==void 0&&typeof e.count!="string",N=n.hasDefaultValue(e),z=P?this.pluralResolver.getSuffix(r,e.count,e):"",q=e["defaultValue".concat(z)]||e.defaultValue;!this.isValidLookup(m)&&N&&(L=!0,m=q),this.isValidLookup(m)||(O=!0,m=g);var W=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,$=W&&O?void 0:m,D=N&&q!==m&&this.options.updateMissing;if(O||L||D){if(this.logger.log(D?"updateKey":"missingKey",r,p,g,D?q:m),f){var A=this.resolve(g,fe(fe({},e),{},{keySeparator:!1}));A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&I&&I[0])for(var U=0;U<I.length;U++)M.push(I[U]);else this.options.saveMissingTo==="all"?M=this.languageUtils.toResolveHierarchy(e.lng||this.language):M.push(e.lng||this.language);var Q=function(te,ne,ie){var Y=N&&ie!==m?ie:$;a.options.missingKeyHandler?a.options.missingKeyHandler(te,p,ne,Y,D,e):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(te,p,ne,Y,D,e),a.emit("missingKey",te,p,ne,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?M.forEach(function(j){a.pluralResolver.getSuffixes(j,e).forEach(function(te){Q([j],g+te,e["defaultValue".concat(te)]||q)})}):Q(M,g,q))}m=this.extendTranslation(m,o,e,h,i),O&&m===g&&this.options.appendNamespaceToMissingKey&&(m="".concat(p,":").concat(g)),(O||L)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(p,":").concat(g):g,L?m:void 0):m=this.options.parseMissingKeyHandler(m))}return u?(h.res=m,h):m}},{key:"extendTranslation",value:function(o,e,i,a,u){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)o=this.i18nFormat.parse(o,fe(fe({},this.options.interpolation.defaultVariables),i),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(fe(fe({},i),{interpolation:fe(fe({},this.options.interpolation),i.interpolation)}));var l=typeof o=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),g;if(l){var v=o.match(this.interpolator.nestingRegexp);g=v&&v.length}var p=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(p=fe(fe({},this.options.interpolation.defaultVariables),p)),o=this.interpolator.interpolate(o,p,i.lng||this.language,i),l){var r=o.match(this.interpolator.nestingRegexp),d=r&&r.length;g<d&&(i.nest=!1)}i.nest!==!1&&(o=this.interpolator.nest(o,function(){for(var m=arguments.length,b=new Array(m),S=0;S<m;S++)b[S]=arguments[S];return u&&u[0]===b[0]&&!i.context?(f.logger.warn("It seems you are nesting recursively key: ".concat(b[0]," in key: ").concat(e[0])),null):f.translate.apply(f,b.concat([e]))},i)),i.interpolation&&this.interpolator.reset()}var _=i.postProcess||this.options.postProcess,h=typeof _=="string"?[_]:_;return o!=null&&h&&h.length&&i.applyPostProcessor!==!1&&(o=Yo.handle(h,o,e,this.options&&this.options.postProcessPassResolved?fe({i18nResolved:a},i):i,this)),o}},{key:"resolve",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,u,f,l,g;return typeof o=="string"&&(o=[o]),o.forEach(function(v){if(!e.isValidLookup(a)){var p=e.extractFromKey(v,i),r=p.key;u=r;var d=p.namespaces;e.options.fallbackNS&&(d=d.concat(e.options.fallbackNS));var _=i.count!==void 0&&typeof i.count!="string",h=_&&!i.ordinal&&i.count===0&&e.pluralResolver.shouldUseIntlApi(),m=i.context!==void 0&&(typeof i.context=="string"||typeof i.context=="number")&&i.context!=="",b=i.lngs?i.lngs:e.languageUtils.toResolveHierarchy(i.lng||e.language,i.fallbackLng);d.forEach(function(S){e.isValidLookup(a)||(g=S,!Io["".concat(b[0],"-").concat(S)]&&e.utils&&e.utils.hasLoadedNamespace&&!e.utils.hasLoadedNamespace(g)&&(Io["".concat(b[0],"-").concat(S)]=!0,e.logger.warn('key "'.concat(u,'" for languages "').concat(b.join(", "),`" won't get resolved as namespace "`).concat(g,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(function(C){if(!e.isValidLookup(a)){l=C;var y=[r];if(e.i18nFormat&&e.i18nFormat.addLookupKeys)e.i18nFormat.addLookupKeys(y,r,C,S,i);else{var w;_&&(w=e.pluralResolver.getSuffix(C,i.count,i));var E="".concat(e.options.pluralSeparator,"zero");if(_&&(y.push(r+w),h&&y.push(r+E)),m){var k="".concat(r).concat(e.options.contextSeparator).concat(i.context);y.push(k),_&&(y.push(k+w),h&&y.push(k+E))}}for(var R;R=y.pop();)e.isValidLookup(a)||(f=R,a=e.getResource(C,S,R,i))}}))})}}),{res:a,usedKey:u,exactUsedKey:f,usedLng:l,usedNS:g}}},{key:"isValidLookup",value:function(o){return o!==void 0&&!(!this.options.returnNull&&o===null)&&!(!this.options.returnEmptyString&&o==="")}},{key:"getResource",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(o,e,i,a):this.resourceStore.getResource(o,e,i,a)}}],[{key:"hasDefaultValue",value:function(o){var e="defaultValue";for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&e===i.substring(0,e.length)&&o[i]!==void 0)return!0;return!1}}]),n}(St);function ks(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Ho=function(){function t(s){xe(this,t),this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Pe.create("languageUtils")}return Ee(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var c=n.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var c=n.split("-");return this.formatLanguageCode(c[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var c=["hans","hant","latn","cyrl","cans","mong","arab"],o=n.split("-");return this.options.lowerCaseLng?o=o.map(function(e){return e.toLowerCase()}):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),c.indexOf(o[1].toLowerCase())>-1&&(o[1]=ks(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),c.indexOf(o[1].toLowerCase())>-1&&(o[1]=ks(o[1].toLowerCase())),c.indexOf(o[2].toLowerCase())>-1&&(o[2]=ks(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var c=this;if(!n)return null;var o;return n.forEach(function(e){if(!o){var i=c.formatLanguageCode(e);(!c.options.supportedLngs||c.isSupportedCode(i))&&(o=i)}}),!o&&this.options.supportedLngs&&n.forEach(function(e){if(!o){var i=c.getLanguagePartFromCode(e);if(c.isSupportedCode(i))return o=i;o=c.options.supportedLngs.find(function(a){if(a.indexOf(i)===0)return a})}}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}},{key:"getFallbackCodes",value:function(n,c){if(!n)return[];if(typeof n=="function"&&(n=n(c)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!c)return n.default||[];var o=n[c];return o||(o=n[this.getScriptPartFromCode(c)]),o||(o=n[this.formatLanguageCode(c)]),o||(o=n[this.getLanguagePartFromCode(c)]),o||(o=n.default),o||[]}},{key:"toResolveHierarchy",value:function(n,c){var o=this,e=this.getFallbackCodes(c||this.options.fallbackLng||[],n),i=[],a=function(f){f&&(o.isSupportedCode(f)?i.push(f):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(f)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(n))):typeof n=="string"&&a(this.formatLanguageCode(n)),e.forEach(function(u){i.indexOf(u)<0&&a(o.formatLanguageCode(u))}),i}}]),t}(),Yd=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Xd={1:function(s){return Number(s>1)},2:function(s){return Number(s!=1)},3:function(s){return 0},4:function(s){return Number(s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2)},5:function(s){return Number(s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5)},6:function(s){return Number(s==1?0:s>=2&&s<=4?1:2)},7:function(s){return Number(s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2)},8:function(s){return Number(s==1?0:s==2?1:s!=8&&s!=11?2:3)},9:function(s){return Number(s>=2)},10:function(s){return Number(s==1?0:s==2?1:s<7?2:s<11?3:4)},11:function(s){return Number(s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3)},12:function(s){return Number(s%10!=1||s%100==11)},13:function(s){return Number(s!==0)},14:function(s){return Number(s==1?0:s==2?1:s==3?2:3)},15:function(s){return Number(s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2)},16:function(s){return Number(s%10==1&&s%100!=11?0:s!==0?1:2)},17:function(s){return Number(s==1||s%10==1&&s%100!=11?0:1)},18:function(s){return Number(s==0?0:s==1?1:2)},19:function(s){return Number(s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3)},20:function(s){return Number(s==1?0:s==0||s%100>0&&s%100<20?1:2)},21:function(s){return Number(s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0)},22:function(s){return Number(s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3)}},Jd=["v1","v2","v3"],Fo={zero:0,one:1,two:2,few:3,many:4,other:5};function Zd(){var t={};return Yd.forEach(function(s){s.lngs.forEach(function(n){t[n]={numbers:s.nr,plurals:Xd[s.fc]}})}),t}var Qd=function(){function t(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe(this,t),this.languageUtils=s,this.options=n,this.logger=Pe.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Zd()}return Ee(t,[{key:"addRule",value:function(n,c){this.rules[n]=c}},{key:"getRule",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:c.ordinal?"ordinal":"cardinal"})}catch(o){return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getRule(n,c);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,c){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,o).map(function(e){return"".concat(c).concat(e)})}},{key:"getSuffixes",value:function(n){var c=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.getRule(n,o);return e?this.shouldUseIntlApi()?e.resolvedOptions().pluralCategories.sort(function(i,a){return Fo[i]-Fo[a]}).map(function(i){return"".concat(c.options.prepend).concat(i)}):e.numbers.map(function(i){return c.getSuffix(n,i,o)}):[]}},{key:"getSuffix",value:function(n,c){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=this.getRule(n,o);return e?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(e.select(c)):this.getSuffixRetroCompatible(e,c):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,c){var o=this,e=n.noAbs?n.plurals(c):n.plurals(Math.abs(c)),i=n.numbers[e];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));var a=function(){return o.options.prepend&&i.toString()?o.options.prepend+i.toString():i.toString()};return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?"_plural_".concat(i.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?a():this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString()}},{key:"shouldUseIntlApi",value:function(){return!Jd.includes(this.options.compatibilityJSON)}}]),t}();function Wo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Te(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Wo(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}var ef=function(){function t(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(this,t),this.logger=Pe.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||function(n){return n},this.init(s)}return Ee(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var c=n.interpolation;this.escape=c.escape!==void 0?c.escape:Ud,this.escapeValue=c.escapeValue!==void 0?c.escapeValue:!0,this.useRawValueToEscape=c.useRawValueToEscape!==void 0?c.useRawValueToEscape:!1,this.prefix=c.prefix?$t(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?$t(c.suffix):c.suffixEscaped||"}}",this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||",",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?$t(c.nestingPrefix):c.nestingPrefixEscaped||$t("$t("),this.nestingSuffix=c.nestingSuffix?$t(c.nestingSuffix):c.nestingSuffixEscaped||$t(")"),this.nestingOptionsSeparator=c.nestingOptionsSeparator?c.nestingOptionsSeparator:c.nestingOptionsSeparator||",",this.maxReplaces=c.maxReplaces?c.maxReplaces:1e3,this.alwaysFormat=c.alwaysFormat!==void 0?c.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var c="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(c,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(n,c,o,e){var i=this,a,u,f,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function g(_){return _.replace(/\$/g,"$$$$")}var v=function(h){if(h.indexOf(i.formatSeparator)<0){var m=Po(c,l,h);return i.alwaysFormat?i.format(m,void 0,o,Te(Te(Te({},e),c),{},{interpolationkey:h})):m}var b=h.split(i.formatSeparator),S=b.shift().trim(),C=b.join(i.formatSeparator).trim();return i.format(Po(c,l,S),C,o,Te(Te(Te({},e),c),{},{interpolationkey:S}))};this.resetRegExp();var p=e&&e.missingInterpolationHandler||this.options.missingInterpolationHandler,r=e&&e.interpolation&&e.interpolation.skipOnVariables!==void 0?e.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,d=[{regex:this.regexpUnescape,safeValue:function(h){return g(h)}},{regex:this.regexp,safeValue:function(h){return i.escapeValue?g(i.escape(h)):g(h)}}];return d.forEach(function(_){for(f=0;a=_.regex.exec(n);){var h=a[1].trim();if(u=v(h),u===void 0)if(typeof p=="function"){var m=p(n,a,e);u=typeof m=="string"?m:""}else if(e&&e.hasOwnProperty(h))u="";else if(r){u=a[0];continue}else i.logger.warn("missed to pass in variable ".concat(h," for interpolating ").concat(n)),u="";else typeof u!="string"&&!i.useRawValueToEscape&&(u=Ao(u));var b=_.safeValue(u);if(n=n.replace(a[0],b),r?(_.regex.lastIndex+=u.length,_.regex.lastIndex-=a[0].length):_.regex.lastIndex=0,f++,f>=i.maxReplaces)break}}),n}},{key:"nest",value:function(n,c){var o=this,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,u;function f(p,r){var d=this.nestingOptionsSeparator;if(p.indexOf(d)<0)return p;var _=p.split(new RegExp("".concat(d,"[ ]*{"))),h="{".concat(_[1]);p=_[0],h=this.interpolate(h,u);var m=h.match(/'/g),b=h.match(/"/g);(m&&m.length%2===0&&!b||b.length%2!==0)&&(h=h.replace(/'/g,'"'));try{u=JSON.parse(h),r&&(u=Te(Te({},r),u))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(p),S),"".concat(p).concat(d).concat(h)}return delete u.defaultValue,p}for(;i=this.nestingRegexp.exec(n);){var l=[];u=Te({},e),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){var v=i[1].split(this.formatSeparator).map(function(p){return p.trim()});i[1]=v.shift(),l=v,g=!0}if(a=c(f.call(this,i[1].trim(),u),u),a&&i[0]===n&&typeof a!="string")return a;typeof a!="string"&&(a=Ao(a)),a||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(n)),a=""),g&&(a=l.reduce(function(p,r){return o.format(p,r,e.lng,Te(Te({},e),{},{interpolationkey:i[1].trim()}))},a.trim())),n=n.replace(i[0],a),this.regexp.lastIndex=0}return n}}]),t}();function Uo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function bt(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Uo(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function tf(t){var s=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var c=t.split("(");s=c[0].toLowerCase().trim();var o=c[1].substring(0,c[1].length-1);if(s==="currency"&&o.indexOf(":")<0)n.currency||(n.currency=o.trim());else if(s==="relativetime"&&o.indexOf(":")<0)n.range||(n.range=o.trim());else{var e=o.split(";");e.forEach(function(i){if(i){var a=i.split(":"),u=Es(a),f=u[0],l=u.slice(1),g=l.join(":").trim().replace(/^'+|'+$/g,"");n[f.trim()]||(n[f.trim()]=g),g==="false"&&(n[f.trim()]=!1),g==="true"&&(n[f.trim()]=!0),isNaN(g)||(n[f.trim()]=parseInt(g,10))}})}}return{formatName:s,formatOptions:n}}function qt(t){var s={};return function(c,o,e){var i=o+JSON.stringify(e),a=s[i];return a||(a=t(o,e),s[i]=a),a(c)}}var rf=function(){function t(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(this,t),this.logger=Pe.create("formatter"),this.options=s,this.formats={number:qt(function(n,c){var o=new Intl.NumberFormat(n,c);return function(e){return o.format(e)}}),currency:qt(function(n,c){var o=new Intl.NumberFormat(n,bt(bt({},c),{},{style:"currency"}));return function(e){return o.format(e)}}),datetime:qt(function(n,c){var o=new Intl.DateTimeFormat(n,bt({},c));return function(e){return o.format(e)}}),relativetime:qt(function(n,c){var o=new Intl.RelativeTimeFormat(n,bt({},c));return function(e){return o.format(e,c.range||"day")}}),list:qt(function(n,c){var o=new Intl.ListFormat(n,bt({},c));return function(e){return o.format(e)}})},this.init(s)}return Ee(t,[{key:"init",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},o=c.interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}},{key:"add",value:function(n,c){this.formats[n.toLowerCase().trim()]=c}},{key:"addCached",value:function(n,c){this.formats[n.toLowerCase().trim()]=qt(c)}},{key:"format",value:function(n,c,o,e){var i=this,a=c.split(this.formatSeparator),u=a.reduce(function(f,l){var g=tf(l),v=g.formatName,p=g.formatOptions;if(i.formats[v]){var r=f;try{var d=e&&e.formatParams&&e.formatParams[e.interpolationkey]||{},_=d.locale||d.lng||e.locale||e.lng||o;r=i.formats[v](f,_,bt(bt(bt({},p),e),d))}catch(h){i.logger.warn(h)}return r}else i.logger.warn("there was no format function for ".concat(v));return f},n);return u}}]),t}();function zo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function jo(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?zo(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function sf(t){var s=nf();return function(){var c=ke(t),o;if(s){var e=ke(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Ot(this,o)}}function nf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function of(t,s){t.pending[s]!==void 0&&(delete t.pending[s],t.pendingCount--)}var af=function(t){jt(n,t);var s=sf(n);function n(c,o,e){var i,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return xe(this,n),i=s.call(this),Xr&&St.call(Re(i)),i.backend=c,i.store=o,i.services=e,i.languageUtils=e.languageUtils,i.options=a,i.logger=Pe.create("backendConnector"),i.waitingReads=[],i.maxParallelReads=a.maxParallelReads||10,i.readingCalls=0,i.maxRetries=a.maxRetries>=0?a.maxRetries:5,i.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(e,a.backend,a),i}return Ee(n,[{key:"queueLoad",value:function(o,e,i,a){var u=this,f={},l={},g={},v={};return o.forEach(function(p){var r=!0;e.forEach(function(d){var _="".concat(p,"|").concat(d);!i.reload&&u.store.hasResourceBundle(p,d)?u.state[_]=2:u.state[_]<0||(u.state[_]===1?l[_]===void 0&&(l[_]=!0):(u.state[_]=1,r=!1,l[_]===void 0&&(l[_]=!0),f[_]===void 0&&(f[_]=!0),v[d]===void 0&&(v[d]=!0)))}),r||(g[p]=!0)}),(Object.keys(f).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(f),pending:Object.keys(l),toLoadLanguages:Object.keys(g),toLoadNamespaces:Object.keys(v)}}},{key:"loaded",value:function(o,e,i){var a=o.split("|"),u=a[0],f=a[1];e&&this.emit("failedLoading",u,f,e),i&&this.store.addResourceBundle(u,f,i),this.state[o]=e?-1:2;var l={};this.queue.forEach(function(g){Fd(g.loaded,[u],f),of(g,o),e&&g.errors.push(e),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(function(v){l[v]||(l[v]={});var p=g.loaded[v];p.length&&p.forEach(function(r){l[v][r]===void 0&&(l[v][r]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(function(g){return!g.done})}},{key:"read",value:function(o,e,i){var a=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!o.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:o,ns:e,fcName:i,tried:u,wait:f,callback:l});return}this.readingCalls++;var g=function(d,_){if(a.readingCalls--,a.waitingReads.length>0){var h=a.waitingReads.shift();a.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&_&&u<a.maxRetries){setTimeout(function(){a.read.call(a,o,e,i,u+1,f*2,l)},f);return}l(d,_)},v=this.backend[i].bind(this.backend);if(v.length===2){try{var p=v(o,e);p&&typeof p.then=="function"?p.then(function(r){return g(null,r)}).catch(g):g(null,p)}catch(r){g(r)}return}return v(o,e,g)}},{key:"prepareLoading",value:function(o,e){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof o=="string"&&(o=this.languageUtils.toResolveHierarchy(o)),typeof e=="string"&&(e=[e]);var f=this.queueLoad(o,e,a,u);if(!f.toLoad.length)return f.pending.length||u(),null;f.toLoad.forEach(function(l){i.loadOne(l)})}},{key:"load",value:function(o,e,i){this.prepareLoading(o,e,{},i)}},{key:"reload",value:function(o,e,i){this.prepareLoading(o,e,{reload:!0},i)}},{key:"loadOne",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=o.split("|"),u=a[0],f=a[1];this.read(u,f,"read",void 0,void 0,function(l,g){l&&e.logger.warn("".concat(i,"loading namespace ").concat(f," for language ").concat(u," failed"),l),!l&&g&&e.logger.log("".concat(i,"loaded namespace ").concat(f," for language ").concat(u),g),e.loaded(o,l,g)})}},{key:"saveMissing",value:function(o,e,i,a,u){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn('did not save key "'.concat(i,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){var g=jo(jo({},f),{},{isUpdate:u}),v=this.backend.create.bind(this.backend);if(v.length<6)try{var p;v.length===5?p=v(o,e,i,a,g):p=v(o,e,i,a),p&&typeof p.then=="function"?p.then(function(r){return l(null,r)}).catch(l):l(null,p)}catch(r){l(r)}else v(o,e,i,a,l,g)}!o||!o[0]||this.store.addResource(o[0],e,i,a)}}}]),n}(St);function $o(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(s){var n={};if(ue(s[1])==="object"&&(n=s[1]),typeof s[1]=="string"&&(n.defaultValue=s[1]),typeof s[2]=="string"&&(n.tDescription=s[2]),ue(s[2])==="object"||ue(s[3])==="object"){var c=s[3]||s[2];Object.keys(c).forEach(function(o){n[o]=c[o]})}return n},interpolation:{escapeValue:!0,format:function(s,n,c,o){return s},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function qo(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Ko(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function De(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Ko(Object(n),!0).forEach(function(c){Ae(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function lf(t){var s=cf();return function(){var c=ke(t),o;if(s){var e=ke(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Ot(this,o)}}function cf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Vr(){}function hf(t){var s=Object.getOwnPropertyNames(Object.getPrototypeOf(t));s.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Yr=function(t){jt(n,t);var s=lf(n);function n(){var c,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(xe(this,n),c=s.call(this),Xr&&St.call(Re(c)),c.options=qo(o),c.services={},c.logger=Pe,c.modules={external:[]},hf(Re(c)),e&&!c.isInitialized&&!o.isClone){if(!c.options.initImmediate)return c.init(o,e),Ot(c,Re(c));setTimeout(function(){c.init(o,e)},0)}return c}return Ee(n,[{key:"init",value:function(){var o=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof e=="function"&&(i=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var a=$o();this.options=De(De(De({},a),this.options),qo(e)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=De(De({},a.interpolation),this.options.interpolation)),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function u(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?Pe.init(u(this.modules.logger),this.options):Pe.init(null,this.options);var f;this.modules.formatter?f=this.modules.formatter:typeof Intl!="undefined"&&(f=rf);var l=new Ho(this.options);this.store=new Kd(this.options.resources,this.options);var g=this.services;g.logger=Pe,g.resourceStore=this.store,g.languageUtils=l,g.pluralResolver=new Qd(l,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(g.formatter=u(f),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new ef(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new af(u(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(h){for(var m=arguments.length,b=new Array(m>1?m-1:0),S=1;S<m;S++)b[S-1]=arguments[S];o.emit.apply(o,[h].concat(b))}),this.modules.languageDetector&&(g.languageDetector=u(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=u(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new No(this.services,this.options),this.translator.on("*",function(h){for(var m=arguments.length,b=new Array(m>1?m-1:0),S=1;S<m;S++)b[S-1]=arguments[S];o.emit.apply(o,[h].concat(b))}),this.modules.external.forEach(function(h){h.init&&h.init(o)})}if(this.format=this.options.interpolation.format,i||(i=Vr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var p=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];p.forEach(function(h){o[h]=function(){var m;return(m=o.store)[h].apply(m,arguments)}});var r=["addResource","addResources","addResourceBundle","removeResourceBundle"];r.forEach(function(h){o[h]=function(){var m;return(m=o.store)[h].apply(m,arguments),o}});var d=_r(),_=function(){var m=function(S,C){o.isInitialized&&!o.initializedStoreOnce&&o.logger.warn("init: i18next is already initialized. You should call init just once!"),o.isInitialized=!0,o.options.isClone||o.logger.log("initialized",o.options),o.emit("initialized",o.options),d.resolve(C),i(S,C)};if(o.languages&&o.options.compatibilityAPI!=="v1"&&!o.isInitialized)return m(null,o.t.bind(o));o.changeLanguage(o.options.lng,m)};return this.options.resources||!this.options.initImmediate?_():setTimeout(_,0),d}},{key:"loadResources",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vr,a=i,u=typeof o=="string"?o:this.language;if(typeof o=="function"&&(a=o),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return a();var f=[],l=function(p){if(p){var r=e.services.languageUtils.toResolveHierarchy(p);r.forEach(function(d){f.indexOf(d)<0&&f.push(d)})}};if(u)l(u);else{var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.forEach(function(v){return l(v)})}this.options.preload&&this.options.preload.forEach(function(v){return l(v)}),this.services.backendConnector.load(f,this.options.ns,function(v){!v&&!e.resolvedLanguage&&e.language&&e.setResolvedLanguage(e.language),a(v)})}else a(null)}},{key:"reloadResources",value:function(o,e,i){var a=_r();return o||(o=this.languages),e||(e=this.options.ns),i||(i=Vr),this.services.backendConnector.reload(o,e,function(u){a.resolve(),i(u)}),a}},{key:"use",value:function(o){if(!o)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!o.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return o.type==="backend"&&(this.modules.backend=o),(o.type==="logger"||o.log&&o.warn&&o.error)&&(this.modules.logger=o),o.type==="languageDetector"&&(this.modules.languageDetector=o),o.type==="i18nFormat"&&(this.modules.i18nFormat=o),o.type==="postProcessor"&&Yo.addPostProcessor(o),o.type==="formatter"&&(this.modules.formatter=o),o.type==="3rdParty"&&this.modules.external.push(o),this}},{key:"setResolvedLanguage",value:function(o){if(!(!o||!this.languages)&&!(["cimode","dev"].indexOf(o)>-1))for(var e=0;e<this.languages.length;e++){var i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}},{key:"changeLanguage",value:function(o,e){var i=this;this.isLanguageChangingTo=o;var a=_r();this.emit("languageChanging",o);var u=function(v){i.language=v,i.languages=i.services.languageUtils.toResolveHierarchy(v),i.resolvedLanguage=void 0,i.setResolvedLanguage(v)},f=function(v,p){p?(u(p),i.translator.changeLanguage(p),i.isLanguageChangingTo=void 0,i.emit("languageChanged",p),i.logger.log("languageChanged",p)):i.isLanguageChangingTo=void 0,a.resolve(function(){return i.t.apply(i,arguments)}),e&&e(v,function(){return i.t.apply(i,arguments)})},l=function(v){!o&&!v&&i.services.languageDetector&&(v=[]);var p=typeof v=="string"?v:i.services.languageUtils.getBestMatchFromCodes(v);p&&(i.language||u(p),i.translator.language||i.translator.changeLanguage(p),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage&&i.services.languageDetector.cacheUserLanguage(p)),i.loadResources(p,function(r){f(r,p)})};return!o&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!o&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(o),a}},{key:"getFixedT",value:function(o,e,i){var a=this,u=function f(l,g){var v;if(ue(g)!=="object"){for(var p=arguments.length,r=new Array(p>2?p-2:0),d=2;d<p;d++)r[d-2]=arguments[d];v=a.options.overloadTranslationOptionHandler([l,g].concat(r))}else v=De({},g);v.lng=v.lng||f.lng,v.lngs=v.lngs||f.lngs,v.ns=v.ns||f.ns,v.keyPrefix=v.keyPrefix||i||f.keyPrefix;var _=a.options.keySeparator||".",h;return v.keyPrefix&&Array.isArray(l)?h=l.map(function(m){return"".concat(v.keyPrefix).concat(_).concat(m)}):h=v.keyPrefix?"".concat(v.keyPrefix).concat(_).concat(l):l,a.t(h,v)};return typeof o=="string"?u.lng=o:u.lngs=o,u.ns=e,u.keyPrefix=i,u}},{key:"t",value:function(){var o;return this.translator&&(o=this.translator).translate.apply(o,arguments)}},{key:"exists",value:function(){var o;return this.translator&&(o=this.translator).exists.apply(o,arguments)}},{key:"setDefaultNamespace",value:function(o){this.options.defaultNS=o}},{key:"hasLoadedNamespace",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var l=function(p,r){var d=e.services.backendConnector.state["".concat(p,"|").concat(r)];return d===-1||d===2};if(i.precheck){var g=i.precheck(this,l);if(g!==void 0)return g}return!!(this.hasResourceBundle(a,o)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(a,o)&&(!u||l(f,o)))}},{key:"loadNamespaces",value:function(o,e){var i=this,a=_r();return this.options.ns?(typeof o=="string"&&(o=[o]),o.forEach(function(u){i.options.ns.indexOf(u)<0&&i.options.ns.push(u)}),this.loadResources(function(u){a.resolve(),e&&e(u)}),a):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(o,e){var i=_r();typeof o=="string"&&(o=[o]);var a=this.options.preload||[],u=o.filter(function(f){return a.indexOf(f)<0});return u.length?(this.options.preload=a.concat(u),this.loadResources(function(f){i.resolve(),e&&e(f)}),i):(e&&e(),Promise.resolve())}},{key:"dir",value:function(o){if(o||(o=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!o)return"rtl";var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Ho($o());return e.indexOf(i.getLanguagePartFromCode(o))>-1||o.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var o=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vr,a=De(De(De({},this.options),e),{isClone:!0}),u=new n(a);(e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e));var f=["store","services","language"];return f.forEach(function(l){u[l]=o[l]}),u.services=De({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new No(u.services,u.options),u.translator.on("*",function(l){for(var g=arguments.length,v=new Array(g>1?g-1:0),p=1;p<g;p++)v[p-1]=arguments[p];u.emit.apply(u,[l].concat(v))}),u.init(a,i),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(St);Ae(Yr,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new Yr(t,s)});var le=Yr.createInstance();le.createInstance=Yr.createInstance;var rg=le.createInstance,ig=le.dir,sg=le.init,ng=le.loadResources,og=le.reloadResources,ag=le.use,lg=le.changeLanguage,cg=le.getFixedT,hg=le.t,ug=le.exists,dg=le.setDefaultNamespace,fg=le.hasLoadedNamespace,pg=le.loadNamespaces,_g=le.loadLanguages;var Xo=require("obsidian");var uf=Promise.resolve(le.createInstance({cleanCode:!0,defaultNS:ee,fallbackLng:$s,initImmediate:!0,nonExplicitSupportedLngs:!0,resources:Zt,returnNull:js})).then(async t=>(await t.init(),t)).catch(t=>{throw We(Fe(t),()=>"i18n error"),t}),gr,Kt,Jr=class{constructor(s){this.plugin=s;J(this,gr,le);J(this,Kt,[])}get i18n(){return V(this,gr)}get language(){let{language:s}=this.plugin.settings;return s===""?Xo.moment.locale():s}async load(){Se(this,gr,await uf),await this.updateLanguage()}async updateLanguage(){await this.i18n.changeLanguage(this.language),await Promise.all(V(this,Kt).map(s=>s()))}registerUse(s){return V(this,Kt).push(s),()=>{V(this,Kt).remove(s)}}};gr=new WeakMap,Kt=new WeakMap;function Jo(t){let s=document.querySelector("div.status-bar");return s!==null&&(t!=null?t:()=>{})(s),s}var Vt,mr,Rs,vr,Ts,Zr=class{constructor(s){this.plugin=s;J(this,mr);J(this,vr);J(this,Vt,[])}load(){let{plugin:s}=this;s.app.workspace.onLayoutReady(()=>{Jo(n=>{let c=new MutationObserver(()=>{K(this,mr,Rs).call(this,n)});s.register(()=>{try{c.disconnect()}finally{K(this,vr,Ts).call(this,n)}}),this.update(),c.observe(n,{attributeFilter:["style"]})})===null&&Be(()=>s.language.i18n.t("errors.cannot-find-status-bar"),s.settings.errorNoticeTimeout,s)})}hide(s){return V(this,Vt).push(s),this.update(),()=>{V(this,Vt).remove(s),this.update()}}update(){Jo(s=>{K(this,vr,Ts).call(this,s),K(this,mr,Rs).call(this,s)})}};Vt=new WeakMap,mr=new WeakSet,Rs=function(s){(this.plugin.settings.hideStatusBar==="always"||V(this,Vt).some(n=>n()))&&(s.style.visibility="hidden")},vr=new WeakSet,Ts=function(s){s.style.visibility=""};var Qr=class extends Zo.Plugin{constructor(n,c){de.namespacedViewType=de.type.namespaced(c);super(n,c);ce(this,"settings",Is(ye));ce(this,"language",new Jr(this));ce(this,"statusBarHider",new Zr(this))}async onload(){super.onload(),await mt.load(this.settings,this),await this.language.load(),this.statusBarHider.load(),this.addSettingTab(new Ir(this)),Lo(this)}},df=Qr;
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
