/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
"use strict";var $o=Object.create;var Kt=Object.defineProperty;var qo=Object.getOwnPropertyDescriptor;var Ko=Object.getOwnPropertyNames;var Vo=Object.getPrototypeOf,Go=Object.prototype.hasOwnProperty;var Yo=(t,s,n)=>s in t?Kt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var se=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports),X=(t,s)=>{for(var n in s)Kt(t,n,{get:s[n],enumerable:!0})},ws=(t,s,n,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of Ko(s))!Go.call(t,o)&&o!==n&&Kt(t,o,{get:()=>s[o],enumerable:!(c=qo(s,o))||c.enumerable});return t};var Tt=(t,s,n)=>(n=t!=null?$o(Vo(t)):{},ws(s||!t||!t.__esModule?Kt(n,"default",{value:t,enumerable:!0}):n,t)),Xo=t=>ws(Kt({},"__esModule",{value:!0}),t);var pe=(t,s,n)=>(Yo(t,typeof s!="symbol"?s+"":s,n),n),Jr=(t,s,n)=>{if(!s.has(t))throw TypeError("Cannot "+n)};var K=(t,s,n)=>(Jr(t,s,"read from private field"),n?n.call(t):s.get(t)),te=(t,s,n)=>{if(s.has(t))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(t):s.set(t,n)},yt=(t,s,n,c)=>(Jr(t,s,"write to private field"),c?c.call(t,n):s.set(t,n),n);var V=(t,s,n)=>(Jr(t,s,"access private method"),n);var Bs=se(xi=>{var Ct=require("path"),ht=process.platform==="win32",ct=require("fs"),ru=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function iu(){var t;if(ru){var s=new Error;t=n}else t=c;return t;function n(o){o&&(s.message=o.message,o=s,c(o))}function c(o){if(o){if(process.throwDeprecation)throw o;if(!process.noDeprecation){var e="fs: missing callback "+(o.stack||o.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}function su(t){return typeof t=="function"?t:iu()}var nf=Ct.normalize;ht?Pe=/(.*?)(?:[\/\\]+|$)/g:Pe=/(.*?)(?:[\/]+|$)/g;var Pe;ht?Yt=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Yt=/^[\/]*/;var Yt;xi.realpathSync=function(s,n){if(s=Ct.resolve(s),n&&Object.prototype.hasOwnProperty.call(n,s))return n[s];var c=s,o={},e={},i,a,u,p;l();function l(){var _=Yt.exec(s);i=_[0].length,a=_[0],u=_[0],p="",ht&&!e[u]&&(ct.lstatSync(u),e[u]=!0)}for(;i<s.length;){Pe.lastIndex=i;var g=Pe.exec(s);if(p=a,a+=g[0],u=p+g[1],i=Pe.lastIndex,!(e[u]||n&&n[u]===u)){var v;if(n&&Object.prototype.hasOwnProperty.call(n,u))v=n[u];else{var f=ct.lstatSync(u);if(!f.isSymbolicLink()){e[u]=!0,n&&(n[u]=u);continue}var r=null;if(!ht){var d=f.dev.toString(32)+":"+f.ino.toString(32);o.hasOwnProperty(d)&&(r=o[d])}r===null&&(ct.statSync(u),r=ct.readlinkSync(u)),v=Ct.resolve(p,r),n&&(n[u]=v),ht||(o[d]=r)}s=Ct.resolve(v,s.slice(i)),l()}}return n&&(n[c]=s),s};xi.realpath=function(s,n,c){if(typeof c!="function"&&(c=su(n),n=null),s=Ct.resolve(s),n&&Object.prototype.hasOwnProperty.call(n,s))return process.nextTick(c.bind(null,null,n[s]));var o=s,e={},i={},a,u,p,l;g();function g(){var _=Yt.exec(s);a=_[0].length,u=_[0],p=_[0],l="",ht&&!i[p]?ct.lstat(p,function(h){if(h)return c(h);i[p]=!0,v()}):process.nextTick(v)}function v(){if(a>=s.length)return n&&(n[o]=s),c(null,s);Pe.lastIndex=a;var _=Pe.exec(s);return l=u,u+=_[0],p=l+_[1],a=Pe.lastIndex,i[p]||n&&n[p]===p?process.nextTick(v):n&&Object.prototype.hasOwnProperty.call(n,p)?d(n[p]):ct.lstat(p,f)}function f(_,h){if(_)return c(_);if(!h.isSymbolicLink())return i[p]=!0,n&&(n[p]=p),process.nextTick(v);if(!ht){var m=h.dev.toString(32)+":"+h.ino.toString(32);if(e.hasOwnProperty(m))return r(null,e[m],p)}ct.stat(p,function(y){if(y)return c(y);ct.readlink(p,function(S,C){ht||(e[m]=C),r(S,C)})})}function r(_,h,m){if(_)return c(_);var y=Ct.resolve(l,h);n&&(n[m]=y),d(y)}function d(_){s=Ct.resolve(_,s.slice(a)),g()}}});var Ri=se((af,Fs)=>{Fs.exports=ut;ut.realpath=ut;ut.sync=ki;ut.realpathSync=ki;ut.monkeypatch=ou;ut.unmonkeypatch=au;var At=require("fs"),Ei=At.realpath,Li=At.realpathSync,nu=process.version,Is=/^v[0-5]\./.test(nu),Ns=Bs();function Hs(t){return t&&t.syscall==="realpath"&&(t.code==="ELOOP"||t.code==="ENOMEM"||t.code==="ENAMETOOLONG")}function ut(t,s,n){if(Is)return Ei(t,s,n);typeof s=="function"&&(n=s,s=null),Ei(t,s,function(c,o){Hs(c)?Ns.realpath(t,s,n):n(c,o)})}function ki(t,s){if(Is)return Li(t,s);try{return Li(t,s)}catch(n){if(Hs(n))return Ns.realpathSync(t,s);throw n}}function ou(){At.realpath=ut,At.realpathSync=ki}function au(){At.realpath=Ei,At.realpathSync=Li}});var Us=se((lf,Ws)=>{Ws.exports=function(t,s){for(var n=[],c=0;c<t.length;c++){var o=s(t[c],c);lu(o)?n.push.apply(n,o):n.push(o)}return n};var lu=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}});var Ks=se((cf,qs)=>{"use strict";qs.exports=js;function js(t,s,n){t instanceof RegExp&&(t=zs(t,n)),s instanceof RegExp&&(s=zs(s,n));var c=$s(t,s,n);return c&&{start:c[0],end:c[1],pre:n.slice(0,c[0]),body:n.slice(c[0]+t.length,c[1]),post:n.slice(c[1]+s.length)}}function zs(t,s){var n=s.match(t);return n?n[0]:null}js.range=$s;function $s(t,s,n){var c,o,e,i,a,u=n.indexOf(t),p=n.indexOf(s,u+1),l=u;if(u>=0&&p>0){if(t===s)return[u,p];for(c=[],e=n.length;l>=0&&!a;)l==u?(c.push(l),u=n.indexOf(t,l+1)):c.length==1?a=[c.pop(),p]:(o=c.pop(),o<e&&(e=o,i=p),p=n.indexOf(s,l+1)),l=u<p&&u>=0?u:p;c.length&&(a=[e,i])}return a}});var en=se((hf,Qs)=>{var cu=Us(),Vs=Ks();Qs.exports=du;var Gs="\0SLASH"+Math.random()+"\0",Ys="\0OPEN"+Math.random()+"\0",Oi="\0CLOSE"+Math.random()+"\0",Xs="\0COMMA"+Math.random()+"\0",Js="\0PERIOD"+Math.random()+"\0";function Ti(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function hu(t){return t.split("\\\\").join(Gs).split("\\{").join(Ys).split("\\}").join(Oi).split("\\,").join(Xs).split("\\.").join(Js)}function uu(t){return t.split(Gs).join("\\").split(Ys).join("{").split(Oi).join("}").split(Xs).join(",").split(Js).join(".")}function Zs(t){if(!t)return[""];var s=[],n=Vs("{","}",t);if(!n)return t.split(",");var c=n.pre,o=n.body,e=n.post,i=c.split(",");i[i.length-1]+="{"+o+"}";var a=Zs(e);return e.length&&(i[i.length-1]+=a.shift(),i.push.apply(i,a)),s.push.apply(s,i),s}function du(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Dt(hu(t),!0).map(uu)):[]}function fu(t){return"{"+t+"}"}function pu(t){return/^-?0\d/.test(t)}function _u(t,s){return t<=s}function gu(t,s){return t>=s}function Dt(t,s){var n=[],c=Vs("{","}",t);if(!c||/\$$/.test(c.pre))return[t];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(c.body),e=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(c.body),i=o||e,a=c.body.indexOf(",")>=0;if(!i&&!a)return c.post.match(/,.*\}/)?(t=c.pre+"{"+c.body+Oi+c.post,Dt(t)):[t];var u;if(i)u=c.body.split(/\.\./);else if(u=Zs(c.body),u.length===1&&(u=Dt(u[0],!1).map(fu),u.length===1)){var l=c.post.length?Dt(c.post,!1):[""];return l.map(function(T){return c.pre+u[0]+T})}var p=c.pre,l=c.post.length?Dt(c.post,!1):[""],g;if(i){var v=Ti(u[0]),f=Ti(u[1]),r=Math.max(u[0].length,u[1].length),d=u.length==3?Math.abs(Ti(u[2])):1,_=_u,h=f<v;h&&(d*=-1,_=gu);var m=u.some(pu);g=[];for(var y=v;_(y,f);y+=d){var S;if(e)S=String.fromCharCode(y),S==="\\"&&(S="");else if(S=String(y),m){var C=r-S.length;if(C>0){var b=new Array(C+1).join("0");y<0?S="-"+b+S.slice(1):S=b+S}}g.push(S)}}else g=cu(u,function(R){return Dt(R,!1)});for(var w=0;w<g.length;w++)for(var E=0;E<l.length;E++){var L=p+g[w]+l[E];(!s||i||L)&&n.push(L)}return n}});var yr=se((uf,on)=>{on.exports=ge;ge.Minimatch=ce;var Xt=function(){try{return require("path")}catch(t){}}()||{sep:"/"};ge.sep=Xt.sep;var Pi=ge.GLOBSTAR=ce.GLOBSTAR={},mu=en(),tn={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ai="[^/]",Di=Ai+"*?",vu="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bu="(?:(?!(?:\\/|^)\\.).)*?",rn=yu("().*{}+?[]^$\\!");function yu(t){return t.split("").reduce(function(s,n){return s[n]=!0,s},{})}var sn=/\/+/;ge.filter=Su;function Su(t,s){return s=s||{},function(n,c,o){return ge(n,t,s)}}function dt(t,s){s=s||{};var n={};return Object.keys(t).forEach(function(c){n[c]=t[c]}),Object.keys(s).forEach(function(c){n[c]=s[c]}),n}ge.defaults=function(t){if(!t||typeof t!="object"||!Object.keys(t).length)return ge;var s=ge,n=function(o,e,i){return s(o,e,dt(t,i))};return n.Minimatch=function(o,e){return new s.Minimatch(o,dt(t,e))},n.Minimatch.defaults=function(o){return s.defaults(dt(t,o)).Minimatch},n.filter=function(o,e){return s.filter(o,dt(t,e))},n.defaults=function(o){return s.defaults(dt(t,o))},n.makeRe=function(o,e){return s.makeRe(o,dt(t,e))},n.braceExpand=function(o,e){return s.braceExpand(o,dt(t,e))},n.match=function(c,o,e){return s.match(c,o,dt(t,e))},n};ce.defaults=function(t){return ge.defaults(t).Minimatch};function ge(t,s,n){return br(s),n||(n={}),!n.nocomment&&s.charAt(0)==="#"?!1:new ce(s,n).match(t)}function ce(t,s){if(!(this instanceof ce))return new ce(t,s);br(t),s||(s={}),t=t.trim(),!s.allowWindowsEscape&&Xt.sep!=="/"&&(t=t.split(Xt.sep).join("/")),this.options=s,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!s.partial,this.make()}ce.prototype.debug=function(){};ce.prototype.make=wu;function wu(){var t=this.pattern,s=this.options;if(!s.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();var n=this.globSet=this.braceExpand();s.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,n),n=this.globParts=n.map(function(c){return c.split(sn)}),this.debug(this.pattern,n),n=n.map(function(c,o,e){return c.map(this.parse,this)},this),this.debug(this.pattern,n),n=n.filter(function(c){return c.indexOf(!1)===-1}),this.debug(this.pattern,n),this.set=n}ce.prototype.parseNegate=Cu;function Cu(){var t=this.pattern,s=!1,n=this.options,c=0;if(!n.nonegate){for(var o=0,e=t.length;o<e&&t.charAt(o)==="!";o++)s=!s,c++;c&&(this.pattern=t.substr(c)),this.negate=s}}ge.braceExpand=function(t,s){return nn(t,s)};ce.prototype.braceExpand=nn;function nn(t,s){return s||(this instanceof ce?s=this.options:s={}),t=typeof t=="undefined"?this.pattern:t,br(t),s.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:mu(t)}var xu=1024*64,br=function(t){if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>xu)throw new TypeError("pattern is too long")};ce.prototype.parse=Eu;var vr={};function Eu(t,s){br(t);var n=this.options;if(t==="**")if(n.noglobstar)t="*";else return Pi;if(t==="")return"";var c="",o=!!n.nocase,e=!1,i=[],a=[],u,p=!1,l=-1,g=-1,v=t.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function r(){if(u){switch(u){case"*":c+=Di,o=!0;break;case"?":c+=Ai,o=!0;break;default:c+="\\"+u;break}f.debug("clearStateChar %j %j",u,c),u=!1}}for(var d=0,_=t.length,h;d<_&&(h=t.charAt(d));d++){if(this.debug("%s	%s %s %j",t,d,c,h),e&&rn[h]){c+="\\"+h,e=!1;continue}switch(h){case"/":return!1;case"\\":r(),e=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,d,c,h),p){this.debug("  in class"),h==="!"&&d===g+1&&(h="^"),c+=h;continue}f.debug("call clearStateChar %j",u),r(),u=h,n.noext&&r();continue;case"(":if(p){c+="(";continue}if(!u){c+="\\(";continue}i.push({type:u,start:d-1,reStart:c.length,open:tn[u].open,close:tn[u].close}),c+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,c),u=!1;continue;case")":if(p||!i.length){c+="\\)";continue}r(),o=!0;var m=i.pop();c+=m.close,m.type==="!"&&a.push(m),m.reEnd=c.length;continue;case"|":if(p||!i.length||e){c+="\\|",e=!1;continue}r(),c+="|";continue;case"[":if(r(),p){c+="\\"+h;continue}p=!0,g=d,l=c.length,c+=h;continue;case"]":if(d===g+1||!p){c+="\\"+h,e=!1;continue}var y=t.substring(g+1,d);try{RegExp("["+y+"]")}catch(z){var S=this.parse(y,vr);c=c.substr(0,l)+"\\["+S[0]+"\\]",o=o||S[1],p=!1;continue}o=!0,p=!1,c+=h;continue;default:r(),e?e=!1:rn[h]&&!(h==="^"&&p)&&(c+="\\"),c+=h}}for(p&&(y=t.substr(g+1),S=this.parse(y,vr),c=c.substr(0,l)+"\\["+S[0],o=o||S[1]),m=i.pop();m;m=i.pop()){var C=c.slice(m.reStart+m.open.length);this.debug("setting tail",c,m),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(z,q,W){return W||(W="\\"),q+q+W+"|"}),this.debug(`tail=%j
   %s`,C,C,m,c);var b=m.type==="*"?Di:m.type==="?"?Ai:"\\"+m.type;o=!0,c=c.slice(0,m.reStart)+b+"\\("+C}r(),e&&(c+="\\\\");var w=!1;switch(c.charAt(0)){case"[":case".":case"(":w=!0}for(var E=a.length-1;E>-1;E--){var L=a[E],R=c.slice(0,L.reStart),T=c.slice(L.reStart,L.reEnd-8),B=c.slice(L.reEnd-8,L.reEnd),H=c.slice(L.reEnd);B+=H;var F=R.split("(").length-1,x=H;for(d=0;d<F;d++)x=x.replace(/\)[+*?]?/,"");H=x;var k="";H===""&&s!==vr&&(k="$");var O=R+T+H+k+B;c=O}if(c!==""&&o&&(c="(?=.)"+c),w&&(c=v+c),s===vr)return[c,o];if(!o)return ku(t);var P=n.nocase?"i":"";try{var N=new RegExp("^"+c+"$",P)}catch(z){return new RegExp("$.")}return N._glob=t,N._src=c,N}ge.makeRe=function(t,s){return new ce(t,s||{}).makeRe()};ce.prototype.makeRe=Lu;function Lu(){if(this.regexp||this.regexp===!1)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var s=this.options,n=s.noglobstar?Di:s.dot?vu:bu,c=s.nocase?"i":"",o=t.map(function(e){return e.map(function(i){return i===Pi?n:typeof i=="string"?Ru(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,c)}catch(e){this.regexp=!1}return this.regexp}ge.match=function(t,s,n){n=n||{};var c=new ce(s,n);return t=t.filter(function(o){return c.match(o)}),c.options.nonull&&!t.length&&t.push(s),t};ce.prototype.match=function(s,n){if(typeof n=="undefined"&&(n=this.partial),this.debug("match",s,this.pattern),this.comment)return!1;if(this.empty)return s==="";if(s==="/"&&n)return!0;var c=this.options;Xt.sep!=="/"&&(s=s.split(Xt.sep).join("/")),s=s.split(sn),this.debug(this.pattern,"split",s);var o=this.set;this.debug(this.pattern,"set",o);var e,i;for(i=s.length-1;i>=0&&(e=s[i],!e);i--);for(i=0;i<o.length;i++){var a=o[i],u=s;c.matchBase&&a.length===1&&(u=[e]);var p=this.matchOne(u,a,n);if(p)return c.flipNegate?!0:!this.negate}return c.flipNegate?!1:this.negate};ce.prototype.matchOne=function(t,s,n){var c=this.options;this.debug("matchOne",{this:this,file:t,pattern:s}),this.debug("matchOne",t.length,s.length);for(var o=0,e=0,i=t.length,a=s.length;o<i&&e<a;o++,e++){this.debug("matchOne loop");var u=s[e],p=t[o];if(this.debug(s,u,p),u===!1)return!1;if(u===Pi){this.debug("GLOBSTAR",[s,u,p]);var l=o,g=e+1;if(g===a){for(this.debug("** at the end");o<i;o++)if(t[o]==="."||t[o]===".."||!c.dot&&t[o].charAt(0)===".")return!1;return!0}for(;l<i;){var v=t[l];if(this.debug(`
globstar while`,t,l,s,g,v),this.matchOne(t.slice(l),s.slice(g),n))return this.debug("globstar found match!",l,i,v),!0;if(v==="."||v===".."||!c.dot&&v.charAt(0)==="."){this.debug("dot detected!",t,l,s,g);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(n&&(this.debug(`
>>> no match, partial?`,t,l,s,g),l===i))}var f;if(typeof u=="string"?(f=p===u,this.debug("string match",u,p,f)):(f=p.match(u),this.debug("pattern match",u,p,f)),!f)return!1}if(o===i&&e===a)return!0;if(o===i)return n;if(e===a)return o===i-1&&t[o]==="";throw new Error("wtf?")};function ku(t){return t.replace(/\\(.)/g,"$1")}function Ru(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var an=se((df,Mi)=>{typeof Object.create=="function"?Mi.exports=function(s,n){n&&(s.super_=n,s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:Mi.exports=function(s,n){if(n){s.super_=n;var c=function(){};c.prototype=n.prototype,s.prototype=new c,s.prototype.constructor=s}}});var wr=se((ff,Sr)=>{"use strict";function ln(t){return t.charAt(0)==="/"}function cn(t){var s=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,n=s.exec(t),c=n[1]||"",o=Boolean(c&&c.charAt(1)!==":");return Boolean(n[2]||o)}Sr.exports=process.platform==="win32"?cn:ln;Sr.exports.posix=ln;Sr.exports.win32=cn});var Ii=se(ft=>{ft.setopts=Mu;ft.ownProp=hn;ft.makeAbs=Jt;ft.finish=Bu;ft.mark=Iu;ft.isIgnored=dn;ft.childrenIgnored=Nu;function hn(t,s){return Object.prototype.hasOwnProperty.call(t,s)}var Tu=require("fs"),Pt=require("path"),Ou=yr(),un=wr(),Bi=Ou.Minimatch;function Au(t,s){return t.localeCompare(s,"en")}function Du(t,s){t.ignore=s.ignore||[],Array.isArray(t.ignore)||(t.ignore=[t.ignore]),t.ignore.length&&(t.ignore=t.ignore.map(Pu))}function Pu(t){var s=null;if(t.slice(-3)==="/**"){var n=t.replace(/(\/\*\*)+$/,"");s=new Bi(n,{dot:!0})}return{matcher:new Bi(t,{dot:!0}),gmatcher:s}}function Mu(t,s,n){if(n||(n={}),n.matchBase&&s.indexOf("/")===-1){if(n.noglobstar)throw new Error("base matching requires globstar");s="**/"+s}t.silent=!!n.silent,t.pattern=s,t.strict=n.strict!==!1,t.realpath=!!n.realpath,t.realpathCache=n.realpathCache||Object.create(null),t.follow=!!n.follow,t.dot=!!n.dot,t.mark=!!n.mark,t.nodir=!!n.nodir,t.nodir&&(t.mark=!0),t.sync=!!n.sync,t.nounique=!!n.nounique,t.nonull=!!n.nonull,t.nosort=!!n.nosort,t.nocase=!!n.nocase,t.stat=!!n.stat,t.noprocess=!!n.noprocess,t.absolute=!!n.absolute,t.fs=n.fs||Tu,t.maxLength=n.maxLength||1/0,t.cache=n.cache||Object.create(null),t.statCache=n.statCache||Object.create(null),t.symlinks=n.symlinks||Object.create(null),Du(t,n),t.changedCwd=!1;var c=process.cwd();hn(n,"cwd")?(t.cwd=Pt.resolve(n.cwd),t.changedCwd=t.cwd!==c):t.cwd=c,t.root=n.root||Pt.resolve(t.cwd,"/"),t.root=Pt.resolve(t.root),process.platform==="win32"&&(t.root=t.root.replace(/\\/g,"/")),t.cwdAbs=un(t.cwd)?t.cwd:Jt(t,t.cwd),process.platform==="win32"&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/")),t.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,n.allowWindowsEscape=!1,t.minimatch=new Bi(s,n),t.options=t.minimatch.options}function Bu(t){for(var s=t.nounique,n=s?[]:Object.create(null),c=0,o=t.matches.length;c<o;c++){var e=t.matches[c];if(!e||Object.keys(e).length===0){if(t.nonull){var i=t.minimatch.globSet[c];s?n.push(i):n[i]=!0}}else{var a=Object.keys(e);s?n.push.apply(n,a):a.forEach(function(u){n[u]=!0})}}if(s||(n=Object.keys(n)),t.nosort||(n=n.sort(Au)),t.mark){for(var c=0;c<n.length;c++)n[c]=t._mark(n[c]);t.nodir&&(n=n.filter(function(u){var p=!/\/$/.test(u),l=t.cache[u]||t.cache[Jt(t,u)];return p&&l&&(p=l!=="DIR"&&!Array.isArray(l)),p}))}t.ignore.length&&(n=n.filter(function(u){return!dn(t,u)})),t.found=n}function Iu(t,s){var n=Jt(t,s),c=t.cache[n],o=s;if(c){var e=c==="DIR"||Array.isArray(c),i=s.slice(-1)==="/";if(e&&!i?o+="/":!e&&i&&(o=o.slice(0,-1)),o!==s){var a=Jt(t,o);t.statCache[a]=t.statCache[n],t.cache[a]=t.cache[n]}}return o}function Jt(t,s){var n=s;return s.charAt(0)==="/"?n=Pt.join(t.root,s):un(s)||s===""?n=s:t.changedCwd?n=Pt.resolve(t.cwd,s):n=Pt.resolve(s),process.platform==="win32"&&(n=n.replace(/\\/g,"/")),n}function dn(t,s){return t.ignore.length?t.ignore.some(function(n){return n.matcher.match(s)||!!(n.gmatcher&&n.gmatcher.match(s))}):!1}function Nu(t,s){return t.ignore.length?t.ignore.some(function(n){return!!(n.gmatcher&&n.gmatcher.match(s))}):!1}});var mn=se((vf,gn)=>{gn.exports=_n;_n.GlobSync=oe;var Hu=Ri(),fn=yr(),_f=fn.Minimatch,gf=Fi().Glob,mf=require("util"),Ni=require("path"),pn=require("assert"),Cr=wr(),xt=Ii(),Fu=xt.setopts,Hi=xt.ownProp,Wu=xt.childrenIgnored,Uu=xt.isIgnored;function _n(t,s){if(typeof s=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new oe(t,s).found}function oe(t,s){if(!t)throw new Error("must provide pattern");if(typeof s=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof oe))return new oe(t,s);if(Fu(this,t,s),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var c=0;c<n;c++)this._process(this.minimatch.set[c],c,!1);this._finish()}oe.prototype._finish=function(){if(pn.ok(this instanceof oe),this.realpath){var t=this;this.matches.forEach(function(s,n){var c=t.matches[n]=Object.create(null);for(var o in s)try{o=t._makeAbs(o);var e=Hu.realpathSync(o,t.realpathCache);c[e]=!0}catch(i){if(i.syscall==="stat")c[t._makeAbs(o)]=!0;else throw i}})}xt.finish(this)};oe.prototype._process=function(t,s,n){pn.ok(this instanceof oe);for(var c=0;typeof t[c]=="string";)c++;var o;switch(c){case t.length:this._processSimple(t.join("/"),s);return;case 0:o=null;break;default:o=t.slice(0,c).join("/");break}var e=t.slice(c),i;o===null?i=".":((Cr(o)||Cr(t.map(function(p){return typeof p=="string"?p:"[*]"}).join("/")))&&(!o||!Cr(o))&&(o="/"+o),i=o);var a=this._makeAbs(i);if(!Wu(this,i)){var u=e[0]===fn.GLOBSTAR;u?this._processGlobStar(o,i,a,e,s,n):this._processReaddir(o,i,a,e,s,n)}};oe.prototype._processReaddir=function(t,s,n,c,o,e){var i=this._readdir(n,e);if(i){for(var a=c[0],u=!!this.minimatch.negate,p=a._glob,l=this.dot||p.charAt(0)===".",g=[],v=0;v<i.length;v++){var f=i[v];if(f.charAt(0)!=="."||l){var r;u&&!t?r=!f.match(a):r=f.match(a),r&&g.push(f)}}var d=g.length;if(d!==0){if(c.length===1&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(var v=0;v<d;v++){var f=g[v];t&&(t.slice(-1)!=="/"?f=t+"/"+f:f=t+f),f.charAt(0)==="/"&&!this.nomount&&(f=Ni.join(this.root,f)),this._emitMatch(o,f)}return}c.shift();for(var v=0;v<d;v++){var f=g[v],_;t?_=[t,f]:_=[f],this._process(_.concat(c),o,e)}}}};oe.prototype._emitMatch=function(t,s){if(!Uu(this,s)){var n=this._makeAbs(s);if(this.mark&&(s=this._mark(s)),this.absolute&&(s=n),!this.matches[t][s]){if(this.nodir){var c=this.cache[n];if(c==="DIR"||Array.isArray(c))return}this.matches[t][s]=!0,this.stat&&this._stat(s)}}};oe.prototype._readdirInGlobStar=function(t){if(this.follow)return this._readdir(t,!1);var s,n,c;try{n=this.fs.lstatSync(t)}catch(e){if(e.code==="ENOENT")return null}var o=n&&n.isSymbolicLink();return this.symlinks[t]=o,!o&&n&&!n.isDirectory()?this.cache[t]="FILE":s=this._readdir(t,!1),s};oe.prototype._readdir=function(t,s){var n;if(s&&!Hi(this.symlinks,t))return this._readdirInGlobStar(t);if(Hi(this.cache,t)){var c=this.cache[t];if(!c||c==="FILE")return null;if(Array.isArray(c))return c}try{return this._readdirEntries(t,this.fs.readdirSync(t))}catch(o){return this._readdirError(t,o),null}};oe.prototype._readdirEntries=function(t,s){if(!this.mark&&!this.stat)for(var n=0;n<s.length;n++){var c=s[n];t==="/"?c=t+c:c=t+"/"+c,this.cache[c]=!0}return this.cache[t]=s,s};oe.prototype._readdirError=function(t,s){switch(s.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(t);if(this.cache[n]="FILE",n===this.cwdAbs){var c=new Error(s.code+" invalid cwd "+this.cwd);throw c.path=this.cwd,c.code=s.code,c}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:if(this.cache[this._makeAbs(t)]=!1,this.strict)throw s;this.silent||console.error("glob error",s);break}};oe.prototype._processGlobStar=function(t,s,n,c,o,e){var i=this._readdir(n,e);if(i){var a=c.slice(1),u=t?[t]:[],p=u.concat(a);this._process(p,o,!1);var l=i.length,g=this.symlinks[n];if(!(g&&e))for(var v=0;v<l;v++){var f=i[v];if(!(f.charAt(0)==="."&&!this.dot)){var r=u.concat(i[v],a);this._process(r,o,!0);var d=u.concat(i[v],c);this._process(d,o,!0)}}}};oe.prototype._processSimple=function(t,s){var n=this._stat(t);if(this.matches[s]||(this.matches[s]=Object.create(null)),!!n){if(t&&Cr(t)&&!this.nomount){var c=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=Ni.join(this.root,t):(t=Ni.resolve(this.root,t),c&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(s,t)}};oe.prototype._stat=function(t){var s=this._makeAbs(t),n=t.slice(-1)==="/";if(t.length>this.maxLength)return!1;if(!this.stat&&Hi(this.cache,s)){var i=this.cache[s];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return i;if(n&&i==="FILE")return!1}var c,o=this.statCache[s];if(!o){var e;try{e=this.fs.lstatSync(s)}catch(a){if(a&&(a.code==="ENOENT"||a.code==="ENOTDIR"))return this.statCache[s]=!1,!1}if(e&&e.isSymbolicLink())try{o=this.fs.statSync(s)}catch(a){o=e}else o=e}this.statCache[s]=o;var i=!0;return o&&(i=o.isDirectory()?"DIR":"FILE"),this.cache[s]=this.cache[s]||i,n&&i==="FILE"?!1:i};oe.prototype._mark=function(t){return xt.mark(this,t)};oe.prototype._makeAbs=function(t){return xt.makeAbs(this,t)}});var Wi=se((bf,bn)=>{bn.exports=vn;function vn(t,s){if(t&&s)return vn(t)(s);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(c){n[c]=t[c]}),n;function n(){for(var c=new Array(arguments.length),o=0;o<c.length;o++)c[o]=arguments[o];var e=t.apply(this,c),i=c[c.length-1];return typeof e=="function"&&e!==i&&Object.keys(i).forEach(function(a){e[a]=i[a]}),e}}});var zi=se((yf,Ui)=>{var yn=Wi();Ui.exports=yn(xr);Ui.exports.strict=yn(Sn);xr.proto=xr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return xr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Sn(this)},configurable:!0})});function xr(t){var s=function(){return s.called?s.value:(s.called=!0,s.value=t.apply(this,arguments))};return s.called=!1,s}function Sn(t){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return s.onceError=n+" shouldn't be called more than once",s.called=!1,s}});var Cn=se((Sf,wn)=>{var zu=Wi(),Zt=Object.create(null),ju=zi();wn.exports=zu($u);function $u(t,s){return Zt[t]?(Zt[t].push(s),null):(Zt[t]=[s],qu(t))}function qu(t){return ju(function s(){var n=Zt[t],c=n.length,o=Ku(arguments);try{for(var e=0;e<c;e++)n[e].apply(null,o)}finally{n.length>c?(n.splice(0,c),process.nextTick(function(){s.apply(null,o)})):delete Zt[t]}})}function Ku(t){for(var s=t.length,n=[],c=0;c<s;c++)n[c]=t[c];return n}});var Fi=se((xf,En)=>{En.exports=Et;var Vu=Ri(),xn=yr(),wf=xn.Minimatch,Gu=an(),Yu=require("events").EventEmitter,ji=require("path"),$i=require("assert"),Qt=wr(),Ki=mn(),Lt=Ii(),Xu=Lt.setopts,qi=Lt.ownProp,Vi=Cn(),Cf=require("util"),Ju=Lt.childrenIgnored,Zu=Lt.isIgnored,Qu=zi();function Et(t,s,n){if(typeof s=="function"&&(n=s,s={}),s||(s={}),s.sync){if(n)throw new TypeError("callback provided to sync glob");return Ki(t,s)}return new G(t,s,n)}Et.sync=Ki;var ed=Et.GlobSync=Ki.GlobSync;Et.glob=Et;function td(t,s){if(s===null||typeof s!="object")return t;for(var n=Object.keys(s),c=n.length;c--;)t[n[c]]=s[n[c]];return t}Et.hasMagic=function(t,s){var n=td({},s);n.noprocess=!0;var c=new G(t,n),o=c.minimatch.set;if(!t)return!1;if(o.length>1)return!0;for(var e=0;e<o[0].length;e++)if(typeof o[0][e]!="string")return!0;return!1};Et.Glob=G;Gu(G,Yu);function G(t,s,n){if(typeof s=="function"&&(n=s,s=null),s&&s.sync){if(n)throw new TypeError("callback provided to sync glob");return new ed(t,s)}if(!(this instanceof G))return new G(t,s,n);Xu(this,t,s),this._didRealPath=!1;var c=this.minimatch.set.length;this.matches=new Array(c),typeof n=="function"&&(n=Qu(n),this.on("error",n),this.on("end",function(u){n(null,u)}));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(c===0)return a();for(var e=!0,i=0;i<c;i++)this._process(this.minimatch.set[i],i,!1,a);e=!1;function a(){--o._processing,o._processing<=0&&(e?process.nextTick(function(){o._finish()}):o._finish())}}G.prototype._finish=function(){if($i(this instanceof G),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Lt.finish(this),this.emit("end",this.found)}};G.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var t=this.matches.length;if(t===0)return this._finish();for(var s=this,n=0;n<this.matches.length;n++)this._realpathSet(n,c);function c(){--t===0&&s._finish()}};G.prototype._realpathSet=function(t,s){var n=this.matches[t];if(!n)return s();var c=Object.keys(n),o=this,e=c.length;if(e===0)return s();var i=this.matches[t]=Object.create(null);c.forEach(function(a,u){a=o._makeAbs(a),Vu.realpath(a,o.realpathCache,function(p,l){p?p.syscall==="stat"?i[a]=!0:o.emit("error",p):i[l]=!0,--e===0&&(o.matches[t]=i,s())})})};G.prototype._mark=function(t){return Lt.mark(this,t)};G.prototype._makeAbs=function(t){return Lt.makeAbs(this,t)};G.prototype.abort=function(){this.aborted=!0,this.emit("abort")};G.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};G.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var t=this._emitQueue.slice(0);this._emitQueue.length=0;for(var s=0;s<t.length;s++){var n=t[s];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var c=this._processQueue.slice(0);this._processQueue.length=0;for(var s=0;s<c.length;s++){var o=c[s];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}};G.prototype._process=function(t,s,n,c){if($i(this instanceof G),$i(typeof c=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([t,s,n,c]);return}for(var o=0;typeof t[o]=="string";)o++;var e;switch(o){case t.length:this._processSimple(t.join("/"),s,c);return;case 0:e=null;break;default:e=t.slice(0,o).join("/");break}var i=t.slice(o),a;e===null?a=".":((Qt(e)||Qt(t.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!e||!Qt(e))&&(e="/"+e),a=e);var u=this._makeAbs(a);if(Ju(this,a))return c();var p=i[0]===xn.GLOBSTAR;p?this._processGlobStar(e,a,u,i,s,n,c):this._processReaddir(e,a,u,i,s,n,c)}};G.prototype._processReaddir=function(t,s,n,c,o,e,i){var a=this;this._readdir(n,e,function(u,p){return a._processReaddir2(t,s,n,c,o,e,p,i)})};G.prototype._processReaddir2=function(t,s,n,c,o,e,i,a){if(!i)return a();for(var u=c[0],p=!!this.minimatch.negate,l=u._glob,g=this.dot||l.charAt(0)===".",v=[],f=0;f<i.length;f++){var r=i[f];if(r.charAt(0)!=="."||g){var d;p&&!t?d=!r.match(u):d=r.match(u),d&&v.push(r)}}var _=v.length;if(_===0)return a();if(c.length===1&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(var f=0;f<_;f++){var r=v[f];t&&(t!=="/"?r=t+"/"+r:r=t+r),r.charAt(0)==="/"&&!this.nomount&&(r=ji.join(this.root,r)),this._emitMatch(o,r)}return a()}c.shift();for(var f=0;f<_;f++){var r=v[f],h;t&&(t!=="/"?r=t+"/"+r:r=t+r),this._process([r].concat(c),o,e,a)}a()};G.prototype._emitMatch=function(t,s){if(!this.aborted&&!Zu(this,s)){if(this.paused){this._emitQueue.push([t,s]);return}var n=Qt(s)?s:this._makeAbs(s);if(this.mark&&(s=this._mark(s)),this.absolute&&(s=n),!this.matches[t][s]){if(this.nodir){var c=this.cache[n];if(c==="DIR"||Array.isArray(c))return}this.matches[t][s]=!0;var o=this.statCache[n];o&&this.emit("stat",s,o),this.emit("match",s)}}};G.prototype._readdirInGlobStar=function(t,s){if(this.aborted)return;if(this.follow)return this._readdir(t,!1,s);var n="lstat\0"+t,c=this,o=Vi(n,e);o&&c.fs.lstat(t,o);function e(i,a){if(i&&i.code==="ENOENT")return s();var u=a&&a.isSymbolicLink();c.symlinks[t]=u,!u&&a&&!a.isDirectory()?(c.cache[t]="FILE",s()):c._readdir(t,!1,s)}};G.prototype._readdir=function(t,s,n){if(!this.aborted&&(n=Vi("readdir\0"+t+"\0"+s,n),!!n)){if(s&&!qi(this.symlinks,t))return this._readdirInGlobStar(t,n);if(qi(this.cache,t)){var c=this.cache[t];if(!c||c==="FILE")return n();if(Array.isArray(c))return n(null,c)}var o=this;o.fs.readdir(t,rd(this,t,n))}};function rd(t,s,n){return function(c,o){c?t._readdirError(s,c,n):t._readdirEntries(s,o,n)}}G.prototype._readdirEntries=function(t,s,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var c=0;c<s.length;c++){var o=s[c];t==="/"?o=t+o:o=t+"/"+o,this.cache[o]=!0}return this.cache[t]=s,n(null,s)}};G.prototype._readdirError=function(t,s,n){if(!this.aborted){switch(s.code){case"ENOTSUP":case"ENOTDIR":var c=this._makeAbs(t);if(this.cache[c]="FILE",c===this.cwdAbs){var o=new Error(s.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=s.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(t)]=!1;break;default:this.cache[this._makeAbs(t)]=!1,this.strict&&(this.emit("error",s),this.abort()),this.silent||console.error("glob error",s);break}return n()}};G.prototype._processGlobStar=function(t,s,n,c,o,e,i){var a=this;this._readdir(n,e,function(u,p){a._processGlobStar2(t,s,n,c,o,e,p,i)})};G.prototype._processGlobStar2=function(t,s,n,c,o,e,i,a){if(!i)return a();var u=c.slice(1),p=t?[t]:[],l=p.concat(u);this._process(l,o,!1,a);var g=this.symlinks[n],v=i.length;if(g&&e)return a();for(var f=0;f<v;f++){var r=i[f];if(!(r.charAt(0)==="."&&!this.dot)){var d=p.concat(i[f],u);this._process(d,o,!0,a);var _=p.concat(i[f],c);this._process(_,o,!0,a)}}a()};G.prototype._processSimple=function(t,s,n){var c=this;this._stat(t,function(o,e){c._processSimple2(t,s,o,e,n)})};G.prototype._processSimple2=function(t,s,n,c,o){if(this.matches[s]||(this.matches[s]=Object.create(null)),!c)return o();if(t&&Qt(t)&&!this.nomount){var e=/[\/\\]$/.test(t);t.charAt(0)==="/"?t=ji.join(this.root,t):(t=ji.resolve(this.root,t),e&&(t+="/"))}process.platform==="win32"&&(t=t.replace(/\\/g,"/")),this._emitMatch(s,t),o()};G.prototype._stat=function(t,s){var n=this._makeAbs(t),c=t.slice(-1)==="/";if(t.length>this.maxLength)return s();if(!this.stat&&qi(this.cache,n)){var o=this.cache[n];if(Array.isArray(o)&&(o="DIR"),!c||o==="DIR")return s(null,o);if(c&&o==="FILE")return s()}var e,i=this.statCache[n];if(i!==void 0){if(i===!1)return s(null,i);var a=i.isDirectory()?"DIR":"FILE";return c&&a==="FILE"?s():s(null,a,i)}var u=this,p=Vi("stat\0"+n,l);p&&u.fs.lstat(n,p);function l(g,v){if(v&&v.isSymbolicLink())return u.fs.stat(n,function(f,r){f?u._stat2(t,n,null,v,s):u._stat2(t,n,f,r,s)});u._stat2(t,n,g,v,s)}};G.prototype._stat2=function(t,s,n,c,o){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return this.statCache[s]=!1,o();var e=t.slice(-1)==="/";if(this.statCache[s]=c,s.slice(-1)==="/"&&c&&!c.isDirectory())return o(null,!1,c);var i=!0;return c&&(i=c.isDirectory()?"DIR":"FILE"),this.cache[s]=this.cache[s]||i,e&&i==="FILE"?o():o(null,i,c)}});var Pn=se((Ef,Dn)=>{var J=require("assert"),Tn=require("path"),Ln=require("fs"),Mt;try{Mt=Fi()}catch(t){}var id={nosort:!0,silent:!0},Gi=0,er=process.platform==="win32",On=t=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(n=>{t[n]=t[n]||Ln[n],n=n+"Sync",t[n]=t[n]||Ln[n]}),t.maxBusyTries=t.maxBusyTries||3,t.emfileWait=t.emfileWait||1e3,t.glob===!1&&(t.disableGlob=!0),t.disableGlob!==!0&&Mt===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");t.disableGlob=t.disableGlob||!1,t.glob=t.glob||id},Xi=(t,s,n)=>{typeof s=="function"&&(n=s,s={}),J(t,"rimraf: missing path"),J.equal(typeof t,"string","rimraf: path should be a string"),J.equal(typeof n,"function","rimraf: callback function required"),J(s,"rimraf: invalid options argument provided"),J.equal(typeof s,"object","rimraf: options should be object"),On(s);let c=0,o=null,e=0,i=u=>{o=o||u,--e===0&&n(o)},a=(u,p)=>{if(u)return n(u);if(e=p.length,e===0)return n();p.forEach(l=>{let g=v=>{if(v){if((v.code==="EBUSY"||v.code==="ENOTEMPTY"||v.code==="EPERM")&&c<s.maxBusyTries)return c++,setTimeout(()=>Yi(l,s,g),c*100);if(v.code==="EMFILE"&&Gi<s.emfileWait)return setTimeout(()=>Yi(l,s,g),Gi++);v.code==="ENOENT"&&(v=null)}Gi=0,i(v)};Yi(l,s,g)})};if(s.disableGlob||!Mt.hasMagic(t))return a(null,[t]);s.lstat(t,(u,p)=>{if(!u)return a(null,[t]);Mt(t,s.glob,a)})},Yi=(t,s,n)=>{J(t),J(s),J(typeof n=="function"),s.lstat(t,(c,o)=>{if(c&&c.code==="ENOENT")return n(null);if(c&&c.code==="EPERM"&&er&&kn(t,s,c,n),o&&o.isDirectory())return Er(t,s,c,n);s.unlink(t,e=>{if(e){if(e.code==="ENOENT")return n(null);if(e.code==="EPERM")return er?kn(t,s,e,n):Er(t,s,e,n);if(e.code==="EISDIR")return Er(t,s,e,n)}return n(e)})})},kn=(t,s,n,c)=>{J(t),J(s),J(typeof c=="function"),s.chmod(t,438,o=>{o?c(o.code==="ENOENT"?null:n):s.stat(t,(e,i)=>{e?c(e.code==="ENOENT"?null:n):i.isDirectory()?Er(t,s,n,c):s.unlink(t,c)})})},Rn=(t,s,n)=>{J(t),J(s);try{s.chmodSync(t,438)}catch(o){if(o.code==="ENOENT")return;throw n}let c;try{c=s.statSync(t)}catch(o){if(o.code==="ENOENT")return;throw n}c.isDirectory()?Lr(t,s,n):s.unlinkSync(t)},Er=(t,s,n,c)=>{J(t),J(s),J(typeof c=="function"),s.rmdir(t,o=>{o&&(o.code==="ENOTEMPTY"||o.code==="EEXIST"||o.code==="EPERM")?sd(t,s,c):o&&o.code==="ENOTDIR"?c(n):c(o)})},sd=(t,s,n)=>{J(t),J(s),J(typeof n=="function"),s.readdir(t,(c,o)=>{if(c)return n(c);let e=o.length;if(e===0)return s.rmdir(t,n);let i;o.forEach(a=>{Xi(Tn.join(t,a),s,u=>{if(!i){if(u)return n(i=u);--e===0&&s.rmdir(t,n)}})})})},An=(t,s)=>{s=s||{},On(s),J(t,"rimraf: missing path"),J.equal(typeof t,"string","rimraf: path should be a string"),J(s,"rimraf: missing options"),J.equal(typeof s,"object","rimraf: options should be object");let n;if(s.disableGlob||!Mt.hasMagic(t))n=[t];else try{s.lstatSync(t),n=[t]}catch(c){n=Mt.sync(t,s.glob)}if(n.length)for(let c=0;c<n.length;c++){let o=n[c],e;try{e=s.lstatSync(o)}catch(i){if(i.code==="ENOENT")return;i.code==="EPERM"&&er&&Rn(o,s,i)}try{e&&e.isDirectory()?Lr(o,s,null):s.unlinkSync(o)}catch(i){if(i.code==="ENOENT")return;if(i.code==="EPERM")return er?Rn(o,s,i):Lr(o,s,i);if(i.code!=="EISDIR")throw i;Lr(o,s,i)}}},Lr=(t,s,n)=>{J(t),J(s);try{s.rmdirSync(t)}catch(c){if(c.code==="ENOENT")return;if(c.code==="ENOTDIR")throw n;(c.code==="ENOTEMPTY"||c.code==="EEXIST"||c.code==="EPERM")&&nd(t,s)}},nd=(t,s)=>{J(t),J(s),s.readdirSync(t).forEach(o=>An(Tn.join(t,o),s));let n=er?100:1,c=0;do{let o=!0;try{let e=s.rmdirSync(t,s);return o=!1,e}finally{if(++c<n&&o)continue}}while(!0)};Dn.exports=Xi;Xi.sync=An});var Jn=se((Lf,Me)=>{/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */var ae=require("fs"),ts=require("os"),me=require("path"),Mn=require("crypto"),ke={fs:ae.constants,os:ts.constants},Nn=Pn(),Bn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Hn=/XXXXXX/,od=3,Fn=(ke.O_CREAT||ke.fs.O_CREAT)|(ke.O_EXCL||ke.fs.O_EXCL)|(ke.O_RDWR||ke.fs.O_RDWR),ad=ts.platform()==="win32",ld=ke.EBADF||ke.os.errno.EBADF,cd=ke.ENOENT||ke.os.errno.ENOENT,Wn=448,Un=384,hd="exit",Bt=[],zn=ae.rmdirSync.bind(ae),jn=Nn.sync,$n=!1;function rs(t,s){let n=It(t,s),c=n[0],o=n[1];try{Gn(c)}catch(i){return o(i)}let e=c.tries;(function i(){try{let a=Vn(c);ae.stat(a,function(u){if(!u)return e-- >0?i():o(new Error("Could not get a unique tmp filename, max tries reached "+a));o(null,a)})}catch(a){o(a)}})()}function is(t){let s=It(t),n=s[0];Gn(n);let c=n.tries;do{let o=Vn(n);try{ae.statSync(o)}catch(e){return o}}while(c-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function ud(t,s){let n=It(t,s),c=n[0],o=n[1];rs(c,function(i,a){if(i)return o(i);ae.open(a,Fn,c.mode||Un,function(p,l){if(p)return o(p);if(c.discardDescriptor)return ae.close(l,function(v){return o(v,a,void 0,Zi(a,-1,c,!1))});{let g=c.discardDescriptor||c.detachDescriptor;o(null,a,l,Zi(a,g?-1:l,c,!1))}})})}function dd(t){let s=It(t),n=s[0],c=n.discardDescriptor||n.detachDescriptor,o=is(n);var e=ae.openSync(o,Fn,n.mode||Un);return n.discardDescriptor&&(ae.closeSync(e),e=void 0),{name:o,fd:e,removeCallback:Zi(o,c?-1:e,n,!0)}}function fd(t,s){let n=It(t,s),c=n[0],o=n[1];rs(c,function(i,a){if(i)return o(i);ae.mkdir(a,c.mode||Wn,function(p){if(p)return o(p);o(null,a,qn(a,c,!1))})})}function pd(t){let s=It(t),n=s[0],c=is(n);return ae.mkdirSync(c,n.mode||Wn),{name:c,removeCallback:qn(c,n,!0)}}function _d(t,s){let n=function(c){if(c&&!es(c))return s(c);s()};0<=t[0]?ae.close(t[0],function(){ae.unlink(t[1],n)}):ae.unlink(t[1],n)}function gd(t){let s=null;try{0<=t[0]&&ae.closeSync(t[0])}catch(n){if(!vd(n)&&!es(n))throw n}finally{try{ae.unlinkSync(t[1])}catch(n){es(n)||(s=n)}}if(s!==null)throw s}function Zi(t,s,n,c){let o=kr(gd,[s,t],c),e=kr(_d,[s,t],c,o);return n.keep||Bt.unshift(o),c?o:e}function qn(t,s,n){let c=s.unsafeCleanup?Nn:ae.rmdir.bind(ae),o=s.unsafeCleanup?jn:zn,e=kr(o,t,n),i=kr(c,t,n,e);return s.keep||Bt.unshift(e),n?e:i}function kr(t,s,n,c){let o=!1;return function e(i){if(!o){let a=c||e,u=Bt.indexOf(a);return u>=0&&Bt.splice(u,1),o=!0,n||t===zn||t===jn?t(s):t(s,i||function(){})}}}function md(){if($n)for(;Bt.length;)try{Bt[0]()}catch(t){}}function In(t){let s=[],n=null;try{n=Mn.randomBytes(t)}catch(o){n=Mn.pseudoRandomBytes(t)}for(var c=0;c<t;c++)s.push(Bn[n[c]%Bn.length]);return s.join("")}function Kn(t){return t===null||_e(t)||!t.trim()}function _e(t){return typeof t=="undefined"}function It(t,s){if(typeof t=="function")return[{},t];if(_e(t))return[{},s];let n={};for(let c of Object.getOwnPropertyNames(t))n[c]=t[c];return[n,s]}function Vn(t){let s=t.tmpdir;if(!_e(t.name))return me.join(s,t.dir,t.name);if(!_e(t.template))return me.join(s,t.dir,t.template).replace(Hn,In(6));let n=[t.prefix?t.prefix:"tmp","-",process.pid,"-",In(12),t.postfix?"-"+t.postfix:""].join("");return me.join(s,t.dir,n)}function Gn(t){t.tmpdir=Xn(t);let s=t.tmpdir;if(_e(t.name)||Ji(t.name,"name",s),_e(t.dir)||Ji(t.dir,"dir",s),!_e(t.template)&&(Ji(t.template,"template",s),!t.template.match(Hn)))throw new Error(`Invalid template, found "${t.template}".`);if(!_e(t.tries)&&isNaN(t.tries)||t.tries<0)throw new Error(`Invalid tries, found "${t.tries}".`);t.tries=_e(t.name)?t.tries||od:1,t.keep=!!t.keep,t.detachDescriptor=!!t.detachDescriptor,t.discardDescriptor=!!t.discardDescriptor,t.unsafeCleanup=!!t.unsafeCleanup,t.dir=_e(t.dir)?"":me.relative(s,Qi(t.dir,s)),t.template=_e(t.template)?void 0:me.relative(s,Qi(t.template,s)),t.template=Kn(t.template)?void 0:me.relative(t.dir,t.template),t.name=_e(t.name)?void 0:ss(t.name),t.prefix=_e(t.prefix)?"":t.prefix,t.postfix=_e(t.postfix)?"":t.postfix}function Qi(t,s){let n=ss(t);return n.startsWith(s)?me.resolve(n):me.resolve(me.join(s,n))}function ss(t){return Kn(t)?t:t.replace(/["']/g,"")}function Ji(t,s,n){if(s==="name"){if(me.isAbsolute(t))throw new Error(`${s} option must not contain an absolute path, found "${t}".`);let c=me.basename(t);if(c===".."||c==="."||c!==t)throw new Error(`${s} option must not contain a path, found "${t}".`)}else{if(me.isAbsolute(t)&&!t.startsWith(n))throw new Error(`${s} option must be relative to "${n}", found "${t}".`);let c=Qi(t,n);if(!c.startsWith(n))throw new Error(`${s} option must be relative to "${n}", found "${c}".`)}}function vd(t){return Yn(t,-ld,"EBADF")}function es(t){return Yn(t,-cd,"ENOENT")}function Yn(t,s,n){return ad?t.code===n:t.code===n&&t.errno===s}function bd(){$n=!0}function Xn(t){return me.resolve(ss(t&&t.tmpdir||ts.tmpdir()))}process.addListener(hd,md);Object.defineProperty(Me.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Xn()}});Me.exports.dir=fd;Me.exports.dirSync=pd;Me.exports.file=ud;Me.exports.fileSync=dd;Me.exports.tmpName=rs;Me.exports.tmpNameSync=is;Me.exports.setGracefulCleanup=bd});var so=se((nr,os)=>{(function(t,s){typeof nr=="object"&&typeof os=="object"?os.exports=s():typeof define=="function"&&define.amd?define([],s):typeof nr=="object"?nr.SerializeAddon=s():t.SerializeAddon=s()})(nr,function(){return(()=>{"use strict";var t={};return(()=>{var s=t;function n(p,l,g){return Math.max(l,Math.min(p,g))}Object.defineProperty(s,"__esModule",{value:!0}),s.HTMLSerializeHandler=s.SerializeAddon=void 0;class c{constructor(l){this._buffer=l}serialize(l){let g=this._buffer.getNullCell(),v=this._buffer.getNullCell(),f=g,r=l.start.x,d=l.end.x,_=l.start.y,h=l.end.y;this._beforeSerialize(d-r,r,d);for(let m=r;m<=d;m++){let y=this._buffer.getLine(m);if(y){let S=m!==l.start.x?0:_,C=m!==l.end.x?y.length:h;for(let b=S;b<C;b++){let w=y.getCell(b,f===g?v:g);w?(this._nextCell(w,f,m,b),f=w):console.warn(`Can't get cell at row=${m}, col=${b}`)}}this._rowEnd(m,m===d)}return this._afterSerialize(),this._serializeString()}_nextCell(l,g,v,f){}_rowEnd(l,g){}_beforeSerialize(l,g,v){}_afterSerialize(){}_serializeString(){return""}}function o(p,l){return p.getFgColorMode()===l.getFgColorMode()&&p.getFgColor()===l.getFgColor()}function e(p,l){return p.getBgColorMode()===l.getBgColorMode()&&p.getBgColor()===l.getBgColor()}function i(p,l){return p.isInverse()===l.isInverse()&&p.isBold()===l.isBold()&&p.isUnderline()===l.isUnderline()&&p.isBlink()===l.isBlink()&&p.isInvisible()===l.isInvisible()&&p.isItalic()===l.isItalic()&&p.isDim()===l.isDim()&&p.isStrikethrough()===l.isStrikethrough()}class a extends c{constructor(l,g){super(l),this._terminal=g,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(l,g,v){this._allRows=new Array(l),this._lastContentCursorRow=g,this._lastCursorRow=g,this._firstRow=g}_rowEnd(l,g){var v;this._nullCellCount>0&&!e(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let f="";if(!g){l-this._firstRow>=this._terminal.rows&&((v=this._buffer.getLine(this._cursorStyleRow))===null||v===void 0||v.getCell(this._cursorStyleCol,this._backgroundCell));let r=this._buffer.getLine(l),d=this._buffer.getLine(l+1);if(d.isWrapped){f="";let _=r.getCell(r.length-1,this._thisRowLastChar),h=r.getCell(r.length-2,this._thisRowLastSecondChar),m=d.getCell(0,this._nextRowFirstChar),y=m.getWidth()>1,S=!1;(m.getChars()&&y?this._nullCellCount<=1:this._nullCellCount<=0)&&((_.getChars()||_.getWidth()===0)&&e(_,m)&&(S=!0),y&&(h.getChars()||h.getWidth()===0)&&e(_,m)&&e(h,m)&&(S=!0)),S||(f="-".repeat(this._nullCellCount+1),f+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(f+="\x1B[A",f+=`\x1B[${r.length-this._nullCellCount}C`,f+=`\x1B[${this._nullCellCount}X`,f+=`\x1B[${r.length-this._nullCellCount}D`,f+="\x1B[B"),this._lastContentCursorRow=l+1,this._lastContentCursorCol=0,this._lastCursorRow=l+1,this._lastCursorCol=0)}else f=`\r
`,this._lastCursorRow=l+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=f,this._currentRow="",this._nullCellCount=0}_diffStyle(l,g){let v=[],f=!o(l,g),r=!e(l,g),d=!i(l,g);if(f||r||d)if(l.isAttributeDefault())g.isAttributeDefault()||v.push(0);else{if(f){let _=l.getFgColor();l.isFgRGB()?v.push(38,2,_>>>16&255,_>>>8&255,255&_):l.isFgPalette()?_>=16?v.push(38,5,_):v.push(8&_?90+(7&_):30+(7&_)):v.push(39)}if(r){let _=l.getBgColor();l.isBgRGB()?v.push(48,2,_>>>16&255,_>>>8&255,255&_):l.isBgPalette()?_>=16?v.push(48,5,_):v.push(8&_?100+(7&_):40+(7&_)):v.push(49)}d&&(l.isInverse()!==g.isInverse()&&v.push(l.isInverse()?7:27),l.isBold()!==g.isBold()&&v.push(l.isBold()?1:22),l.isUnderline()!==g.isUnderline()&&v.push(l.isUnderline()?4:24),l.isBlink()!==g.isBlink()&&v.push(l.isBlink()?5:25),l.isInvisible()!==g.isInvisible()&&v.push(l.isInvisible()?8:28),l.isItalic()!==g.isItalic()&&v.push(l.isItalic()?3:23),l.isDim()!==g.isDim()&&v.push(l.isDim()?2:22),l.isStrikethrough()!==g.isStrikethrough()&&v.push(l.isStrikethrough()?9:29))}return v}_nextCell(l,g,v,f){if(l.getWidth()===0)return;let r=l.getChars()==="",d=this._diffStyle(l,this._cursorStyle);if(r?!e(this._cursorStyle,l):d.length>0){this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=v,this._lastContentCursorCol=this._lastCursorCol=f,this._currentRow+=`\x1B[${d.join(";")}m`;let _=this._buffer.getLine(v);_!==void 0&&(_.getCell(f,this._cursorStyle),this._cursorStyleRow=v,this._cursorStyleCol=f)}r?this._nullCellCount+=l.getWidth():(this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=l.getChars(),this._lastContentCursorRow=this._lastCursorRow=v,this._lastContentCursorCol=this._lastCursorCol=f+l.getWidth())}_serializeString(){let l=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(l=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let g="";for(let h=0;h<l;h++)g+=this._allRows[h],h+1<l&&(g+=this._allRowSeparators[h]);let v=this._buffer.baseY+this._buffer.cursorY,f=this._buffer.cursorX;var r;(v!==this._lastCursorRow||f!==this._lastCursorCol)&&((r=v-this._lastCursorRow)>0?g+=`\x1B[${r}B`:r<0&&(g+=`\x1B[${-r}A`),(h=>{h>0?g+=`\x1B[${h}C`:h<0&&(g+=`\x1B[${-h}D`)})(f-this._lastCursorCol));let d=this._terminal._core._inputHandler._curAttrData,_=this._diffStyle(d,this._cursorStyle);return _.length>0&&(g+=`\x1B[${_.join(";")}m`),g}}s.SerializeAddon=class{constructor(){}activate(p){this._terminal=p}_serializeBuffer(p,l,g){let v=l.length,f=new a(l,p),r=g===void 0?v:n(g+p.rows,0,v);return f.serialize({start:{x:v-r,y:0},end:{x:v-1,y:p.cols}})}_serializeBufferAsHTML(p,l){var g,v;let f=p.buffer.active,r=new u(f,p,l);if((g=l.onlySelection)===null||g===void 0||!g){let _=f.length,h=l.scrollback,m=h===void 0?_:n(h+p.rows,0,_);return r.serialize({start:{x:_-m,y:0},end:{x:_-1,y:p.cols}})}let d=(v=this._terminal)===null||v===void 0?void 0:v.getSelectionPosition();return d!==void 0?r.serialize({start:{x:d.start.y,y:d.start.x},end:{x:d.end.y,y:d.end.x}}):""}_serializeModes(p){let l="",g=p.modes;if(g.applicationCursorKeysMode&&(l+="\x1B[?1h"),g.applicationKeypadMode&&(l+="\x1B[?66h"),g.bracketedPasteMode&&(l+="\x1B[?2004h"),g.insertMode&&(l+="\x1B[4h"),g.originMode&&(l+="\x1B[?6h"),g.reverseWraparoundMode&&(l+="\x1B[?45h"),g.sendFocusMode&&(l+="\x1B[?1004h"),g.wraparoundMode===!1&&(l+="\x1B[?7l"),g.mouseTrackingMode!=="none")switch(g.mouseTrackingMode){case"x10":l+="\x1B[?9h";break;case"vt200":l+="\x1B[?1000h";break;case"drag":l+="\x1B[?1002h";break;case"any":l+="\x1B[?1003h"}return l}serialize(p){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let l=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,p==null?void 0:p.scrollback);return p!=null&&p.excludeAltBuffer||this._terminal.buffer.active.type!=="alternate"||(l+=`\x1B[?1049h\x1B[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),p!=null&&p.excludeModes||(l+=this._serializeModes(this._terminal)),l}serializeAsHTML(p){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,p||{})}dispose(){}};class u extends c{constructor(l,g,v){super(l),this._terminal=g,this._options=v,this._currentRow="",this._htmlContent="",this._colors=g._core._themeService.colors}_padStart(l,g,v){return g>>=0,v=v!=null?v:" ",l.length>g?l:((g-=l.length)>v.length&&(v+=v.repeat(g/v.length)),v.slice(0,g)+l)}_beforeSerialize(l,g,v){var f,r,d,_,h;this._htmlContent+="<html><body><!--StartFragment--><pre>";let m="#000000",y="#ffffff";(f=this._options.includeGlobalBackground)!==null&&f!==void 0&&f&&(m=(d=(r=this._terminal.options.theme)===null||r===void 0?void 0:r.foreground)!==null&&d!==void 0?d:"#ffffff",y=(h=(_=this._terminal.options.theme)===null||_===void 0?void 0:_.background)!==null&&h!==void 0?h:"#000000");let S=[];S.push("color: "+m+";"),S.push("background-color: "+y+";"),S.push("font-family: "+this._terminal.options.fontFamily+";"),S.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+S.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(l,g){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(l,g){let v=g?l.getFgColor():l.getBgColor();return(g?l.isFgRGB():l.isBgRGB())?[v>>16&255,v>>8&255,255&v].map(f=>this._padStart(f.toString(16),2,"0")).join(""):(g?l.isFgPalette():l.isBgPalette())?this._colors.ansi[v].css:void 0}_diffStyle(l,g){let v=[],f=!o(l,g),r=!e(l,g),d=!i(l,g);if(f||r||d){let _=this._getHexColor(l,!0);_&&v.push("color: "+_+";");let h=this._getHexColor(l,!1);return h&&v.push("background-color: "+h+";"),l.isInverse()&&v.push("color: #000000; background-color: #BFBFBF;"),l.isBold()&&v.push("font-weight: bold;"),l.isUnderline()&&v.push("text-decoration: underline;"),l.isBlink()&&v.push("text-decoration: blink;"),l.isInvisible()&&v.push("visibility: hidden;"),l.isItalic()&&v.push("font-style: italic;"),l.isDim()&&v.push("opacity: 0.5;"),l.isStrikethrough()&&v.push("text-decoration: line-through;"),v}}_nextCell(l,g,v,f){if(l.getWidth()===0)return;let r=l.getChars()==="",d=this._diffStyle(l,g);d&&(this._currentRow+=d.length===0?"</span><span>":"</span><span style='"+d.join(" ")+"'>"),this._currentRow+=r?" ":l.getChars()}_serializeString(){return this._htmlContent}}s.HTMLSerializeHandler=u})(),t})()})});var oo=se((Br,as)=>{(function(t,s){typeof Br=="object"&&typeof as=="object"?as.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Br=="object"?Br.FitAddon=s():t.FitAddon=s()})(self,function(){return(()=>{"use strict";var t={};return(()=>{var s=t;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{constructor(){}activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let c=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(c._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,c=n._renderService.dimensions;if(c.css.cell.width===0||c.css.cell.height===0)return;let o=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,e=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(e.getPropertyValue("height")),a=Math.max(0,parseInt(e.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),p=i-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),l=a-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(l/c.css.cell.width)),rows:Math.max(1,Math.floor(p/c.css.cell.height))}}}})(),t})()})});var ao=se((Ir,ls)=>{(function(t,s){typeof Ir=="object"&&typeof ls=="object"?ls.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Ir=="object"?Ir.SearchAddon=s():t.SearchAddon=s()})(self,function(){return(()=>{"use strict";var t={345:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===i)return void this._listeners.splice(a,1)}}})),this._event}fire(i,a){let u=[];for(let p=0;p<this._listeners.length;p++)u.push(this._listeners[p]);for(let p=0;p<u.length;p++)u[p].call(void 0,i,a)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(i,a){return i(u=>a.fire(u))}},859:(o,e)=>{function i(a){for(let u of a)u.dispose();a.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let u=this._disposables.indexOf(a);u!==-1&&this._disposables.splice(u,1)}},e.toDisposable=function(a){return{dispose:a}},e.disposeArray=i,e.getDisposeArrayDisposable=function(a){return{dispose:()=>i(a)}}}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o](i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.SearchAddon=void 0;let e=n(345),i=n(859),a=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class u extends i.Disposable{constructor(){super(...arguments),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new e.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event}activate(l){this._terminal=l,this._onDataDisposable=this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this._onResizeDisposable=this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,i.toDisposable)(()=>{var g,v;this.clearDecorations(),(g=this._onDataDisposable)===null||g===void 0||g.dispose(),(v=this._onResizeDisposable)===null||v===void 0||v.dispose()}))}_updateMatches(){var l;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((l=this._lastSearchOptions)===null||l===void 0)&&l.decorations)&&(this._highlightTimeout=setTimeout(()=>{var g,v;this.findPrevious(this._cachedSearchTerm,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0})),this._resultIndex=this._searchResults?this._searchResults.size-1:-1,this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:(v=(g=this._searchResults)===null||g===void 0?void 0:g.size)!==null&&v!==void 0?v:-1})},200))}clearDecorations(l){var g,v,f,r;(g=this._selectedDecoration)===null||g===void 0||g.dispose(),(v=this._searchResults)===null||v===void 0||v.clear(),(f=this._resultDecorations)===null||f===void 0||f.forEach(d=>{for(let _ of d)_.dispose()}),(r=this._resultDecorations)===null||r===void 0||r.clear(),this._searchResults=void 0,this._resultDecorations=void 0,l||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var l;(l=this._selectedDecoration)===null||l===void 0||l.dispose(),this._selectedDecoration=void 0}findNext(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=g,g!=null&&g.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&l===this._cachedSearchTerm||this._highlightAllMatches(l,g)),this._fireResults(l,this._findNextAndSelect(l,g),g)}_highlightAllMatches(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!l||l.length===0)return void this.clearDecorations();g=g||{},this.clearDecorations(!0),this._searchResults=new Map,this._resultDecorations=new Map;let v=this._resultDecorations,f=this._find(l,0,0,g);for(;f&&!this._searchResults.get(`${f.row}-${f.col}`);)if(this._searchResults.set(`${f.row}-${f.col}`,f),f=this._find(l,f.col+f.term.length>=this._terminal.cols?f.row+1:f.row,f.col+f.term.length>=this._terminal.cols?0:f.col+1,g),this._searchResults.size>1e3)return this.clearDecorations(),void(this._resultIndex=void 0);this._searchResults.forEach(r=>{let d=this._createResultDecoration(r,g.decorations);if(d){let _=v.get(d.marker.line)||[];_.push(d),v.set(d.marker.line,_)}})}_find(l,g,v,f){var r;if(!this._terminal||!l||l.length===0)return(r=this._terminal)===null||r===void 0||r.clearSelection(),void this.clearDecorations();if(v>this._terminal.cols)throw new Error(`Invalid col: ${v} to search in terminal of ${this._terminal.cols} cols`);let d;this._initLinesCache();let _={startRow:g,startCol:v};if(d=this._findInLine(l,_,f),!d)for(let h=g+1;h<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=h,_.startCol=0,d=this._findInLine(l,_,f),!d);h++);return d}_findNextAndSelect(l,g){var v;if(!this._terminal||!l||l.length===0)return(v=this._terminal)===null||v===void 0||v.clearSelection(),this.clearDecorations(),this._cachedSearchTerm=void 0,this._resultIndex=-1,!1;this._cachedSearchTerm!==l&&(this._resultIndex=void 0,this._terminal.clearSelection());let f,r=0,d=0;if(this._terminal.hasSelection()){let m=!!g&&g.incremental;f=this._terminal.getSelectionPosition(),d=m?f.start.y:f.end.y,r=m?f.start.x:f.end.x}this._initLinesCache();let _={startRow:d,startCol:r},h=this._findInLine(l,_,g);if(!h)for(let m=d+1;m<this._terminal.buffer.active.baseY+this._terminal.rows&&(_.startRow=m,_.startCol=0,h=this._findInLine(l,_,g),!h);m++);if(!h&&d!==0)for(let m=0;m<d&&(_.startRow=m,_.startCol=0,h=this._findInLine(l,_,g),!h);m++);return!h&&f&&(_.startRow=f.start.y,_.startCol=0,h=this._findInLine(l,_,g)),this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0?this._resultIndex=0:(this._resultIndex++,this._resultIndex>=this._searchResults.size&&(this._resultIndex=0))),this._selectResult(h,g==null?void 0:g.decorations,g==null?void 0:g.noScroll)}findPrevious(l,g){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=g,g!=null&&g.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&l===this._cachedSearchTerm||this._highlightAllMatches(l,g)),this._fireResults(l,this._findPreviousAndSelect(l,g),g)}_fireResults(l,g,v){var f;return v!=null&&v.decorations&&(this._resultIndex!==void 0&&((f=this._searchResults)===null||f===void 0?void 0:f.size)!==void 0?this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:this._searchResults.size}):this._onDidChangeResults.fire(void 0)),this._cachedSearchTerm=l,g}_findPreviousAndSelect(l,g){var v;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let f;if(!this._terminal||!l||l.length===0)return f=void 0,(v=this._terminal)===null||v===void 0||v.clearSelection(),this.clearDecorations(),this._resultIndex=-1,!1;this._cachedSearchTerm!==l&&(this._resultIndex=void 0,this._terminal.clearSelection());let r=this._terminal.buffer.active.baseY+this._terminal.rows,d=this._terminal.cols,_=!0,h=!!g&&g.incremental,m;this._terminal.hasSelection()&&(m=this._terminal.getSelectionPosition(),r=m.start.y,d=m.start.x),this._initLinesCache();let y={startRow:r,startCol:d};if(h?(f=this._findInLine(l,y,g,!1),f&&f.row===r&&f.col===d||(m&&(y.startRow=m.end.y,y.startCol=m.end.x),f=this._findInLine(l,y,g,!0))):f=this._findInLine(l,y,g,_),!f){y.startCol=Math.max(y.startCol,this._terminal.cols);for(let S=r-1;S>=0&&(y.startRow=S,f=this._findInLine(l,y,g,_),!f);S--);}if(!f&&r!==this._terminal.buffer.active.baseY+this._terminal.rows)for(let S=this._terminal.buffer.active.baseY+this._terminal.rows;S>=r&&(y.startRow=S,f=this._findInLine(l,y,g,_),!f);S--);return this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0||this._resultIndex<0?this._resultIndex=this._searchResults.size-1:(this._resultIndex--,this._resultIndex===-1&&(this._resultIndex=this._searchResults.size-1))),!(f||!m)||this._selectResult(f,g==null?void 0:g.decorations,g==null?void 0:g.noScroll)}_initLinesCache(){let l=this._terminal;this._linesCache||(this._linesCache=new Array(l.buffer.active.length),this._cursorMoveListener=l.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=l.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(l,g,v){return(l===0||a.includes(g[l-1]))&&(l+v.length===g.length||a.includes(g[l+v.length]))}_findInLine(l,g,v={},f=!1){var r;let d=this._terminal,_=g.startRow,h=g.startCol,m=d.buffer.active.getLine(_);if(m!=null&&m.isWrapped)return f?void(g.startCol+=d.cols):(g.startRow--,g.startCol+=d.cols,this._findInLine(l,g,v));let y=(r=this._linesCache)===null||r===void 0?void 0:r[_];y||(y=this._translateBufferLineToStringWithWrap(_,!0),this._linesCache&&(this._linesCache[_]=y));let[S,C]=y,b=this._bufferColsToStringOffset(_,h),w=v.caseSensitive?l:l.toLowerCase(),E=v.caseSensitive?S:S.toLowerCase(),L=-1;if(v.regex){let R=RegExp(w,"g"),T;if(f)for(;T=R.exec(E.slice(0,b));)L=R.lastIndex-T[0].length,l=T[0],R.lastIndex-=l.length-1;else T=R.exec(E.slice(b)),T&&T[0].length>0&&(L=b+(R.lastIndex-T[0].length),l=T[0])}else f?b-w.length>=0&&(L=E.lastIndexOf(w,b-w.length)):L=E.indexOf(w,b);if(L>=0){if(v.wholeWord&&!this._isWholeWord(L,E,l))return;let R=0;for(;R<C.length-1&&L>=C[R+1];)R++;let T=R;for(;T<C.length-1&&L+l.length>=C[T+1];)T++;let B=L-C[R],H=L+l.length-C[T],F=this._stringLengthToBufferSize(_+R,B);return{term:l,col:F,row:_+R,size:this._stringLengthToBufferSize(_+T,H)-F+d.cols*(T-R)}}}_stringLengthToBufferSize(l,g){let v=this._terminal.buffer.active.getLine(l);if(!v)return 0;for(let f=0;f<g;f++){let r=v.getCell(f);if(!r)break;let d=r.getChars();d.length>1&&(g-=d.length-1);let _=v.getCell(f+1);_&&_.getWidth()===0&&g++}return g}_bufferColsToStringOffset(l,g){let v=this._terminal,f=l,r=0,d=v.buffer.active.getLine(f);for(;g>0&&d;){for(let _=0;_<g&&_<v.cols;_++){let h=d.getCell(_);if(!h)break;h.getWidth()&&(r+=h.getCode()===0?1:h.getChars().length)}if(f++,d=v.buffer.active.getLine(f),d&&!d.isWrapped)break;g-=v.cols}return r}_translateBufferLineToStringWithWrap(l,g){var v;let f=this._terminal,r=[],d=[0],_=f.buffer.active.getLine(l);for(;_;){let h=f.buffer.active.getLine(l+1),m=!!h&&h.isWrapped,y=_.translateToString(!m&&g);if(m&&h){let S=_.getCell(_.length-1);S&&S.getCode()===0&&S.getWidth()===1&&((v=h.getCell(0))===null||v===void 0?void 0:v.getWidth())===2&&(y=y.slice(0,-1))}if(r.push(y),!m)break;d.push(d[d.length-1]+y.length),l++,_=h}return[r.join(""),d]}_selectResult(l,g,v){var f,r;let d=this._terminal;if(this.clearActiveDecoration(),!l)return d.clearSelection(),!1;if(d.select(l.col,l.row,l.size),g){let _=d.registerMarker(-d.buffer.active.baseY-d.buffer.active.cursorY+l.row);_&&(this._selectedDecoration=d.registerDecoration({marker:_,x:l.col,width:l.size,backgroundColor:g.activeMatchBackground,layer:"top",overviewRulerOptions:{color:g.activeMatchColorOverviewRuler}}),(f=this._selectedDecoration)===null||f===void 0||f.onRender(h=>this._applyStyles(h,g.activeMatchBorder,!0)),(r=this._selectedDecoration)===null||r===void 0||r.onDispose(()=>_.dispose()))}if(!v&&(l.row>=d.buffer.active.viewportY+d.rows||l.row<d.buffer.active.viewportY)){let _=l.row-d.buffer.active.viewportY;_-=Math.floor(d.rows/2),d.scrollLines(_)}return!0}_applyStyles(l,g,v){l.clientWidth<=0||(l.classList.contains("xterm-find-result-decoration")||(l.classList.add("xterm-find-result-decoration"),g&&(l.style.outline=`1px solid ${g}`)),v&&l.classList.add("xterm-find-active-result-decoration"))}_createResultDecoration(l,g){var v;let f=this._terminal,r=f.registerMarker(-f.buffer.active.baseY-f.buffer.active.cursorY+l.row);if(!r)return;let d=f.registerDecoration({marker:r,x:l.col,width:l.size,backgroundColor:g.matchBackground,overviewRulerOptions:!((v=this._resultDecorations)===null||v===void 0)&&v.get(r.line)?void 0:{color:g.matchOverviewRuler,position:"center"}});return d==null||d.onRender(_=>this._applyStyles(_,g.matchBorder,!1)),d==null||d.onDispose(()=>r.dispose()),d}}o.SearchAddon=u})(),c})()})});var co=se((Nr,cs)=>{(function(t,s){if(typeof Nr=="object"&&typeof cs=="object")cs.exports=s();else if(typeof define=="function"&&define.amd)define([],s);else{var n=s();for(var c in n)(typeof Nr=="object"?Nr:t)[c]=n[c]}})(self,function(){return(()=>{"use strict";var t={4567:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityManager=void 0;let a=i(9042),u=i(6114),p=i(9924),l=i(3656),g=i(844),v=i(5596),f=i(9631);class r extends g.Disposable{constructor(_,h){super(),this._terminal=_,this._renderService=h,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let m=0;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);if(this._topBoundaryFocusListener=m=>this._handleBoundaryFocus(m,0),this._bottomBoundaryFocusListener=m=>this._handleBoundaryFocus(m,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new p.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(m=>this._handleResize(m.rows))),this.register(this._terminal.onRender(m=>this._refreshRows(m.start,m.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(m=>this._handleChar(m))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(m=>this._handleTab(m))),this.register(this._terminal.onKey(m=>this._handleKey(m.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,g.toDisposable)(()=>{(0,f.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(_,h){let m=_.target,y=this._rowElements[h===0?1:this._rowElements.length-2];if(m.getAttribute("aria-posinset")===(h===0?"1":`${this._terminal.buffer.lines.length}`)||_.relatedTarget!==y)return;let S,C;if(h===0?(S=m,C=this._rowElements.pop(),this._rowContainer.removeChild(C)):(S=this._rowElements.shift(),C=m,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),C.removeEventListener("focus",this._bottomBoundaryFocusListener),h===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(h===0?-1:1),this._rowElements[h===0?1:this._rowElements.length-2].focus(),_.preventDefault(),_.stopImmediatePropagation()}_handleResize(_){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let h=this._rowContainer.children.length;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);for(;this._rowElements.length>_;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let _=document.createElement("div");return _.setAttribute("role","listitem"),_.tabIndex=-1,this._refreshRowDimensions(_),_}_handleTab(_){for(let h=0;h<_;h++)this._handleChar(" ")}_handleChar(_){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==_&&(this._charsToAnnounce+=_):this._charsToAnnounce+=_,_===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&(0,f.removeElementFromParent)(this._liveRegion)}_handleKey(_){this._clearLiveRegion(),/\p{Control}/u.test(_)||this._charsToConsume.push(_)}_refreshRows(_,h){this._renderRowsDebouncer.refresh(_,h,this._terminal.rows)}_renderRows(_,h){let m=this._terminal.buffer,y=m.lines.length.toString();for(let S=_;S<=h;S++){let C=m.translateBufferLineToString(m.ydisp+S,!0),b=(m.ydisp+S+1).toString(),w=this._rowElements[S];w&&(C.length===0?w.innerText="\xA0":w.textContent=C,w.setAttribute("aria-posinset",b),w.setAttribute("aria-setsize",y))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let _=0;_<this._terminal.rows;_++)this._refreshRowDimensions(this._rowElements[_])}}_refreshRowDimensions(_){_.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}e.AccessibilityManager=r},3614:(o,e)=>{function i(l){return l.replace(/\r?\n/g,"\r")}function a(l,g){return g?"\x1B[200~"+l+"\x1B[201~":l}function u(l,g,v){l=a(l=i(l),v.decPrivateModes.bracketedPasteMode),v.triggerDataEvent(l,!0),g.value=""}function p(l,g,v){let f=v.getBoundingClientRect(),r=l.clientX-f.left-10,d=l.clientY-f.top-10;g.style.width="20px",g.style.height="20px",g.style.left=`${r}px`,g.style.top=`${d}px`,g.style.zIndex="1000",g.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.rightClickHandler=e.moveTextAreaUnderMouseCursor=e.paste=e.handlePasteEvent=e.copyHandler=e.bracketTextForPaste=e.prepareTextForTerminal=void 0,e.prepareTextForTerminal=i,e.bracketTextForPaste=a,e.copyHandler=function(l,g){l.clipboardData&&l.clipboardData.setData("text/plain",g.selectionText),l.preventDefault()},e.handlePasteEvent=function(l,g,v){l.stopPropagation(),l.clipboardData&&u(l.clipboardData.getData("text/plain"),g,v)},e.paste=u,e.moveTextAreaUnderMouseCursor=p,e.rightClickHandler=function(l,g,v,f,r){p(l,g,v),r&&f.rightClickSelect(l),g.value=f.selectionText,g.select()}},7239:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;let a=i(1505);e.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(u,p,l){this._css.set(u,p,l)}getCss(u,p){return this._css.get(u,p)}setColor(u,p,l){this._color.set(u,p,l)}getColor(u,p){return this._color.get(u,p)}clear(){this._color.clear(),this._css.clear()}}},9631:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(...i){var a;for(let u of i)(a=u==null?void 0:u.parentElement)===null||a===void 0||a.removeChild(u)}},3656:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(i,a,u,p){i.addEventListener(a,u,p);let l=!1;return{dispose:()=>{l||(l=!0,i.removeEventListener(a,u,p))}}}},6465:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,y=arguments.length,S=y<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(y<3?m(S):y>3?m(d,_,S):m(d,_))||S);return y>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Linkifier2=void 0;let p=i(2585),l=i(8460),g=i(844),v=i(3656),f=class extends g.Disposable{constructor(r){super(),this._bufferService=r,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new l.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new l.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,g.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,g.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(r){return this._linkProviders.push(r),{dispose:()=>{let d=this._linkProviders.indexOf(r);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(r,d,_){this._element=r,this._mouseService=d,this._renderService=_,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(r){if(this._lastMouseEvent=r,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let _=r.composedPath();for(let h=0;h<_.length;h++){let m=_[h];if(m.classList.contains("xterm"))break;if(m.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(r){if(this._activeLine!==r.y)return this._clearCurrentLink(),void this._askForLink(r,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))}_askForLink(r,d){var _,h;this._activeProviderReplies&&d||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(y=>{y==null||y.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=r.y);let m=!1;for(let[y,S]of this._linkProviders.entries())d?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(y)&&(m=this._checkLinkProviderResult(y,r,m)):S.provideLinks(r.y,C=>{var b,w;if(this._isMouseOut)return;let E=C==null?void 0:C.map(L=>({link:L}));(b=this._activeProviderReplies)===null||b===void 0||b.set(y,E),m=this._checkLinkProviderResult(y,r,m),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(r.y,this._activeProviderReplies)})}_removeIntersectingLinks(r,d){let _=new Set;for(let h=0;h<d.size;h++){let m=d.get(h);if(m)for(let y=0;y<m.length;y++){let S=m[y],C=S.link.range.start.y<r?0:S.link.range.start.x,b=S.link.range.end.y>r?this._bufferService.cols:S.link.range.end.x;for(let w=C;w<=b;w++){if(_.has(w)){m.splice(y--,1);break}_.add(w)}}}}_checkLinkProviderResult(r,d,_){var h;if(!this._activeProviderReplies)return _;let m=this._activeProviderReplies.get(r),y=!1;for(let S=0;S<r;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(y=!0);if(!y&&m){let S=m.find(C=>this._linkAtPosition(C.link,d));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){let C=(h=this._activeProviderReplies.get(S))===null||h===void 0?void 0:h.find(b=>this._linkAtPosition(b.link,d));if(C){_=!0,this._handleNewLink(C);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(r){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(r,this._currentLink.link.text)}_clearCurrentLink(r,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!r||!d||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,g.disposeArray)(this._linkCacheDisposables))}_handleNewLink(r){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(r.link,d)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:()=>{var _,h;return(h=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:_=>{var h,m;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((m=this._element)===null||m===void 0||m.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,h;return(h=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||h===void 0?void 0:h.decorations.underline},set:_=>{var h,m,y;!((h=this._currentLink)===null||h===void 0)&&h.state&&((y=(m=this._currentLink)===null||m===void 0?void 0:m.state)===null||y===void 0?void 0:y.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(r.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{let h=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,m=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(h,_.end+1+this._bufferService.buffer.ydisp),m&&this._element){let y=this._positionFromMouseEvent(m,this._element,this._mouseService);y&&this._askForLink(y,!1)}})))}_linkHover(r,d,_){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(_,d.text)}_fireUnderlineEvent(r,d){let _=r.range,h=this._bufferService.buffer.ydisp,m=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-h-1,_.end.x,_.end.y-h-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(m)}_linkLeave(r,d,_){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(_,d.text)}_linkAtPosition(r,d){let _=r.range.start.y*this._bufferService.cols+r.range.start.x,h=r.range.end.y*this._bufferService.cols+r.range.end.x,m=d.y*this._bufferService.cols+d.x;return _<=m&&m<=h}_positionFromMouseEvent(r,d,_){let h=_.getCoords(r,d,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(r,d,_,h,m){return{x1:r,y1:d,x2:_,y2:h,cols:this._bufferService.cols,fg:m}}};f=a([u(0,p.IBufferService)],f),e.Linkifier2=f},9042:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooMuchOutput=e.promptLabel=void 0,e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,e,i){var a=this&&this.__decorate||function(f,r,d,_){var h,m=arguments.length,y=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,r,d,_);else for(var S=f.length-1;S>=0;S--)(h=f[S])&&(y=(m<3?h(y):m>3?h(r,d,y):h(r,d))||y);return m>3&&y&&Object.defineProperty(r,d,y),y},u=this&&this.__param||function(f,r){return function(d,_){r(d,_,f)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkProvider=void 0;let p=i(511),l=i(2585),g=class{constructor(f,r,d){this._bufferService=f,this._optionsService=r,this._oscLinkService=d}provideLinks(f,r){var d;let _=this._bufferService.buffer.lines.get(f-1);if(!_)return void r(void 0);let h=[],m=this._optionsService.rawOptions.linkHandler,y=new p.CellData,S=_.getTrimmedLength(),C=-1,b=-1,w=!1;for(let E=0;E<S;E++)if(b!==-1||_.hasContent(E)){if(_.loadCell(E,y),y.hasExtendedAttrs()&&y.extended.urlId){if(b===-1){b=E,C=y.extended.urlId;continue}w=y.extended.urlId!==C}else b!==-1&&(w=!0);if(w||b!==-1&&E===S-1){let L=(d=this._oscLinkService.getLinkData(C))===null||d===void 0?void 0:d.uri;if(L){let R={start:{x:b+1,y:f},end:{x:E+(w||E!==S-1?0:1),y:f}},T=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{let B=new URL(L);["http:","https:"].includes(B.protocol)||(T=!0)}catch(B){T=!0}T||h.push({text:L,range:R,activate:(B,H)=>m?m.activate(B,H,R):v(0,H),hover:(B,H)=>{var F;return(F=m==null?void 0:m.hover)===null||F===void 0?void 0:F.call(m,B,H,R)},leave:(B,H)=>{var F;return(F=m==null?void 0:m.leave)===null||F===void 0?void 0:F.call(m,B,H,R)}})}w=!1,y.hasExtendedAttrs()&&y.extended.urlId?(b=E,C=y.extended.urlId):(b=-1,C=-1)}}r(h)}};function v(f,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch(_){}d.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}g=a([u(0,l.IBufferService),u(1,l.IOptionsService),u(2,l.IOscLinkService)],g),e.OscLinkProvider=g},6193:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderDebouncer=void 0,e.RenderDebouncer=class{constructor(i,a){this._parentWindow=i,this._renderCallback=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(i){return this._refreshCallbacks.push(i),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(i,a,u){this._rowCount=u,i=i!==void 0?i:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let i=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let i of this._refreshCallbacks)i(0);this._refreshCallbacks=[]}}},5596:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenDprMonitor=void 0;let a=i(844);class u extends a.Disposable{constructor(l){super(),this._parentWindow=l,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,a.toDisposable)(()=>{this.clearListener()}))}setListener(l){this._listener&&this.clearListener(),this._listener=l,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var l;this._outerListener&&((l=this._resolutionMediaMatchList)===null||l===void 0||l.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}e.ScreenDprMonitor=u},3236:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;let a=i(2950),u=i(1680),p=i(3614),l=i(2584),g=i(5435),v=i(9312),f=i(6114),r=i(3656),d=i(9042),_=i(4567),h=i(1296),m=i(7399),y=i(8460),S=i(8437),C=i(3230),b=i(4725),w=i(428),E=i(8934),L=i(6465),R=i(5114),T=i(8969),B=i(8055),H=i(4269),F=i(5941),x=i(3107),k=i(5744),O=i(9074),P=i(2585),N=i(3730),z=i(844),q=i(6731),W=typeof window!="undefined"?window.document:null;class $ extends T.CoreTerminal{constructor(A={}){super(A),this.browser=f,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new y.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new y.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new y.EventEmitter),this._onBlur=this.register(new y.EventEmitter),this._onA11yCharEmitter=this.register(new y.EventEmitter),this._onA11yTabEmitter=this.register(new y.EventEmitter),this._onWillOpen=this.register(new y.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(L.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(N.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((M,I)=>this.refresh(M,I))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(M=>this._reportWindowsOptions(M))),this.register(this._inputHandler.onColor(M=>this._handleColorEvent(M))),this.register((0,y.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,y.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(M=>this._afterResize(M.cols,M.rows))),this.register((0,z.toDisposable)(()=>{var M,I;this._customKeyEventHandler=void 0,(I=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||I===void 0||I.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(A){if(this._themeService)for(let M of A){let I,U="";switch(M.index){case 256:I="foreground",U="10";break;case 257:I="background",U="11";break;case 258:I="cursor",U="12";break;default:I="ansi",U="4;"+M.index}switch(M.type){case 0:let Z=B.color.toColorRGB(I==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[I]);this.coreService.triggerDataEvent(`${l.C0.ESC}]${U};${(0,F.toRgbString)(Z)}${l.C1_ESCAPED.ST}`);break;case 1:if(I==="ansi")this._themeService.modifyColors(j=>j.ansi[M.index]=B.rgba.toColor(...M.color));else{let j=I;this._themeService.modifyColors(ee=>ee[j]=B.rgba.toColor(...M.color))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(A){var M;A?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)):((M=this._accessibilityManager)===null||M===void 0||M.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(A){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(l.C0.ESC+"[I"),this.updateCursorStyle(A),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var A;return(A=this.textarea)===null||A===void 0?void 0:A.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(l.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let A=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(A);if(!M)return;let I=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,Z=M.getWidth(I),j=this._renderService.dimensions.css.cell.width*Z,ee=this.buffer.y*this._renderService.dimensions.css.cell.height,ne=I*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ne+"px",this.textarea.style.top=ee+"px",this.textarea.style.width=j+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,"copy",M=>{this.hasSelection()&&(0,p.copyHandler)(M,this._selectionService)}));let A=M=>(0,p.handlePasteEvent)(M,this.textarea,this.coreService);this.register((0,r.addDisposableDomListener)(this.textarea,"paste",A)),this.register((0,r.addDisposableDomListener)(this.element,"paste",A)),f.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,"mousedown",M=>{M.button===2&&(0,p.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,r.addDisposableDomListener)(this.element,"contextmenu",M=>{(0,p.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),f.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,"auxclick",M=>{M.button===1&&(0,p.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,"keyup",A=>this._keyUp(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keydown",A=>this._keyDown(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keypress",A=>this._keyPress(A),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionupdate",A=>this._compositionHelper.compositionupdate(A))),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,r.addDisposableDomListener)(this.textarea,"input",A=>this._inputEvent(A),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(A){var M;if(!A)throw new Error("Terminal requires a parent element.");A.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=A.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),A.appendChild(this.element);let I=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),f.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(R.CoreBrowserService,this.textarea,(M=this._document.defaultView)!==null&&M!==void 0?M:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,r.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(w.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(q.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(H.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(C.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(a.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I);try{this._onWillOpen.fire(this.element)}catch(U){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(u.Viewport,U=>this.scrollLines(U,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(x.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new _.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(k.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(k.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(h.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let A=this,M=this.element;function I(j){let ee=A._mouseService.getMouseReportCoords(j,A.screenElement);if(!ee)return!1;let ne,ie;switch(j.overrideType||j.type){case"mousemove":ie=32,j.buttons===void 0?(ne=3,j.button!==void 0&&(ne=j.button<3?j.button:3)):ne=1&j.buttons?0:4&j.buttons?1:2&j.buttons?2:3;break;case"mouseup":ie=0,ne=j.button<3?j.button:3;break;case"mousedown":ie=1,ne=j.button<3?j.button:3;break;case"wheel":if(A.viewport.getLinesScrolled(j)===0)return!1;ie=j.deltaY<0?0:1,ne=4;break;default:return!1}return!(ie===void 0||ne===void 0||ne>4)&&A.coreMouseService.triggerMouseEvent({col:ee.col,row:ee.row,x:ee.x,y:ee.y,button:ne,action:ie,ctrl:j.ctrlKey,alt:j.altKey,shift:j.shiftKey})}let U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Z={mouseup:j=>(I(j),j.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(j)),wheel:j=>(I(j),this.cancel(j,!0)),mousedrag:j=>{j.buttons&&I(j)},mousemove:j=>{j.buttons||I(j)}};this.register(this.coreMouseService.onProtocolChange(j=>{j?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(j)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&j?U.mousemove||(M.addEventListener("mousemove",Z.mousemove),U.mousemove=Z.mousemove):(M.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&j?U.wheel||(M.addEventListener("wheel",Z.wheel,{passive:!1}),U.wheel=Z.wheel):(M.removeEventListener("wheel",U.wheel),U.wheel=null),2&j?U.mouseup||(U.mouseup=Z.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&j?U.mousedrag||(U.mousedrag=Z.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(M,"mousedown",j=>{if(j.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(j))return I(j),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(j)})),this.register((0,r.addDisposableDomListener)(M,"wheel",j=>{if(!U.wheel){if(!this.buffer.hasScrollback){let ee=this.viewport.getLinesScrolled(j);if(ee===0)return;let ne=l.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(j.deltaY<0?"A":"B"),ie="";for(let Y=0;Y<Math.abs(ee);Y++)ie+=ne;return this.coreService.triggerDataEvent(ie,!0),this.cancel(j,!0)}return this.viewport.handleWheel(j)?this.cancel(j):void 0}},{passive:!1})),this.register((0,r.addDisposableDomListener)(M,"touchstart",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(j),this.cancel(j)},{passive:!0})),this.register((0,r.addDisposableDomListener)(M,"touchmove",j=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(j)?void 0:this.cancel(j)},{passive:!1}))}refresh(A,M){var I;(I=this._renderService)===null||I===void 0||I.refreshRows(A,M)}updateCursorStyle(A){var M;!((M=this._selectionService)===null||M===void 0)&&M.shouldColumnSelect(A)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(A,M,I=0){super.scrollLines(A,M,I),this.refresh(0,this.rows-1)}paste(A){(0,p.paste)(A,this.textarea,this.coreService)}attachCustomKeyEventHandler(A){this._customKeyEventHandler=A}registerLinkProvider(A){return this.linkifier2.registerLinkProvider(A)}registerCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let M=this._characterJoinerService.register(A);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(A){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(A)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(A){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+A)}registerDecoration(A){return this._decorationService.registerDecoration(A)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(A,M,I){this._selectionService.setSelection(A,M,I)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var A;(A=this._selectionService)===null||A===void 0||A.clearSelection()}selectAll(){var A;(A=this._selectionService)===null||A===void 0||A.selectAll()}selectLines(A,M){var I;(I=this._selectionService)===null||I===void 0||I.selectLines(A,M)}_keyDown(A){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;let M=this.browser.isMac&&this.options.macOptionIsMeta&&A.altKey;if(!M&&!this._compositionHelper.keydown(A))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;M||A.key!=="Dead"&&A.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let I=(0,m.evaluateKeyboardEvent)(A,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(A),I.type===3||I.type===2){let U=this.rows-1;return this.scrollLines(I.type===2?-U:U),this.cancel(A,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,A)||(I.cancel&&this.cancel(A,!0),!I.key||!!(A.key&&!A.ctrlKey&&!A.altKey&&!A.metaKey&&A.key.length===1&&A.key.charCodeAt(0)>=65&&A.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==l.C0.ETX&&I.key!==l.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),!this.optionsService.rawOptions.screenReaderMode||A.altKey||A.ctrlKey?this.cancel(A,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(A,M){let I=A.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||A.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||A.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?I:I&&(!M.keyCode||M.keyCode>47)}_keyUp(A){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(A)||this.focus(),this.updateCursorStyle(A),this._keyPressHandled=!1)}_keyPress(A){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(A)===!1)return!1;if(this.cancel(A),A.charCode)M=A.charCode;else if(A.which===null||A.which===void 0)M=A.keyCode;else{if(A.which===0||A.charCode===0)return!1;M=A.which}return!(!M||(A.altKey||A.ctrlKey||A.metaKey)&&!this._isThirdLevelShift(this.browser,A)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:A}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(A){if(A.data&&A.inputType==="insertText"&&(!A.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let M=A.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(A),!0}return!1}resize(A,M){A!==this.cols||M!==this.rows?super.resize(A,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(A,M){var I,U;(I=this._charSizeService)===null||I===void 0||I.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(S.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var A,M;this.options.rows=this.rows,this.options.cols=this.cols;let I=this._customKeyEventHandler;this._setup(),super.reset(),(A=this._selectionService)===null||A===void 0||A.reset(),this._decorationService.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1),(M=this.viewport)===null||M===void 0||M.syncScrollArea()}clearTextureAtlas(){var A;(A=this._renderService)===null||A===void 0||A.clearTextureAtlas()}_reportFocus(){var A;!((A=this.element)===null||A===void 0)&&A.classList.contains("focus")?this.coreService.triggerDataEvent(l.C0.ESC+"[I"):this.coreService.triggerDataEvent(l.C0.ESC+"[O")}_reportWindowsOptions(A){if(this._renderService)switch(A){case g.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let M=this._renderService.dimensions.css.canvas.width.toFixed(0),I=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${l.C0.ESC}[4;${I};${M}t`);break;case g.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let U=this._renderService.dimensions.css.cell.width.toFixed(0),Z=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${l.C0.ESC}[6;${Z};${U}t`)}}cancel(A,M){if(this.options.cancelEvents||M)return A.preventDefault(),A.stopPropagation(),!1}}e.Terminal=$},9924:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeBasedDebouncer=void 0,e.TimeBasedDebouncer=class{constructor(i,a=1e3){this._renderCallback=i,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(i,a,u){this._rowCount=u,i=i!==void 0?i:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){let l=p-this._lastRefreshMs,g=this._debounceThresholdMS-l;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},g)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let i=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,a)}}},1680:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,y=arguments.length,S=y<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(y<3?m(S):y>3?m(d,_,S):m(d,_))||S);return y>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;let p=i(844),l=i(3656),g=i(4725),v=i(2585),f=class extends p.Disposable{constructor(r,d,_,h,m,y,S,C,b){super(),this._scrollLines=r,this._viewportElement=d,this._scrollArea=_,this._bufferService=h,this._optionsService=m,this._charSizeService=y,this._renderService=S,this._coreBrowserService=C,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(b.colors),this.register(b.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let d=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==d&&(this._lastRecordedBufferHeight=d,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);let d=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(d)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,d){let _=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(d<0&&this._viewportElement.scrollTop!==0||d>0&&_<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){let d=this._getPixelsScrolled(r);return d!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+d:this._smoothScrollState.target+=d,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=d,this._bubbleScroll(r,d))}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let d=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?d*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._currentRowHeight*this._bufferService.rows),d}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let d=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(d/=this._currentRowHeight+0,this._wheelPartialScroll+=d,d=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d*=this._bufferService.rows),d}_applyScrollModifier(r,d){let _=this._optionsService.rawOptions.fastScrollModifier;return _==="alt"&&d.altKey||_==="ctrl"&&d.ctrlKey||_==="shift"&&d.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){let d=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,d!==0&&(this._viewportElement.scrollTop+=d,this._bubbleScroll(r,d))}};f=a([u(3,v.IBufferService),u(4,v.IOptionsService),u(5,g.ICharSizeService),u(6,g.IRenderService),u(7,g.ICoreBrowserService),u(8,g.IThemeService)],f),e.Viewport=f},3107:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,y=arguments.length,S=y<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(y<3?m(S):y>3?m(d,_,S):m(d,_))||S);return y>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferDecorationRenderer=void 0;let p=i(3656),l=i(4725),g=i(844),v=i(2585),f=class extends g.Disposable{constructor(r,d,_,h){super(),this._screenElement=r,this._bufferService=d,this._decorationService=_,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,p.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(m=>this._removeDecoration(m))),this.register((0,g.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let r of this._decorationService.decorations)this._renderDecoration(r);this._dimensionsChanged=!1}_renderDecoration(r){this._refreshStyle(r),this._dimensionsChanged&&this._refreshXPosition(r)}_createElement(r){var d;let _=document.createElement("div");_.classList.add("xterm-decoration"),_.style.width=`${Math.round((r.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,_.style.height=(r.options.height||1)*this._renderService.dimensions.css.cell.height+"px",_.style.top=(r.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",_.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let h=(d=r.options.x)!==null&&d!==void 0?d:0;return h&&h>this._bufferService.cols&&(_.style.display="none"),this._refreshXPosition(r,_),_}_refreshStyle(r){let d=r.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)r.element&&(r.element.style.display="none",r.onRenderEmitter.fire(r.element));else{let _=this._decorationElements.get(r);_||(_=this._createElement(r),r.element=_,this._decorationElements.set(r,_),this._container.appendChild(_)),_.style.top=d*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",r.onRenderEmitter.fire(_)}}_refreshXPosition(r,d=r.element){var _;if(!d)return;let h=(_=r.options.x)!==null&&_!==void 0?_:0;(r.options.anchor||"left")==="right"?d.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(r){var d;(d=this._decorationElements.get(r))===null||d===void 0||d.remove(),this._decorationElements.delete(r),r.dispose()}};f=a([u(1,v.IBufferService),u(2,v.IDecorationService),u(3,l.IRenderService)],f),e.BufferDecorationRenderer=f},5871:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorZoneStore=void 0,e.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(i){if(i.options.overviewRulerOptions){for(let a of this._zones)if(a.color===i.options.overviewRulerOptions.color&&a.position===i.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,i.marker.line))return;if(this._lineAdjacentToZone(a,i.marker.line,i.options.overviewRulerOptions.position))return void this._addLineToZone(a,i.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=i.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=i.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=i.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=i.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:i.options.overviewRulerOptions.color,position:i.options.overviewRulerOptions.position,startBufferLine:i.marker.line,endBufferLine:i.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(i){this._linePadding=i}_lineIntersectsZone(i,a){return a>=i.startBufferLine&&a<=i.endBufferLine}_lineAdjacentToZone(i,a,u){return a>=i.startBufferLine-this._linePadding[u||"full"]&&a<=i.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(i,a){i.startBufferLine=Math.min(i.startBufferLine,a),i.endBufferLine=Math.max(i.endBufferLine,a)}}},5744:function(o,e,i){var a=this&&this.__decorate||function(m,y,S,C){var b,w=arguments.length,E=w<3?y:C===null?C=Object.getOwnPropertyDescriptor(y,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,y,S,C);else for(var L=m.length-1;L>=0;L--)(b=m[L])&&(E=(w<3?b(E):w>3?b(y,S,E):b(y,S))||E);return w>3&&E&&Object.defineProperty(y,S,E),E},u=this&&this.__param||function(m,y){return function(S,C){y(S,C,m)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRulerRenderer=void 0;let p=i(5871),l=i(3656),g=i(4725),v=i(844),f=i(2585),r={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},h=class extends v.Disposable{constructor(m,y,S,C,b,w,E){var L;super(),this._viewportElement=m,this._screenElement=y,this._bufferService=S,this._decorationService=C,this._renderService=b,this._optionsService=w,this._coreBrowseService=E,this._colorZoneStore=new p.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(L=this._viewportElement.parentElement)===null||L===void 0||L.insertBefore(this._canvas,this._viewportElement);let R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,v.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,l.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let m=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=m,d.center=y,d.right=m,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=d.left,_.right=d.left+d.center}_refreshDrawHeightConstants(){r.full=Math.round(2*this._coreBrowseService.dpr);let m=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowseService.dpr);r.left=y,r.center=y,r.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;let m=this._colorZoneStore.zones;for(let y of m)y.position!=="full"&&this._renderColorZone(y);for(let y of m)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(_[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-r[m.position||"full"]/2),d[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+r[m.position||"full"]))}_queueRefresh(m,y){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};h=a([u(2,f.IBufferService),u(3,f.IDecorationService),u(4,g.IRenderService),u(5,f.IOptionsService),u(6,g.ICoreBrowserService)],h),e.OverviewRulerRenderer=h},2950:function(o,e,i){var a=this&&this.__decorate||function(f,r,d,_){var h,m=arguments.length,y=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,r,d,_);else for(var S=f.length-1;S>=0;S--)(h=f[S])&&(y=(m<3?h(y):m>3?h(r,d,y):h(r,d))||y);return m>3&&y&&Object.defineProperty(r,d,y),y},u=this&&this.__param||function(f,r){return function(d,_){r(d,_,f)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionHelper=void 0;let p=i(4725),l=i(2585),g=i(2584),v=class{constructor(f,r,d,_,h,m){this._textarea=f,this._compositionView=r,this._bufferService=d,this._optionsService=_,this._coreService=h,this._renderService=m,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){let r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){let f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let r=this._textarea.value,d=r.replace(f,"");this._dataAlreadySent=d,r.length>f.length?this._coreService.triggerDataEvent(d,!0):r.length<f.length?this._coreService.triggerDataEvent(`${g.C0.DEL}`,!0):r.length===f.length&&r!==f&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let m=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(m.width,1)+"px",this._textarea.style.height=Math.max(m.height,1)+"px",this._textarea.style.lineHeight=m.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};v=a([u(2,l.IBufferService),u(3,l.IOptionsService),u(4,l.ICoreService),u(5,p.IRenderService)],v),e.CompositionHelper=v},9806:(o,e)=>{function i(a,u,p){let l=p.getBoundingClientRect(),g=a.getComputedStyle(p),v=parseInt(g.getPropertyValue("padding-left")),f=parseInt(g.getPropertyValue("padding-top"));return[u.clientX-l.left-v,u.clientY-l.top-f]}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoords=e.getCoordsRelativeToElement=void 0,e.getCoordsRelativeToElement=i,e.getCoords=function(a,u,p,l,g,v,f,r,d){if(!v)return;let _=i(a,u,p);return _?(_[0]=Math.ceil((_[0]+(d?f/2:0))/f),_[1]=Math.ceil(_[1]/r),_[0]=Math.min(Math.max(_[0],1),l+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),g),_):void 0}},9504:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveToCellSequence=void 0;let a=i(2584);function u(r,d,_,h){let m=r-p(r,_),y=d-p(d,_),S=Math.abs(m-y)-function(C,b,w){let E=0,L=C-p(C,w),R=b-p(b,w);for(let T=0;T<Math.abs(L-R);T++){let B=l(C,b)==="A"?-1:1,H=w.buffer.lines.get(L+B*T);H!=null&&H.isWrapped&&E++}return E}(r,d,_);return f(S,v(l(r,d),h))}function p(r,d){let _=0,h=d.buffer.lines.get(r),m=h==null?void 0:h.isWrapped;for(;m&&r>=0&&r<d.rows;)_++,h=d.buffer.lines.get(--r),m=h==null?void 0:h.isWrapped;return _}function l(r,d){return r>d?"A":"B"}function g(r,d,_,h,m,y){let S=r,C=d,b="";for(;S!==_||C!==h;)S+=m?1:-1,m&&S>y.cols-1?(b+=y.buffer.translateBufferLineToString(C,!1,r,S),S=0,r=0,C++):!m&&S<0&&(b+=y.buffer.translateBufferLineToString(C,!1,0,r+1),S=y.cols-1,r=S,C--);return b+y.buffer.translateBufferLineToString(C,!1,r,S)}function v(r,d){let _=d?"O":"[";return a.C0.ESC+_+r}function f(r,d){r=Math.floor(r);let _="";for(let h=0;h<r;h++)_+=d;return _}e.moveToCellSequence=function(r,d,_,h){let m=_.buffer.x,y=_.buffer.y;if(!_.buffer.hasScrollback)return function(b,w,E,L,R,T){return u(w,L,R,T).length===0?"":f(g(b,w,b,w-p(w,R),!1,R).length,v("D",T))}(m,y,0,d,_,h)+u(y,d,_,h)+function(b,w,E,L,R,T){let B;B=u(w,L,R,T).length>0?L-p(L,R):w;let H=L,F=function(x,k,O,P,N,z){let q;return q=u(O,P,N,z).length>0?P-p(P,N):k,x<O&&q<=P||x>=O&&q<P?"C":"D"}(b,w,E,L,R,T);return f(g(b,B,E,H,F==="C",R).length,v(F,T))}(m,y,r,d,_,h);let S;if(y===d)return S=m>r?"D":"C",f(Math.abs(m-r),v(S,h));S=y>d?"D":"C";let C=Math.abs(y-d);return f(function(b,w){return w.cols-b}(y>d?r:m,_)+(C-1)*_.cols+1+((y>d?m:r)-1),v(S,h))}},1296:function(o,e,i){var a=this&&this.__decorate||function(b,w,E,L){var R,T=arguments.length,B=T<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,E):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,w,E,L);else for(var H=b.length-1;H>=0;H--)(R=b[H])&&(B=(T<3?R(B):T>3?R(w,E,B):R(w,E))||B);return T>3&&B&&Object.defineProperty(w,E,B),B},u=this&&this.__param||function(b,w){return function(E,L){w(E,L,b)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRenderer=void 0;let p=i(9631),l=i(3787),g=i(2223),v=i(6171),f=i(4725),r=i(8055),d=i(8460),_=i(844),h=i(2585),m="xterm-dom-renderer-owner-",y="xterm-focus",S=1,C=class extends _.Disposable{constructor(b,w,E,L,R,T,B,H,F,x){super(),this._element=b,this._screenElement=w,this._viewportElement=E,this._linkifier2=L,this._charSizeService=T,this._optionsService=B,this._bufferService=H,this._coreBrowserService=F,this._terminalClass=S++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,v.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(x.onChangeColors(k=>this._injectCss(k))),this._injectCss(x.colors),this._rowFactory=R.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(m+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(k=>this._handleLinkHover(k))),this.register(this._linkifier2.onHideLinkUnderline(k=>this._handleLinkLeave(k))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(m+this._terminalClass),(0,p.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){let b=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*b,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*b),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/b),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/b),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let E of this._rowElements)E.style.width=`${this.dimensions.css.canvas.width}px`,E.style.height=`${this.dimensions.css.cell.height}px`,E.style.lineHeight=`${this.dimensions.css.cell.height}px`,E.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let w=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=w,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(b){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let w=`${this._terminalSelector} .xterm-rows { color: ${b.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;w+=`${this._terminalSelector} span:not(.${l.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${l.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${l.ITALIC_CLASS} { font-style: italic;}`,w+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",w+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${b.cursor.css};  color: ${b.cursorAccent.css}; } 50% {  background-color: ${b.cursorAccent.css};  color: ${b.cursor.css}; }}`,w+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${b.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_BLINK_CLASS}:not(.${l.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_BLINK_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${b.cursor.css}; color: ${b.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${b.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${l.CURSOR_CLASS}.${l.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${b.cursor.css} inset;}`,w+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${b.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${b.selectionInactiveBackgroundOpaque.css};}`;for(let[E,L]of b.ansi.entries())w+=`${this._terminalSelector} .xterm-fg-${E} { color: ${L.css}; }${this._terminalSelector} .xterm-bg-${E} { background-color: ${L.css}; }`;w+=`${this._terminalSelector} .xterm-fg-${g.INVERTED_DEFAULT_COLOR} { color: ${r.color.opaque(b.background).css}; }${this._terminalSelector} .xterm-bg-${g.INVERTED_DEFAULT_COLOR} { background-color: ${b.foreground.css}; }`,this._themeStyleElement.textContent=w}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(b,w){for(let E=this._rowElements.length;E<=w;E++){let L=document.createElement("div");this._rowContainer.appendChild(L),this._rowElements.push(L)}for(;this._rowElements.length>w;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(b,w){this._refreshRowElements(b,w),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(y)}handleFocus(){this._rowContainer.classList.add(y)}handleSelectionChanged(b,w,E){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(b,w,E),this.renderRows(0,this._bufferService.rows-1),!b||!w)return;let L=b[1]-this._bufferService.buffer.ydisp,R=w[1]-this._bufferService.buffer.ydisp,T=Math.max(L,0),B=Math.min(R,this._bufferService.rows-1);if(T>=this._bufferService.rows||B<0)return;let H=document.createDocumentFragment();if(E){let F=b[0]>w[0];H.appendChild(this._createSelectionElement(T,F?w[0]:b[0],F?b[0]:w[0],B-T+1))}else{let F=L===T?b[0]:0,x=T===R?w[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(T,F,x));let k=B-T-1;if(H.appendChild(this._createSelectionElement(T+1,0,this._bufferService.cols,k)),T!==B){let O=R===B?w[0]:this._bufferService.cols;H.appendChild(this._createSelectionElement(B,0,O))}}this._selectionContainer.appendChild(H)}_createSelectionElement(b,w,E,L=1){let R=document.createElement("div");return R.style.height=L*this.dimensions.css.cell.height+"px",R.style.top=b*this.dimensions.css.cell.height+"px",R.style.left=w*this.dimensions.css.cell.width+"px",R.style.width=this.dimensions.css.cell.width*(E-w)+"px",R}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(let b of this._rowElements)b.replaceChildren()}renderRows(b,w){let E=this._bufferService.buffer.ybase+this._bufferService.buffer.y,L=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink;for(let T=b;T<=w;T++){let B=this._rowElements[T],H=T+this._bufferService.buffer.ydisp,F=this._bufferService.buffer.lines.get(H),x=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[T]&&this._cellToRowElements[T].length===this._bufferService.cols||(this._cellToRowElements[T]=new Int16Array(this._bufferService.cols)),B.replaceChildren(this._rowFactory.createRow(F,H,H===E,x,L,R,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[T]))}}get _terminalSelector(){return`.${m}${this._terminalClass}`}_handleLinkHover(b){this._setCellUnderline(b.x1,b.x2,b.y1,b.y2,b.cols,!0)}_handleLinkLeave(b){this._setCellUnderline(b.x1,b.x2,b.y1,b.y2,b.cols,!1)}_setCellUnderline(b,w,E,L,R,T){if(b=this._cellToRowElements[E][b],w=this._cellToRowElements[L][w],b!==-1&&w!==-1)for(;b!==w||E!==L;){let B=this._rowElements[E];if(!B)return;let H=B.children[b];H&&(H.style.textDecoration=T?"underline":"none"),++b>=R&&(b=0,E++)}}};C=a([u(4,h.IInstantiationService),u(5,f.ICharSizeService),u(6,h.IOptionsService),u(7,h.IBufferService),u(8,f.ICoreBrowserService),u(9,f.IThemeService)],C),e.DomRenderer=C},3787:function(o,e,i){var a=this&&this.__decorate||function(S,C,b,w){var E,L=arguments.length,R=L<3?C:w===null?w=Object.getOwnPropertyDescriptor(C,b):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(S,C,b,w);else for(var T=S.length-1;T>=0;T--)(E=S[T])&&(R=(L<3?E(R):L>3?E(C,b,R):E(C,b))||R);return L>3&&R&&Object.defineProperty(C,b,R),R},u=this&&this.__param||function(S,C){return function(b,w){C(b,w,S)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRendererRowFactory=e.CURSOR_STYLE_UNDERLINE_CLASS=e.CURSOR_STYLE_BAR_CLASS=e.CURSOR_STYLE_BLOCK_CLASS=e.CURSOR_BLINK_CLASS=e.CURSOR_CLASS=e.STRIKETHROUGH_CLASS=e.UNDERLINE_CLASS=e.ITALIC_CLASS=e.DIM_CLASS=e.BOLD_CLASS=void 0;let p=i(2223),l=i(643),g=i(511),v=i(2585),f=i(8055),r=i(4725),d=i(4269),_=i(6171),h=i(3734);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.STRIKETHROUGH_CLASS="xterm-strikethrough",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let m=class{constructor(S,C,b,w,E,L,R){this._document=S,this._characterJoinerService=C,this._optionsService=b,this._coreBrowserService=w,this._coreService=E,this._decorationService=L,this._themeService=R,this._workCell=new g.CellData,this._columnSelectMode=!1}handleSelectionChanged(S,C,b){this._selectionStart=S,this._selectionEnd=C,this._columnSelectMode=b}createRow(S,C,b,w,E,L,R,T,B){let H=this._document.createDocumentFragment(),F=this._characterJoinerService.getJoinedCharacters(C),x=0;for(let N=Math.min(S.length,T)-1;N>=0;N--)if(S.loadCell(N,this._workCell).getCode()!==l.NULL_CELL_CODE||b&&N===E){x=N+1;break}let k=this._themeService.colors,O=-1,P=0;for(;P<x;P++){S.loadCell(P,this._workCell);let N=this._workCell.getWidth();if(N===0){B[P]=O;continue}let z=!1,q=P,W=this._workCell;if(F.length>0&&P===F[0][0]){z=!0;let Y=F.shift();W=new d.JoinedCellData(this._workCell,S.translateToString(!0,Y[0],Y[1]),Y[1]-Y[0]),q=Y[1]-1,N=W.getWidth()}let $=this._document.createElement("span");if(N>1&&($.style.width=R*N+"px"),z&&($.style.display="inline",E>=P&&E<=q&&(E=P)),!this._coreService.isCursorHidden&&b&&P===E)switch($.classList.add(e.CURSOR_CLASS),L&&$.classList.add(e.CURSOR_BLINK_CLASS),w){case"bar":$.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":$.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:$.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}if(W.isBold()&&$.classList.add(e.BOLD_CLASS),W.isItalic()&&$.classList.add(e.ITALIC_CLASS),W.isDim()&&$.classList.add(e.DIM_CLASS),W.isInvisible()?$.textContent=l.WHITESPACE_CELL_CHAR:$.textContent=W.getChars()||l.WHITESPACE_CELL_CHAR,W.isUnderline()&&($.classList.add(`${e.UNDERLINE_CLASS}-${W.extended.underlineStyle}`),$.textContent===" "&&($.textContent="\xA0"),!W.isUnderlineColorDefault()))if(W.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(W.getUnderlineColor()).join(",")})`;else{let Y=W.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&W.isBold()&&Y<8&&(Y+=8),$.style.textDecorationColor=k.ansi[Y].css}W.isStrikethrough()&&$.classList.add(e.STRIKETHROUGH_CLASS);let D=W.getFgColor(),A=W.getFgColorMode(),M=W.getBgColor(),I=W.getBgColorMode(),U=!!W.isInverse();if(U){let Y=D;D=M,M=Y;let jo=A;A=I,I=jo}let Z,j,ee=!1;this._decorationService.forEachDecorationAtCell(P,C,void 0,Y=>{Y.options.layer!=="top"&&ee||(Y.backgroundColorRGB&&(I=50331648,M=Y.backgroundColorRGB.rgba>>8&16777215,Z=Y.backgroundColorRGB),Y.foregroundColorRGB&&(A=50331648,D=Y.foregroundColorRGB.rgba>>8&16777215,j=Y.foregroundColorRGB),ee=Y.options.layer==="top")});let ne=this._isCellInSelection(P,C),ie;switch(ee||k.selectionForeground&&ne&&(A=50331648,D=k.selectionForeground.rgba>>8&16777215,j=k.selectionForeground),ne&&(Z=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,ee=!0),ee&&$.classList.add("xterm-decoration-top"),I){case 16777216:case 33554432:ie=k.ansi[M],$.classList.add(`xterm-bg-${M}`);break;case 50331648:ie=f.rgba.toColor(M>>16,M>>8&255,255&M),this._addStyle($,`background-color:#${y((M>>>0).toString(16),"0",6)}`);break;default:U?(ie=k.foreground,$.classList.add(`xterm-bg-${p.INVERTED_DEFAULT_COLOR}`)):ie=k.background}switch(Z||W.isDim()&&(Z=f.color.multiplyOpacity(ie,.5)),A){case 16777216:case 33554432:W.isBold()&&D<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(D+=8),this._applyMinimumContrast($,ie,k.ansi[D],W,Z,void 0)||$.classList.add(`xterm-fg-${D}`);break;case 50331648:let Y=f.rgba.toColor(D>>16&255,D>>8&255,255&D);this._applyMinimumContrast($,ie,Y,W,Z,j)||this._addStyle($,`color:#${y(D.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,ie,k.foreground,W,Z,void 0)||U&&$.classList.add(`xterm-fg-${p.INVERTED_DEFAULT_COLOR}`)}H.appendChild($),B[P]=++O,P=q}return P<T-1&&B.subarray(P).fill(++O),H}_applyMinimumContrast(S,C,b,w,E,L){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(w.getCode()))return!1;let R;return E||L||(R=this._themeService.colors.contrastCache.getColor(C.rgba,b.rgba)),R===void 0&&(R=f.color.ensureContrastRatio(E||C,L||b,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((E||C).rgba,(L||b).rgba,R!=null?R:null)),!!R&&(this._addStyle(S,`color:${R.css}`),!0)}_addStyle(S,C){S.setAttribute("style",`${S.getAttribute("style")||""}${C};`)}_isCellInSelection(S,C){let b=this._selectionStart,w=this._selectionEnd;return!(!b||!w)&&(this._columnSelectMode?b[0]<=w[0]?S>=b[0]&&C>=b[1]&&S<w[0]&&C<=w[1]:S<b[0]&&C>=b[1]&&S>=w[0]&&C<=w[1]:C>b[1]&&C<w[1]||b[1]===w[1]&&C===b[1]&&S>=b[0]&&S<w[0]||b[1]<w[1]&&C===w[1]&&S<w[0]||b[1]<w[1]&&C===b[1]&&S>=b[0])}};function y(S,C,b){for(;S.length<b;)S=C+S;return S}m=a([u(1,r.ICharacterJoinerService),u(2,v.IOptionsService),u(3,r.ICoreBrowserService),u(4,v.ICoreService),u(5,v.IDecorationService),u(6,r.IThemeService)],m),e.DomRendererRowFactory=m},2223:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;let a=i(6114);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(o,e)=>{function i(a){return 57508<=a&&a<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.createRenderDimensions=e.excludeFromContrastRatioDemands=e.isRestrictedPowerlineGlyph=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(a){if(!a)throw new Error("value must not be falsy");return a},e.isPowerlineGlyph=i,e.isRestrictedPowerlineGlyph=function(a){return 57520<=a&&a<=57527},e.excludeFromContrastRatioDemands=function(a){return i(a)||function(u){return 9472<=u&&u<=9631}(a)},e.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionModel=void 0,e.SelectionModel=class{constructor(i){this._bufferService=i,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?i%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)-1]:[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[i,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[Math.max(i,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let i=this.selectionStart,a=this.selectionEnd;return!(!i||!a)&&(i[1]>a[1]||i[1]===a[1]&&i[0]>a[0])}handleTrim(i){return this.selectionStart&&(this.selectionStart[1]-=i),this.selectionEnd&&(this.selectionEnd[1]-=i),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,y=arguments.length,S=y<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(y<3?m(S):y>3?m(d,_,S):m(d,_))||S);return y>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharSizeService=void 0;let p=i(2585),l=i(8460),g=i(844),v=class extends g.Disposable{constructor(r,d,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new l.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(r,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())}};v=a([u(2,p.IOptionsService)],v),e.CharSizeService=v;class f{constructor(d,_,h){this._document=d,this._parentElement=_,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d=this._measureElement.getBoundingClientRect();return d.width!==0&&d.height!==0&&(this._result.width=d.width,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(o,e,i){var a=this&&this.__decorate||function(d,_,h,m){var y,S=arguments.length,C=S<3?_:m===null?m=Object.getOwnPropertyDescriptor(_,h):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(d,_,h,m);else for(var b=d.length-1;b>=0;b--)(y=d[b])&&(C=(S<3?y(C):S>3?y(_,h,C):y(_,h))||C);return S>3&&C&&Object.defineProperty(_,h,C),C},u=this&&this.__param||function(d,_){return function(h,m){_(h,m,d)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;let p=i(3734),l=i(643),g=i(511),v=i(2585);class f extends p.AttributeData{constructor(_,h,m){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=h,this._width=m}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.JoinedCellData=f;let r=class lo{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new g.CellData}register(_){let h={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(h),h.id}deregister(_){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===_)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(_);if(!h||h.length===0)return[];let m=[],y=h.translateToString(!0),S=0,C=0,b=0,w=h.getFg(0),E=h.getBg(0);for(let L=0;L<h.getTrimmedLength();L++)if(h.loadCell(L,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==E){if(L-S>1){let R=this._getJoinedRanges(y,b,C,h,S);for(let T=0;T<R.length;T++)m.push(R[T])}S=L,b=C,w=this._workCell.fg,E=this._workCell.bg}C+=this._workCell.getChars().length||l.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let L=this._getJoinedRanges(y,b,C,h,S);for(let R=0;R<L.length;R++)m.push(L[R])}return m}_getJoinedRanges(_,h,m,y,S){let C=_.substring(h,m),b=[];try{b=this._characterJoiners[0].handler(C)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{let E=this._characterJoiners[w].handler(C);for(let L=0;L<E.length;L++)lo._mergeRanges(b,E[L])}catch(E){console.error(E)}return this._stringRangesToCellRanges(b,y,S),b}_stringRangesToCellRanges(_,h,m){let y=0,S=!1,C=0,b=_[y];if(b){for(let w=m;w<this._bufferService.cols;w++){let E=h.getWidth(w),L=h.getString(w).length||l.WHITESPACE_CELL_CHAR.length;if(E!==0){if(!S&&b[0]<=C&&(b[0]=w,S=!0),b[1]<=C){if(b[1]=w,b=_[++y],!b)break;b[0]<=C?(b[0]=w,S=!0):S=!1}C+=L}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(_,h){let m=!1;for(let y=0;y<_.length;y++){let S=_[y];if(m){if(h[1]<=S[0])return _[y-1][1]=h[1],_;if(h[1]<=S[1])return _[y-1][1]=Math.max(h[1],S[1]),_.splice(y,1),_;_.splice(y,1),y--}else{if(h[1]<=S[0])return _.splice(y,0,h),_;if(h[1]<=S[1])return S[0]=Math.min(h[0],S[0]),_;h[0]<S[1]&&(S[0]=Math.min(h[0],S[0]),m=!0)}}return m?_[_.length-1][1]=h[1]:_.push(h),_}};r=a([u(0,v.IBufferService)],r),e.CharacterJoinerService=r},5114:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreBrowserService=void 0,e.CoreBrowserService=class{constructor(i,a){this._textarea=i,this.window=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(o,e,i){var a=this&&this.__decorate||function(v,f,r,d){var _,h=arguments.length,m=h<3?f:d===null?d=Object.getOwnPropertyDescriptor(f,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(v,f,r,d);else for(var y=v.length-1;y>=0;y--)(_=v[y])&&(m=(h<3?_(m):h>3?_(f,r,m):_(f,r))||m);return h>3&&m&&Object.defineProperty(f,r,m),m},u=this&&this.__param||function(v,f){return function(r,d){f(r,d,v)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseService=void 0;let p=i(4725),l=i(9806),g=class{constructor(v,f){this._renderService=v,this._charSizeService=f}getCoords(v,f,r,d,_){return(0,l.getCoords)(window,v,f,r,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(v,f){let r=(0,l.getCoordsRelativeToElement)(window,v,f);if(!(!this._charSizeService.hasValidSize||r[0]<0||r[1]<0||r[0]>=this._renderService.dimensions.css.canvas.width||r[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};g=a([u(0,p.IRenderService),u(1,p.ICharSizeService)],g),e.MouseService=g},3230:function(o,e,i){var a=this&&this.__decorate||function(m,y,S,C){var b,w=arguments.length,E=w<3?y:C===null?C=Object.getOwnPropertyDescriptor(y,S):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(m,y,S,C);else for(var L=m.length-1;L>=0;L--)(b=m[L])&&(E=(w<3?b(E):w>3?b(y,S,E):b(y,S))||E);return w>3&&E&&Object.defineProperty(y,S,E),E},u=this&&this.__param||function(m,y){return function(S,C){y(S,C,m)}};Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;let p=i(6193),l=i(8460),g=i(844),v=i(5596),f=i(3656),r=i(2585),d=i(4725),_=i(7226),h=class extends g.Disposable{constructor(m,y,S,C,b,w,E,L){if(super(),this._rowCount=m,this._charSizeService=C,this._pausedResizeTask=new _.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new l.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new l.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new l.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new l.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var R;return(R=this._renderer)===null||R===void 0?void 0:R.dispose()}}),this._renderDebouncer=new p.RenderDebouncer(E.window,(R,T)=>this._renderRows(R,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new v.ScreenDprMonitor(E.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var R;return(R=this._renderer)===null||R===void 0?void 0:R.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(E.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(L.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in E.window){let R=new E.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});R.observe(y),this.register({dispose:()=>R.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(m){this._isPaused=m.isIntersecting===void 0?m.intersectionRatio===0:!m.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(m,y,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(m,y,this._rowCount))}_renderRows(m,y){this._renderer&&(this._renderer.renderRows(m,y),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:m,end:y}),this._onRender.fire({start:m,end:y}),this._isNextRenderRedrawOnly=!0)}resize(m,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(m){var y;(y=this._renderer)===null||y===void 0||y.dispose(),this._renderer=m,this._renderer.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(m){return this._renderDebouncer.addRefreshCallback(m)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var m,y;this._renderer&&((y=(m=this._renderer).clearTextureAtlas)===null||y===void 0||y.call(m),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(m,y){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(m,y)):this._renderer.handleResize(m,y),this._fullRefresh())}handleCharSizeChanged(){var m;(m=this._renderer)===null||m===void 0||m.handleCharSizeChanged()}handleBlur(){var m;(m=this._renderer)===null||m===void 0||m.handleBlur()}handleFocus(){var m;(m=this._renderer)===null||m===void 0||m.handleFocus()}handleSelectionChanged(m,y,S){var C;this._selectionState.start=m,this._selectionState.end=y,this._selectionState.columnSelectMode=S,(C=this._renderer)===null||C===void 0||C.handleSelectionChanged(m,y,S)}handleCursorMove(){var m;(m=this._renderer)===null||m===void 0||m.handleCursorMove()}clear(){var m;(m=this._renderer)===null||m===void 0||m.clear()}};h=a([u(2,r.IOptionsService),u(3,d.ICharSizeService),u(4,r.IDecorationService),u(5,r.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],h),e.RenderService=h},9312:function(o,e,i){var a=this&&this.__decorate||function(b,w,E,L){var R,T=arguments.length,B=T<3?w:L===null?L=Object.getOwnPropertyDescriptor(w,E):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(b,w,E,L);else for(var H=b.length-1;H>=0;H--)(R=b[H])&&(B=(T<3?R(B):T>3?R(w,E,B):R(w,E))||B);return T>3&&B&&Object.defineProperty(w,E,B),B},u=this&&this.__param||function(b,w){return function(E,L){w(E,L,b)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionService=void 0;let p=i(6114),l=i(456),g=i(511),v=i(8460),f=i(4725),r=i(2585),d=i(9806),_=i(9504),h=i(844),m=i(4841),y=String.fromCharCode(160),S=new RegExp(y,"g"),C=class extends h.Disposable{constructor(b,w,E,L,R,T,B,H,F){super(),this._element=b,this._screenElement=w,this._linkifier=E,this._bufferService=L,this._coreService=R,this._mouseService=T,this._optionsService=B,this._renderService=H,this._coreBrowserService=F,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new g.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=x=>this._handleMouseMove(x),this._mouseUpListener=x=>this._handleMouseUp(x),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(x=>this._handleTrim(x)),this.register(this._bufferService.buffers.onBufferActivate(x=>this._handleBufferActivate(x))),this.enable(),this._model=new l.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!b||!w||b[0]===w[0]&&b[1]===w[1])}get selectionText(){let b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!b||!w)return"";let E=this._bufferService.buffer,L=[];if(this._activeSelectionMode===3){if(b[0]===w[0])return"";let R=b[0]<w[0]?b[0]:w[0],T=b[0]<w[0]?w[0]:b[0];for(let B=b[1];B<=w[1];B++){let H=E.translateBufferLineToString(B,!0,R,T);L.push(H)}}else{let R=b[1]===w[1]?w[0]:void 0;L.push(E.translateBufferLineToString(b[1],!0,b[0],R));for(let T=b[1]+1;T<=w[1]-1;T++){let B=E.lines.get(T),H=E.translateBufferLineToString(T,!0);B!=null&&B.isWrapped?L[L.length-1]+=H:L.push(H)}if(b[1]!==w[1]){let T=E.lines.get(w[1]),B=E.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?L[L.length-1]+=B:L.push(B)}}return L.map(R=>R.replace(S," ")).join(p.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),p.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){let w=this._getMouseBufferCoords(b),E=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(E&&L&&w)&&this._areCoordsInSelection(w,E,L)}isCellInSelection(b,w){let E=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!E||!L)&&this._areCoordsInSelection([b,w],E,L)}_areCoordsInSelection(b,w,E){return b[1]>w[1]&&b[1]<E[1]||w[1]===E[1]&&b[1]===w[1]&&b[0]>=w[0]&&b[0]<E[0]||w[1]<E[1]&&b[1]===E[1]&&b[0]<E[0]||w[1]<E[1]&&b[1]===w[1]&&b[0]>=w[0]}_selectWordAtCursor(b,w){var E,L;let R=(L=(E=this._linkifier.currentLink)===null||E===void 0?void 0:E.link)===null||L===void 0?void 0:L.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,m.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let T=this._getMouseBufferCoords(b);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,w){this._model.clearSelection(),b=Math.max(b,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){let w=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(b){let w=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1],E=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=E?0:(w>E&&(w-=E),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(b){return p.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){let w=this._getMouseBufferCoords(b);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(b){return b.altKey&&!(p.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;let w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let E=this._bufferService.buffer;if(this._model.selectionEnd[1]<E.lines.length){let L=E.lines.get(this._model.selectionEnd[1]);L&&L.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){let w=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let E=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(E&&E[0]!==void 0&&E[1]!==void 0){let L=(0,_.moveToCellSequence)(E[0]-1,E[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let b=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,E=!(!b||!w||b[0]===w[0]&&b[1]===w[1]);E?b&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,w,E)):this._oldHasSelection&&this._fireOnSelectionChange(b,w,E)}_fireOnSelectionChange(b,w,E){this._oldSelectionStart=b,this._oldSelectionEnd=w,this._oldHasSelection=E,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(b,w){let E=w;for(let L=0;w>=L;L++){let R=b.loadCell(L,this._workCell).getChars().length;this._workCell.getWidth()===0?E--:R>1&&w!==L&&(E+=R-1)}return E}setSelection(b,w,E){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,w],this._model.selectionStartLength=E,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,w,E=!0,L=!0){if(b[0]>=this._bufferService.cols)return;let R=this._bufferService.buffer,T=R.lines.get(b[1]);if(!T)return;let B=R.translateBufferLineToString(b[1],!1),H=this._convertViewportColToCharacterIndex(T,b[0]),F=H,x=b[0]-H,k=0,O=0,P=0,N=0;if(B.charAt(H)===" "){for(;H>0&&B.charAt(H-1)===" ";)H--;for(;F<B.length&&B.charAt(F+1)===" ";)F++}else{let W=b[0],$=b[0];T.getWidth(W)===0&&(k++,W--),T.getWidth($)===2&&(O++,$++);let D=T.getString($).length;for(D>1&&(N+=D-1,F+=D-1);W>0&&H>0&&!this._isCharWordSeparator(T.loadCell(W-1,this._workCell));){T.loadCell(W-1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===0?(k++,W--):A>1&&(P+=A-1,H-=A-1),H--,W--}for(;$<T.length&&F+1<B.length&&!this._isCharWordSeparator(T.loadCell($+1,this._workCell));){T.loadCell($+1,this._workCell);let A=this._workCell.getChars().length;this._workCell.getWidth()===2?(O++,$++):A>1&&(N+=A-1,F+=A-1),F++,$++}}F++;let z=H+x-k+P,q=Math.min(this._bufferService.cols,F-H+k+O-P-N);if(w||B.slice(H,F).trim()!==""){if(E&&z===0&&T.getCodePoint(0)!==32){let W=R.lines.get(b[1]-1);if(W&&T.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){let $=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if($){let D=this._bufferService.cols-$.start;z-=D,q+=D}}}if(L&&z+q===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){let W=R.lines.get(b[1]+1);if(W!=null&&W.isWrapped&&W.getCodePoint(0)!==32){let $=this._getWordAt([0,b[1]+1],!1,!1,!0);$&&(q+=$.length)}}return{start:z,length:q}}}_selectWordAt(b,w){let E=this._getWordAt(b,w);if(E){for(;E.start<0;)E.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[E.start,b[1]],this._model.selectionStartLength=E.length}}_selectToWordAt(b){let w=this._getWordAt(b,!0);if(w){let E=b[1];for(;w.start<0;)w.start+=this._bufferService.cols,E--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,E++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,E]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){let w=this._bufferService.buffer.getWrappedRangeForLine(b),E={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,m.getRangeLength)(E,this._bufferService.cols)}};C=a([u(3,r.IBufferService),u(4,r.ICoreService),u(5,f.IMouseService),u(6,r.IOptionsService),u(7,f.IRenderService),u(8,f.ICoreBrowserService)],C),e.SelectionService=C},4725:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IThemeService=e.ICharacterJoinerService=e.ISelectionService=e.IRenderService=e.IMouseService=e.ICoreBrowserService=e.ICharSizeService=void 0;let a=i(8343);e.ICharSizeService=(0,a.createDecorator)("CharSizeService"),e.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),e.IMouseService=(0,a.createDecorator)("MouseService"),e.IRenderService=(0,a.createDecorator)("RenderService"),e.ISelectionService=(0,a.createDecorator)("SelectionService"),e.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),e.IThemeService=(0,a.createDecorator)("ThemeService")},6731:function(o,e,i){var a=this&&this.__decorate||function(C,b,w,E){var L,R=arguments.length,T=R<3?b:E===null?E=Object.getOwnPropertyDescriptor(b,w):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(C,b,w,E);else for(var B=C.length-1;B>=0;B--)(L=C[B])&&(T=(R<3?L(T):R>3?L(b,w,T):L(b,w))||T);return R>3&&T&&Object.defineProperty(b,w,T),T},u=this&&this.__param||function(C,b){return function(w,E){b(w,E,C)}};Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.DEFAULT_ANSI_COLORS=void 0;let p=i(7239),l=i(8055),g=i(8460),v=i(844),f=i(2585),r=l.css.toColor("#ffffff"),d=l.css.toColor("#000000"),_=l.css.toColor("#ffffff"),h=l.css.toColor("#000000"),m={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let C=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let w=0;w<216;w++){let E=b[w/36%6|0],L=b[w/6%6|0],R=b[w%6];C.push({css:l.channels.toCss(E,L,R),rgba:l.channels.toRgba(E,L,R)})}for(let w=0;w<24;w++){let E=8+10*w;C.push({css:l.channels.toCss(E,E,E),rgba:l.channels.toRgba(E,E,E)})}return C})());let y=class extends v.Disposable{constructor(C){super(),this._optionsService=C,this._onChangeColors=this.register(new g.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new p.ColorContrastCache,this._colors={foreground:r,background:d,cursor:_,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:m,selectionBackgroundOpaque:l.color.blend(d,m),selectionInactiveBackgroundTransparent:m,selectionInactiveBackgroundOpaque:l.color.blend(d,m),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(C={}){let b=this._colors;if(b.foreground=S(C.foreground,r),b.background=S(C.background,d),b.cursor=S(C.cursor,_),b.cursorAccent=S(C.cursorAccent,h),b.selectionBackgroundTransparent=S(C.selectionBackground,m),b.selectionBackgroundOpaque=l.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=S(C.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=l.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=C.selectionForeground?S(C.selectionForeground,l.NULL_COLOR):void 0,b.selectionForeground===l.NULL_COLOR&&(b.selectionForeground=void 0),l.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=l.color.opacity(b.selectionBackgroundTransparent,.3)),l.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=l.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=e.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=S(C.black,e.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=S(C.red,e.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=S(C.green,e.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=S(C.yellow,e.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=S(C.blue,e.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=S(C.magenta,e.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=S(C.cyan,e.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=S(C.white,e.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=S(C.brightBlack,e.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=S(C.brightRed,e.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=S(C.brightGreen,e.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=S(C.brightYellow,e.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=S(C.brightBlue,e.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=S(C.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=S(C.brightCyan,e.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=S(C.brightWhite,e.DEFAULT_ANSI_COLORS[15]),C.extendedAnsi){let w=Math.min(b.ansi.length-16,C.extendedAnsi.length);for(let E=0;E<w;E++)b.ansi[E+16]=S(C.extendedAnsi[E],e.DEFAULT_ANSI_COLORS[E+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(C){this._restoreColor(C),this._onChangeColors.fire(this.colors)}_restoreColor(C){if(C!==void 0)switch(C){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[C]=this._restoreColors.ansi[C]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(C){C(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(C,b){if(C!==void 0)try{return l.css.toColor(C)}catch(w){}return b}y=a([u(0,f.IOptionsService)],y),e.ThemeService=y},6349:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircularList=void 0;let a=i(8460),u=i(844);class p extends u.Disposable{constructor(g){super(),this._maxLength=g,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(g){if(this._maxLength===g)return;let v=new Array(g);for(let f=0;f<Math.min(g,this.length);f++)v[f]=this._array[this._getCyclicIndex(f)];this._array=v,this._maxLength=g,this._startIndex=0}get length(){return this._length}set length(g){if(g>this._length)for(let v=this._length;v<g;v++)this._array[v]=void 0;this._length=g}get(g){return this._array[this._getCyclicIndex(g)]}set(g,v){this._array[this._getCyclicIndex(g)]=v}push(g){this._array[this._getCyclicIndex(this._length)]=g,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(g,v,...f){if(v){for(let r=g;r<this._length-v;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+v)];this._length-=v,this.onDeleteEmitter.fire({index:g,amount:v})}for(let r=this._length-1;r>=g;r--)this._array[this._getCyclicIndex(r+f.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<f.length;r++)this._array[this._getCyclicIndex(g+r)]=f[r];if(f.length&&this.onInsertEmitter.fire({index:g,amount:f.length}),this._length+f.length>this._maxLength){let r=this._length+f.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=f.length}trimStart(g){g>this._length&&(g=this._length),this._startIndex+=g,this._length-=g,this.onTrimEmitter.fire(g)}shiftElements(g,v,f){if(!(v<=0)){if(g<0||g>=this._length)throw new Error("start argument out of range");if(g+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let d=v-1;d>=0;d--)this.set(g+d+f,this.get(g+d));let r=g+v+f-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<v;r++)this.set(g+r+f,this.get(g+r))}}_getCyclicIndex(g){return(this._startIndex+g)%this._maxLength}}e.CircularList=p},1439:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function i(a,u=5){if(typeof a!="object")return a;let p=Array.isArray(a)?[]:{};for(let l in a)p[l]=u<=1?a[l]:a[l]&&i(a[l],u-1);return p}},8055:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;let a=i(6114),u=0,p=0,l=0,g=0;var v,f,r;function d(h){let m=h.toString(16);return m.length<2?"0"+m:m}function _(h,m){return h<m?(m+.05)/(h+.05):(h+.05)/(m+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(h){h.toCss=function(m,y,S,C){return C!==void 0?`#${d(m)}${d(y)}${d(S)}${d(C)}`:`#${d(m)}${d(y)}${d(S)}`},h.toRgba=function(m,y,S,C=255){return(m<<24|y<<16|S<<8|C)>>>0}}(v=e.channels||(e.channels={})),function(h){function m(y,S){return g=Math.round(255*S),[u,p,l]=r.toChannels(y.rgba),{css:v.toCss(u,p,l,g),rgba:v.toRgba(u,p,l,g)}}h.blend=function(y,S){if(g=(255&S.rgba)/255,g===1)return{css:S.css,rgba:S.rgba};let C=S.rgba>>24&255,b=S.rgba>>16&255,w=S.rgba>>8&255,E=y.rgba>>24&255,L=y.rgba>>16&255,R=y.rgba>>8&255;return u=E+Math.round((C-E)*g),p=L+Math.round((b-L)*g),l=R+Math.round((w-R)*g),{css:v.toCss(u,p,l),rgba:v.toRgba(u,p,l)}},h.isOpaque=function(y){return(255&y.rgba)==255},h.ensureContrastRatio=function(y,S,C){let b=r.ensureContrastRatio(y.rgba,S.rgba,C);if(b)return r.toColor(b>>24&255,b>>16&255,b>>8&255)},h.opaque=function(y){let S=(255|y.rgba)>>>0;return[u,p,l]=r.toChannels(S),{css:v.toCss(u,p,l),rgba:S}},h.opacity=m,h.multiplyOpacity=function(y,S){return g=255&y.rgba,m(y,g*S/255)},h.toColorRGB=function(y){return[y.rgba>>24&255,y.rgba>>16&255,y.rgba>>8&255]}}(e.color||(e.color={})),function(h){let m,y;if(!a.isNode){let S=document.createElement("canvas");S.width=1,S.height=1;let C=S.getContext("2d",{willReadFrequently:!0});C&&(m=C,m.globalCompositeOperation="copy",y=m.createLinearGradient(0,0,1,1))}h.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return u=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),r.toColor(u,p,l);case 5:return u=parseInt(S.slice(1,2).repeat(2),16),p=parseInt(S.slice(2,3).repeat(2),16),l=parseInt(S.slice(3,4).repeat(2),16),g=parseInt(S.slice(4,5).repeat(2),16),r.toColor(u,p,l,g);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}let C=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return u=parseInt(C[1]),p=parseInt(C[2]),l=parseInt(C[3]),g=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),r.toColor(u,p,l,g);if(!m||!y)throw new Error("css.toColor: Unsupported css format");if(m.fillStyle=y,m.fillStyle=S,typeof m.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(m.fillRect(0,0,1,1),[u,p,l,g]=m.getImageData(0,0,1,1).data,g!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(u,p,l,g),css:S}}}(e.css||(e.css={})),function(h){function m(y,S,C){let b=y/255,w=S/255,E=C/255;return .2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))}h.relativeLuminance=function(y){return m(y>>16&255,y>>8&255,255&y)},h.relativeLuminance2=m}(f=e.rgb||(e.rgb={})),function(h){function m(S,C,b){let w=S>>24&255,E=S>>16&255,L=S>>8&255,R=C>>24&255,T=C>>16&255,B=C>>8&255,H=_(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,E,L));for(;H<b&&(R>0||T>0||B>0);)R-=Math.max(0,Math.ceil(.1*R)),T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),H=_(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,E,L));return(R<<24|T<<16|B<<8|255)>>>0}function y(S,C,b){let w=S>>24&255,E=S>>16&255,L=S>>8&255,R=C>>24&255,T=C>>16&255,B=C>>8&255,H=_(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,E,L));for(;H<b&&(R<255||T<255||B<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),H=_(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,E,L));return(R<<24|T<<16|B<<8|255)>>>0}h.ensureContrastRatio=function(S,C,b){let w=f.relativeLuminance(S>>8),E=f.relativeLuminance(C>>8);if(_(w,E)<b){if(E<w){let T=m(S,C,b),B=_(w,f.relativeLuminance(T>>8));if(B<b){let H=y(S,C,b);return B>_(w,f.relativeLuminance(H>>8))?T:H}return T}let L=y(S,C,b),R=_(w,f.relativeLuminance(L>>8));if(R<b){let T=m(S,C,b);return R>_(w,f.relativeLuminance(T>>8))?L:T}return L}},h.reduceLuminance=m,h.increaseLuminance=y,h.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},h.toColor=function(S,C,b,w){return{css:v.toCss(S,C,b,w),rgba:v.toRgba(S,C,b,w)}}}(r=e.rgba||(e.rgba={})),e.toPaddedHex=d,e.contrastRatio=_},8969:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreTerminal=void 0;let a=i(844),u=i(2585),p=i(4348),l=i(7866),g=i(744),v=i(7302),f=i(6975),r=i(8460),d=i(1753),_=i(1480),h=i(7994),m=i(9282),y=i(5435),S=i(5981),C=i(2660),b=!1;class w extends a.Disposable{constructor(L){super(),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new p.InstantiationService,this.optionsService=this.register(new v.OptionsService(L)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(g.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(l.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(C.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",R=>this._handleWindowsModeOptionChange(R))),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((R,T)=>this._inputHandler.parse(R,T))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,a.toDisposable)(()=>{var R;(R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(L=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(L.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(L){for(let R in L)this.optionsService.options[R]=L[R]}write(L,R){this._writeBuffer.write(L,R)}writeSync(L,R){this._logService.logLevel<=u.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(L,R)}resize(L,R){isNaN(L)||isNaN(R)||(L=Math.max(L,g.MINIMUM_COLS),R=Math.max(R,g.MINIMUM_ROWS),this._bufferService.resize(L,R))}scroll(L,R=!1){this._bufferService.scroll(L,R)}scrollLines(L,R,T){this._bufferService.scrollLines(L,R,T)}scrollPages(L){this._bufferService.scrollPages(L)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(L){this._bufferService.scrollToLine(L)}registerEscHandler(L,R){return this._inputHandler.registerEscHandler(L,R)}registerDcsHandler(L,R){return this._inputHandler.registerDcsHandler(L,R)}registerCsiHandler(L,R){return this._inputHandler.registerCsiHandler(L,R)}registerOscHandler(L,R){return this._inputHandler.registerOscHandler(L,R)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(L){var R;L?this._enableWindowsMode():((R=this._windowsMode)===null||R===void 0||R.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){let L=[];L.push(this.onLineFeed(m.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},()=>((0,m.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(let R of L)R.dispose()}}}}}e.CoreTerminal=w},8460:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===i)return void this._listeners.splice(a,1)}}})),this._event}fire(i,a){let u=[];for(let p=0;p<this._listeners.length;p++)u.push(this._listeners[p]);for(let p=0;p<u.length;p++)u[p].call(void 0,i,a)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(i,a){return i(u=>a.fire(u))}},5435:function(o,e,i){var a=this&&this.__decorate||function(F,x,k,O){var P,N=arguments.length,z=N<3?x:O===null?O=Object.getOwnPropertyDescriptor(x,k):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(F,x,k,O);else for(var q=F.length-1;q>=0;q--)(P=F[q])&&(z=(N<3?P(z):N>3?P(x,k,z):P(x,k))||z);return N>3&&z&&Object.defineProperty(x,k,z),z},u=this&&this.__param||function(F,x){return function(k,O){x(k,O,F)}};Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.WindowsOptionsReportType=void 0;let p=i(2584),l=i(7116),g=i(2015),v=i(844),f=i(482),r=i(8437),d=i(8460),_=i(643),h=i(511),m=i(3734),y=i(2585),S=i(6242),C=i(6351),b=i(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},E=131072;function L(F,x){if(F>24)return x.setWinLines||!1;switch(F){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var R;(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R=e.WindowsOptionsReportType||(e.WindowsOptionsReportType={}));let T=0;class B extends v.Disposable{constructor(x,k,O,P,N,z,q,W,$=new g.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=k,this._coreService=O,this._logService=P,this._optionsService=N,this._oscLinkService=z,this._coreMouseService=q,this._unicodeService=W,this._parser=$,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,A)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:A.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,A,M)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:A,data:M})}),this._parser.setDcsHandlerFallback((D,A,M)=>{A==="HOOK"&&(M=M.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:A,payload:M})}),this._parser.setPrintHandler((D,A,M)=>this.print(D,A,M)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(p.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(p.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(p.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(p.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(p.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(p.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(p.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(p.C1.IND,()=>this.index()),this._parser.setExecuteHandler(p.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(p.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new S.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new S.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new S.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new S.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new S.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new S.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new S.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new S.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new S.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new S.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new S.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let D in l.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new C.DcsHandler((D,A)=>this.requestStatusString(D,A)))}getAttrData(){return this._curAttrData}_preserveStack(x,k,O,P){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=k,this._parseStack.decodedLength=O,this._parseStack.position=P}_logSlowResolvingAsync(x){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([x,new Promise((k,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(k=>{if(k!=="#SLOW_TIMEOUT")throw k;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,k){let O,P=this._activeBuffer.x,N=this._activeBuffer.y,z=0,q=this._parseStack.paused;if(q){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,k))return this._logSlowResolvingAsync(O),O;P=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>E&&(z=this._parseStack.position+E)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,W=>String.fromCharCode(W)).join("")}"`),typeof x=="string"?x.split("").map(W=>W.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<E&&(this._parseBuffer=new Uint32Array(Math.min(x.length,E))),q||this._dirtyRowTracker.clearRange(),x.length>E)for(let W=z;W<x.length;W+=E){let $=W+E<x.length?W+E:x.length,D=typeof x=="string"?this._stringDecoder.decode(x.substring(W,$),this._parseBuffer):this._utf8Decoder.decode(x.subarray(W,$),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,D))return this._preserveStack(P,N,D,W),this._logSlowResolvingAsync(O),O}else if(!q){let W=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,W))return this._preserveStack(P,N,W,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===P&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,k,O){let P,N,z=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,A=this._curAttrData,M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-k>0&&M.getWidth(this._activeBuffer.x-1)===2&&M.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(let I=k;I<O;++I){if(P=x[I],N=this._unicodeService.wcwidth(P),P<127&&z){let U=z[String.fromCharCode(P)];U&&(P=U.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,f.stringFromCodePoint)(P)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=W){if($){for(;this._activeBuffer.x<W;)M.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),M=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=W-1,N===2)continue}if(D&&(M.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(A),A),M.getWidth(W-1)===2&&M.setCellFromCodePoint(W-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),M.setCellFromCodePoint(this._activeBuffer.x++,P,N,A.fg,A.bg,A.extended),N>0)for(;--N;)M.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else M.getWidth(this._activeBuffer.x-1)?M.addCodepointToCell(this._activeBuffer.x-1,P):M.addCodepointToCell(this._activeBuffer.x-2,P)}O-k>0&&(M.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<W&&O-k>0&&M.getWidth(this._activeBuffer.x)===0&&!M.hasContent(this._activeBuffer.x)&&M.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,k){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,k):this._parser.registerCsiHandler(x,O=>!L(O.params[0],this._optionsService.rawOptions.windowOptions)||k(O))}registerDcsHandler(x,k){return this._parser.registerDcsHandler(x,new C.DcsHandler(k))}registerEscHandler(x,k){return this._parser.registerEscHandler(x,k)}registerOscHandler(x,k){return this._parser.registerOscHandler(x,new S.OscHandler(k))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);k.hasWidth(this._activeBuffer.x)&&!k.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,k){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+k):(this._activeBuffer.x=x,this._activeBuffer.y=k),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,k){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+k)}cursorUp(x){let k=this._activeBuffer.y-this._activeBuffer.scrollTop;return k>=0?this._moveCursor(0,-Math.min(k,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){let k=this._activeBuffer.scrollBottom-this._activeBuffer.y;return k>=0?this._moveCursor(0,Math.min(k,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){let k=x.params[0];return k===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:k===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=x.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let k=x.params[0]||1;for(;k--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){let k=x.params[0];return k===1&&(this._curAttrData.bg|=536870912),k!==2&&k!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,k,O,P=!1,N=!1){let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);z.replaceCells(k,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),N),P&&(z.isWrapped=!1)}_resetBufferLine(x,k=!1){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),k),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),O.isWrapped=!1}eraseInDisplay(x,k=!1){let O;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);O<this._bufferService.rows;O++)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,k),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,k);this._dirtyRowTracker.markDirty(0);break;case 3:let P=this._activeBuffer.lines.length-this._bufferService.rows;P>0&&(this._activeBuffer.lines.trimStart(P),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-P,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-P,0),this._onScroll.fire(0))}return!0}eraseInLine(x,k=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,k);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,k);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,k)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let k=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-P+1;for(;k--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let k=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let O=this._activeBuffer.ybase+this._activeBuffer.y,P;for(P=this._bufferService.rows-1-this._activeBuffer.scrollBottom,P=this._bufferService.rows-1+this._activeBuffer.ybase-P;k--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let k=x.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let k=x.params[0]||1;for(;k--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let k=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let k=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(0,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let k=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.insertCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let k=x.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);P.deleteCells(this._activeBuffer.x,k,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),P.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return k&&(k.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;let k=x.params[0]||1,O=new Uint32Array(k);for(let P=0;P<k;++P)O[P]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(p.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(p.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(p.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(p.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(p.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let k=0;k<x.length;k++)switch(x.params[k]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let k=0;k<x.length;k++)switch(x.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),this._charsetService.setgCharset(1,l.DEFAULT_CHARSET),this._charsetService.setgCharset(2,l.DEFAULT_CHARSET),this._charsetService.setgCharset(3,l.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let k=0;k<x.length;k++)switch(x.params[k]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let k=0;k<x.length;k++)switch(x.params[k]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[k]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,k){let O=this._coreService.decPrivateModes,{activeProtocol:P,activeEncoding:N}=this._coreMouseService,z=this._coreService,{buffers:q,cols:W}=this._bufferService,{active:$,alt:D}=q,A=this._optionsService.rawOptions,M=j=>j?1:2,I=x.params[0];return U=I,Z=k?I===2?3:I===4?M(z.modes.insertMode):I===12?4:I===20?M(A.convertEol):0:I===1?M(O.applicationCursorKeys):I===3?A.windowOptions.setWinLines?W===80?2:W===132?1:0:0:I===6?M(O.origin):I===7?M(O.wraparound):I===8?3:I===9?M(P==="X10"):I===12?M(A.cursorBlink):I===25?M(!z.isCursorHidden):I===45?M(O.reverseWraparound):I===66?M(O.applicationKeypad):I===1e3?M(P==="VT200"):I===1002?M(P==="DRAG"):I===1003?M(P==="ANY"):I===1004?M(O.sendFocus):I===1005?4:I===1006?M(N==="SGR"):I===1015?4:I===1016?M(N==="SGR_PIXELS"):I===1048?1:I===47||I===1047||I===1049?M($===D):I===2004?M(O.bracketedPasteMode):0,z.triggerDataEvent(`${p.C0.ESC}[${k?"":"?"}${U};${Z}$y`),!0;var U,Z}_updateAttrColor(x,k,O,P,N){return k===2?(x|=50331648,x&=-16777216,x|=m.AttributeData.fromColorRGB([O,P,N])):k===5&&(x&=-50331904,x|=33554432|255&O),x}_extractColor(x,k,O){let P=[0,0,-1,0,0,0],N=0,z=0;do{if(P[z+N]=x.params[k+z],x.hasSubParams(k+z)){let q=x.getSubParams(k+z),W=0;do P[1]===5&&(N=1),P[z+W+1+N]=q[W];while(++W<q.length&&W+z+1+N<P.length);break}if(P[1]===5&&z+N>=2||P[1]===2&&z+N>=5)break;P[1]&&(N=1)}while(++z+k<x.length&&z+N<P.length);for(let q=2;q<P.length;++q)P[q]===-1&&(P[q]=0);switch(P[0]){case 38:O.fg=this._updateAttrColor(O.fg,P[1],P[3],P[4],P[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,P[1],P[3],P[4],P[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,P[1],P[3],P[4],P[5])}return z}_processUnderline(x,k){k.extended=k.extended.clone(),(!~x||x>5)&&(x=1),k.extended.underlineStyle=x,k.fg|=268435456,x===0&&(k.fg&=-268435457),k.updateExtended()}_processSGR0(x){x.fg=r.DEFAULT_ATTR_DATA.fg,x.bg=r.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;let k=x.length,O,P=this._curAttrData;for(let N=0;N<k;N++)O=x.params[N],O>=30&&O<=37?(P.fg&=-50331904,P.fg|=16777216|O-30):O>=40&&O<=47?(P.bg&=-50331904,P.bg|=16777216|O-40):O>=90&&O<=97?(P.fg&=-50331904,P.fg|=16777224|O-90):O>=100&&O<=107?(P.bg&=-50331904,P.bg|=16777224|O-100):O===0?this._processSGR0(P):O===1?P.fg|=134217728:O===3?P.bg|=67108864:O===4?(P.fg|=268435456,this._processUnderline(x.hasSubParams(N)?x.getSubParams(N)[0]:1,P)):O===5?P.fg|=536870912:O===7?P.fg|=67108864:O===8?P.fg|=1073741824:O===9?P.fg|=2147483648:O===2?P.bg|=134217728:O===21?this._processUnderline(2,P):O===22?(P.fg&=-134217729,P.bg&=-134217729):O===23?P.bg&=-67108865:O===24?(P.fg&=-268435457,this._processUnderline(0,P)):O===25?P.fg&=-536870913:O===27?P.fg&=-67108865:O===28?P.fg&=-1073741825:O===29?P.fg&=2147483647:O===39?(P.fg&=-67108864,P.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):O===49?(P.bg&=-67108864,P.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?N+=this._extractColor(x,N,P):O===59?(P.extended=P.extended.clone(),P.extended.underlineColor=-1,P.updateExtended()):O===100?(P.fg&=-67108864,P.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,P.bg&=-67108864,P.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${p.C0.ESC}[0n`);break;case 6:let k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[${k};${O}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){let k=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${p.C0.ESC}[?${k};${O}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){let k=x.params[0]||1;switch(k){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let O=k%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(x){let k=x.params[0]||1,O;return(x.length<2||(O=x.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>k&&(this._activeBuffer.scrollTop=k-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(x){if(!L(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;let k=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:k!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${p.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:k!==0&&k!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),k!==0&&k!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:k!==0&&k!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),k!==0&&k!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){let k=[],O=x.split(";");for(;O.length>1;){let P=O.shift(),N=O.shift();if(/^\d+$/.exec(P)){let z=parseInt(P);if(0<=z&&z<256)if(N==="?")k.push({type:0,index:z});else{let q=(0,b.parseColor)(N);q&&k.push({type:1,index:z,color:q})}}}return k.length&&this._onColor.fire(k),!0}setHyperlink(x){let k=x.split(";");return!(k.length<2)&&(k[1]?this._createHyperlink(k[0],k[1]):!k[0]&&this._finishHyperlink())}_createHyperlink(x,k){this._getCurrentLinkId()&&this._finishHyperlink();let O=x.split(":"),P,N=O.findIndex(z=>z.startsWith("id="));return N!==-1&&(P=O[N].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:P,uri:k}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,k){let O=x.split(";");for(let P=0;P<O.length&&!(k>=this._specialColors.length);++P,++k)if(O[P]==="?")this._onColor.fire([{type:0,index:this._specialColors[k]}]);else{let N=(0,b.parseColor)(O[P]);N&&this._onColor.fire([{type:1,index:this._specialColors[k],color:N}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;let k=[],O=x.split(";");for(let P=0;P<O.length;++P)if(/^\d+$/.exec(O[P])){let N=parseInt(O[P]);0<=N&&N<256&&k.push({type:2,index:N})}return k.length&&this._onColor.fire(k),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,l.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(w[x[0]],l.CHARSETS[x[1]]||l.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){let x=new h.CellData;x.content=4194304|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let k=0;k<this._bufferService.rows;++k){let O=this._activeBuffer.ybase+this._activeBuffer.y+k,P=this._activeBuffer.lines.get(O);P&&(P.fill(x),P.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,k){let O=this._bufferService.buffer,P=this._optionsService.rawOptions;return(N=>(this._coreService.triggerDataEvent(`${p.C0.ESC}${N}${p.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[P.cursorStyle]-(P.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,k){this._dirtyRowTracker.markRangeDirty(x,k)}}e.InputHandler=B;let H=class{constructor(F){this._bufferService=F,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(F){F<this.start?this.start=F:F>this.end&&(this.end=F)}markRangeDirty(F,x){F>x&&(T=F,F=x,x=T),F<this.start&&(this.start=F),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};H=a([u(0,y.IBufferService)],H)},844:(o,e)=>{function i(a){for(let u of a)u.dispose();a.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let u=this._disposables.indexOf(a);u!==-1&&this._disposables.splice(u,1)}},e.toDisposable=function(a){return{dispose:a}},e.disposeArray=i,e.getDisposeArrayDisposable=function(a){return{dispose:()=>i(a)}}},1505:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(u,p,l){this._data[u]||(this._data[u]={}),this._data[u][p]=l}get(u,p){return this._data[u]?this._data[u][p]:void 0}clear(){this._data={}}}e.TwoKeyMap=i,e.FourKeyMap=class{constructor(){this._data=new i}set(a,u,p,l,g){this._data.get(a,u)||this._data.set(a,u,new i),this._data.get(a,u).set(p,l,g)}get(a,u,p,l){var g;return(g=this._data.get(a,u))===null||g===void 0?void 0:g.get(p,l)}clear(){this._data.clear()}}},6114:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode=typeof navigator=="undefined";let i=e.isNode?"node":navigator.userAgent,a=e.isNode?"node":navigator.platform;e.isFirefox=i.includes("Firefox"),e.isLegacyEdge=i.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(i),e.getSafariVersion=function(){if(!e.isSafari)return 0;let u=i.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),e.isIpad=a==="iPad",e.isIphone=a==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),e.isLinux=a.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(i)},6106:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortedList=void 0;let i=0;e.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(i=this._search(this._getKey(a),0,this._array.length-1),this._array.splice(i,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let u=this._getKey(a);if(u===void 0||(i=this._search(u,0,this._array.length-1),i===-1)||this._getKey(this._array[i])!==u)return!1;do if(this._array[i]===a)return this._array.splice(i,1),!0;while(++i<this._array.length&&this._getKey(this._array[i])===u);return!1}*getKeyIterator(a){if(this._array.length!==0&&(i=this._search(a,0,this._array.length-1),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===a))do yield this._array[i];while(++i<this._array.length&&this._getKey(this._array[i])===a)}forEachByKey(a,u){if(this._array.length!==0&&(i=this._search(a,0,this._array.length-1),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===a))do u(this._array[i]);while(++i<this._array.length&&this._getKey(this._array[i])===a)}values(){return this._array.values()}_search(a,u,p){if(p<u)return u;let l=Math.floor((u+p)/2),g=this._getKey(this._array[l]);if(g>a)return this._search(a,u,l-1);if(g<a)return this._search(a,l+1,p);for(;l>0&&this._getKey(this._array[l-1])===a;)l--;return l}}},7226:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncedIdleTask=e.IdleTaskQueue=e.PriorityTaskQueue=void 0;let a=i(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(g){this._tasks.push(g),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(g){this._idleCallback=void 0;let v=0,f=0,r=g.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(v=Date.now(),this._tasks[this._i]()||this._i++,v=Math.max(1,Date.now()-v),f=Math.max(v,f),d=g.timeRemaining(),1.5*f>d)return r-v<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-v))}ms`),void this._start();r=d}this.clear()}}class p extends u{_requestCallback(g){return setTimeout(()=>g(this._createDeadline(16)))}_cancelCallback(g){clearTimeout(g)}_createDeadline(g){let v=Date.now()+g;return{timeRemaining:()=>Math.max(0,v-Date.now())}}}e.PriorityTaskQueue=p,e.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(l){return requestIdleCallback(l)}_cancelCallback(l){cancelIdleCallback(l)}}:p,e.DebouncedIdleTask=class{constructor(){this._queue=new e.IdleTaskQueue}set(l){this._queue.clear(),this._queue.enqueue(l)}flush(){this._queue.flush()}}},9282:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateWindowsModeWrappedState=void 0;let a=i(643);e.updateWindowsModeWrappedState=function(u){let p=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),l=p==null?void 0:p.get(u.cols-1),g=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);g&&l&&(g.isWrapped=l[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&l[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(p){return[p>>>16&255,p>>>8&255,255&p]}static fromColorRGB(p){return(255&p[0])<<16|(255&p[1])<<8|255&p[2]}clone(){let p=new i;return p.fg=this.fg,p.bg=this.bg,p.extended=this.extended.clone(),p}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}e.AttributeData=i;class a{constructor(p=0,l=0){this._ext=0,this._urlId=0,this._ext=p,this._urlId=l}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(p){this._ext=p}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(p){this._ext&=-469762049,this._ext|=p<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(p){this._ext&=-67108864,this._ext|=67108863&p}get urlId(){return this._urlId}set urlId(p){this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}e.ExtendedAttrs=a},9092:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferStringIterator=e.Buffer=e.MAX_BUFFER_SIZE=void 0;let a=i(6349),u=i(8437),p=i(511),l=i(643),g=i(4634),v=i(4863),f=i(7116),r=i(3734),d=i(7226);e.MAX_BUFFER_SIZE=4294967295,e.Buffer=class{constructor(h,m,y){this._hasScrollback=h,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=f.DEFAULT_CHARSET,this.markers=[],this._nullCell=p.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=p.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new d.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(h,m){return new u.BufferLine(this._bufferService.cols,this.getNullCell(h),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows}_getCorrectBufferLength(h){if(!this._hasScrollback)return h;let m=h+this._optionsService.rawOptions.scrollback;return m>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:m}fillViewportRows(h){if(this.lines.length===0){h===void 0&&(h=u.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(h))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(h,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),S=0,C=this._getCorrectBufferLength(m);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<h)for(let w=0;w<this.lines.length;w++)S+=+this.lines.get(w).resize(h,y);let b=0;if(this._rows<m)for(let w=this._rows;w<m;w++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new u.BufferLine(h,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(h,y)));else for(let w=this._rows;w>m;w--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){let w=this.lines.length-C;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=C}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,m-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(h,m),this._cols>h))for(let b=0;b<this.lines.length;b++)S+=+this.lines.get(b).resize(h,y);this._cols=h,this._rows=m,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let h=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,h=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return h}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(h,m){this._cols!==h&&(h>this._cols?this._reflowLarger(h,m):this._reflowSmaller(h,m))}_reflowLarger(h,m){let y=(0,g.reflowLargerGetLinesToRemove)(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(y.length>0){let S=(0,g.reflowLargerCreateNewLayout)(this.lines,y);(0,g.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(h,m,S.countRemoved)}}_reflowLargerAdjustViewport(h,m,y){let S=this.getNullCell(u.DEFAULT_ATTR_DATA),C=y;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new u.BufferLine(h,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(h,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),S=[],C=0;for(let b=this.lines.length-1;b>=0;b--){let w=this.lines.get(b);if(!w||!w.isWrapped&&w.getTrimmedLength()<=h)continue;let E=[w];for(;w.isWrapped&&b>0;)w=this.lines.get(--b),E.unshift(w);let L=this.ybase+this.y;if(L>=b&&L<b+E.length)continue;let R=E[E.length-1].getTrimmedLength(),T=(0,g.reflowSmallerGetNewLineLengths)(E,this._cols,h),B=T.length-E.length,H;H=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+B):Math.max(0,this.lines.length-this.lines.maxLength+B);let F=[];for(let z=0;z<B;z++){let q=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);F.push(q)}F.length>0&&(S.push({start:b+E.length+C,newLines:F}),C+=F.length),E.push(...F);let x=T.length-1,k=T[x];k===0&&(x--,k=T[x]);let O=E.length-B-1,P=R;for(;O>=0;){let z=Math.min(P,k);if(E[x]===void 0)break;if(E[x].copyCellsFrom(E[O],P-z,k-z,z,!0),k-=z,k===0&&(x--,k=T[x]),P-=z,P===0){O--;let q=Math.max(O,0);P=(0,g.getWrappedLineTrimmedLength)(E,q,this._cols)}}for(let z=0;z<E.length;z++)T[z]<h&&E[z].setCell(T[z],y);let N=B-H;for(;N-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+B,this.ybase+m-1)}if(S.length>0){let b=[],w=[];for(let x=0;x<this.lines.length;x++)w.push(this.lines.get(x));let E=this.lines.length,L=E-1,R=0,T=S[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let B=0;for(let x=Math.min(this.lines.maxLength-1,E+C-1);x>=0;x--)if(T&&T.start>L+B){for(let k=T.newLines.length-1;k>=0;k--)this.lines.set(x--,T.newLines[k]);x++,b.push({index:L+1,amount:T.newLines.length}),B+=T.newLines.length,T=S[++R]}else this.lines.set(x,w[L--]);let H=0;for(let x=b.length-1;x>=0;x--)b[x].index+=H,this.lines.onInsertEmitter.fire(b[x]),H+=b[x].amount;let F=Math.max(0,E+C-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}stringIndexToBufferIndex(h,m,y=!1){for(;m;){let S=this.lines.get(h);if(!S)return[-1,-1];let C=y?S.getTrimmedLength():S.length;for(let b=0;b<C;++b)if(S.get(b)[l.CHAR_DATA_WIDTH_INDEX]&&(m-=S.get(b)[l.CHAR_DATA_CHAR_INDEX].length||1),m<0)return[h,b];h++}return[h,0]}translateBufferLineToString(h,m,y=0,S){let C=this.lines.get(h);return C?C.translateToString(m,y,S):""}getWrappedRangeForLine(h){let m=h,y=h;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(h){for(h!=null?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.rawOptions.tabStopWidth)this.tabs[h]=!0}prevStop(h){for(h==null&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h}nextStop(h){for(h==null&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h}clearMarkers(h){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===h&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].dispose(),this.markers.splice(h--,1);this._isClearing=!1}addMarker(h){let m=new v.Marker(h);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(h){this._isClearing||this.markers.splice(this.markers.indexOf(h),1)}iterator(h,m,y,S,C){return new _(this,h,m,y,S,C)}};class _{constructor(m,y,S=0,C=m.lines.length,b=0,w=0){this._buffer=m,this._trimRight=y,this._startIndex=S,this._endIndex=C,this._startOverscan=b,this._endOverscan=w,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){let m=this._buffer.getWrappedRangeForLine(this._current);m.first<this._startIndex-this._startOverscan&&(m.first=this._startIndex-this._startOverscan),m.last>this._endIndex+this._endOverscan&&(m.last=this._endIndex+this._endOverscan),m.first=Math.max(m.first,0),m.last=Math.min(m.last,this._buffer.lines.length);let y="";for(let S=m.first;S<=m.last;++S)y+=this._buffer.translateBufferLineToString(S,this._trimRight);return this._current=m.last+1,{range:m,content:y}}}e.BufferStringIterator=_},8437:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLine=e.DEFAULT_ATTR_DATA=void 0;let a=i(482),u=i(643),p=i(511),l=i(3734);e.DEFAULT_ATTR_DATA=Object.freeze(new l.AttributeData);let g=0;class v{constructor(r,d,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);let h=d||p.CellData.fromCharData([0,u.NULL_CELL_CHAR,u.NULL_CELL_WIDTH,u.NULL_CELL_CODE]);for(let m=0;m<r;++m)this.setCell(m,h);this.length=r}get(r){let d=this._data[3*r+0],_=2097151&d;return[this._data[3*r+1],2097152&d?this._combined[r]:_?(0,a.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):_]}set(r,d){this._data[3*r+1]=d[u.CHAR_DATA_ATTR_INDEX],d[u.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=d[1],this._data[3*r+0]=2097152|r|d[u.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[u.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&d}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r]:2097151&d?(0,a.stringFromCodePoint)(2097151&d):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,d){return g=3*r,d.content=this._data[g+0],d.fg=this._data[g+1],d.bg=this._data[g+2],2097152&d.content&&(d.combinedData=this._combined[r]),268435456&d.bg&&(d.extended=this._extendedAttrs[r]),d}setCell(r,d){2097152&d.content&&(this._combined[r]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[r]=d.extended),this._data[3*r+0]=d.content,this._data[3*r+1]=d.fg,this._data[3*r+2]=d.bg}setCellFromCodePoint(r,d,_,h,m,y){268435456&m&&(this._extendedAttrs[r]=y),this._data[3*r+0]=d|_<<22,this._data[3*r+1]=h,this._data[3*r+2]=m}addCodepointToCell(r,d){let _=this._data[3*r+0];2097152&_?this._combined[r]+=(0,a.stringFromCodePoint)(d):(2097151&_?(this._combined[r]=(0,a.stringFromCodePoint)(2097151&_)+(0,a.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|4194304,this._data[3*r+0]=_)}insertCells(r,d,_,h){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length-r){let m=new p.CellData;for(let y=this.length-r-d-1;y>=0;--y)this.setCell(r+d+y,this.loadCell(r+y,m));for(let y=0;y<d;++y)this.setCell(r+y,_)}else for(let m=r;m<this.length;++m)this.setCell(m,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs)}deleteCells(r,d,_,h){if(r%=this.length,d<this.length-r){let m=new p.CellData;for(let y=0;y<this.length-r-d;++y)this.setCell(r+y,this.loadCell(r+d+y,m));for(let y=this.length-d;y<this.length;++y)this.setCell(y,_)}else for(let m=r;m<this.length;++m)this.setCell(m,_);r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodePoint(r,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs)}replaceCells(r,d,_,h,m=!1){if(m)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs);r<d&&r<this.length;)this.isProtected(r)||this.setCell(r,_),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new l.ExtendedAttrs);r<d&&r<this.length;)this.setCell(r++,_)}resize(r,d){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let h=new Uint32Array(_);h.set(this._data),this._data=h}for(let h=this.length;h<r;++h)this.setCell(h,d)}else{this._data=this._data.subarray(0,_);let h=Object.keys(this._combined);for(let y=0;y<h.length;y++){let S=parseInt(h[y],10);S>=r&&delete this._combined[S]}let m=Object.keys(this._extendedAttrs);for(let y=0;y<m.length;y++){let S=parseInt(m[y],10);S>=r&&delete this._extendedAttrs[S]}}return this.length=r,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,d=!1){if(d)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,r);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(let d in r._combined)this._combined[d]=r._combined[d];this._extendedAttrs={};for(let d in r._extendedAttrs)this._extendedAttrs[d]=r._extendedAttrs[d];this.isWrapped=r.isWrapped}clone(){let r=new v(0);r._data=new Uint32Array(this._data),r.length=this.length;for(let d in this._combined)r._combined[d]=this._combined[d];for(let d in this._extendedAttrs)r._extendedAttrs[d]=this._extendedAttrs[d];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,d,_,h,m){let y=r._data;if(m)for(let C=h-1;C>=0;C--){for(let b=0;b<3;b++)this._data[3*(_+C)+b]=y[3*(d+C)+b];268435456&y[3*(d+C)+2]&&(this._extendedAttrs[_+C]=r._extendedAttrs[d+C])}else for(let C=0;C<h;C++){for(let b=0;b<3;b++)this._data[3*(_+C)+b]=y[3*(d+C)+b];268435456&y[3*(d+C)+2]&&(this._extendedAttrs[_+C]=r._extendedAttrs[d+C])}let S=Object.keys(r._combined);for(let C=0;C<S.length;C++){let b=parseInt(S[C],10);b>=d&&(this._combined[b-d+_]=r._combined[b])}}translateToString(r=!1,d=0,_=this.length){r&&(_=Math.min(_,this.getTrimmedLength()));let h="";for(;d<_;){let m=this._data[3*d+0],y=2097151&m;h+=2097152&m?this._combined[d]:y?(0,a.stringFromCodePoint)(y):u.WHITESPACE_CELL_CHAR,d+=m>>22||1}return h}}e.BufferLine=v},4841:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeLength=void 0,e.getRangeLength=function(i,a){if(i.start.y>i.end.y)throw new Error(`Buffer range end (${i.end.x}, ${i.end.y}) cannot be before start (${i.start.x}, ${i.start.y})`);return a*(i.end.y-i.start.y)+(i.end.x-i.start.x+1)}},4634:(o,e)=>{function i(a,u,p){if(u===a.length-1)return a[u].getTrimmedLength();let l=!a[u].hasContent(p-1)&&a[u].getWidth(p-1)===1,g=a[u+1].getWidth(0)===2;return l&&g?p-1:p}Object.defineProperty(e,"__esModule",{value:!0}),e.getWrappedLineTrimmedLength=e.reflowSmallerGetNewLineLengths=e.reflowLargerApplyNewLayout=e.reflowLargerCreateNewLayout=e.reflowLargerGetLinesToRemove=void 0,e.reflowLargerGetLinesToRemove=function(a,u,p,l,g){let v=[];for(let f=0;f<a.length-1;f++){let r=f,d=a.get(++r);if(!d.isWrapped)continue;let _=[a.get(f)];for(;r<a.length&&d.isWrapped;)_.push(d),d=a.get(++r);if(l>=f&&l<r){f+=_.length-1;continue}let h=0,m=i(_,h,u),y=1,S=0;for(;y<_.length;){let b=i(_,y,u),w=b-S,E=p-m,L=Math.min(w,E);_[h].copyCellsFrom(_[y],S,m,L,!1),m+=L,m===p&&(h++,m=0),S+=L,S===b&&(y++,S=0),m===0&&h!==0&&_[h-1].getWidth(p-1)===2&&(_[h].copyCellsFrom(_[h-1],p-1,m++,1,!1),_[h-1].setCell(p-1,g))}_[h].replaceCells(m,p,g);let C=0;for(let b=_.length-1;b>0&&(b>h||_[b].getTrimmedLength()===0);b--)C++;C>0&&(v.push(f+_.length-C),v.push(C)),f+=_.length-1}return v},e.reflowLargerCreateNewLayout=function(a,u){let p=[],l=0,g=u[l],v=0;for(let f=0;f<a.length;f++)if(g===f){let r=u[++l];a.onDeleteEmitter.fire({index:f-v,amount:r}),f+=r-1,v+=r,g=u[++l]}else p.push(f);return{layout:p,countRemoved:v}},e.reflowLargerApplyNewLayout=function(a,u){let p=[];for(let l=0;l<u.length;l++)p.push(a.get(u[l]));for(let l=0;l<p.length;l++)a.set(l,p[l]);a.length=u.length},e.reflowSmallerGetNewLineLengths=function(a,u,p){let l=[],g=a.map((d,_)=>i(a,_,u)).reduce((d,_)=>d+_),v=0,f=0,r=0;for(;r<g;){if(g-r<p){l.push(g-r);break}v+=p;let d=i(a,f,u);v>d&&(v-=d,f++);let _=a[f].getWidth(v-1)===2;_&&v--;let h=_?p-1:p;l.push(h),r+=h}return l},e.getWrappedLineTrimmedLength=i},5295:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferSet=void 0;let a=i(9092),u=i(8460),p=i(844);class l extends p.Disposable{constructor(v,f){super(),this._optionsService=v,this._bufferService=f,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(v,f){this._normal.resize(v,f),this._alt.resize(v,f),this.setupTabStops(v)}setupTabStops(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)}}e.BufferSet=l},511:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;let a=i(482),u=i(643),p=i(3734);class l extends p.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new p.ExtendedAttrs,this.combinedData=""}static fromCharData(v){let f=new l;return f.setFromCharData(v),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(v){this.fg=v[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(v[u.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(v[u.CHAR_DATA_CHAR_INDEX].length===2){let r=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){let d=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(r-55296)+d-56320+65536|v[u.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=v[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[u.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=v[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|v[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.CellData=l},643:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=0,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},4863:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;let a=i(8460),u=i(844);class p{constructor(g){this.line=g,this.isDisposed=!1,this._disposables=[],this._id=p._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(g){return this._disposables.push(g),g}}e.Marker=p,p._nextId=1},7116:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CHARSET=e.CHARSETS=void 0,e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},e.CHARSETS.A={"#":"\xA3"},e.CHARSETS.B=void 0,e.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},e.CHARSETS.C=e.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},e.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},e.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},e.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},e.CHARSETS.E=e.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},e.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},e.CHARSETS.H=e.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(o,e)=>{var i,a;Object.defineProperty(e,"__esModule",{value:!0}),e.C1_ESCAPED=e.C1=e.C0=void 0,function(u){u.NUL="\0",u.SOH="",u.STX="",u.ETX="",u.EOT="",u.ENQ="",u.ACK="",u.BEL="\x07",u.BS="\b",u.HT="	",u.LF=`
`,u.VT="\v",u.FF="\f",u.CR="\r",u.SO="",u.SI="",u.DLE="",u.DC1="",u.DC2="",u.DC3="",u.DC4="",u.NAK="",u.SYN="",u.ETB="",u.CAN="",u.EM="",u.SUB="",u.ESC="\x1B",u.FS="",u.GS="",u.RS="",u.US="",u.SP=" ",u.DEL="\x7F"}(i=e.C0||(e.C0={})),(a=e.C1||(e.C1={})).PAD="\x80",a.HOP="\x81",a.BPH="\x82",a.NBH="\x83",a.IND="\x84",a.NEL="\x85",a.SSA="\x86",a.ESA="\x87",a.HTS="\x88",a.HTJ="\x89",a.VTS="\x8A",a.PLD="\x8B",a.PLU="\x8C",a.RI="\x8D",a.SS2="\x8E",a.SS3="\x8F",a.DCS="\x90",a.PU1="\x91",a.PU2="\x92",a.STS="\x93",a.CCH="\x94",a.MW="\x95",a.SPA="\x96",a.EPA="\x97",a.SOS="\x98",a.SGCI="\x99",a.SCI="\x9A",a.CSI="\x9B",a.ST="\x9C",a.OSC="\x9D",a.PM="\x9E",a.APC="\x9F",(e.C1_ESCAPED||(e.C1_ESCAPED={})).ST=`${i.ESC}\\`},7399:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateKeyboardEvent=void 0;let a=i(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(p,l,g,v){let f={type:0,cancel:!1,key:void 0},r=(p.shiftKey?1:0)|(p.altKey?2:0)|(p.ctrlKey?4:0)|(p.metaKey?8:0);switch(p.keyCode){case 0:p.key==="UIKeyInputUpArrow"?f.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A":p.key==="UIKeyInputLeftArrow"?f.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D":p.key==="UIKeyInputRightArrow"?f.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C":p.key==="UIKeyInputDownArrow"&&(f.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:if(p.altKey){f.key=a.C0.ESC+a.C0.DEL;break}f.key=a.C0.DEL;break;case 9:if(p.shiftKey){f.key=a.C0.ESC+"[Z";break}f.key=a.C0.HT,f.cancel=!0;break;case 13:f.key=p.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,f.cancel=!0;break;case 27:f.key=a.C0.ESC,p.altKey&&(f.key=a.C0.ESC+a.C0.ESC),f.cancel=!0;break;case 37:if(p.metaKey)break;r?(f.key=a.C0.ESC+"[1;"+(r+1)+"D",f.key===a.C0.ESC+"[1;3D"&&(f.key=a.C0.ESC+(g?"b":"[1;5D"))):f.key=l?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(p.metaKey)break;r?(f.key=a.C0.ESC+"[1;"+(r+1)+"C",f.key===a.C0.ESC+"[1;3C"&&(f.key=a.C0.ESC+(g?"f":"[1;5C"))):f.key=l?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(p.metaKey)break;r?(f.key=a.C0.ESC+"[1;"+(r+1)+"A",g||f.key!==a.C0.ESC+"[1;3A"||(f.key=a.C0.ESC+"[1;5A")):f.key=l?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(p.metaKey)break;r?(f.key=a.C0.ESC+"[1;"+(r+1)+"B",g||f.key!==a.C0.ESC+"[1;3B"||(f.key=a.C0.ESC+"[1;5B")):f.key=l?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:p.shiftKey||p.ctrlKey||(f.key=a.C0.ESC+"[2~");break;case 46:f.key=r?a.C0.ESC+"[3;"+(r+1)+"~":a.C0.ESC+"[3~";break;case 36:f.key=r?a.C0.ESC+"[1;"+(r+1)+"H":l?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:f.key=r?a.C0.ESC+"[1;"+(r+1)+"F":l?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:p.shiftKey?f.type=2:p.ctrlKey?f.key=a.C0.ESC+"[5;"+(r+1)+"~":f.key=a.C0.ESC+"[5~";break;case 34:p.shiftKey?f.type=3:p.ctrlKey?f.key=a.C0.ESC+"[6;"+(r+1)+"~":f.key=a.C0.ESC+"[6~";break;case 112:f.key=r?a.C0.ESC+"[1;"+(r+1)+"P":a.C0.ESC+"OP";break;case 113:f.key=r?a.C0.ESC+"[1;"+(r+1)+"Q":a.C0.ESC+"OQ";break;case 114:f.key=r?a.C0.ESC+"[1;"+(r+1)+"R":a.C0.ESC+"OR";break;case 115:f.key=r?a.C0.ESC+"[1;"+(r+1)+"S":a.C0.ESC+"OS";break;case 116:f.key=r?a.C0.ESC+"[15;"+(r+1)+"~":a.C0.ESC+"[15~";break;case 117:f.key=r?a.C0.ESC+"[17;"+(r+1)+"~":a.C0.ESC+"[17~";break;case 118:f.key=r?a.C0.ESC+"[18;"+(r+1)+"~":a.C0.ESC+"[18~";break;case 119:f.key=r?a.C0.ESC+"[19;"+(r+1)+"~":a.C0.ESC+"[19~";break;case 120:f.key=r?a.C0.ESC+"[20;"+(r+1)+"~":a.C0.ESC+"[20~";break;case 121:f.key=r?a.C0.ESC+"[21;"+(r+1)+"~":a.C0.ESC+"[21~";break;case 122:f.key=r?a.C0.ESC+"[23;"+(r+1)+"~":a.C0.ESC+"[23~";break;case 123:f.key=r?a.C0.ESC+"[24;"+(r+1)+"~":a.C0.ESC+"[24~";break;default:if(!p.ctrlKey||p.shiftKey||p.altKey||p.metaKey)if(g&&!v||!p.altKey||p.metaKey)!g||p.altKey||p.ctrlKey||p.shiftKey||!p.metaKey?p.key&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&p.keyCode>=48&&p.key.length===1?f.key=p.key:p.key&&p.ctrlKey&&(p.key==="_"&&(f.key=a.C0.US),p.key==="@"&&(f.key=a.C0.NUL)):p.keyCode===65&&(f.type=1);else{let d=u[p.keyCode],_=d==null?void 0:d[p.shiftKey?1:0];if(_)f.key=a.C0.ESC+_;else if(p.keyCode>=65&&p.keyCode<=90){let h=p.ctrlKey?p.keyCode-64:p.keyCode+32,m=String.fromCharCode(h);p.shiftKey&&(m=m.toUpperCase()),f.key=a.C0.ESC+m}else if(p.keyCode===32)f.key=a.C0.ESC+(p.ctrlKey?a.C0.NUL:" ");else if(p.key==="Dead"&&p.code.startsWith("Key")){let h=p.code.slice(3,4);p.shiftKey||(h=h.toLowerCase()),f.key=a.C0.ESC+h,f.cancel=!0}}else p.keyCode>=65&&p.keyCode<=90?f.key=String.fromCharCode(p.keyCode-64):p.keyCode===32?f.key=a.C0.NUL:p.keyCode>=51&&p.keyCode<=55?f.key=String.fromCharCode(p.keyCode-51+27):p.keyCode===56?f.key=a.C0.DEL:p.keyCode===219?f.key=a.C0.ESC:p.keyCode===220?f.key=a.C0.FS:p.keyCode===221&&(f.key=a.C0.GS)}return f}},482:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(i){return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)},e.utf32ToString=function(i,a=0,u=i.length){let p="";for(let l=a;l<u;++l){let g=i[l];g>65535?(g-=65536,p+=String.fromCharCode(55296+(g>>10))+String.fromCharCode(g%1024+56320)):p+=String.fromCharCode(g)}return p},e.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(i,a){let u=i.length;if(!u)return 0;let p=0,l=0;if(this._interim){let g=i.charCodeAt(l++);56320<=g&&g<=57343?a[p++]=1024*(this._interim-55296)+g-56320+65536:(a[p++]=this._interim,a[p++]=g),this._interim=0}for(let g=l;g<u;++g){let v=i.charCodeAt(g);if(55296<=v&&v<=56319){if(++g>=u)return this._interim=v,p;let f=i.charCodeAt(g);56320<=f&&f<=57343?a[p++]=1024*(v-55296)+f-56320+65536:(a[p++]=v,a[p++]=f)}else v!==65279&&(a[p++]=v)}return p}},e.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(i,a){let u=i.length;if(!u)return 0;let p,l,g,v,f=0,r=0,d=0;if(this.interim[0]){let m=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let S,C=0;for(;(S=63&this.interim[++C])&&C<4;)y<<=6,y|=S;let b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=b-C;for(;d<w;){if(d>=u)return 0;if(S=i[d++],(192&S)!=128){d--,m=!0;break}this.interim[C++]=S,y<<=6,y|=63&S}m||(b===2?y<128?d--:a[f++]=y:b===3?y<2048||y>=55296&&y<=57343||y===65279||(a[f++]=y):y<65536||y>1114111||(a[f++]=y)),this.interim.fill(0)}let _=u-4,h=d;for(;h<u;){for(;!(!(h<_)||128&(p=i[h])||128&(l=i[h+1])||128&(g=i[h+2])||128&(v=i[h+3]));)a[f++]=p,a[f++]=l,a[f++]=g,a[f++]=v,h+=4;if(p=i[h++],p<128)a[f++]=p;else if((224&p)==192){if(h>=u)return this.interim[0]=p,f;if(l=i[h++],(192&l)!=128){h--;continue}if(r=(31&p)<<6|63&l,r<128){h--;continue}a[f++]=r}else if((240&p)==224){if(h>=u)return this.interim[0]=p,f;if(l=i[h++],(192&l)!=128){h--;continue}if(h>=u)return this.interim[0]=p,this.interim[1]=l,f;if(g=i[h++],(192&g)!=128){h--;continue}if(r=(15&p)<<12|(63&l)<<6|63&g,r<2048||r>=55296&&r<=57343||r===65279)continue;a[f++]=r}else if((248&p)==240){if(h>=u)return this.interim[0]=p,f;if(l=i[h++],(192&l)!=128){h--;continue}if(h>=u)return this.interim[0]=p,this.interim[1]=l,f;if(g=i[h++],(192&g)!=128){h--;continue}if(h>=u)return this.interim[0]=p,this.interim[1]=l,this.interim[2]=g,f;if(v=i[h++],(192&v)!=128){h--;continue}if(r=(7&p)<<18|(63&l)<<12|(63&g)<<6|63&v,r<65536||r>1114111)continue;a[f++]=r}}return f}}},225:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV6=void 0;let i=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;e.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let p=0;p<i.length;++p)u.fill(0,i[p][0],i[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?u[p]:function(l,g){let v,f=0,r=g.length-1;if(l<g[0][0]||l>g[r][1])return!1;for(;r>=f;)if(v=f+r>>1,l>g[v][1])f=v+1;else{if(!(l<g[v][0]))return!0;r=v-1}return!1}(p,a)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}}},5981:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteBuffer=void 0;let a=i(8460),u=i(844);class p extends u.Disposable{constructor(g){super(),this._action=g,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(g,v){if(v!==void 0&&this._syncCalls>v)return void(this._syncCalls=0);if(this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);let r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(g,v){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=g.length,this._writeBuffer.push(g),this._callbacks.push(v)}_innerWrite(g=0,v=!0){let f=g||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let r=this._writeBuffer[this._bufferOffset],d=this._action(r,v);if(d){let h=m=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,m)):this._innerWrite(f,m);return void d.catch(m=>(queueMicrotask(()=>{throw m}),Promise.resolve(!1))).then(h)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}e.WriteBuffer=p},5941:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toRgbString=e.parseColor=void 0;let i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function u(p,l){let g=p.toString(16),v=g.length<2?"0"+g:g;switch(l){case 4:return g[0];case 8:return v;case 12:return(v+v).slice(0,3);default:return v+v}}e.parseColor=function(p){if(!p)return;let l=p.toLowerCase();if(l.indexOf("rgb:")===0){l=l.slice(4);let g=i.exec(l);if(g){let v=g[1]?15:g[4]?255:g[7]?4095:65535;return[Math.round(parseInt(g[1]||g[4]||g[7]||g[10],16)/v*255),Math.round(parseInt(g[2]||g[5]||g[8]||g[11],16)/v*255),Math.round(parseInt(g[3]||g[6]||g[9]||g[12],16)/v*255)]}}else if(l.indexOf("#")===0&&(l=l.slice(1),a.exec(l)&&[3,6,9,12].includes(l.length))){let g=l.length/3,v=[0,0,0];for(let f=0;f<3;++f){let r=parseInt(l.slice(g*f,g*f+g),16);v[f]=g===1?r<<4:g===2?r:g===3?r>>4:r>>8}return v}},e.toRgbString=function(p,l=16){let[g,v,f]=p;return`rgb:${u(g,l)}/${u(v,l)}/${u(f,l)}`}},5770:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=void 0,e.PAYLOAD_LIMIT=1e7},6351:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DcsHandler=e.DcsParser=void 0;let a=i(482),u=i(8742),p=i(5770),l=[];e.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=l,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}registerHandler(v,f){this._handlers[v]===void 0&&(this._handlers[v]=[]);let r=this._handlers[v];return r.push(f),{dispose:()=>{let d=r.indexOf(f);d!==-1&&r.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}reset(){if(this._active.length)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].unhook(!1);this._stack.paused=!1,this._active=l,this._ident=0}hook(v,f){if(this.reset(),this._ident=v,this._active=this._handlers[v]||l,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(v,f,r){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,f,r);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(v,f,r))}unhook(v,f=!0){if(this._active.length){let r=!1,d=this._active.length-1,_=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,r=f,_=this._stack.fallThrough,this._stack.paused=!1),!_&&r===!1){for(;d>=0&&(r=this._active[d].unhook(v),r!==!0);d--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,r;d--}for(;d>=0;d--)if(r=this._active[d].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",v);this._active=l,this._ident=0}};let g=new u.Params;g.addParam(0),e.DcsHandler=class{constructor(v){this._handler=v,this._data="",this._params=g,this._hitLimit=!1}hook(v){this._params=v.length>1||v.params[0]?v.clone():g,this._data="",this._hitLimit=!1}put(v,f,r){this._hitLimit||(this._data+=(0,a.utf32ToString)(v,f,r),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(v){let f=!1;if(this._hitLimit)f=!1;else if(v&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(r=>(this._params=g,this._data="",this._hitLimit=!1,r));return this._params=g,this._data="",this._hitLimit=!1,f}}},2015:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EscapeSequenceParser=e.VT500_TRANSITION_TABLE=e.TransitionTable=void 0;let a=i(844),u=i(8742),p=i(6242),l=i(6351);class g{constructor(d){this.table=new Uint8Array(d)}setDefault(d,_){this.table.fill(d<<4|_)}add(d,_,h,m){this.table[_<<8|d]=h<<4|m}addMany(d,_,h,m){for(let y=0;y<d.length;y++)this.table[_<<8|d[y]]=h<<4|m}}e.TransitionTable=g;let v=160;e.VT500_TRANSITION_TABLE=function(){let r=new g(4095),d=Array.apply(null,Array(256)).map((C,b)=>b),_=(C,b)=>d.slice(C,b),h=_(32,127),m=_(0,24);m.push(25),m.push.apply(m,_(28,32));let y=_(0,14),S;for(S in r.setDefault(1,0),r.addMany(h,0,2,0),y)r.addMany([24,26,153,154],S,3,0),r.addMany(_(128,144),S,3,0),r.addMany(_(144,152),S,3,0),r.add(156,S,0,0),r.add(27,S,11,1),r.add(157,S,4,8),r.addMany([152,158,159],S,0,7),r.add(155,S,11,3),r.add(144,S,11,9);return r.addMany(m,0,3,0),r.addMany(m,1,3,1),r.add(127,1,0,1),r.addMany(m,8,0,8),r.addMany(m,3,3,3),r.add(127,3,0,3),r.addMany(m,4,3,4),r.add(127,4,0,4),r.addMany(m,6,3,6),r.addMany(m,5,3,5),r.add(127,5,0,5),r.addMany(m,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(h,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(_(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(h,7,0,7),r.addMany(m,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(_(64,127),3,7,0),r.addMany(_(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(_(48,60),4,8,4),r.addMany(_(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(_(32,64),6,0,6),r.add(127,6,0,6),r.addMany(_(64,127),6,0,0),r.addMany(_(32,48),3,9,5),r.addMany(_(32,48),5,9,5),r.addMany(_(48,64),5,0,6),r.addMany(_(64,127),5,7,0),r.addMany(_(32,48),4,9,5),r.addMany(_(32,48),1,9,2),r.addMany(_(32,48),2,9,2),r.addMany(_(48,127),2,10,0),r.addMany(_(48,80),1,10,0),r.addMany(_(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(_(96,127),1,10,0),r.add(80,1,11,9),r.addMany(m,9,0,9),r.add(127,9,0,9),r.addMany(_(28,32),9,0,9),r.addMany(_(32,48),9,9,12),r.addMany(_(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(m,11,0,11),r.addMany(_(32,128),11,0,11),r.addMany(_(28,32),11,0,11),r.addMany(m,10,0,10),r.add(127,10,0,10),r.addMany(_(28,32),10,0,10),r.addMany(_(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(_(32,48),10,9,12),r.addMany(m,12,0,12),r.add(127,12,0,12),r.addMany(_(28,32),12,0,12),r.addMany(_(32,48),12,9,12),r.addMany(_(48,64),12,0,11),r.addMany(_(64,127),12,12,13),r.addMany(_(64,127),10,12,13),r.addMany(_(64,127),9,12,13),r.addMany(m,13,13,13),r.addMany(h,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(v,0,2,0),r.add(v,8,5,8),r.add(v,6,0,6),r.add(v,11,0,11),r.add(v,13,13,13),r}();class f extends a.Disposable{constructor(d=e.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,h,m)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,h)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new p.OscParser),this._dcsParser=this.register(new l.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,_=[64,126]){let h=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=d.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<d.intermediates.length;++y){let S=d.intermediates.charCodeAt(y);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let m=d.final.charCodeAt(0);if(_[0]>m||m>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return h<<=8,h|=m,h}identToString(d){let _=[];for(;d;)_.push(String.fromCharCode(255&d)),d>>=8;return _.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,_){let h=this._identifier(d,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let m=this._escHandlers[h];return m.push(_),{dispose:()=>{let y=m.indexOf(_);y!==-1&&m.splice(y,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,_){this._executeHandlers[d.charCodeAt(0)]=_}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,_){let h=this._identifier(d);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let m=this._csiHandlers[h];return m.push(_),{dispose:()=>{let y=m.indexOf(_);y!==-1&&m.splice(y,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,_){return this._dcsParser.registerHandler(this._identifier(d),_)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,_){return this._oscParser.registerHandler(d,_)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,_,h,m,y){this._parseStack.state=d,this._parseStack.handlers=_,this._parseStack.handlerPos=h,this._parseStack.transition=m,this._parseStack.chunkPos=y}parse(d,_,h){let m,y=0,S=0,C=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,C=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let b=this._parseStack.handlers,w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&w>-1){for(;w>=0&&(m=b[w](this._params),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 4:if(h===!1&&w>-1){for(;w>=0&&(m=b[w](),m!==!0);w--)if(m instanceof Promise)return this._parseStack.handlerPos=w,m}this._parseStack.handlers=[];break;case 6:if(y=d[this._parseStack.chunkPos],m=this._dcsParser.unhook(y!==24&&y!==26,h),m)return m;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=d[this._parseStack.chunkPos],m=this._oscParser.end(y!==24&&y!==26,h),m)return m;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,C=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=C;b<_;++b){switch(y=d[b],S=this._transitions.table[this.currentState<<8|(y<160?y:v)],S>>4){case 2:for(let T=b+1;;++T){if(T>=_||(y=d[T])<32||y>126&&y<v){this._printHandler(d,b,T),b=T-1;break}if(++T>=_||(y=d[T])<32||y>126&&y<v){this._printHandler(d,b,T),b=T-1;break}if(++T>=_||(y=d[T])<32||y>126&&y<v){this._printHandler(d,b,T),b=T-1;break}if(++T>=_||(y=d[T])<32||y>126&&y<v){this._printHandler(d,b,T),b=T-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let w=this._csiHandlers[this._collect<<8|y],E=w?w.length-1:-1;for(;E>=0&&(m=w[E](this._params),m!==!0);E--)if(m instanceof Promise)return this._preserveStack(3,w,E,S,b),m;E<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++b<_&&(y=d[b])>47&&y<60);b--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:let L=this._escHandlers[this._collect<<8|y],R=L?L.length-1:-1;for(;R>=0&&(m=L[R](),m!==!0);R--)if(m instanceof Promise)return this._preserveStack(4,L,R,S,b),m;R<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let T=b+1;;++T)if(T>=_||(y=d[T])===24||y===26||y===27||y>127&&y<v){this._dcsParser.put(d,b,T),b=T-1;break}break;case 14:if(m=this._dcsParser.unhook(y!==24&&y!==26),m)return this._preserveStack(6,[],0,S,b),m;y===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=b+1;;T++)if(T>=_||(y=d[T])<32||y>127&&y<v){this._oscParser.put(d,b,T),b=T-1;break}break;case 6:if(m=this._oscParser.end(y!==24&&y!==26),m)return this._preserveStack(5,[],0,S,b),m;y===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}e.EscapeSequenceParser=f},6242:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscHandler=e.OscParser=void 0;let a=i(5770),u=i(482),p=[];e.OscParser=class{constructor(){this._state=0,this._active=p,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(l,g){this._handlers[l]===void 0&&(this._handlers[l]=[]);let v=this._handlers[l];return v.push(g),{dispose:()=>{let f=v.indexOf(g);f!==-1&&v.splice(f,1)}}}clearHandler(l){this._handlers[l]&&delete this._handlers[l]}setHandlerFallback(l){this._handlerFb=l}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}reset(){if(this._state===2)for(let l=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;l>=0;--l)this._active[l].end(!1);this._stack.paused=!1,this._active=p,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||p,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].start();else this._handlerFb(this._id,"START")}_put(l,g,v){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(l,g,v);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(l,g,v))}start(){this.reset(),this._state=1}put(l,g,v){if(this._state!==3){if(this._state===1)for(;g<v;){let f=l[g++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&v-g>0&&this._put(l,g,v)}}end(l,g=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let v=!1,f=this._active.length-1,r=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,v=g,r=this._stack.fallThrough,this._stack.paused=!1),!r&&v===!1){for(;f>=0&&(v=this._active[f].end(l),v!==!0);f--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,v;f--}for(;f>=0;f--)if(v=this._active[f].end(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,v}else this._handlerFb(this._id,"END",l);this._active=p,this._id=-1,this._state=0}}},e.OscHandler=class{constructor(l){this._handler=l,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(l,g,v){this._hitLimit||(this._data+=(0,u.utf32ToString)(l,g,v),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(l){let g=!1;if(this._hitLimit)g=!1;else if(l&&(g=this._handler(this._data),g instanceof Promise))return g.then(v=>(this._data="",this._hitLimit=!1,v));return this._data="",this._hitLimit=!1,g}}},8742:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Params=void 0;let i=2147483647;class a{constructor(p=32,l=32){if(this.maxLength=p,this.maxSubParamsLength=l,l>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(p),this.length=0,this._subParams=new Int32Array(l),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(p),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(p){let l=new a;if(!p.length)return l;for(let g=Array.isArray(p[0])?1:0;g<p.length;++g){let v=p[g];if(Array.isArray(v))for(let f=0;f<v.length;++f)l.addSubParam(v[f]);else l.addParam(v)}return l}clone(){let p=new a(this.maxLength,this.maxSubParamsLength);return p.params.set(this.params),p.length=this.length,p._subParams.set(this._subParams),p._subParamsLength=this._subParamsLength,p._subParamsIdx.set(this._subParamsIdx),p._rejectDigits=this._rejectDigits,p._rejectSubDigits=this._rejectSubDigits,p._digitIsSub=this._digitIsSub,p}toArray(){let p=[];for(let l=0;l<this.length;++l){p.push(this.params[l]);let g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&p.push(Array.prototype.slice.call(this._subParams,g,v))}return p}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(p){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=p>i?i:p}}addSubParam(p){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(p<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=p>i?i:p,this._subParamsIdx[this.length-1]++}}hasSubParams(p){return(255&this._subParamsIdx[p])-(this._subParamsIdx[p]>>8)>0}getSubParams(p){let l=this._subParamsIdx[p]>>8,g=255&this._subParamsIdx[p];return g-l>0?this._subParams.subarray(l,g):null}getSubParamsAll(){let p={};for(let l=0;l<this.length;++l){let g=this._subParamsIdx[l]>>8,v=255&this._subParamsIdx[l];v-g>0&&(p[l]=this._subParams.slice(g,v))}return p}addDigit(p){let l;if(this._rejectDigits||!(l=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let g=this._digitIsSub?this._subParams:this.params,v=g[l-1];g[l-1]=~v?Math.min(10*v+p,i):p}}e.Params=a},5741:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddonManager=void 0,e.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let i=this._addons.length-1;i>=0;i--)this._addons[i].instance.dispose()}loadAddon(i,a){let u={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(u),a.dispose=()=>this._wrappedAddonDispose(u),a.activate(i)}_wrappedAddonDispose(i){if(i.isDisposed)return;let a=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===i){a=u;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");i.isDisposed=!0,i.dispose.apply(i.instance),this._addons.splice(a,1)}}},8771:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferApiView=void 0;let a=i(3785),u=i(511);e.BufferApiView=class{constructor(p,l){this._buffer=p,this.type=l}init(p){return this._buffer=p,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(p){let l=this._buffer.lines.get(p);if(l)return new a.BufferLineApiView(l)}getNullCell(){return new u.CellData}}},3785:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLineApiView=void 0;let a=i(511);e.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,p){if(!(u<0||u>=this._line.length))return p?(this._line.loadCell(u,p),p):this._line.loadCell(u,new a.CellData)}translateToString(u,p,l){return this._line.translateToString(u,p,l)}}},8285:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferNamespaceApi=void 0;let a=i(8771),u=i(8460);e.BufferNamespaceApi=class{constructor(p){this._core=p,this._onBufferChange=new u.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ParserApi=void 0,e.ParserApi=class{constructor(i){this._core=i}registerCsiHandler(i,a){return this._core.registerCsiHandler(i,u=>a(u.toArray()))}addCsiHandler(i,a){return this.registerCsiHandler(i,a)}registerDcsHandler(i,a){return this._core.registerDcsHandler(i,(u,p)=>a(u,p.toArray()))}addDcsHandler(i,a){return this.registerDcsHandler(i,a)}registerEscHandler(i,a){return this._core.registerEscHandler(i,a)}addEscHandler(i,a){return this.registerEscHandler(i,a)}registerOscHandler(i,a){return this._core.registerOscHandler(i,a)}addOscHandler(i,a){return this.registerOscHandler(i,a)}}},7090:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeApi=void 0,e.UnicodeApi=class{constructor(i){this._core=i}register(i){this._core.unicodeService.register(i)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(i){this._core.unicodeService.activeVersion=i}}},744:function(o,e,i){var a=this&&this.__decorate||function(r,d,_,h){var m,y=arguments.length,S=y<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,_):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,h);else for(var C=r.length-1;C>=0;C--)(m=r[C])&&(S=(y<3?m(S):y>3?m(d,_,S):m(d,_))||S);return y>3&&S&&Object.defineProperty(d,_,S),S},u=this&&this.__param||function(r,d){return function(_,h){d(_,h,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferService=e.MINIMUM_ROWS=e.MINIMUM_COLS=void 0;let p=i(2585),l=i(5295),g=i(8460),v=i(844);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1;let f=class extends v.Disposable{constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,e.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,e.MINIMUM_ROWS),this.buffers=this.register(new l.BufferSet(r,this))}get buffer(){return this.buffers.active}resize(r,d){this.cols=r,this.rows=d,this.buffers.resize(r,d),this._onResize.fire({cols:r,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,d=!1){let _=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===r.fg&&h.getBg(0)===r.bg||(h=_.getBlankLine(r,d),this._cachedBlankLine=h),h.isWrapped=d;let m=_.ybase+_.scrollTop,y=_.ybase+_.scrollBottom;if(_.scrollTop===0){let S=_.lines.isFull;y===_.lines.length-1?S?_.lines.recycle().copyFrom(h):_.lines.push(h.clone()):_.lines.splice(y+1,0,h.clone()),S?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let S=y-m+1;_.lines.shiftElements(m+1,S-1,-1),_.lines.set(y,h.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(r,d,_){let h=this.buffer;if(r<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else r+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let m=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+r,h.ybase),0),m!==h.ydisp&&(d||this._onScroll.fire(h.ydisp))}scrollPages(r){this.scrollLines(r*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(r){let d=r-this.buffer.ydisp;d!==0&&this.scrollLines(d)}};f=a([u(0,p.IOptionsService)],f),e.BufferService=f},7994:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharsetService=void 0,e.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(i){this.glevel=i,this.charset=this._charsets[i]}setgCharset(i,a){this._charsets[i]=a,this.glevel===i&&(this.charset=a)}}},1753:function(o,e,i){var a=this&&this.__decorate||function(h,m,y,S){var C,b=arguments.length,w=b<3?m:S===null?S=Object.getOwnPropertyDescriptor(m,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(h,m,y,S);else for(var E=h.length-1;E>=0;E--)(C=h[E])&&(w=(b<3?C(w):b>3?C(m,y,w):C(m,y))||w);return b>3&&w&&Object.defineProperty(m,y,w),w},u=this&&this.__param||function(h,m){return function(y,S){m(y,S,h)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreMouseService=void 0;let p=i(2585),l=i(8460),g=i(844),v={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function f(h,m){let y=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(y|=64,y|=h.action):(y|=3&h.button,4&h.button&&(y|=64),8&h.button&&(y|=128),h.action===32?y|=32:h.action!==0||m||(y|=3)),y}let r=String.fromCharCode,d={DEFAULT:h=>{let m=[f(h,!1)+32,h.col+32,h.row+32];return m[0]>255||m[1]>255||m[2]>255?"":`\x1B[M${r(m[0])}${r(m[1])}${r(m[2])}`},SGR:h=>{let m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${f(h,!0)};${h.col};${h.row}${m}`},SGR_PIXELS:h=>{let m=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${f(h,!0)};${h.x};${h.y}${m}`}},_=class extends g.Disposable{constructor(h,m){super(),this._bufferService=h,this._coreService=m,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new l.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let y of Object.keys(v))this.addProtocol(y,v[y]);for(let y of Object.keys(d))this.addEncoding(y,d[y]);this.reset()}addProtocol(h,m){this._protocols[h]=m}addEncoding(h,m){this._encodings[h]=m}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let m=this._encodings[this._activeEncoding](h);return m&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(m):this._coreService.triggerDataEvent(m,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,m,y){if(y){if(h.x!==m.x||h.y!==m.y)return!1}else if(h.col!==m.col||h.row!==m.row)return!1;return h.button===m.button&&h.action===m.action&&h.ctrl===m.ctrl&&h.alt===m.alt&&h.shift===m.shift}};_=a([u(0,p.IBufferService),u(1,p.ICoreService)],_),e.CoreMouseService=_},6975:function(o,e,i){var a=this&&this.__decorate||function(_,h,m,y){var S,C=arguments.length,b=C<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,h,m,y);else for(var w=_.length-1;w>=0;w--)(S=_[w])&&(b=(C<3?S(b):C>3?S(h,m,b):S(h,m))||b);return C>3&&b&&Object.defineProperty(h,m,b),b},u=this&&this.__param||function(_,h){return function(m,y){h(m,y,_)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreService=void 0;let p=i(2585),l=i(8460),g=i(1439),v=i(844),f=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=class extends v.Disposable{constructor(_,h,m){super(),this._bufferService=_,this._logService=h,this._optionsService=m,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new l.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new l.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(f),this.decPrivateModes=(0,g.clone)(r)}reset(){this.modes=(0,g.clone)(f),this.decPrivateModes=(0,g.clone)(r)}triggerDataEvent(_,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let m=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&m.ybase!==m.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(y=>y.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(_))}};d=a([u(0,p.IBufferService),u(1,p.ILogService),u(2,p.IOptionsService)],d),e.CoreService=d},9074:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecorationService=void 0;let a=i(8055),u=i(8460),p=i(844),l=i(6106),g=0,v=0;class f extends p.Disposable{constructor(){super(),this._decorations=new l.SortedList(_=>_==null?void 0:_.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,p.toDisposable)(()=>{for(let _ of this._decorations.values())this._onDecorationRemoved.fire(_);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(_){if(_.marker.isDisposed)return;let h=new r(_);if(h){let m=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),m.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,h,m){var y,S,C;let b=0,w=0;for(let E of this._decorations.getKeyIterator(h))b=(y=E.options.x)!==null&&y!==void 0?y:0,w=b+((S=E.options.width)!==null&&S!==void 0?S:1),_>=b&&_<w&&(!m||((C=E.options.layer)!==null&&C!==void 0?C:"bottom")===m)&&(yield E)}forEachDecorationAtCell(_,h,m,y){this._decorations.forEachByKey(h,S=>{var C,b,w;g=(C=S.options.x)!==null&&C!==void 0?C:0,v=g+((b=S.options.width)!==null&&b!==void 0?b:1),_>=g&&_<v&&(!m||((w=S.options.layer)!==null&&w!==void 0?w:"bottom")===m)&&y(S)})}dispose(){for(let _ of this._decorations.values())this._onDecorationRemoved.fire(_);this.reset()}}e.DecorationService=f;class r extends p.Disposable{constructor(_){super(),this.options=_,this.isDisposed=!1,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationService=e.ServiceCollection=void 0;let a=i(2585),u=i(8343);class p{constructor(...g){this._entries=new Map;for(let[v,f]of g)this.set(v,f)}set(g,v){let f=this._entries.get(g);return this._entries.set(g,v),f}forEach(g){for(let[v,f]of this._entries.entries())g(v,f)}has(g){return this._entries.has(g)}get(g){return this._entries.get(g)}}e.ServiceCollection=p,e.InstantiationService=class{constructor(){this._services=new p,this._services.set(a.IInstantiationService,this)}setService(l,g){this._services.set(l,g)}getService(l){return this._services.get(l)}createInstance(l,...g){let v=(0,u.getServiceDependencies)(l).sort((d,_)=>d.index-_.index),f=[];for(let d of v){let _=this._services.get(d.id);if(!_)throw new Error(`[createInstance] ${l.name} depends on UNKNOWN service ${d.id}.`);f.push(_)}let r=v.length>0?v[0].index:g.length;if(g.length!==r)throw new Error(`[createInstance] First service dependency of ${l.name} at position ${r+1} conflicts with ${g.length} static arguments`);return new l(...g,...f)}}},7866:function(o,e,i){var a=this&&this.__decorate||function(f,r,d,_){var h,m=arguments.length,y=m<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,r,d,_);else for(var S=f.length-1;S>=0;S--)(h=f[S])&&(y=(m<3?h(y):m>3?h(r,d,y):h(r,d))||y);return m>3&&y&&Object.defineProperty(r,d,y),y},u=this&&this.__param||function(f,r){return function(d,_){r(d,_,f)}};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;let p=i(844),l=i(2585),g={debug:l.LogLevelEnum.DEBUG,info:l.LogLevelEnum.INFO,warn:l.LogLevelEnum.WARN,error:l.LogLevelEnum.ERROR,off:l.LogLevelEnum.OFF},v=class extends p.Disposable{constructor(f){super(),this._optionsService=f,this.logLevel=l.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=g[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(f){for(let r=0;r<f.length;r++)typeof f[r]=="function"&&(f[r]=f[r]())}_log(f,r,d){this._evalLazyOptionalParams(d),f.call(console,"xterm.js: "+r,...d)}debug(f,...r){this.logLevel<=l.LogLevelEnum.DEBUG&&this._log(console.log,f,r)}info(f,...r){this.logLevel<=l.LogLevelEnum.INFO&&this._log(console.info,f,r)}warn(f,...r){this.logLevel<=l.LogLevelEnum.WARN&&this._log(console.warn,f,r)}error(f,...r){this.logLevel<=l.LogLevelEnum.ERROR&&this._log(console.error,f,r)}};v=a([u(0,l.IOptionsService)],v),e.LogService=v},7302:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsService=e.DEFAULT_OPTIONS=void 0;let a=i(8460),u=i(6114),p=i(844);e.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:u.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let l=["normal","bold","100","200","300","400","500","600","700","800","900"];class g extends p.Disposable{constructor(f){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let r=Object.assign({},e.DEFAULT_OPTIONS);for(let d in f)if(d in r)try{let _=f[d];r[d]=this._sanitizeAndValidateOption(d,_)}catch(_){console.error(_)}this.rawOptions=r,this.options=Object.assign({},r),this._setupOptions()}onSpecificOptionChange(f,r){return this.onOptionChange(d=>{d===f&&r(this.rawOptions[f])})}onMultipleOptionChange(f,r){return this.onOptionChange(d=>{f.indexOf(d)!==-1&&r()})}_setupOptions(){let f=d=>{if(!(d in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},r=(d,_)=>{if(!(d in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);_=this._sanitizeAndValidateOption(d,_),this.rawOptions[d]!==_&&(this.rawOptions[d]=_,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let _={get:f.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this.options,d,_)}}_sanitizeAndValidateOption(f,r){switch(f){case"cursorStyle":if(r||(r=e.DEFAULT_OPTIONS[f]),!function(d){return d==="block"||d==="underline"||d==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${f}`);break;case"wordSeparator":r||(r=e.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=l.includes(r)?r:e.DEFAULT_OPTIONS[f];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${f} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${r}`);case"rows":case"cols":if(!r&&r!==0)throw new Error(`${f} must be numeric, value: ${r}`)}return r}}e.OptionsService=g},2660:function(o,e,i){var a=this&&this.__decorate||function(g,v,f,r){var d,_=arguments.length,h=_<3?v:r===null?r=Object.getOwnPropertyDescriptor(v,f):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(g,v,f,r);else for(var m=g.length-1;m>=0;m--)(d=g[m])&&(h=(_<3?d(h):_>3?d(v,f,h):d(v,f))||h);return _>3&&h&&Object.defineProperty(v,f,h),h},u=this&&this.__param||function(g,v){return function(f,r){v(f,r,g)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkService=void 0;let p=i(2585),l=class{constructor(g){this._bufferService=g,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(g){let v=this._bufferService.buffer;if(g.id===void 0){let m=v.addMarker(v.ybase+v.y),y={data:g,id:this._nextId++,lines:[m]};return m.onDispose(()=>this._removeMarkerFromLink(y,m)),this._dataByLinkId.set(y.id,y),y.id}let f=g,r=this._getEntryIdKey(f),d=this._entriesWithId.get(r);if(d)return this.addLineToLink(d.id,v.ybase+v.y),d.id;let _=v.addMarker(v.ybase+v.y),h={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(h,_)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(g,v){let f=this._dataByLinkId.get(g);if(f&&f.lines.every(r=>r.line!==v)){let r=this._bufferService.buffer.addMarker(v);f.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(f,r))}}getLinkData(g){var v;return(v=this._dataByLinkId.get(g))===null||v===void 0?void 0:v.data}_getEntryIdKey(g){return`${g.id};;${g.uri}`}_removeMarkerFromLink(g,v){let f=g.lines.indexOf(v);f!==-1&&(g.lines.splice(f,1),g.lines.length===0&&(g.data.id!==void 0&&this._entriesWithId.delete(g.key),this._dataByLinkId.delete(g.id)))}};l=a([u(0,p.IBufferService)],l),e.OscLinkService=l},8343:(o,e)=>{function i(a,u,p){u.di$target===u?u.di$dependencies.push({id:a,index:p}):(u.di$dependencies=[{id:a,index:p}],u.di$target=u)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(a){return a.di$dependencies||[]},e.createDecorator=function(a){if(e.serviceRegistry.has(a))return e.serviceRegistry.get(a);let u=function(p,l,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(u,p,g)};return u.toString=()=>a,e.serviceRegistry.set(a,u),u}},2585:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOscLinkService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;let a=i(8343);var u;e.IBufferService=(0,a.createDecorator)("BufferService"),e.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),e.ICoreService=(0,a.createDecorator)("CoreService"),e.ICharsetService=(0,a.createDecorator)("CharsetService"),e.IInstantiationService=(0,a.createDecorator)("InstantiationService"),(u=e.LogLevelEnum||(e.LogLevelEnum={}))[u.DEBUG=0]="DEBUG",u[u.INFO=1]="INFO",u[u.WARN=2]="WARN",u[u.ERROR=3]="ERROR",u[u.OFF=4]="OFF",e.ILogService=(0,a.createDecorator)("LogService"),e.IOptionsService=(0,a.createDecorator)("OptionsService"),e.IOscLinkService=(0,a.createDecorator)("OscLinkService"),e.IUnicodeService=(0,a.createDecorator)("UnicodeService"),e.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(o,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeService=void 0;let a=i(8460),u=i(225);e.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let p=new u.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let l=0,g=p.length;for(let v=0;v<g;++v){let f=p.charCodeAt(v);if(55296<=f&&f<=56319){if(++v>=g)return l+this.wcwidth(f);let r=p.charCodeAt(v);56320<=r&&r<=57343?f=1024*(f-55296)+r-56320+65536:l+=this.wcwidth(r)}l+=this.wcwidth(f)}return l}}}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let e=n(3236),i=n(9042),a=n(7975),u=n(7090),p=n(5741),l=n(8285),g=["cols","rows"];o.Terminal=class{constructor(v){this._core=new e.Terminal(v),this._addonManager=new p.AddonManager,this._publicOptions=Object.assign({},this._core.options);let f=d=>this._core.options[d],r=(d,_)=>{this._checkReadonlyOptions(d),this._core.options[d]=_};for(let d in this._core.options){let _={get:f.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this._publicOptions,d,_)}}_checkReadonlyOptions(v){if(g.includes(v))throw new Error(`Option "${v}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new a.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new u.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new l.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let v=this._core.coreService.decPrivateModes,f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:v.applicationCursorKeys,applicationKeypadMode:v.applicationKeypad,bracketedPasteMode:v.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:v.origin,reverseWraparoundMode:v.reverseWraparound,sendFocusMode:v.sendFocus,wraparoundMode:v.wraparound}}get options(){return this._publicOptions}set options(v){for(let f in v)this._publicOptions[f]=v[f]}blur(){this._core.blur()}focus(){this._core.focus()}resize(v,f){this._verifyIntegers(v,f),this._core.resize(v,f)}open(v){this._core.open(v)}attachCustomKeyEventHandler(v){this._core.attachCustomKeyEventHandler(v)}registerLinkProvider(v){return this._core.registerLinkProvider(v)}registerCharacterJoiner(v){return this._checkProposedApi(),this._core.registerCharacterJoiner(v)}deregisterCharacterJoiner(v){this._checkProposedApi(),this._core.deregisterCharacterJoiner(v)}registerMarker(v=0){return this._verifyIntegers(v),this._core.addMarker(v)}registerDecoration(v){var f,r,d;return this._checkProposedApi(),this._verifyPositiveIntegers((f=v.x)!==null&&f!==void 0?f:0,(r=v.width)!==null&&r!==void 0?r:0,(d=v.height)!==null&&d!==void 0?d:0),this._core.registerDecoration(v)}hasSelection(){return this._core.hasSelection()}select(v,f,r){this._verifyIntegers(v,f,r),this._core.select(v,f,r)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(v,f){this._verifyIntegers(v,f),this._core.selectLines(v,f)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(v){this._verifyIntegers(v),this._core.scrollLines(v)}scrollPages(v){this._verifyIntegers(v),this._core.scrollPages(v)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(v){this._verifyIntegers(v),this._core.scrollToLine(v)}clear(){this._core.clear()}write(v,f){this._core.write(v,f)}writeln(v,f){this._core.write(v),this._core.write(`\r
`,f)}paste(v){this._core.paste(v)}refresh(v,f){this._verifyIntegers(v,f),this._core.refresh(v,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(v){return this._addonManager.loadAddon(this,v)}static get strings(){return i}_verifyIntegers(...v){for(let f of v)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...v){for(let f of v)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}})(),c})()})});var ho=se((Hr,hs)=>{(function(t,s){typeof Hr=="object"&&typeof hs=="object"?hs.exports=s():typeof define=="function"&&define.amd?define([],s):typeof Hr=="object"?Hr.WebLinksAddon=s():t.WebLinksAddon=s()})(self,function(){return(()=>{"use strict";var t={6:(o,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkComputer=e.WebLinkProvider=void 0,e.WebLinkProvider=class{constructor(a,u,p,l={}){this._terminal=a,this._regex=u,this._handler=p,this._options=l}provideLinks(a,u){let p=i.computeLink(a,this._regex,this._terminal,this._handler);u(this._addCallbacks(p))}_addCallbacks(a){return a.map(u=>(u.leave=this._options.leave,u.hover=(p,l)=>{if(this._options.hover){let{range:g}=u;this._options.hover(p,l,g)}},u))}};class i{static computeLink(u,p,l,g){let v=new RegExp(p.source,(p.flags||"")+"g"),[f,r]=i._getWindowedLineStrings(u-1,l),d=f.join(""),_,h=[];for(;_=v.exec(d);){let m=_[0];try{let E=new URL(m),L=decodeURI(E.toString());if(m!==L&&m+"/"!==L)continue}catch(E){continue}let[y,S]=i._mapStrIdx(l,r,0,_.index),[C,b]=i._mapStrIdx(l,y,S,m.length);if(y===-1||S===-1||C===-1||b===-1)continue;let w={start:{x:S+1,y:y+1},end:{x:b,y:C+1}};h.push({range:w,text:m,activate:g})}return h}static _getWindowedLineStrings(u,p){let l,g=u,v=u,f=0,r="",d=[];if(l=p.buffer.active.getLine(u)){let _=l.translateToString(!0);if(l.isWrapped&&_[0]!==" "){for(f=0;(l=p.buffer.active.getLine(--g))&&f<2048&&(r=l.translateToString(!0),f+=r.length,d.push(r),l.isWrapped&&r.indexOf(" ")===-1););d.reverse()}for(d.push(_),f=0;(l=p.buffer.active.getLine(++v))&&l.isWrapped&&f<2048&&(r=l.translateToString(!0),f+=r.length,d.push(r),r.indexOf(" ")===-1););}return[d,g]}static _mapStrIdx(u,p,l,g){let v=u.buffer.active,f=v.getNullCell(),r=l;for(;g;){let d=v.getLine(p);if(!d)return[-1,-1];for(let _=r;_<d.length;++_){d.getCell(_,f);let h=f.getChars();if(f.getWidth()&&(g-=h.length||1,_===d.length-1&&h==="")){let m=v.getLine(p+1);m&&m.isWrapped&&(m.getCell(0,f),f.getWidth()===2&&(g+=1))}if(g<0)return[p,_]}p++,r=0}return[p,r]}}e.LinkComputer=i}},s={};function n(o){var e=s[o];if(e!==void 0)return e.exports;var i=s[o]={exports:{}};return t[o](i,i.exports,n),i.exports}var c={};return(()=>{var o=c;Object.defineProperty(o,"__esModule",{value:!0}),o.WebLinksAddon=void 0;let e=n(6),i=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function a(u,p){let l=window.open();if(l){try{l.opener=null}catch(g){}l.location.href=p}else console.warn("Opening link blocked as opener could not be cleared")}o.WebLinksAddon=class{constructor(u=a,p={}){this._handler=u,this._options=p}activate(u){this._terminal=u;let p=this._options,l=p.urlRegex||i;this._linkProvider=this._terminal.registerLinkProvider(new e.WebLinkProvider(this._terminal,l,this._handler,p))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),c})()})});var Zd={};X(Zd,{TerminalPlugin:()=>Xr,default:()=>Jd});module.exports=Xo(Zd);var zo=require("obsidian");var ve=require("obsidian");var _r=require("obsidian");var Cs=[0,"SIGINT","SIGTERM"],xs=500,Es=500;var Ot=(()=>{let{userAgent:t}=navigator;return t.includes("Win")?"win32":t.includes("Linux")||t.includes("X11")?"linux":t.includes("like Mac")?"ios":t.includes("Mac")?"darwin":t.includes("Android")?"android":"unknown"})(),pr=class{constructor(s){this.id=s}namespaced(s){return`${(s instanceof _r.Plugin?s.manifest:s).id}:${this.id}`}};function gr(t){return t instanceof Error?t:new Error(String(t))}function Ls(t,s,n,c){let o=t();return()=>c.replace(o,t()).replace(n,s())}function ks(t){return structuredClone(t)}function Vt(t){return(s,n)=>{t(c=>{try{s(c())}catch(o){n(o)}},c=>{try{n((c!=null?c:()=>{})())}catch(o){n(o)}})}}function Rs(t,s="text/plain; charset=UTF-8;",n=""){let c=document.createElement("a");c.target="_blank",c.download=n;let o=URL.createObjectURL(new Blob([t],{type:s}));try{c.href=o,c.click()}finally{URL.revokeObjectURL(o)}}function St(t,s){return t.includes(s)}function Ts(t,s){return"__type"in s?s.__type===t:!1}function He(t,s=0,n){let c=1e3*Math.max(s,0),o=new _r.Notice(t(),c);if(typeof n=="undefined")return o;let e=n.language.registerUse(()=>o.setMessage(t()));try{c===0?n.register(e):window.setTimeout(e,c)}catch(i){e()}return o}function Os(t,s,n=!1){let c=new IntersectionObserver((o,e)=>{var i;for(let a of n?o.reverse():[(i=o.last())!=null?i:{isIntersecting:!1}])if(a.isIntersecting){s(e,t,a);break}});return c.observe(t),c}function As(t){return window.open(t,"_blank","noreferrer")}function De(t,s=()=>"",n){console.error(`${s()}
`,t),He(t instanceof Error?()=>`${s()}
${t.name}: ${t.message}`:()=>`${s()}
${String(t)}`,0,n)}function Ds(t){let s=t.getViewType(),n=t.getDisplayText(),c=document.querySelector(`.workspace-tab-header[data-type="${s}"]`);if(c===null)return!1;let o=c.querySelector(".workspace-tab-header-inner-title");if(o===null)return!1;let e=o.textContent;return e===null?!1:(o.textContent=n,c.ariaLabel=n,document.title=document.title.replace(e,n),!0)}var Zr={};X(Zr,{commands:()=>Jo,default:()=>sa,errors:()=>Zo,menus:()=>Qo,name:()=>ea,notices:()=>ta,settings:()=>ra,views:()=>ia});var Jo={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Zo={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Qo={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},ea="Terminal",ta={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},ra={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},ia={terminal:{"display-name":"Terminal: {{- executable}}"}},sa={commands:Jo,errors:Zo,menus:Qo,name:ea,notices:ta,settings:ra,views:ia};var Qr={};X(Qr,{default:()=>la,menus:()=>na,settings:()=>aa,views:()=>oa});var na={"open-terminal-external-icon":"terminal-square","open-terminal-integrated-icon":"terminal","save-as-HTML-icon":"save"},oa={"terminal-icon":"terminal"},aa={"add-to-commands-icon":"terminal","add-to-context-menus-icon":"menu","enable-Windows-conhost-workaround-icon":"code","executable-list-icon":"terminal-square","hide-status-bar-icon":"eye-off","language-icon":"languages","notice-timeout-icon":"timer","python-executable-icon":"scaling","reset-icon":"reset"},la={menus:na,views:oa,settings:aa};var ei={};X(ei,{commands:()=>ca,default:()=>ga,errors:()=>ha,menus:()=>ua,name:()=>da,notices:()=>fa,settings:()=>pa,views:()=>_a});var ca={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},ha={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},ua={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},da="Terminal",fa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},pa={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},_a={terminal:{"display-name":"Terminal: {{- executable}}"}},ga={commands:ca,errors:ha,menus:ua,name:da,notices:fa,settings:pa,views:_a};var ti={};X(ti,{commands:()=>ma,default:()=>xa,errors:()=>va,menus:()=>ba,name:()=>ya,notices:()=>Sa,settings:()=>wa,views:()=>Ca});var ma={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},va={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},ba={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},ya="Terminal",Sa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},wa={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ca={terminal:{"display-name":"Terminal: {{- executable}}"}},xa={commands:ma,errors:va,menus:ba,name:ya,notices:Sa,settings:wa,views:Ca};var ri={};X(ri,{commands:()=>Ea,default:()=>Da,errors:()=>La,menus:()=>ka,name:()=>Ra,notices:()=>Ta,settings:()=>Oa,views:()=>Aa});var Ea={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},La={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},ka={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Ra="Terminal",Ta={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Oa={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Aa={terminal:{"display-name":"Terminal: {{- executable}}"}},Da={commands:Ea,errors:La,menus:ka,name:Ra,notices:Ta,settings:Oa,views:Aa};var ii={};X(ii,{commands:()=>Pa,default:()=>Wa,errors:()=>Ma,menus:()=>Ba,name:()=>Ia,notices:()=>Na,settings:()=>Ha,views:()=>Fa});var Pa={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Ma={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Ba={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Ia="Terminal",Na={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ha={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required on Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Fa={terminal:{"display-name":"Terminal: {{- executable}}"}},Wa={commands:Pa,errors:Ma,menus:Ba,name:Ia,notices:Na,settings:Ha,views:Fa};var si={};X(si,{commands:()=>Ua,default:()=>Ga,errors:()=>za,menus:()=>ja,name:()=>$a,notices:()=>qa,settings:()=>Ka,views:()=>Va});var Ua={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},za={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},ja={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},$a="Terminal",qa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Ka={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Va={terminal:{"display-name":"Terminal: {{- executable}}"}},Ga={commands:Ua,errors:za,menus:ja,name:$a,notices:qa,settings:Ka,views:Va};var ni={};X(ni,{commands:()=>Ya,default:()=>rl,errors:()=>Xa,menus:()=>Ja,name:()=>Za,notices:()=>Qa,settings:()=>el,views:()=>tl});var Ya={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Xa={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Ja={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Za="Terminal",Qa={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},el={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},tl={terminal:{"display-name":"Terminal: {{- executable}}"}},rl={commands:Ya,errors:Xa,menus:Ja,name:Za,notices:Qa,settings:el,views:tl};var oi={};X(oi,{commands:()=>il,default:()=>hl,errors:()=>sl,menus:()=>nl,name:()=>ol,notices:()=>al,settings:()=>ll,views:()=>cl});var il={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},sl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},nl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},ol="Terminal",al={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},ll={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},cl={terminal:{"display-name":"Terminal: {{- executable}}"}},hl={commands:il,errors:sl,menus:nl,name:ol,notices:al,settings:ll,views:cl};var ai={};X(ai,{commands:()=>ul,default:()=>vl,errors:()=>dl,menus:()=>fl,name:()=>pl,notices:()=>_l,settings:()=>gl,views:()=>ml});var ul={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},dl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},fl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},pl="Terminal",_l={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},gl={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},ml={terminal:{"display-name":"Terminal: {{- executable}}"}},vl={commands:ul,errors:dl,menus:fl,name:pl,notices:_l,settings:gl,views:ml};var li={};X(li,{commands:()=>bl,default:()=>Ll,errors:()=>yl,menus:()=>Sl,name:()=>wl,notices:()=>Cl,settings:()=>xl,views:()=>El});var bl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},yl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Sl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},wl="Terminal",Cl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},xl={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},El={terminal:{"display-name":"Terminal: {{- executable}}"}},Ll={commands:bl,errors:yl,menus:Sl,name:wl,notices:Cl,settings:xl,views:El};var ci={};X(ci,{commands:()=>kl,default:()=>Ml,errors:()=>Rl,menus:()=>Tl,name:()=>Ol,notices:()=>Al,settings:()=>Dl,views:()=>Pl});var kl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Rl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Tl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Ol="Terminal",Al={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Dl={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Pl={terminal:{"display-name":"Terminal: {{- executable}}"}},Ml={commands:kl,errors:Rl,menus:Tl,name:Ol,notices:Al,settings:Dl,views:Pl};var hi={};X(hi,{commands:()=>Bl,default:()=>zl,errors:()=>Il,menus:()=>Nl,name:()=>Hl,notices:()=>Fl,settings:()=>Wl,views:()=>Ul});var Bl={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Il={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Nl={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Hl="Terminal",Fl={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Wl={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ul={terminal:{"display-name":"Terminal: {{- executable}}"}},zl={commands:Bl,errors:Il,menus:Nl,name:Hl,notices:Fl,settings:Wl,views:Ul};var ui={};X(ui,{am:()=>jl,cs:()=>$l,da:()=>ql,de:()=>Kl,default:()=>fc,en:()=>Vl,es:()=>Gl,fa:()=>Yl,fr:()=>Xl,id:()=>Jl,it:()=>Zl,ja:()=>Ql,ko:()=>ec,nl:()=>tc,no:()=>rc,pl:()=>ic,pt:()=>sc,"pt-BR":()=>nc,ro:()=>oc,ru:()=>ac,sq:()=>lc,th:()=>cc,tr:()=>hc,"zh-Hans":()=>uc,"zh-Hant":()=>dc});var jl="\u12A0\u121B\u122D\u129B \u{1F6A7}",$l="\u010De\u0161tina \u{1F6A7}",ql="Dansk \u{1F6A7}",Kl="Deutsch \u{1F6A7}",Vl="English",Gl="Espa\xF1ol \u{1F6A7}",Yl="\u0641\u0627\u0631\u0633\u06CC \u{1F6A7}",Xl="fran\xE7ais \u{1F6A7}",Jl="Bahasa Indonesia \u{1F6A7}",Zl="Italiano \u{1F6A7}",Ql="\u65E5\u672C\u8A9E \u{1F6A7}",ec="\uD55C\uAD6D\uC5B4 \u{1F6A7}",tc="Nederlands \u{1F6A7}",rc="Norsk \u{1F6A7}",ic="j\u0119zyk polski \u{1F6A7}",sc="Portugu\xEAs \u{1F6A7}",nc="Portugues do Brasil \u{1F6A7}",oc="Rom\xE2n\u0103 \u{1F6A7}",ac="\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u{1F6A7}",lc="Shqip \u{1F6A7}",cc="\u0E44\u0E17\u0E22 \u{1F6A7}",hc="T\xFCrk\xE7e \u{1F6A7}",uc="\u7B80\u4F53\u4E2D\u6587",dc="\u7E41\u9AD4\u4E2D\u6587",fc={am:jl,cs:$l,da:ql,de:Kl,en:Vl,es:Gl,fa:Yl,fr:Xl,id:Jl,it:Zl,ja:Ql,ko:ec,nl:tc,no:rc,pl:ic,pt:sc,"pt-BR":nc,ro:oc,ru:ac,sq:lc,th:cc,tr:hc,"zh-Hans":uc,"zh-Hant":dc};var di={};X(di,{commands:()=>pc,default:()=>Sc,errors:()=>_c,menus:()=>gc,name:()=>mc,notices:()=>vc,settings:()=>bc,views:()=>yc});var pc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},_c={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},gc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},mc="Terminal",vc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},bc={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},yc={terminal:{"display-name":"Terminal: {{- executable}}"}},Sc={commands:pc,errors:_c,menus:gc,name:mc,notices:vc,settings:bc,views:yc};var fi={};X(fi,{commands:()=>wc,default:()=>Tc,errors:()=>Cc,menus:()=>xc,name:()=>Ec,notices:()=>Lc,settings:()=>kc,views:()=>Rc});var wc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Cc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},xc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Ec="Terminal",Lc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},kc={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Rc={terminal:{"display-name":"Terminal: {{- executable}}"}},Tc={commands:wc,errors:Cc,menus:xc,name:Ec,notices:Lc,settings:kc,views:Rc};var pi={};X(pi,{commands:()=>Oc,default:()=>Nc,errors:()=>Ac,menus:()=>Dc,name:()=>Pc,notices:()=>Mc,settings:()=>Bc,views:()=>Ic});var Oc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Ac={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Dc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Pc="Terminal",Mc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Bc={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Ic={terminal:{"display-name":"Terminal: {{- executable}}"}},Nc={commands:Oc,errors:Ac,menus:Dc,name:Pc,notices:Mc,settings:Bc,views:Ic};var _i={};X(_i,{commands:()=>Hc,default:()=>qc,errors:()=>Fc,menus:()=>Wc,name:()=>Uc,notices:()=>zc,settings:()=>jc,views:()=>$c});var Hc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Fc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Wc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Uc="Terminal",zc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},jc={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},$c={terminal:{"display-name":"Terminal: {{- executable}}"}},qc={commands:Hc,errors:Fc,menus:Wc,name:Uc,notices:zc,settings:jc,views:$c};var gi={};X(gi,{commands:()=>Kc,default:()=>Qc,errors:()=>Vc,menus:()=>Gc,name:()=>Yc,notices:()=>Xc,settings:()=>Jc,views:()=>Zc});var Kc={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Vc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Gc={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Yc="Terminal",Xc={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Jc={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Zc={terminal:{"display-name":"Terminal: {{- executable}}"}},Qc={commands:Kc,errors:Vc,menus:Gc,name:Yc,notices:Xc,settings:Jc,views:Zc};var mi={};X(mi,{commands:()=>eh,default:()=>ah,errors:()=>th,menus:()=>rh,name:()=>ih,notices:()=>sh,settings:()=>nh,views:()=>oh});var eh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},th={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},rh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},ih="Terminal",sh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},nh={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},oh={terminal:{"display-name":"Terminal: {{- executable}}"}},ah={commands:eh,errors:th,menus:rh,name:ih,notices:sh,settings:nh,views:oh};var vi={};X(vi,{commands:()=>lh,default:()=>_h,errors:()=>ch,menus:()=>hh,name:()=>uh,notices:()=>dh,settings:()=>fh,views:()=>ph});var lh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},ch={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},hh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},uh="Terminal",dh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},fh={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},ph={terminal:{"display-name":"Terminal: {{- executable}}"}},_h={commands:lh,errors:ch,menus:hh,name:uh,notices:dh,settings:fh,views:ph};var bi={};X(bi,{commands:()=>gh,default:()=>Ch,errors:()=>mh,menus:()=>vh,name:()=>bh,notices:()=>yh,settings:()=>Sh,views:()=>wh});var gh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},mh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},vh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},bh="Terminal",yh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Sh={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},wh={terminal:{"display-name":"Terminal: {{- executable}}"}},Ch={commands:gh,errors:mh,menus:vh,name:bh,notices:yh,settings:Sh,views:wh};var yi={};X(yi,{commands:()=>xh,default:()=>Ah,errors:()=>Eh,menus:()=>Lh,name:()=>kh,notices:()=>Rh,settings:()=>Th,views:()=>Oh});var xh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Eh={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Lh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},kh="Terminal",Rh={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Th={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Oh={terminal:{"display-name":"Terminal: {{- executable}}"}},Ah={commands:xh,errors:Eh,menus:Lh,name:kh,notices:Rh,settings:Th,views:Oh};var Si={};X(Si,{commands:()=>Dh,default:()=>Fh,errors:()=>Ph,menus:()=>Mh,name:()=>Bh,notices:()=>Ih,settings:()=>Nh,views:()=>Hh});var Dh={"open-terminal-external-root":"Open root in external terminal","open-terminal-external-current":"Open current folder in external terminal","open-terminal-integrated-root":"Open root in integrated terminal","open-terminal-integrated-current":"Open current folder in integrated terminal"},Ph={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","no-python-to-start-unix-pseudoterminal":"No Python to start Unix PTY","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}","unsupported-operation":"Unsupported operation","unsupported-platform":"Unsupported platform"},Mh={"open-terminal-external":"Open in external terminal","open-terminal-integrated":"Open in integrated terminal","save-as-HTML":"Save as HTML"},Bh="Terminal",Ih={"spawning-terminal":"Spawning terminal: {{- executable}}","terminal-exited":"Terminal exited: {{- code}}"},Nh={"add-to-commands":"Add to commands","add-to-context-menus":"Add to context menus","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executables:"Executables","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout.","python-executable":"Python executable","python-executable-description":"Required for Unix to start terminals. Clear field to disable Python.","python-executable-placeholder":"(Disabled)",reset:"Reset","reset-all":"Reset all"},Hh={terminal:{"display-name":"Terminal: {{- executable}}"}},Fh={commands:Dh,errors:Ph,menus:Mh,name:Bh,notices:Ih,settings:Nh,views:Hh};var wi={};X(wi,{commands:()=>Wh,default:()=>Vh,errors:()=>Uh,menus:()=>zh,name:()=>jh,notices:()=>$h,settings:()=>qh,views:()=>Kh});var Wh={"open-terminal-external-root":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-external-current":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332"},Uh={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72B6\u6001\u680F","error-spawning-terminal":"\u555F\u52A8\u7EC8\u7AEF\u65F6\u51FA\u9519","error-spawning-resizer":"\u555F\u52A8\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u65F6\u51FA\u9519","no-python-to-start-unix-pseudoterminal":"\u6CA1\u6709Python\u6765\u542F\u52A8Unix\u4F2A\u7EC8\u7AEF","resizer-disabled":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-operation":"\u4E0D\u652F\u6301\u6B64\u64CD\u4F5C","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},zh={"open-terminal-external":"\u5728\u5916\u90E8\u7EC8\u7AEF\u5F00\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7EC8\u7AEF\u5F00\u555F","save-as-HTML":"\u50A8\u5B58\u4E3A HTML"},jh="\u7EC8\u7AEF",$h={"spawning-terminal":"\u7EC8\u7AEF\u555F\u52A8\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7EC8\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},qh={"add-to-commands":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menus":"\u52A0\u5165\u81F3\u53F3\u952E\u9009\u5355","enable-Windows-conhost-workaround":"\u542F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u51B3\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u6267\u884C\u300Cconhost.exe\u300D\u6CA1\u6709\u521B\u5EFA\u89C6\u7A97\uFF0C\u8BF7\u7981\u7528\u3002\u65E0\u4FDD\u8BC1\u8FD9\u4F1A\u8D77\u4F5C\u7528\u3002",executables:"\u53EF\u6267\u884C\u6587\u4EF6","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"\u9690\u85CF\u72B6\u6001\u680F","hide-status-bar-options":{never:"\u4ECE\u4E0D",always:"\u603B\u662F",focused:"\u5F53\u805A\u7126\u7EC8\u7AEF\u65F6",running:"\u5F53\u6267\u884C\u7EC8\u7AEF\u65F6"},language:"\u8BED\u8A00","language-default":"\u4F7F\u7528\u5E94\u7528\u8BBE\u5B9A","language-description":"\u4EC5\u9002\u7528\u65BC\u6B64\u63D2\u4EF6\u3002\u6807\u6709\u{1F6A7}\u7684\u8BED\u8A00\u9700\u8981\u60A8\u5E2E\u52A9\u6765\u7FFB\u8BD1\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","notice-timeout-description":"\u8BBE\u4E3A 0 \u79D2\u662F\u65E0\u8D85\u65F6\u3002","python-executable":"Python \u53EF\u6267\u884C\u6587\u4EF6","python-executable-description":"\u4E8EUnix\u542F\u52A8\u7EC8\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u672C\u6846\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8BBE","reset-all":"\u91CD\u8BBE\u5168\u90E8"},Kh={terminal:{"display-name":"\u7EC8\u7AEF\uFF1A{{- executable}}"}},Vh={commands:Wh,errors:Uh,menus:zh,name:jh,notices:$h,settings:qh,views:Kh};var Ci={};X(Ci,{commands:()=>Gh,default:()=>tu,errors:()=>Yh,menus:()=>Xh,name:()=>Jh,notices:()=>Zh,settings:()=>Qh,views:()=>eu});var Gh={"open-terminal-external-root":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-external-current":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304","open-terminal-integrated-root":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304","open-terminal-integrated-current":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304"},Yh={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72C0\u614B\u6B04","error-spawning-terminal":"\u555F\u52D5\u7D42\u7AEF\u6642\u51FA\u932F","error-spawning-resizer":"\u555F\u52D5\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u6642\u51FA\u932F","no-python-to-start-unix-pseudoterminal":"\u6C92\u6709Python\u4F86\u555F\u52D5Unix\u507D\u7D42\u7AEF","resizer-disabled":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u610F\u5916\u9000\u51FA\uFF1A{{- code}}","unsupported-operation":"\u4E0D\u652F\u6301\u6B64\u64CD\u4F5C","unsupported-platform":"\u4E0D\u652F\u6301\u6B64\u5E73\u53F0"},Xh={"open-terminal-external":"\u5728\u5916\u90E8\u7D42\u7AEF\u958B\u555F","open-terminal-integrated":"\u5728\u6574\u5408\u5F0F\u7D42\u7AEF\u958B\u555F","save-as-HTML":"\u5132\u5B58\u70BA HTML"},Jh="\u7D42\u7AEF",Zh={"spawning-terminal":"\u7D42\u7AEF\u555F\u52D5\u4E2D\uFF1A{{- executable}}","terminal-exited":"\u7D42\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},Qh={"add-to-commands":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menus":"\u52A0\u5165\u81F3\u53F3\u9375\u9078\u55AE","enable-Windows-conhost-workaround":"\u555F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u6C7A\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u57F7\u884C\u300Cconhost.exe\u300D\u6C92\u6709\u5275\u5EFA\u8996\u7A97\uFF0C\u8ACB\u7981\u7528\u3002\u7121\u4FDD\u8B49\u9019\u6703\u8D77\u4F5C\u7528\u3002",executables:"\u57F7\u884C\u6A94","executable-list":{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"hide-status-bar":"\u96B1\u85CF\u72C0\u614B\u6B04","hide-status-bar-options":{never:"\u5F9E\u4E0D",always:"\u7E3D\u662F",focused:"\u7576\u805A\u7126\u7D42\u7AEF\u6642",running:"\u7576\u57F7\u884C\u7D42\u7AEF\u6642"},language:"\u8A9E\u8A00","language-default":"\u4F7F\u7528\u61C9\u7528\u7A0B\u5F0F\u8A2D\u5B9A","language-description":"\u50C5\u9069\u7528\u65BC\u6B64\u5916\u639B\u7A0B\u5F0F\u3002\u6A19\u6709\u{1F6A7}\u7684\u8A9E\u8A00\u9700\u8981\u60A8\u5E6B\u52A9\u4F86\u7FFB\u8B6F\uFF01","notice-timeout":"\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","notice-timeout-description":"\u8A2D\u70BA 0 \u79D2\u662F\u7121\u8D85\u6642\u3002","python-executable":"Python \u57F7\u884C\u6A94","python-executable-description":"\u65BCUnix\u555F\u52D5\u7D42\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u5B57\u57DF\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09",reset:"\u91CD\u8A2D","reset-all":"\u91CD\u8A2D\u5168\u90E8"},eu={terminal:{"display-name":"\u7D42\u7AEF\uFF1A{{- executable}}"}},tu={commands:Gh,errors:Yh,menus:Xh,name:Jh,notices:Zh,settings:Qh,views:eu};var Ps=!1,Q="translation",wt="en",Ms={default:[wt],zh:["zh-Hans",wt],"zh-CN":["zh-Hans","zh",wt],"zh-TW":["zh-Hant","zh",wt]},Gt={am:{[Q]:Zr},cs:{[Q]:ei},da:{[Q]:ti},de:{[Q]:ri},en:{[Q]:ii,asset:Qr,language:ui},es:{[Q]:si},fa:{[Q]:ni},fr:{[Q]:oi},id:{[Q]:ai},it:{[Q]:li},ja:{[Q]:ci},ko:{[Q]:hi},nl:{[Q]:di},no:{[Q]:fi},pl:{[Q]:pi},pt:{[Q]:_i},"pt-BR":{[Q]:gi},ro:{[Q]:mi},ru:{[Q]:vi},sq:{[Q]:bi},th:{[Q]:yi},tr:{[Q]:Si},"zh-Hans":{[Q]:wi},"zh-Hant":{[Q]:Ci}};(function(s){})(Gt[wt].language);var rr=require("child_process");var ns=require("util"),eo=require("fs"),to=Tt(Jn());var Zn=`# -*- coding: UTF-8
# dependencies: (none)

import fcntl as _fcntl
import os as _os
import pty as _pty
import selectors as _selectors
import struct as _struct
import sys as _sys
import termios as _termios
import typing as _typing

if _sys.platform != "win32":
    CHUNK_SIZE = 1024
    STDIN = _sys.stdin.fileno()
    STDOUT = _sys.stdout.fileno()
    CMDIO = 3

    pid: int
    pty_fd: int
    pid, pty_fd = _pty.fork()  # type: ignore
    if pid == 0:
        _os.execvpe(
            _sys.argv[1], _sys.argv[1:], _os.environ | {"TERM": "xterm-256color"}
        )

    def _write_all(fd: int, data: bytes) -> None:
        while data:
            data = data[_os.write(fd, data) :]

    with _selectors.DefaultSelector() as selector:
        running = True

        def pipe_pty():
            try:
                data = _os.read(pty_fd, CHUNK_SIZE)
            except OSError:
                data = b""
            if not data:
                selector.unregister(pty_fd)
                global running
                running = False
                return
            _write_all(STDOUT, data)

        def pipe_stdin():
            data = _os.read(STDIN, CHUNK_SIZE)
            if not data:
                selector.unregister(STDIN)
                return
            _write_all(pty_fd, data)

        def process_cmdio():
            data = _os.read(CMDIO, CHUNK_SIZE)
            if not data:
                selector.unregister(CMDIO)
                return
            for line in data.decode("UTF-8", "strict").splitlines():
                rows, columns = _typing.cast(
                    tuple[int, int],
                    tuple(int(ss.strip()) for ss in line.split("x", 2)),
                )
                _fcntl.ioctl(
                    pty_fd,
                    _termios.TIOCSWINSZ,
                    _struct.pack("HHHH", columns, rows, 0, 0),
                )

        selector.register(pty_fd, _selectors.EVENT_READ, pipe_pty)
        selector.register(STDIN, _selectors.EVENT_READ, pipe_stdin)
        selector.register(CMDIO, _selectors.EVENT_READ, process_cmdio)
        while running:
            for key, _ in selector.select():
                key.data()

    _sys.exit(_os.waitstatus_to_exitcode(_os.waitpid(pid, 0)[1]))

_sys.exit(1)
`;var Qn=`# -*- coding: UTF-8 -*-
# dependencies: psutil, pywinctl

import contextlib as _contextlib
import psutil as _psutil
import pywinctl as _pywinctl  # type: ignore
import pywintypes as _pywintypes
import sys as _sys
import types as _types
import typing as _typing
import win32con as _win32con
import win32console as _win32console
import win32file as _win32file
import win32gui as _win32gui
import win32process as _win32process

if _sys.platform == "win32":

    def main() -> None:
        pid = int(input("PID: "))
        print(f"received: {pid}")
        proc = _psutil.Process(pid)
        procs = (proc,) + tuple(proc.children(recursive=True))
        print(f"process(es): {procs}")
        pids: _typing.Mapping[int, _psutil.Process] = _types.MappingProxyType(
            {proc.pid: proc for proc in procs}
        )

        windows: _typing.Collection[_pywinctl.Window] = _pywinctl.getAllWindows()
        print(f"window(s): {windows}")
        for win in windows:
            win_pid = win_to_pid(win)
            if win_pid in pids:
                resizer(pids[win_pid], win)
                return

    def win_to_pid(window: _pywinctl.Window) -> int:
        return _win32process.GetWindowThreadProcessId(window.getHandle())[1]

    def resizer(process: _psutil.Process, window: _pywinctl.BaseWindow) -> None:
        print(f"window: {window}")
        r_in = resizer_in(process)
        r_out = resizer_out(process, window)
        next(r_out)
        for size in r_in:
            r_out.send(size)

    def resizer_in(process: _psutil.Process) -> _typing.Iterator[tuple[int, int]]:
        while True:
            size0 = ""
            while not size0:  # stdin watchdog triggers this loop
                if not process.is_running():
                    return
                size0 = input("size: ")
            size = _typing.cast(
                tuple[int, int],
                tuple(int(s.strip()) for s in size0.split("x", 2)),
            )
            print(f"received: {'x'.join(map(str, size))}")
            yield size

    def resizer_out(
        process: _psutil.Process, window: _pywinctl.BaseWindow
    ) -> _typing.Generator[None, tuple[int, int], None]:
        window.hide()

        @_typing.final
        class ConsoleScreenBufferInfo(_typing.TypedDict):
            Size: _win32console.PyCOORDType
            CursorPosition: _win32console.PyCOORDType
            Attributes: int
            Window: _win32console.PySMALL_RECTType
            MaximumWindowSize: _win32console.PyCOORDType

        def ignore_error(func: _typing.Callable[[], None]) -> bool:
            try:
                func()
                return True
            except _pywintypes.error:
                return False

        @_contextlib.contextmanager
        def attach_console(
            pid: int,
        ) -> _typing.Iterator[_win32console.PyConsoleScreenBufferType]:
            try:
                _win32console.AttachConsole(pid)  # type: ignore
                yield (_win32console.PyConsoleScreenBufferType)(  # type: ignore
                    _win32file.CreateFile(
                        "CONOUT$",
                        _win32file.GENERIC_READ | _win32file.GENERIC_WRITE,
                        _win32file.FILE_SHARE_WRITE,
                        None,
                        _win32file.OPEN_EXISTING,
                        0,
                        None,
                    )  # GetStdHandle gives the piped handle instead of the console handle
                )
            finally:
                _win32console.FreeConsole()

        _win32console.FreeConsole()
        with attach_console(process.pid) as console:
            while True:
                columns: int
                rows: int
                columns, rows = yield
                info: ConsoleScreenBufferInfo = (
                    console.GetConsoleScreenBufferInfo()  # type: ignore
                )
                old_rect = window.getClientFrame()
                old_actual_rect = window.size
                old_cols: int = (
                    info["Window"].Right - info["Window"].Left + 1  # type: ignore
                )
                old_rows: int = (
                    info["Window"].Bottom - info["Window"].Top + 1  # type: ignore
                )
                old_width = old_rect.right - old_rect.left
                old_height = old_rect.bottom - old_rect.top
                size = (
                    int(old_width * columns / old_cols)
                    + old_actual_rect.width
                    - old_width,
                    int(old_height * rows / old_rows)
                    + old_actual_rect.height
                    - old_height,
                )
                print(f"pixel size: {size}")
                setters = [
                    # almost accurate, works for alternate screen buffer
                    lambda: _win32gui.SetWindowPos(
                        _typing.cast(int, window.getHandle()),
                        None,
                        0,
                        0,
                        *size,
                        _win32con.SWP_NOACTIVATE
                        | _win32con.SWP_NOREDRAW
                        | _win32con.SWP_NOZORDER,
                    ),
                    # accurate, SetConsoleWindowInfo does not work for alternate screen buffer
                    lambda: console.SetConsoleWindowInfo(  # type: ignore
                        True,
                        _win32console.PySMALL_RECTType(0, 0, columns - 1, old_rows - 1),  # type: ignore
                    ),
                    lambda: console.SetConsoleScreenBufferSize(
                        _win32console.PyCOORDType(columns, old_rows)  # type: ignore
                    ),
                    lambda: console.SetConsoleWindowInfo(  # type: ignore
                        True,
                        _win32console.PySMALL_RECTType(0, 0, columns - 1, rows - 1),  # type: ignore
                    ),
                    lambda: console.SetConsoleScreenBufferSize(
                        _win32console.PyCOORDType(columns, rows)  # type: ignore
                    ),
                ]
                if old_cols < columns:
                    setters[1], setters[2] = setters[2], setters[1]
                if old_rows < rows:
                    setters[3], setters[4] = setters[4], setters[3]
                for setter in setters:
                    ignore_error(setter)
                print(f"resized")

    if __name__ == "__main__":
        main()
`;function ro(t){t.write(`${`
\x1B[K`.repeat(t.rows)}\x1B[H`)}var ir=class{constructor(s){this.plugin=s}},Or=class extends ir{constructor(n,c,o,e){super(n);pe(this,"shell");this.shell=new Promise(Vt(i=>{i(()=>{let a=(0,rr.spawn)(c,e!=null?e:[],{cwd:o,detached:!0,shell:!0,stdio:["pipe","pipe","pipe"]});return a.unref(),a})}))}async pipe(n){return Promise.reject(new Error(this.plugin.language.i18n.t("errors.unsupported-operation")))}async resize(n,c){return Promise.reject(new Error(this.plugin.language.i18n.t("errors.unsupported-operation")))}async once(n,c){return(await this.shell).once(n,(o,e)=>{var i;return void c((i=o!=null?o:e)!=null?i:NaN)}),this}},sr,Nt,Ht,Ft,Tr,tr=class extends ir{constructor(n,c,o,e){super(n);pe(this,"shell");pe(this,"conhost");te(this,sr,void 0);te(this,Nt,(()=>{let{plugin:n}=this,{settings:c,language:o}=n,{pythonExecutable:e}=c,{i18n:i}=o;if(e==="")return null;let a=(0,rr.spawn)(e,["-c",Qn],{stdio:["pipe","pipe","pipe"],windowsHide:!0}).once("exit",(u,p)=>{u!==0&&He(()=>i.t("errors.resizer-exited-unexpectedly",{code:u!=null?u:p}),0,n)}).once("error",u=>{De(u,()=>i.t("errors.error-spawning-resizer"),n)});return a.stderr.on("data",u=>{console.error(u.toString())}),a})());te(this,Ht,(0,ns.promisify)((n,c)=>{let o=K(this,Nt);if(o===null)return c(new Error(this.plugin.language.i18n.t("errors.resizer-disabled"))),!1;try{return o.stdin.write(n,c)}catch(e){c(gr(e))}return!1}));this.conhost=n.settings.enableWindowsConhostWorkaround;let i=(0,to.fileSync)({discardDescriptor:!0}),a=u=>{var l,g;let p=["C:\\Windows\\System32\\cmd.exe","/C",`${V(l=tr,Ft,Tr).call(l,c)} ${(e!=null?e:[]).map(v=>{var f;return V(f=tr,Ft,Tr).call(f,v)}).join(" ")} & call echo %^ERRORLEVEL% >${V(g=tr,Ft,Tr).call(g,i.name)}`];return this.conhost&&p.unshift("C:\\Windows\\System32\\conhost.exe"),(0,rr.spawn)(p.shift(),p,{cwd:o,stdio:["pipe","pipe","pipe"],windowsHide:!u,windowsVerbatimArguments:!0})};this.shell=new Promise(Vt(u=>{let p=K(this,Nt);if(p===null){u(()=>a(!1));return}let l=()=>{try{u(()=>{var r;let f=a(!0);return K(this,Ht).call(this,`${(r=f.pid)!=null?r:-1}
`).then(()=>{let d=n.registerInterval(window.setInterval(()=>void K(this,Ht).call(this,`
`).catch(()=>{}),Es)),_=()=>{window.clearInterval(d)};p.once("exit",_).once("error",_)}).catch(d=>{try{De(d,()=>this.plugin.language.i18n.t("errors.error-spawning-resizer"),this.plugin)}finally{p.kill()}}),f})}finally{p.removeListener("error",v)}},g=p;function v(){try{u(()=>a(!1))}finally{g.removeListener("spawn",l)}}p.once("spawn",l).once("error",v)})),yt(this,sr,this.shell.then(async u=>new Promise(Vt((p,l)=>u.once("exit",(g,v)=>{p(()=>{var r;let f=parseInt((0,eo.readFileSync)(i.name,{encoding:"utf-8",flag:"r"}).trim(),10);return isNaN(f)?(r=g!=null?g:v)!=null?r:NaN:f})}).once("error",g=>{l(()=>g)})))).finally(i.removeCallback.bind(i)))}async resize(n,c){return new Promise(Vt((o,e)=>{let i=K(this,Nt);if(i===null){e(()=>new Error(this.plugin.language.i18n.t("errors.resizer-disabled")));return}let a=(...p)=>{e(()=>new Error(p.toString()))},u=p=>{e(()=>p)};i.once("exit",a).once("error",u),K(this,Ht).call(this,`${n}x${c}
`).then(()=>{o(()=>{})},p=>{e(()=>gr(p))}).finally(()=>void i.removeListener("exit",a).removeListener("error",u))}))}async once(n,c){return K(this,sr).then(c).catch(()=>{}),Promise.resolve(this)}async pipe(n){let c=await this.shell;ro(n),c.stdout.once("data",o=>{c.stdout.on("data",e=>{n.write(e)}),!this.conhost&&n.write(o)}),c.stderr.on("data",o=>{n.write(o)}),n.onData(o=>c.stdin.write(o))}},Rr=tr;sr=new WeakMap,Nt=new WeakMap,Ht=new WeakMap,Ft=new WeakSet,Tr=function(n){return`"${n.replace('"','\\"')}"`.replace(/(?<meta>[()%!^"<>&|])/gu,"^$<meta>")},te(Rr,Ft);var Ar=class extends ir{constructor(n,c,o,e){super(n);pe(this,"shell");try{let{settings:i,language:a}=n,{pythonExecutable:u}=i;if(u==="")throw new Error(a.i18n.t("errors.no-python-to-start-unix-pseudoterminal"));let p=(0,rr.spawn)(u,["-c",Zn,c].concat(e!=null?e:[]),{cwd:o,stdio:["pipe","pipe","pipe","pipe"],windowsHide:!0});p.stderr.on("data",l=>{console.error(l.toString())}),this.shell=Promise.resolve(p)}catch(i){this.shell=Promise.reject(i)}}async once(n,c){return(await this.shell).once(n,(o,e)=>{var i;return void c((i=o!=null?o:e)!=null?i:NaN)}),this}async pipe(n){let c=await this.shell;ro(n),c.stdout.on("data",o=>{n.write(o)}),c.stderr.on("data",o=>{n.write(o)}),n.onData(o=>c.stdin.write(o))}async resize(n,c){let e=await this.shell,i=e.stdio[3];await(0,ns.promisify)((a,u)=>{try{return i.write(a,u)}catch(p){u(gr(p))}return!1})(`${n}x${c}
`)}},pt;(c=>(c.PLATFORM_PTYS={darwin:Ar,linux:Ar,win32:Rr},c.SUPPORTED_PLATFORMS=Object.keys(c.PLATFORM_PTYS),c.PLATFORM_PTY=St(c.SUPPORTED_PLATFORMS,Ot)?c.PLATFORM_PTYS[Ot]:null))(pt||(pt={}));var _t;(c=>{c.HIDE_STATUS_BAR_OPTIONS=["never","always","focused","running"];async function s(o,e){Object.assign(o,await e.loadData())}c.load=s;async function n(o,e){await e.saveData(o)}c.save=n})(_t||(_t={}));var Ce={command:!0,contextMenu:!0,enableWindowsConhostWorkaround:!0,executables:{darwin:{args:[],name:"/bin/zsh"},linux:{args:[],name:"/bin/sh"},win32:{args:[],name:"C:\\Windows\\System32\\cmd.exe"}},hideStatusBar:"focused",language:"",noticeTimeout:5,pythonExecutable:"python3"},xe,Be,Pr,io,be,Re,Dr=class extends ve.PluginSettingTab{constructor(n){super(n.app,n);this.plugin=n;te(this,xe);te(this,Pr);te(this,be)}display(){let{containerEl:n,plugin:c}=this,{settings:o,language:e,statusBarHider:i}=c,{i18n:a}=e;n.empty(),n.createEl("h1",{text:a.t("name")}),new ve.Setting(n).setName(a.t("settings.language")).setDesc(a.t("settings.language-description")).addDropdown(V(this,xe,Be).call(this,()=>o.language,u=>void(o.language=u),{post:(u,p)=>void u.onChange(async l=>{await p(l),await e.changeLanguage(o.language),this.display()}),pre:u=>void u.addOption("",a.t("settings.language-default")).addOptions(Object.fromEntries(Object.entries(Gt.en.language).filter(p=>p.every(l=>typeof l=="string"))))})).addExtraButton(V(this,be,Re).call(this,()=>void(o.language=Ce.language),a.t("asset:settings.language-icon"),{post:(u,p)=>void u.onClick(async()=>{await p(),await e.changeLanguage(o.language),this.display()})})),new ve.Setting(n).setName(a.t("settings.reset-all")).addButton(V(this,be,Re).call(this,async()=>{Object.assign(o,Ce),await e.changeLanguage(o.language)})),new ve.Setting(n).setName(a.t("settings.add-to-commands")).addToggle(V(this,xe,Be).call(this,()=>o.command,u=>void(o.command=u))).addExtraButton(V(this,be,Re).call(this,()=>void(o.command=Ce.command),a.t("asset:settings.add-to-commands-icon"))),new ve.Setting(n).setName(a.t("settings.add-to-context-menus")).addToggle(V(this,xe,Be).call(this,()=>o.contextMenu,u=>void(o.contextMenu=u))).addExtraButton(V(this,be,Re).call(this,()=>void(o.contextMenu=Ce.contextMenu),a.t("asset:settings.add-to-context-menus-icon"))),new ve.Setting(n).setName(a.t("settings.hide-status-bar")).addDropdown(V(this,xe,Be).call(this,()=>o.hideStatusBar,u=>St(_t.HIDE_STATUS_BAR_OPTIONS,u)?(o.hideStatusBar=u,!0):!1,{post:(u,p)=>void u.onChange(async l=>{await p(l),i.update()}),pre:u=>void u.addOptions(Object.fromEntries(_t.HIDE_STATUS_BAR_OPTIONS.map(p=>[p,a.t(`settings.hide-status-bar-options.${p}`)])))})).addExtraButton(V(this,be,Re).call(this,()=>void(o.hideStatusBar=Ce.hideStatusBar),a.t("asset:settings.hide-status-bar-icon"),{post:(u,p)=>void u.onClick(async()=>{await p(),i.update()})})),new ve.Setting(n).setName(a.t("settings.notice-timeout")).setDesc(a.t("settings.notice-timeout-description")).addText(V(this,xe,Be).call(this,()=>o.noticeTimeout.toString(),V(this,Pr,io).call(this,u=>void(o.noticeTimeout=u)))).addExtraButton(V(this,be,Re).call(this,()=>void(o.noticeTimeout=Ce.noticeTimeout),a.t("asset:settings.notice-timeout-icon"))),new ve.Setting(n).setName(a.t("settings.python-executable")).setDesc(a.t("settings.python-executable-description")).addText(V(this,xe,Be).call(this,()=>o.pythonExecutable,u=>void(o.pythonExecutable=u),{post:u=>void u.setPlaceholder(a.t("settings.python-executable-placeholder"))})).addExtraButton(V(this,be,Re).call(this,()=>void(o.pythonExecutable=Ce.pythonExecutable),a.t("asset:settings.python-executable-icon"))),n.createEl("h2",{text:a.t("settings.executables")});for(let u of pt.SUPPORTED_PLATFORMS)new ve.Setting(n).setName(a.t(`settings.executable-list.${u}`)).addText(V(this,xe,Be).call(this,()=>o.executables[u].name,p=>void(o.executables[u].name=p))).addExtraButton(V(this,be,Re).call(this,()=>void(o.executables[u].name=Ce.executables[u].name),a.t("asset:settings.executable-list-icon")));new ve.Setting(n).setName(a.t("settings.enable-Windows-conhost-workaround")).setDesc(a.t("settings.enable-Windows-conhost-workaround-description")).addToggle(V(this,xe,Be).call(this,()=>o.enableWindowsConhostWorkaround,u=>void(o.enableWindowsConhostWorkaround=u))).addExtraButton(V(this,be,Re).call(this,()=>void(o.enableWindowsConhostWorkaround=Ce.enableWindowsConhostWorkaround),a.t("asset:settings.enable-Windows-conhost-workaround-icon")))}};xe=new WeakSet,Be=function(n,c,o={}){return e=>{var a,u;((a=o.pre)!=null?a:()=>{})(e);let i=async p=>{let l=await c(p,e,n);typeof l=="boolean"&&!l||await _t.save(this.plugin.settings,this.plugin)};e.setValue(n()).onChange(i),((u=o.post)!=null?u:()=>{})(e,i)}},Pr=new WeakSet,io=function(n,c=!1){return async(o,e,i)=>{let a=Number(o);if(!(c?Number.isSafeInteger(a):isFinite(a)))return e.setValue(i()),!1;let u=await n(a,e,i);return!(typeof u=="boolean"&&!u)}},be=new WeakSet,Re=function(n,c=this.plugin.language.i18n.t("asset:settings.reset-icon"),o={}){return e=>{var a,u;((a=o.pre)!=null?a:()=>{})(e);let i=async()=>{let p=await n(e);if(typeof p=="boolean"&&!p)return;let l=_t.save(this.plugin.settings,this.plugin);this.display(),await l};e.setTooltip(this.plugin.language.i18n.t("settings.reset")).setIcon(c).onClick(i),((u=o.post)!=null?u:()=>{})(e,i)}};var mt=require("obsidian");var no=Tt(so());var Mr=class{constructor(s){this.terminal=s;pe(this,"serializer",new no.SerializeAddon);this.terminal.loadAddon(this.serializer)}unserialize(s){this.terminal.resize(s.columns,s.rows),this.terminal.write(s.data)}serialize(){return{columns:this.terminal.cols,data:this.serializer.serialize({excludeAltBuffer:!0,excludeModes:!0}),rows:this.terminal.rows}}};var Ur=require("path");var uo=Tt(oo()),fo=Tt(ao()),po=Tt(co()),_o=Tt(ho());var kt,ue,or,Ie,Wt,Fr,ar,us,Wr,go,gt=class extends mt.ItemView{constructor(n,c){super(c);this.plugin=n;te(this,ar);te(this,Wr);te(this,kt,{__type:gt.State.TYPE,args:[],cwd:"",executable:""});te(this,ue,new po.Terminal({allowProposedApi:!0}));te(this,or,{fit:new uo.FitAddon,search:new fo.SearchAddon,webLinks:new _o.WebLinksAddon((n,c)=>As(c))});te(this,Ie,void 0);te(this,Wt,new Mr(K(this,ue)));te(this,Fr,(0,mt.debounce)(async(n,c)=>{var o;try{await((o=K(this,Ie))==null?void 0:o.resize(n,c)),K(this,ue).resize(n,c),this.plugin.app.workspace.requestSaveLayout()}catch(e){}},xs,!1));for(let o of Object.values(K(this,or)))K(this,ue).loadAddon(o);K(this,ue).onWriteParsed(this.plugin.app.workspace.requestSaveLayout)}async setState(n,c){if(await super.setState(n,c),!Ts(gt.State.TYPE,n)||typeof K(this,Ie)!="undefined")return;yt(this,kt,n);let{plugin:o}=this,{i18n:e}=o.language;if(pt.PLATFORM_PTY===null){this.leaf.detach();return}try{yt(this,Ie,new pt.PLATFORM_PTY(o,n.executable,n.cwd,n.args));let i=await K(this,Ie).shell;this.register(i.kill.bind(i)),await K(this,Ie).once("exit",u=>{try{this.leaf.detach()}finally{He(()=>e.t("notices.terminal-exited",{code:u}),St(Cs,u)?o.settings.noticeTimeout:0,o)}}),i.once("error",u=>{try{De(u,()=>e.t("errors.error-spawning-terminal"),o)}finally{this.leaf.detach()}});let{serial:a}=n;typeof a!="undefined"&&(K(this,Wt).unserialize(a),K(this,ue).resize(a.columns,a.rows),K(this,ue).write(a.data)),await K(this,Ie).pipe(K(this,ue))}catch(i){try{De(i,()=>e.t("errors.error-spawning-terminal"),o)}finally{this.leaf.detach()}}}getState(){return K(this,kt).serial=K(this,Wt).serialize(),Object.assign(super.getState(),K(this,kt))}onResize(){super.onResize();let{containerEl:n}=this;if(n.offsetWidth<=0||n.offsetHeight<=0)return;let{fit:c}=K(this,or),o=c.proposeDimensions();typeof o!="undefined"&&(c.fit(),K(this,Fr).call(this,o.cols,o.rows))}getDisplayText(){return this.plugin.language.i18n.t(`views.${gt.type.id}.display-name`,{executable:V(this,ar,us).call(this)})}getIcon(){return this.plugin.language.i18n.t(`asset:views.${gt.type.id}-icon`)}getViewType(){return gt.namespacedViewType}onPaneMenu(n,c){super.onPaneMenu(n,c);let{leaf:o,plugin:e}=this,{i18n:i}=e.language;n.addSeparator().addItem(a=>a.setTitle(i.t("menus.save-as-HTML")).setIcon(i.t("asset:menus.save-as-HTML-icon")).onClick(()=>{let u=K(this,ue),p=()=>{Rs(K(this,Wt).serializer.serializeAsHTML({includeGlobalBackground:!1,onlySelection:!1}),"text/html; charset=UTF-8;",`${V(this,ar,us).call(this)}.html`)};if(typeof u.element=="undefined"){let{workspace:l}=e.app,g=l.getMostRecentLeaf(),v=u.onRender(()=>{try{p()}finally{try{g!==null&&l.setActiveLeaf(g)}finally{v.dispose()}}});try{l.setActiveLeaf(o)}catch(f){v.dispose()}return}p()}))}async onOpen(){await super.onOpen();let{containerEl:n,plugin:c}=this,{app:o,language:e,statusBarHider:i}=c;n.empty(),n.createDiv({},a=>{let u=Os(a,p=>{try{this.register(()=>{K(this,ue).dispose()}),K(this,ue).open(a)}finally{p.disconnect()}});this.register(()=>{u.disconnect()})}),this.registerEvent(o.workspace.on("active-leaf-change",a=>{if(a===this.leaf){K(this,ue).focus();return}K(this,ue).blur()})),this.register(e.registerUse(()=>Ds(this))),this.register(i.hide(V(this,Wr,go).bind(this))),this.registerEvent(o.workspace.on("active-leaf-change",i.update.bind(i)))}},de=gt;kt=new WeakMap,ue=new WeakMap,or=new WeakMap,Ie=new WeakMap,Wt=new WeakMap,Fr=new WeakMap,ar=new WeakSet,us=function(){let{executable:n}=K(this,kt);return(0,Ur.basename)(n,(0,Ur.extname)(n))},Wr=new WeakSet,go=function(){let{plugin:n}=this;switch(n.settings.hideStatusBar){case"focused":return n.app.workspace.getActiveViewOfType(gt)===this;case"running":return!0;default:return!1}},pe(de,"type",new pr("terminal")),pe(de,"namespacedViewType");(s=>{let t;(c=>c.TYPE="8d54e44a-32e7-4297-8ae2-cff88e92ce28")(t=s.State||(s.State={}))})(de||(de={}));function mo(t){let s=["root","current"],n=["external","integrated"],{app:c,settings:o,language:e}=t,{i18n:i}=e,a=(u,p)=>l=>!1;if(t.registerView(de.type.namespaced(t),u=>new de(t,u)),St(pt.SUPPORTED_PLATFORMS,Ot)){let u=Ot,p=c.vault.adapter,l=async(v,f)=>{let r=o.executables[u];switch(He(()=>i.t("notices.spawning-terminal",{executable:r.name}),o.noticeTimeout,t),f){case"external":{let d=new Or(t,r.name,v,r.args),_=await d.shell;return _.once("error",h=>{De(h,()=>i.t("errors.error-spawning-terminal"),t)}),new Promise((h,m)=>{_.once("spawn",h).once("error",m)})}case"integrated":{let{workspace:d}=c,_=d.getLeavesOfType(de.type.namespaced(t)),h={__type:de.State.TYPE,args:r.args,cwd:v,executable:r.name};return(()=>{let m=_.last();return typeof m=="undefined"?d.getLeaf("split","horizontal"):(d.setActiveLeaf(m,{focus:!1}),d.getLeaf("tab"))})().setViewState({active:!0,state:h,type:de.type.namespaced(t)})}default:throw new TypeError(f)}},g=(v,f)=>{v.addSeparator();for(let r of n)v.addItem(d=>d.setTitle(i.t(`menus.open-terminal-${r}`)).setIcon(i.t(`asset:menus.open-terminal-${r}-icon`)).onClick(async()=>l(p.getFullPath(f.path),r)))};a=(v,f)=>r=>{if(!o.command)return!1;switch(f){case"root":return r||l(p.getBasePath(),v).catch(()=>{}),!0;case"current":{let d=c.workspace.getActiveFile();return d===null?!1:(r||l(p.getFullPath(d.parent.path),v).catch(()=>{}),!0)}default:throw new TypeError(f)}},t.registerEvent(c.workspace.on("file-menu",(v,f)=>{o.contextMenu&&g(v,f instanceof mt.TFolder?f:f.parent)})),t.registerEvent(c.workspace.on("editor-menu",(v,f,r)=>{!o.contextMenu||r instanceof mt.MarkdownView||r.file===null||g(v,r.file.parent)}))}for(let u of n)for(let p of s){let l=`open-terminal-${u}-${p}`,g=()=>i.t(`commands.${l}`);t.addCommand({checkCallback:a(u,p),id:l,get name(){return g()},set name(v){g=Ls(()=>i.t(`commands.${l}`),()=>i.t("name"),i.t("name",{lng:wt}),v)}})}}function he(t){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},he(t)}function ye(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ds(t,s){if(he(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var c=n.call(t,s||"default");if(he(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function lr(t){var s=ds(t,"string");return he(s)==="symbol"?s:String(s)}function vo(t,s){for(var n=0;n<s.length;n++){var c=s[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,lr(c.key),c)}}function Se(t,s,n){return s&&vo(t.prototype,s),n&&vo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cr(t,s){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,o){return c.__proto__=o,c},cr(t,s)}function Ut(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&cr(t,s)}function Rt(t,s){if(s&&(he(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ee(t)}function we(t){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},we(t)}function Te(t,s,n){return s=lr(s),s in t?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n,t}function fs(t){if(Array.isArray(t))return t}function ps(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zr(t,s){(s==null||s>t.length)&&(s=t.length);for(var n=0,c=new Array(s);n<s;n++)c[n]=t[n];return c}function _s(t,s){if(t){if(typeof t=="string")return zr(t,s);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zr(t,s)}}function gs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(t){return fs(t)||ps(t)||_s(t)||gs()}function bo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function yo(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?bo(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}var wd={type:"logger",log:function(s){this.output("log",s)},warn:function(s){this.output("warn",s)},error:function(s){this.output("error",s)},output:function(s,n){console&&console[s]&&console[s].apply(console,n)}},Cd=function(){function t(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ye(this,t),this.init(s,n)}return Se(t,[{key:"init",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=c.prefix||"i18next:",this.logger=n||wd,this.options=c,this.debug=c.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return this.forward(c,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,c,o,e){return e&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(o).concat(this.prefix," ").concat(n[0])),this.logger[c](n))}},{key:"create",value:function(n){return new t(this.logger,yo(yo({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new t(this.logger,n)}}]),t}(),Ae=new Cd,bt=function(){function t(){ye(this,t),this.observers={}}return Se(t,[{key:"on",value:function(n,c){var o=this;return n.split(" ").forEach(function(e){o.observers[e]=o.observers[e]||[],o.observers[e].push(c)}),this}},{key:"off",value:function(n,c){if(this.observers[n]){if(!c){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(o){return o!==c})}}},{key:"emit",value:function(n){for(var c=arguments.length,o=new Array(c>1?c-1:0),e=1;e<c;e++)o[e-1]=arguments[e];if(this.observers[n]){var i=[].concat(this.observers[n]);i.forEach(function(u){u.apply(void 0,o)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(u){u.apply(u,[n].concat(o))})}}}]),t}();function hr(){var t,s,n=new Promise(function(c,o){t=c,s=o});return n.resolve=t,n.reject=s,n}function So(t){return t==null?"":""+t}function xd(t,s,n){t.forEach(function(c){s[c]&&(n[c]=s[c])})}function bs(t,s,n){function c(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function o(){return!t||typeof t=="string"}for(var e=typeof s!="string"?[].concat(s):s.split(".");e.length>1;){if(o())return{};var i=c(e.shift());!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={}}return o()?{}:{obj:t,k:c(e.shift())}}function wo(t,s,n){var c=bs(t,s,Object),o=c.obj,e=c.k;o[e]=n}function Ed(t,s,n,c){var o=bs(t,s,Object),e=o.obj,i=o.k;e[i]=e[i]||[],c&&(e[i]=e[i].concat(n)),c||e[i].push(n)}function qr(t,s){var n=bs(t,s),c=n.obj,o=n.k;if(c)return c[o]}function Co(t,s,n){var c=qr(t,n);return c!==void 0?c:qr(s,n)}function No(t,s,n){for(var c in s)c!=="__proto__"&&c!=="constructor"&&(c in t?typeof t[c]=="string"||t[c]instanceof String||typeof s[c]=="string"||s[c]instanceof String?n&&(t[c]=s[c]):No(t[c],s[c],n):t[c]=s[c]);return t}function zt(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Ld={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function kd(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(s){return Ld[s]}):t}var Vr=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Rd=[" ",",","?","!",";"];function Td(t,s,n){s=s||"",n=n||"";var c=Rd.filter(function(a){return s.indexOf(a)<0&&n.indexOf(a)<0});if(c.length===0)return!0;var o=new RegExp("(".concat(c.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),e=!o.test(t);if(!e){var i=t.indexOf(n);i>0&&!o.test(t.substring(0,i))&&(e=!0)}return e}function xo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function jr(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?xo(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function Od(t){var s=Ad();return function(){var c=we(t),o;if(s){var e=we(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Rt(this,o)}}function Ad(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ho(t,s){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[s])return t[s];for(var c=s.split(n),o=t,e=0;e<c.length;++e){if(!o||typeof o[c[e]]=="string"&&e+1<c.length)return;if(o[c[e]]===void 0){for(var i=2,a=c.slice(e,e+i).join(n),u=o[a];u===void 0&&c.length>e+i;)i++,a=c.slice(e,e+i).join(n),u=o[a];if(u===void 0)return;if(u===null)return null;if(s.endsWith(a)){if(typeof u=="string")return u;if(a&&typeof u[a]=="string")return u[a]}var p=c.slice(e+i).join(n);return p?Ho(u,p,n):void 0}o=o[c[e]]}return o}}var Dd=function(t){Ut(n,t);var s=Od(n);function n(c){var o,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return ye(this,n),o=s.call(this),Vr&&bt.call(Ee(o)),o.data=c||{},o.options=e,o.options.keySeparator===void 0&&(o.options.keySeparator="."),o.options.ignoreJSONStructure===void 0&&(o.options.ignoreJSONStructure=!0),o}return Se(n,[{key:"addNamespaces",value:function(o){this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}},{key:"removeNamespaces",value:function(o){var e=this.options.ns.indexOf(o);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,p=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,l=[o,e];i&&typeof i!="string"&&(l=l.concat(i)),i&&typeof i=="string"&&(l=l.concat(u?i.split(u):i)),o.indexOf(".")>-1&&(l=o.split("."));var g=qr(this.data,l);return g||!p||typeof i!="string"?g:Ho(this.data&&this.data[o]&&this.data[o][e],i,u)}},{key:"addResource",value:function(o,e,i,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},p=this.options.keySeparator;p===void 0&&(p=".");var l=[o,e];i&&(l=l.concat(p?i.split(p):i)),o.indexOf(".")>-1&&(l=o.split("."),a=e,e=l[1]),this.addNamespaces(e),wo(this.data,l,a),u.silent||this.emit("added",o,e,i,a)}},{key:"addResources",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in i)(typeof i[u]=="string"||Object.prototype.toString.apply(i[u])==="[object Array]")&&this.addResource(o,e,u,i[u],{silent:!0});a.silent||this.emit("added",o,e,i)}},{key:"addResourceBundle",value:function(o,e,i,a,u){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},l=[o,e];o.indexOf(".")>-1&&(l=o.split("."),a=i,i=e,e=l[1]),this.addNamespaces(e);var g=qr(this.data,l)||{};a?No(g,i,u):g=jr(jr({},g),i),wo(this.data,l,g),p.silent||this.emit("added",o,e,i)}},{key:"removeResourceBundle",value:function(o,e){this.hasResourceBundle(o,e)&&delete this.data[o][e],this.removeNamespaces(e),this.emit("removed",o,e)}},{key:"hasResourceBundle",value:function(o,e){return this.getResource(o,e)!==void 0}},{key:"getResourceBundle",value:function(o,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?jr(jr({},{}),this.getResource(o,e)):this.getResource(o,e)}},{key:"getDataByLanguage",value:function(o){return this.data[o]}},{key:"hasLanguageSomeTranslations",value:function(o){var e=this.getDataByLanguage(o),i=e&&Object.keys(e)||[];return!!i.find(function(a){return e[a]&&Object.keys(e[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(bt),Fo={processors:{},addPostProcessor:function(s){this.processors[s.name]=s},handle:function(s,n,c,o,e){var i=this;return s.forEach(function(a){i.processors[a]&&(n=i.processors[a].process(n,c,o,e))}),n}};function Eo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function fe(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Eo(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function Pd(t){var s=Md();return function(){var c=we(t),o;if(s){var e=we(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Rt(this,o)}}function Md(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var Lo={},ko=function(t){Ut(n,t);var s=Pd(n);function n(c){var o,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ye(this,n),o=s.call(this),Vr&&bt.call(Ee(o)),xd(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],c,Ee(o)),o.options=e,o.options.keySeparator===void 0&&(o.options.keySeparator="."),o.logger=Ae.create("translator"),o}return Se(n,[{key:"changeLanguage",value:function(o){o&&(this.language=o)}},{key:"exists",value:function(o){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(o==null)return!1;var i=this.resolve(o,e);return i&&i.res!==void 0}},{key:"extractFromKey",value:function(o,e){var i=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");var a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,u=e.ns||this.options.defaultNS||[],p=i&&o.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!Td(o,i,a);if(p&&!l){var g=o.match(this.interpolator.nestingRegexp);if(g&&g.length>0)return{key:o,namespaces:u};var v=o.split(i);(i!==a||i===a&&this.options.ns.indexOf(v[0])>-1)&&(u=v.shift()),o=v.join(a)}return typeof u=="string"&&(u=[u]),{key:o,namespaces:u}}},{key:"translate",value:function(o,e,i){var a=this;if(he(e)!=="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),o==null)return"";Array.isArray(o)||(o=[String(o)]);var u=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,p=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,l=this.extractFromKey(o[o.length-1],e),g=l.key,v=l.namespaces,f=v[v.length-1],r=e.lng||this.language,d=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(r&&r.toLowerCase()==="cimode"){if(d){var _=e.nsSeparator||this.options.nsSeparator;return u?(h.res="".concat(f).concat(_).concat(g),h):"".concat(f).concat(_).concat(g)}return u?(h.res=g,h):g}var h=this.resolve(o,e),m=h&&h.res,y=h&&h.usedKey||g,S=h&&h.exactUsedKey||g,C=Object.prototype.toString.apply(m),b=["[object Number]","[object Function]","[object RegExp]"],w=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,L=typeof m!="string"&&typeof m!="boolean"&&typeof m!="number";if(E&&m&&L&&b.indexOf(C)<0&&!(typeof w=="string"&&C==="[object Array]")){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,m,fe(fe({},e),{},{ns:v})):"key '".concat(g," (").concat(this.language,")' returned an object instead of string.");return u?(h.res=R,h):R}if(p){var T=C==="[object Array]",B=T?[]:{},H=T?S:y;for(var F in m)if(Object.prototype.hasOwnProperty.call(m,F)){var x="".concat(H).concat(p).concat(F);B[F]=this.translate(x,fe(fe({},e),{joinArrays:!1,ns:v})),B[F]===x&&(B[F]=m[F])}m=B}}else if(E&&typeof w=="string"&&C==="[object Array]")m=m.join(w),m&&(m=this.extendTranslation(m,o,e,i));else{var k=!1,O=!1,P=e.count!==void 0&&typeof e.count!="string",N=n.hasDefaultValue(e),z=P?this.pluralResolver.getSuffix(r,e.count,e):"",q=e["defaultValue".concat(z)]||e.defaultValue;!this.isValidLookup(m)&&N&&(k=!0,m=q),this.isValidLookup(m)||(O=!0,m=g);var W=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,$=W&&O?void 0:m,D=N&&q!==m&&this.options.updateMissing;if(O||k||D){if(this.logger.log(D?"updateKey":"missingKey",r,f,g,D?q:m),p){var A=this.resolve(g,fe(fe({},e),{},{keySeparator:!1}));A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],I=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&I&&I[0])for(var U=0;U<I.length;U++)M.push(I[U]);else this.options.saveMissingTo==="all"?M=this.languageUtils.toResolveHierarchy(e.lng||this.language):M.push(e.lng||this.language);var Z=function(ee,ne,ie){var Y=N&&ie!==m?ie:$;a.options.missingKeyHandler?a.options.missingKeyHandler(ee,f,ne,Y,D,e):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(ee,f,ne,Y,D,e),a.emit("missingKey",ee,f,ne,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?M.forEach(function(j){a.pluralResolver.getSuffixes(j,e).forEach(function(ee){Z([j],g+ee,e["defaultValue".concat(ee)]||q)})}):Z(M,g,q))}m=this.extendTranslation(m,o,e,h,i),O&&m===g&&this.options.appendNamespaceToMissingKey&&(m="".concat(f,":").concat(g)),(O||k)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(f,":").concat(g):g,k?m:void 0):m=this.options.parseMissingKeyHandler(m))}return u?(h.res=m,h):m}},{key:"extendTranslation",value:function(o,e,i,a,u){var p=this;if(this.i18nFormat&&this.i18nFormat.parse)o=this.i18nFormat.parse(o,fe(fe({},this.options.interpolation.defaultVariables),i),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init(fe(fe({},i),{interpolation:fe(fe({},this.options.interpolation),i.interpolation)}));var l=typeof o=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),g;if(l){var v=o.match(this.interpolator.nestingRegexp);g=v&&v.length}var f=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(f=fe(fe({},this.options.interpolation.defaultVariables),f)),o=this.interpolator.interpolate(o,f,i.lng||this.language,i),l){var r=o.match(this.interpolator.nestingRegexp),d=r&&r.length;g<d&&(i.nest=!1)}i.nest!==!1&&(o=this.interpolator.nest(o,function(){for(var m=arguments.length,y=new Array(m),S=0;S<m;S++)y[S]=arguments[S];return u&&u[0]===y[0]&&!i.context?(p.logger.warn("It seems you are nesting recursively key: ".concat(y[0]," in key: ").concat(e[0])),null):p.translate.apply(p,y.concat([e]))},i)),i.interpolation&&this.interpolator.reset()}var _=i.postProcess||this.options.postProcess,h=typeof _=="string"?[_]:_;return o!=null&&h&&h.length&&i.applyPostProcessor!==!1&&(o=Fo.handle(h,o,e,this.options&&this.options.postProcessPassResolved?fe({i18nResolved:a},i):i,this)),o}},{key:"resolve",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,u,p,l,g;return typeof o=="string"&&(o=[o]),o.forEach(function(v){if(!e.isValidLookup(a)){var f=e.extractFromKey(v,i),r=f.key;u=r;var d=f.namespaces;e.options.fallbackNS&&(d=d.concat(e.options.fallbackNS));var _=i.count!==void 0&&typeof i.count!="string",h=_&&!i.ordinal&&i.count===0&&e.pluralResolver.shouldUseIntlApi(),m=i.context!==void 0&&(typeof i.context=="string"||typeof i.context=="number")&&i.context!=="",y=i.lngs?i.lngs:e.languageUtils.toResolveHierarchy(i.lng||e.language,i.fallbackLng);d.forEach(function(S){e.isValidLookup(a)||(g=S,!Lo["".concat(y[0],"-").concat(S)]&&e.utils&&e.utils.hasLoadedNamespace&&!e.utils.hasLoadedNamespace(g)&&(Lo["".concat(y[0],"-").concat(S)]=!0,e.logger.warn('key "'.concat(u,'" for languages "').concat(y.join(", "),`" won't get resolved as namespace "`).concat(g,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(function(C){if(!e.isValidLookup(a)){l=C;var b=[r];if(e.i18nFormat&&e.i18nFormat.addLookupKeys)e.i18nFormat.addLookupKeys(b,r,C,S,i);else{var w;_&&(w=e.pluralResolver.getSuffix(C,i.count,i));var E="".concat(e.options.pluralSeparator,"zero");if(_&&(b.push(r+w),h&&b.push(r+E)),m){var L="".concat(r).concat(e.options.contextSeparator).concat(i.context);b.push(L),_&&(b.push(L+w),h&&b.push(L+E))}}for(var R;R=b.pop();)e.isValidLookup(a)||(p=R,a=e.getResource(C,S,R,i))}}))})}}),{res:a,usedKey:u,exactUsedKey:p,usedLng:l,usedNS:g}}},{key:"isValidLookup",value:function(o){return o!==void 0&&!(!this.options.returnNull&&o===null)&&!(!this.options.returnEmptyString&&o==="")}},{key:"getResource",value:function(o,e,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(o,e,i,a):this.resourceStore.getResource(o,e,i,a)}}],[{key:"hasDefaultValue",value:function(o){var e="defaultValue";for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&e===i.substring(0,e.length)&&o[i]!==void 0)return!0;return!1}}]),n}(bt);function vs(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Ro=function(){function t(s){ye(this,t),this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ae.create("languageUtils")}return Se(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var c=n.split("-");return c.length===2||(c.pop(),c[c.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(c.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var c=n.split("-");return this.formatLanguageCode(c[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var c=["hans","hant","latn","cyrl","cans","mong","arab"],o=n.split("-");return this.options.lowerCaseLng?o=o.map(function(e){return e.toLowerCase()}):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),c.indexOf(o[1].toLowerCase())>-1&&(o[1]=vs(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),c.indexOf(o[1].toLowerCase())>-1&&(o[1]=vs(o[1].toLowerCase())),c.indexOf(o[2].toLowerCase())>-1&&(o[2]=vs(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var c=this;if(!n)return null;var o;return n.forEach(function(e){if(!o){var i=c.formatLanguageCode(e);(!c.options.supportedLngs||c.isSupportedCode(i))&&(o=i)}}),!o&&this.options.supportedLngs&&n.forEach(function(e){if(!o){var i=c.getLanguagePartFromCode(e);if(c.isSupportedCode(i))return o=i;o=c.options.supportedLngs.find(function(a){if(a.indexOf(i)===0)return a})}}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}},{key:"getFallbackCodes",value:function(n,c){if(!n)return[];if(typeof n=="function"&&(n=n(c)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!c)return n.default||[];var o=n[c];return o||(o=n[this.getScriptPartFromCode(c)]),o||(o=n[this.formatLanguageCode(c)]),o||(o=n[this.getLanguagePartFromCode(c)]),o||(o=n.default),o||[]}},{key:"toResolveHierarchy",value:function(n,c){var o=this,e=this.getFallbackCodes(c||this.options.fallbackLng||[],n),i=[],a=function(p){p&&(o.isSupportedCode(p)?i.push(p):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(p)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(n))):typeof n=="string"&&a(this.formatLanguageCode(n)),e.forEach(function(u){i.indexOf(u)<0&&a(o.formatLanguageCode(u))}),i}}]),t}(),Bd=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Id={1:function(s){return Number(s>1)},2:function(s){return Number(s!=1)},3:function(s){return 0},4:function(s){return Number(s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2)},5:function(s){return Number(s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5)},6:function(s){return Number(s==1?0:s>=2&&s<=4?1:2)},7:function(s){return Number(s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2)},8:function(s){return Number(s==1?0:s==2?1:s!=8&&s!=11?2:3)},9:function(s){return Number(s>=2)},10:function(s){return Number(s==1?0:s==2?1:s<7?2:s<11?3:4)},11:function(s){return Number(s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3)},12:function(s){return Number(s%10!=1||s%100==11)},13:function(s){return Number(s!==0)},14:function(s){return Number(s==1?0:s==2?1:s==3?2:3)},15:function(s){return Number(s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2)},16:function(s){return Number(s%10==1&&s%100!=11?0:s!==0?1:2)},17:function(s){return Number(s==1||s%10==1&&s%100!=11?0:1)},18:function(s){return Number(s==0?0:s==1?1:2)},19:function(s){return Number(s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3)},20:function(s){return Number(s==1?0:s==0||s%100>0&&s%100<20?1:2)},21:function(s){return Number(s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0)},22:function(s){return Number(s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3)}},Nd=["v1","v2","v3"],To={zero:0,one:1,two:2,few:3,many:4,other:5};function Hd(){var t={};return Bd.forEach(function(s){s.lngs.forEach(function(n){t[n]={numbers:s.nr,plurals:Id[s.fc]}})}),t}var Fd=function(){function t(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ye(this,t),this.languageUtils=s,this.options=n,this.logger=Ae.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Hd()}return Se(t,[{key:"addRule",value:function(n,c){this.rules[n]=c}},{key:"getRule",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:c.ordinal?"ordinal":"cardinal"})}catch(o){return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getRule(n,c);return this.shouldUseIntlApi()?o&&o.resolvedOptions().pluralCategories.length>1:o&&o.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,c){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,o).map(function(e){return"".concat(c).concat(e)})}},{key:"getSuffixes",value:function(n){var c=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.getRule(n,o);return e?this.shouldUseIntlApi()?e.resolvedOptions().pluralCategories.sort(function(i,a){return To[i]-To[a]}).map(function(i){return"".concat(c.options.prepend).concat(i)}):e.numbers.map(function(i){return c.getSuffix(n,i,o)}):[]}},{key:"getSuffix",value:function(n,c){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=this.getRule(n,o);return e?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(e.select(c)):this.getSuffixRetroCompatible(e,c):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,c){var o=this,e=n.noAbs?n.plurals(c):n.plurals(Math.abs(c)),i=n.numbers[e];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));var a=function(){return o.options.prepend&&i.toString()?o.options.prepend+i.toString():i.toString()};return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?"_plural_".concat(i.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?a():this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString()}},{key:"shouldUseIntlApi",value:function(){return!Nd.includes(this.options.compatibilityJSON)}}]),t}();function Oo(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Le(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Oo(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}var Wd=function(){function t(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ye(this,t),this.logger=Ae.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||function(n){return n},this.init(s)}return Se(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var c=n.interpolation;this.escape=c.escape!==void 0?c.escape:kd,this.escapeValue=c.escapeValue!==void 0?c.escapeValue:!0,this.useRawValueToEscape=c.useRawValueToEscape!==void 0?c.useRawValueToEscape:!1,this.prefix=c.prefix?zt(c.prefix):c.prefixEscaped||"{{",this.suffix=c.suffix?zt(c.suffix):c.suffixEscaped||"}}",this.formatSeparator=c.formatSeparator?c.formatSeparator:c.formatSeparator||",",this.unescapePrefix=c.unescapeSuffix?"":c.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":c.unescapeSuffix||"",this.nestingPrefix=c.nestingPrefix?zt(c.nestingPrefix):c.nestingPrefixEscaped||zt("$t("),this.nestingSuffix=c.nestingSuffix?zt(c.nestingSuffix):c.nestingSuffixEscaped||zt(")"),this.nestingOptionsSeparator=c.nestingOptionsSeparator?c.nestingOptionsSeparator:c.nestingOptionsSeparator||",",this.maxReplaces=c.maxReplaces?c.maxReplaces:1e3,this.alwaysFormat=c.alwaysFormat!==void 0?c.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var c="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(c,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(n,c,o,e){var i=this,a,u,p,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function g(_){return _.replace(/\$/g,"$$$$")}var v=function(h){if(h.indexOf(i.formatSeparator)<0){var m=Co(c,l,h);return i.alwaysFormat?i.format(m,void 0,o,Le(Le(Le({},e),c),{},{interpolationkey:h})):m}var y=h.split(i.formatSeparator),S=y.shift().trim(),C=y.join(i.formatSeparator).trim();return i.format(Co(c,l,S),C,o,Le(Le(Le({},e),c),{},{interpolationkey:S}))};this.resetRegExp();var f=e&&e.missingInterpolationHandler||this.options.missingInterpolationHandler,r=e&&e.interpolation&&e.interpolation.skipOnVariables!==void 0?e.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,d=[{regex:this.regexpUnescape,safeValue:function(h){return g(h)}},{regex:this.regexp,safeValue:function(h){return i.escapeValue?g(i.escape(h)):g(h)}}];return d.forEach(function(_){for(p=0;a=_.regex.exec(n);){var h=a[1].trim();if(u=v(h),u===void 0)if(typeof f=="function"){var m=f(n,a,e);u=typeof m=="string"?m:""}else if(e&&e.hasOwnProperty(h))u="";else if(r){u=a[0];continue}else i.logger.warn("missed to pass in variable ".concat(h," for interpolating ").concat(n)),u="";else typeof u!="string"&&!i.useRawValueToEscape&&(u=So(u));var y=_.safeValue(u);if(n=n.replace(a[0],y),r?(_.regex.lastIndex+=u.length,_.regex.lastIndex-=a[0].length):_.regex.lastIndex=0,p++,p>=i.maxReplaces)break}}),n}},{key:"nest",value:function(n,c){var o=this,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,u;function p(f,r){var d=this.nestingOptionsSeparator;if(f.indexOf(d)<0)return f;var _=f.split(new RegExp("".concat(d,"[ ]*{"))),h="{".concat(_[1]);f=_[0],h=this.interpolate(h,u);var m=h.match(/'/g),y=h.match(/"/g);(m&&m.length%2===0&&!y||y.length%2!==0)&&(h=h.replace(/'/g,'"'));try{u=JSON.parse(h),r&&(u=Le(Le({},r),u))}catch(S){return this.logger.warn("failed parsing options string in nesting for key ".concat(f),S),"".concat(f).concat(d).concat(h)}return delete u.defaultValue,f}for(;i=this.nestingRegexp.exec(n);){var l=[];u=Le({},e),u.applyPostProcessor=!1,delete u.defaultValue;var g=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){var v=i[1].split(this.formatSeparator).map(function(f){return f.trim()});i[1]=v.shift(),l=v,g=!0}if(a=c(p.call(this,i[1].trim(),u),u),a&&i[0]===n&&typeof a!="string")return a;typeof a!="string"&&(a=So(a)),a||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(n)),a=""),g&&(a=l.reduce(function(f,r){return o.format(f,r,e.lng,Le(Le({},e),{},{interpolationkey:i[1].trim()}))},a.trim())),n=n.replace(i[0],a),this.regexp.lastIndex=0}return n}}]),t}();function Ao(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function vt(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Ao(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ao(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function Ud(t){var s=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var c=t.split("(");s=c[0].toLowerCase().trim();var o=c[1].substring(0,c[1].length-1);if(s==="currency"&&o.indexOf(":")<0)n.currency||(n.currency=o.trim());else if(s==="relativetime"&&o.indexOf(":")<0)n.range||(n.range=o.trim());else{var e=o.split(";");e.forEach(function(i){if(i){var a=i.split(":"),u=ms(a),p=u[0],l=u.slice(1),g=l.join(":").trim().replace(/^'+|'+$/g,"");n[p.trim()]||(n[p.trim()]=g),g==="false"&&(n[p.trim()]=!1),g==="true"&&(n[p.trim()]=!0),isNaN(g)||(n[p.trim()]=parseInt(g,10))}})}}return{formatName:s,formatOptions:n}}function jt(t){var s={};return function(c,o,e){var i=o+JSON.stringify(e),a=s[i];return a||(a=t(o,e),s[i]=a),a(c)}}var zd=function(){function t(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ye(this,t),this.logger=Ae.create("formatter"),this.options=s,this.formats={number:jt(function(n,c){var o=new Intl.NumberFormat(n,c);return function(e){return o.format(e)}}),currency:jt(function(n,c){var o=new Intl.NumberFormat(n,vt(vt({},c),{},{style:"currency"}));return function(e){return o.format(e)}}),datetime:jt(function(n,c){var o=new Intl.DateTimeFormat(n,vt({},c));return function(e){return o.format(e)}}),relativetime:jt(function(n,c){var o=new Intl.RelativeTimeFormat(n,vt({},c));return function(e){return o.format(e,c.range||"day")}}),list:jt(function(n,c){var o=new Intl.ListFormat(n,vt({},c));return function(e){return o.format(e)}})},this.init(s)}return Se(t,[{key:"init",value:function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},o=c.interpolation;this.formatSeparator=o.formatSeparator?o.formatSeparator:o.formatSeparator||","}},{key:"add",value:function(n,c){this.formats[n.toLowerCase().trim()]=c}},{key:"addCached",value:function(n,c){this.formats[n.toLowerCase().trim()]=jt(c)}},{key:"format",value:function(n,c,o,e){var i=this,a=c.split(this.formatSeparator),u=a.reduce(function(p,l){var g=Ud(l),v=g.formatName,f=g.formatOptions;if(i.formats[v]){var r=p;try{var d=e&&e.formatParams&&e.formatParams[e.interpolationkey]||{},_=d.locale||d.lng||e.locale||e.lng||o;r=i.formats[v](p,_,vt(vt(vt({},f),e),d))}catch(h){i.logger.warn(h)}return r}else i.logger.warn("there was no format function for ".concat(v));return p},n);return u}}]),t}();function Do(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Po(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Do(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function jd(t){var s=$d();return function(){var c=we(t),o;if(s){var e=we(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Rt(this,o)}}function $d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function qd(t,s){t.pending[s]!==void 0&&(delete t.pending[s],t.pendingCount--)}var Kd=function(t){Ut(n,t);var s=jd(n);function n(c,o,e){var i,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return ye(this,n),i=s.call(this),Vr&&bt.call(Ee(i)),i.backend=c,i.store=o,i.services=e,i.languageUtils=e.languageUtils,i.options=a,i.logger=Ae.create("backendConnector"),i.waitingReads=[],i.maxParallelReads=a.maxParallelReads||10,i.readingCalls=0,i.maxRetries=a.maxRetries>=0?a.maxRetries:5,i.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(e,a.backend,a),i}return Se(n,[{key:"queueLoad",value:function(o,e,i,a){var u=this,p={},l={},g={},v={};return o.forEach(function(f){var r=!0;e.forEach(function(d){var _="".concat(f,"|").concat(d);!i.reload&&u.store.hasResourceBundle(f,d)?u.state[_]=2:u.state[_]<0||(u.state[_]===1?l[_]===void 0&&(l[_]=!0):(u.state[_]=1,r=!1,l[_]===void 0&&(l[_]=!0),p[_]===void 0&&(p[_]=!0),v[d]===void 0&&(v[d]=!0)))}),r||(g[f]=!0)}),(Object.keys(p).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(p),pending:Object.keys(l),toLoadLanguages:Object.keys(g),toLoadNamespaces:Object.keys(v)}}},{key:"loaded",value:function(o,e,i){var a=o.split("|"),u=a[0],p=a[1];e&&this.emit("failedLoading",u,p,e),i&&this.store.addResourceBundle(u,p,i),this.state[o]=e?-1:2;var l={};this.queue.forEach(function(g){Ed(g.loaded,[u],p),qd(g,o),e&&g.errors.push(e),g.pendingCount===0&&!g.done&&(Object.keys(g.loaded).forEach(function(v){l[v]||(l[v]={});var f=g.loaded[v];f.length&&f.forEach(function(r){l[v][r]===void 0&&(l[v][r]=!0)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(function(g){return!g.done})}},{key:"read",value:function(o,e,i){var a=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!o.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:o,ns:e,fcName:i,tried:u,wait:p,callback:l});return}this.readingCalls++;var g=function(d,_){if(a.readingCalls--,a.waitingReads.length>0){var h=a.waitingReads.shift();a.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(d&&_&&u<a.maxRetries){setTimeout(function(){a.read.call(a,o,e,i,u+1,p*2,l)},p);return}l(d,_)},v=this.backend[i].bind(this.backend);if(v.length===2){try{var f=v(o,e);f&&typeof f.then=="function"?f.then(function(r){return g(null,r)}).catch(g):g(null,f)}catch(r){g(r)}return}return v(o,e,g)}},{key:"prepareLoading",value:function(o,e){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof o=="string"&&(o=this.languageUtils.toResolveHierarchy(o)),typeof e=="string"&&(e=[e]);var p=this.queueLoad(o,e,a,u);if(!p.toLoad.length)return p.pending.length||u(),null;p.toLoad.forEach(function(l){i.loadOne(l)})}},{key:"load",value:function(o,e,i){this.prepareLoading(o,e,{},i)}},{key:"reload",value:function(o,e,i){this.prepareLoading(o,e,{reload:!0},i)}},{key:"loadOne",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=o.split("|"),u=a[0],p=a[1];this.read(u,p,"read",void 0,void 0,function(l,g){l&&e.logger.warn("".concat(i,"loading namespace ").concat(p," for language ").concat(u," failed"),l),!l&&g&&e.logger.log("".concat(i,"loaded namespace ").concat(p," for language ").concat(u),g),e.loaded(o,l,g)})}},{key:"saveMissing",value:function(o,e,i,a,u){var p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn('did not save key "'.concat(i,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){var g=Po(Po({},p),{},{isUpdate:u}),v=this.backend.create.bind(this.backend);if(v.length<6)try{var f;v.length===5?f=v(o,e,i,a,g):f=v(o,e,i,a),f&&typeof f.then=="function"?f.then(function(r){return l(null,r)}).catch(l):l(null,f)}catch(r){l(r)}else v(o,e,i,a,l,g)}!o||!o[0]||this.store.addResource(o[0],e,i,a)}}}]),n}(bt);function Mo(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(s){var n={};if(he(s[1])==="object"&&(n=s[1]),typeof s[1]=="string"&&(n.defaultValue=s[1]),typeof s[2]=="string"&&(n.tDescription=s[2]),he(s[2])==="object"||he(s[3])==="object"){var c=s[3]||s[2];Object.keys(c).forEach(function(o){n[o]=c[o]})}return n},interpolation:{escapeValue:!0,format:function(s,n,c,o){return s},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Bo(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Io(t,s){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);s&&(c=c.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,c)}return n}function Oe(t){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?Io(Object(n),!0).forEach(function(c){Te(t,c,n[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach(function(c){Object.defineProperty(t,c,Object.getOwnPropertyDescriptor(n,c))})}return t}function Vd(t){var s=Gd();return function(){var c=we(t),o;if(s){var e=we(this).constructor;o=Reflect.construct(c,arguments,e)}else o=c.apply(this,arguments);return Rt(this,o)}}function Gd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function $r(){}function Yd(t){var s=Object.getOwnPropertyNames(Object.getPrototypeOf(t));s.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Kr=function(t){Ut(n,t);var s=Vd(n);function n(){var c,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(ye(this,n),c=s.call(this),Vr&&bt.call(Ee(c)),c.options=Bo(o),c.services={},c.logger=Ae,c.modules={external:[]},Yd(Ee(c)),e&&!c.isInitialized&&!o.isClone){if(!c.options.initImmediate)return c.init(o,e),Rt(c,Ee(c));setTimeout(function(){c.init(o,e)},0)}return c}return Se(n,[{key:"init",value:function(){var o=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof e=="function"&&(i=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var a=Mo();this.options=Oe(Oe(Oe({},a),this.options),Bo(e)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Oe(Oe({},a.interpolation),this.options.interpolation)),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function u(h){return h?typeof h=="function"?new h:h:null}if(!this.options.isClone){this.modules.logger?Ae.init(u(this.modules.logger),this.options):Ae.init(null,this.options);var p;this.modules.formatter?p=this.modules.formatter:typeof Intl!="undefined"&&(p=zd);var l=new Ro(this.options);this.store=new Dd(this.options.resources,this.options);var g=this.services;g.logger=Ae,g.resourceStore=this.store,g.languageUtils=l,g.pluralResolver=new Fd(l,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(g.formatter=u(p),g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new Wd(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new Kd(u(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",function(h){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];o.emit.apply(o,[h].concat(y))}),this.modules.languageDetector&&(g.languageDetector=u(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=u(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new ko(this.services,this.options),this.translator.on("*",function(h){for(var m=arguments.length,y=new Array(m>1?m-1:0),S=1;S<m;S++)y[S-1]=arguments[S];o.emit.apply(o,[h].concat(y))}),this.modules.external.forEach(function(h){h.init&&h.init(o)})}if(this.format=this.options.interpolation.format,i||(i=$r),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.length>0&&v[0]!=="dev"&&(this.options.lng=v[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var f=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];f.forEach(function(h){o[h]=function(){var m;return(m=o.store)[h].apply(m,arguments)}});var r=["addResource","addResources","addResourceBundle","removeResourceBundle"];r.forEach(function(h){o[h]=function(){var m;return(m=o.store)[h].apply(m,arguments),o}});var d=hr(),_=function(){var m=function(S,C){o.isInitialized&&!o.initializedStoreOnce&&o.logger.warn("init: i18next is already initialized. You should call init just once!"),o.isInitialized=!0,o.options.isClone||o.logger.log("initialized",o.options),o.emit("initialized",o.options),d.resolve(C),i(S,C)};if(o.languages&&o.options.compatibilityAPI!=="v1"&&!o.isInitialized)return m(null,o.t.bind(o));o.changeLanguage(o.options.lng,m)};return this.options.resources||!this.options.initImmediate?_():setTimeout(_,0),d}},{key:"loadResources",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$r,a=i,u=typeof o=="string"?o:this.language;if(typeof o=="function"&&(a=o),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return a();var p=[],l=function(f){if(f){var r=e.services.languageUtils.toResolveHierarchy(f);r.forEach(function(d){p.indexOf(d)<0&&p.push(d)})}};if(u)l(u);else{var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.forEach(function(v){return l(v)})}this.options.preload&&this.options.preload.forEach(function(v){return l(v)}),this.services.backendConnector.load(p,this.options.ns,function(v){!v&&!e.resolvedLanguage&&e.language&&e.setResolvedLanguage(e.language),a(v)})}else a(null)}},{key:"reloadResources",value:function(o,e,i){var a=hr();return o||(o=this.languages),e||(e=this.options.ns),i||(i=$r),this.services.backendConnector.reload(o,e,function(u){a.resolve(),i(u)}),a}},{key:"use",value:function(o){if(!o)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!o.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return o.type==="backend"&&(this.modules.backend=o),(o.type==="logger"||o.log&&o.warn&&o.error)&&(this.modules.logger=o),o.type==="languageDetector"&&(this.modules.languageDetector=o),o.type==="i18nFormat"&&(this.modules.i18nFormat=o),o.type==="postProcessor"&&Fo.addPostProcessor(o),o.type==="formatter"&&(this.modules.formatter=o),o.type==="3rdParty"&&this.modules.external.push(o),this}},{key:"setResolvedLanguage",value:function(o){if(!(!o||!this.languages)&&!(["cimode","dev"].indexOf(o)>-1))for(var e=0;e<this.languages.length;e++){var i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}},{key:"changeLanguage",value:function(o,e){var i=this;this.isLanguageChangingTo=o;var a=hr();this.emit("languageChanging",o);var u=function(v){i.language=v,i.languages=i.services.languageUtils.toResolveHierarchy(v),i.resolvedLanguage=void 0,i.setResolvedLanguage(v)},p=function(v,f){f?(u(f),i.translator.changeLanguage(f),i.isLanguageChangingTo=void 0,i.emit("languageChanged",f),i.logger.log("languageChanged",f)):i.isLanguageChangingTo=void 0,a.resolve(function(){return i.t.apply(i,arguments)}),e&&e(v,function(){return i.t.apply(i,arguments)})},l=function(v){!o&&!v&&i.services.languageDetector&&(v=[]);var f=typeof v=="string"?v:i.services.languageUtils.getBestMatchFromCodes(v);f&&(i.language||u(f),i.translator.language||i.translator.changeLanguage(f),i.services.languageDetector&&i.services.languageDetector.cacheUserLanguage&&i.services.languageDetector.cacheUserLanguage(f)),i.loadResources(f,function(r){p(r,f)})};return!o&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!o&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(o),a}},{key:"getFixedT",value:function(o,e,i){var a=this,u=function p(l,g){var v;if(he(g)!=="object"){for(var f=arguments.length,r=new Array(f>2?f-2:0),d=2;d<f;d++)r[d-2]=arguments[d];v=a.options.overloadTranslationOptionHandler([l,g].concat(r))}else v=Oe({},g);v.lng=v.lng||p.lng,v.lngs=v.lngs||p.lngs,v.ns=v.ns||p.ns,v.keyPrefix=v.keyPrefix||i||p.keyPrefix;var _=a.options.keySeparator||".",h=v.keyPrefix?"".concat(v.keyPrefix).concat(_).concat(l):l;return a.t(h,v)};return typeof o=="string"?u.lng=o:u.lngs=o,u.ns=e,u.keyPrefix=i,u}},{key:"t",value:function(){var o;return this.translator&&(o=this.translator).translate.apply(o,arguments)}},{key:"exists",value:function(){var o;return this.translator&&(o=this.translator).exists.apply(o,arguments)}},{key:"setDefaultNamespace",value:function(o){this.options.defaultNS=o}},{key:"hasLoadedNamespace",value:function(o){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,p=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var l=function(f,r){var d=e.services.backendConnector.state["".concat(f,"|").concat(r)];return d===-1||d===2};if(i.precheck){var g=i.precheck(this,l);if(g!==void 0)return g}return!!(this.hasResourceBundle(a,o)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(a,o)&&(!u||l(p,o)))}},{key:"loadNamespaces",value:function(o,e){var i=this,a=hr();return this.options.ns?(typeof o=="string"&&(o=[o]),o.forEach(function(u){i.options.ns.indexOf(u)<0&&i.options.ns.push(u)}),this.loadResources(function(u){a.resolve(),e&&e(u)}),a):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(o,e){var i=hr();typeof o=="string"&&(o=[o]);var a=this.options.preload||[],u=o.filter(function(p){return a.indexOf(p)<0});return u.length?(this.options.preload=a.concat(u),this.loadResources(function(p){i.resolve(),e&&e(p)}),i):(e&&e(),Promise.resolve())}},{key:"dir",value:function(o){if(o||(o=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!o)return"rtl";var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Ro(Mo());return e.indexOf(i.getLanguagePartFromCode(o))>-1||o.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var o=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$r,a=Oe(Oe(Oe({},this.options),e),{isClone:!0}),u=new n(a);(e.debug!==void 0||e.prefix!==void 0)&&(u.logger=u.logger.clone(e));var p=["store","services","language"];return p.forEach(function(l){u[l]=o[l]}),u.services=Oe({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new ko(u.services,u.options),u.translator.on("*",function(l){for(var g=arguments.length,v=new Array(g>1?g-1:0),f=1;f<g;f++)v[f-1]=arguments[f];u.emit.apply(u,[l].concat(v))}),u.init(a,i),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(bt);Te(Kr,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new Kr(t,s)});var le=Kr.createInstance();le.createInstance=Kr.createInstance;var B_=le.createInstance,I_=le.dir,N_=le.init,H_=le.loadResources,F_=le.reloadResources,W_=le.use,U_=le.changeLanguage,z_=le.getFixedT,j_=le.t,$_=le.exists,q_=le.setDefaultNamespace,K_=le.hasLoadedNamespace,V_=le.loadNamespaces,G_=le.loadLanguages;var Wo=require("obsidian");var Xd=Promise.resolve(le.createInstance({cleanCode:!0,defaultNS:Q,fallbackLng:Ms,initImmediate:!0,nonExplicitSupportedLngs:!0,resources:Gt,returnNull:Ps})).then(async t=>(await t.init(),t)).catch(t=>{throw De(t,()=>"i18n error"),t}),ur,$t,Gr=class{constructor(s){this.plugin=s;te(this,ur,le);te(this,$t,[])}get i18n(){return K(this,ur)}async load(){yt(this,ur,await Xd),await this.changeLanguage(this.plugin.settings.language)}async changeLanguage(s){await this.i18n.changeLanguage(s===""?Wo.moment.locale():s),await Promise.all(K(this,$t).map(n=>n()))}registerUse(s){return K(this,$t).push(s),()=>{K(this,$t).remove(s)}}};ur=new WeakMap,$t=new WeakMap;function Uo(t){let s=document.querySelector("div.status-bar");return s!==null&&(t!=null?t:()=>{})(s),s}var qt,dr,ys,fr,Ss,Yr=class{constructor(s){this.plugin=s;te(this,dr);te(this,fr);te(this,qt,[])}load(){let{plugin:s}=this;s.app.workspace.onLayoutReady(()=>{Uo(n=>{let c=new MutationObserver(V(this,dr,ys).bind(this,n));s.register(()=>{try{c.disconnect()}finally{V(this,fr,Ss).call(this,n)}}),this.update(),c.observe(n,{attributeFilter:["style"]})})===null&&He(()=>s.language.i18n.t("errors.cannot-find-status-bar"),0,s)})}hide(s){return K(this,qt).push(s),this.update(),()=>{K(this,qt).remove(s),this.update()}}update(){Uo(s=>{V(this,fr,Ss).call(this,s),V(this,dr,ys).call(this,s)})}};qt=new WeakMap,dr=new WeakSet,ys=function(s){(this.plugin.settings.hideStatusBar==="always"||K(this,qt).some(n=>n()))&&(s.style.visibility="hidden")},fr=new WeakSet,Ss=function(s){s.style.visibility=""};var Xr=class extends zo.Plugin{constructor(n,c){de.namespacedViewType=de.type.namespaced(c);super(n,c);pe(this,"settings",ks(Ce));pe(this,"language",new Gr(this));pe(this,"statusBarHider",new Yr(this))}async onload(){super.onload(),await _t.load(this.settings,this),await this.language.load(),this.statusBarHider.load(),this.addSettingTab(new Dr(this)),mo(this)}},Jd=Xr;
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
